!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunktelnetteam_app=self.webpackChunktelnetteam_app||[]).push([[646],{81040:function(e,t,i){i.d(t,{U:function(){return v}});var r,a=i(38583),o=i(32403),c=i(3679),s=i(22238),l=i(11494),m=i(10337),d=i(96523),u=i(36332),p=i(37716),v=((r=function e(){n(this,e)}).\u0275fac=function(e){return new(e||r)},r.\u0275mod=p.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=p.\u0275\u0275defineInjector({providers:[m.gq,d.X],imports:[[a.CommonModule,o.m,c.FormsModule,c.ReactiveFormsModule,o.q,s.Is,s.Is,u.o,l.JX],l.JX]}),r)},88136:function(e,i,r){r.d(i,{c:function(){return T}});var a=r(37716),o=r(90046),c=r(92340),s=r(44995),l=r(10337),m=r(96523),d=r(88452),u=r(38583),p=r(3679),v=r(98295),f=r(49983),h=r(43220),y=r(36144),g=r(72172),I=r(67441),S=r(72458),P=["estimateDetailsForm"];function E(e,t){1&e&&(a.\u0275\u0275elementStart(0,"h5",37),a.\u0275\u0275text(1," Add Quotation "),a.\u0275\u0275elementEnd())}function N(e,t){1&e&&(a.\u0275\u0275elementStart(0,"h5",37),a.\u0275\u0275text(1," Edit Quotation "),a.\u0275\u0275elementEnd())}function D(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",9),a.\u0275\u0275elementStart(1,"div",38),a.\u0275\u0275elementStart(2,"h5"),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(n.estimate.projectName)}}function b(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-option",39),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275property("value",n.description),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n.description," ")}}function C(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-option",39),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275property("value",n.id),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n.description," ")}}function w(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-option",39),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275property("value",n.id),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n.description," ")}}function A(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",28),a.\u0275\u0275elementStart(1,"button",40),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().previewFile()}),a.\u0275\u0275element(2,"em",41),a.\u0275\u0275text(3,"Preview"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){var i=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",i.fileChange||null===i.estimate.estimateFileName)}}var x,T=((x=function(){function e(t,i,r,o,c,s){n(this,e),this.projectService=t,this.notificationService=i,this.invoicingService=r,this.dateTimeService=o,this._avRoute=c,this.fileService=s,this.isSavedEstimate=new a.EventEmitter,this.mutliClickDisable=!1,this.servicesDisabled=!1,this.activitiesIdentifiers=[],this.clientServicesIdentifiers=[],this.fileChange=!1,this.statuses=[{description:"Emis"},{description:"Lanc\xe9"},{description:"Factur\xe9"},{description:"Clos"},{description:"Suspendu"},{description:"Arr\xeat\xe9"}]}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.user=JSON.parse(localStorage.getItem("currentUser"));var t=+this._avRoute.snapshot.paramMap.get("estimateId");this.isEditEstimate&&void 0===this.selectedEstimate&&this.invoicingService.getEstimate(t).subscribe(function(t){e.estimate=Object.assign(new o.B0,t[0])}),this.getActivities(),this.project?(this.estimate=Object.assign(new o.B0,this.selectedEstimate),this.getListClientServices(this.estimate.clientId)):this.getListClientServices(this.selectedEstimate.clientId),this.isEditEstimate?(this.estimate=Object.assign(new o.B0,this.selectedEstimate),this.invoicingService.getEstimateFile(this.estimate.estimateId).subscribe(function(t){0!==t.length&&(e.estimate.estimateFileData=t[0].estimateFileData,e.estimate.estimateFileName=t[0].estimateFileName,e.estimate.estimateFileType=t[0].estimateFileType)}),this.getListClientServices(this.estimate.clientId)):(this.estimate=new o.B0,this.estimate.clientName=this.project.customerName,this.estimate.activityId=this.project.activityId)}},{key:"getActivities",value:function(){var e=this;this.projectService.getActivities().subscribe(function(t){null!=t&&(e.activitiesIdentifiers=t)})}},{key:"getListClientServices",value:function(e){var t=this;this.projectService.getClientServices(e).subscribe(function(e){t.clientServicesIdentifiers=e,0===e.length&&(t.servicesDisabled=!0)})}},{key:"onFileChange",value:function(e){var t=this,n=new FileReader;if(e.target.files&&e.target.files.length>0){var i=e.target.files[0];i.size<1024*c.N.maxEstimateFileSize?(this.fileChange=!0,n.readAsDataURL(i),n.onload=function(){t.estimate.estimateFileName=i.name,t.estimate.estimateFileType=i.type,t.estimate.estimateFileData=t.fileService.FromFileToDbFormat(n.result.toString().split(",")[1]),t.estimate.estimateFileChanged=1}):(this.estimate.estimateFileData=null,this.notificationService.warning("File must be lower the size of ".concat(c.N.maxEstimateFileSize," Kilobytes")))}}},{key:"previewFile",value:function(){var e=this.fileService.FromDbToFileFormat(this.estimate.estimateFileData,this.estimate.estimateFileType),t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=this.estimate.estimateFileName,n.click(),window.URL.revokeObjectURL(t)}},{key:"save",value:function(){var e=this;this.mutliClickDisable=!0,setTimeout(function(){e.mutliClickDisable=!1},1e3),this.project&&(this.estimate.projectId=this.project.projectId,this.estimate.clientId=this.project.customerId),this.detailsForm.valid?null!==this.estimate.estimateFileName?(this.estimate.estimateAmount=this.estimate.estimateAmount.toString().replace(",","."),this.invoicingService.saveEstimateDetails(this.estimate).subscribe(function(t){0!==t?(e.notificationService.success("Quotation saved successfully"),e.isSavedEstimate.emit(!0)):e.notificationService.danger("Reference already exists!")})):this.notificationService.danger("Please select document"):this.notificationService.danger("Please fill all required fields")}},{key:"onChangeActivity",value:function(e){this.selectedActivityIdentifier=this.activitiesIdentifiers.find(function(t){return t.id===e})}},{key:"onCancel",value:function(){this.isSavedEstimate.emit(!0)}},{key:"isDespliyedTitle",value:function(){return null==this.project}},{key:"dateOnly",value:function(e){return this.dateTimeService.dateOnly(e)}},{key:"allowsSaveEstimate",value:function(){return null==this.isvisibleEditProject||this.isvisibleEditProject}}]),e}()).\u0275fac=function(e){return new(e||x)(a.\u0275\u0275directiveInject(s.Y4),a.\u0275\u0275directiveInject(l.gq),a.\u0275\u0275directiveInject(m.X),a.\u0275\u0275directiveInject(l.Cv),a.\u0275\u0275directiveInject(d.gz),a.\u0275\u0275directiveInject(l.Ip))},x.\u0275cmp=a.\u0275\u0275defineComponent({type:x,selectors:[["app-edit-estimate"]],viewQuery:function(e,t){var n;1&e&&a.\u0275\u0275viewQuery(P,7),2&e&&a.\u0275\u0275queryRefresh(n=a.\u0275\u0275loadQuery())&&(t.detailsForm=n.first)},inputs:{project:"project",isNewEstimate:"isNewEstimate",isEditEstimate:"isEditEstimate",selectedEstimate:"selectedEstimate",isvisibleEditProject:"isvisibleEditProject"},outputs:{isSavedEstimate:"isSavedEstimate"},decls:56,vars:25,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],["_ngcontent-c17","",1,"main-color","card-header","ng-tns-c17-6","ng-star-inserted"],["_ngcontent-c17","","class","card-header-text","style","color: #ffffff;",4,"ngIf"],[1,"card-body"],["id","estimateDetailsForm"],["estimateDetailsForm","ngForm"],["class","row m-b-15",4,"ngIf"],[1,"row","m-b-15"],[1,"col-sm-3"],["placeholder","Reference","matInput","","name","Reference","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Estimate Date","name","estimateDate","required","",3,"matDatepicker","ngModel","ngModelChange","keypress"],["matSuffix","",3,"for"],[3,"startView"],["PickerStartDay",""],[1,"col-sm-2"],["placeholder","Edition","matInput","","name","Edition","required","","appTextValidator","","maxlength","20",3,"ngModel","ngModelChange"],["placeholder","Amount","matInput","","name","Amount","appNumberValidator","","required","",3,"ngModel","inputValue","ngModelChange"],["placeholder","Status","name","stateProject","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Activity","name","activityName","required","",3,"ngModel","disabled","ngModelChange","selectionChange"],["matInput","","placeholder","Customer","name","Client","disabled","",3,"ngModel","ngModelChange"],["placeholder","Service","name","clientService",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","Description","name","description","maxlength","255","required","",3,"ngModel","ngModelChange"],["placeholder","Path","matInput","","name","Link","disabled","",3,"ngModel","ngModelChange"],[1,"col-sm-10"],["required","","placeholder","File Name","matInput","","name","File","disabled","",3,"ngModel","ngModelChange"],[1,"col-sm-1"],[1,"btn","btn-sm","btn-primary","waves-light","m-r-10","ripple","file-upload-button",2,"font-size","inherit"],["type","file","id","av","accept","application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document",3,"click","change"],["fileInput",""],[1,"icofont","icofont-upload-alt","mr-0","mr-md-2"],["class","col-sm-1",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-md","btn-primary","ripple","light","m-r-20",3,"disabled","click"],[1,"btn","btn-md","btn-default","ripple",3,"click"],["_ngcontent-c17","",1,"card-header-text",2,"color","#ffffff"],[1,"card-header"],[3,"value"],["type","button",1,"btn","btn-sm","btn-primary","waves-light","m-r-10","ripple",2,"font-size","inherit",3,"disabled","click"],[1,"icofont","icofont-eye-alt","mr-0","mr-md-2"]],template:function(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275elementStart(3,"div",3),a.\u0275\u0275template(4,E,2,0,"h5",4),a.\u0275\u0275template(5,N,2,0,"h5",4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"div",5),a.\u0275\u0275elementStart(7,"form",6,7),a.\u0275\u0275template(9,D,4,1,"div",8),a.\u0275\u0275elementStart(10,"div",9),a.\u0275\u0275elementStart(11,"mat-form-field",10),a.\u0275\u0275elementStart(12,"input",11),a.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateReference=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(13,"mat-form-field",10),a.\u0275\u0275elementStart(14,"input",12),a.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateDate=e})("keypress",function(e){return t.dateOnly(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(15,"mat-datepicker-toggle",13),a.\u0275\u0275element(16,"mat-datepicker",14,15),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(18,"mat-form-field",16),a.\u0275\u0275elementStart(19,"input",17),a.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateEdit=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(20,"mat-form-field",16),a.\u0275\u0275elementStart(21,"input",18),a.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateAmount=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(22,"mat-form-field",16),a.\u0275\u0275elementStart(23,"mat-select",19),a.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateState=e}),a.\u0275\u0275template(24,b,2,2,"mat-option",20),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(25,"div",9),a.\u0275\u0275elementStart(26,"mat-form-field",10),a.\u0275\u0275elementStart(27,"mat-select",21),a.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.activityId=e})("selectionChange",function(e){return t.onChangeActivity(e.value)}),a.\u0275\u0275template(28,C,2,2,"mat-option",20),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(29,"mat-form-field",10),a.\u0275\u0275elementStart(30,"input",22),a.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.clientName=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(31,"mat-form-field",16),a.\u0275\u0275elementStart(32,"mat-select",23),a.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.clientServiceId=e}),a.\u0275\u0275template(33,w,2,2,"mat-option",20),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(34,"div",9),a.\u0275\u0275elementStart(35,"mat-form-field",1),a.\u0275\u0275elementStart(36,"textarea",24),a.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateDesc=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(37,"div",9),a.\u0275\u0275elementStart(38,"mat-form-field",1),a.\u0275\u0275elementStart(39,"input",25),a.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateLien=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(40,"div",9),a.\u0275\u0275elementStart(41,"mat-form-field",26),a.\u0275\u0275elementStart(42,"input",27),a.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateFileName=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(43,"div",28),a.\u0275\u0275elementStart(44,"button",29),a.\u0275\u0275elementStart(45,"input",30,31),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275reference(46).value=null})("change",function(e){return t.onFileChange(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(47,"span"),a.\u0275\u0275element(48,"em",32),a.\u0275\u0275text(49,"Select"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(50,A,4,1,"div",33),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(51,"div",34),a.\u0275\u0275elementStart(52,"button",35),a.\u0275\u0275listener("click",function(){return t.save()}),a.\u0275\u0275text(53,"Save"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(54,"button",36),a.\u0275\u0275listener("click",function(){return t.onCancel()}),a.\u0275\u0275text(55,"Cancel"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){var i=a.\u0275\u0275reference(17);a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",!t.isEditEstimate),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.isEditEstimate),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",t.isDespliyedTitle()),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngModel",t.estimate.estimateReference),a.\u0275\u0275advance(2),a.\u0275\u0275property("matDatepicker",i)("ngModel",t.estimate.estimateDate),a.\u0275\u0275advance(1),a.\u0275\u0275property("for",i),a.\u0275\u0275advance(1),a.\u0275\u0275property("startView","month"),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngModel",t.estimate.estimateEdit),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",t.estimate.estimateAmount)("inputValue",t.estimate.estimateAmount),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",t.estimate.estimateState),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",t.statuses),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngModel",t.estimate.activityId)("disabled",null!==t.estimate.activityName),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",t.activitiesIdentifiers),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",t.estimate.clientName),a.\u0275\u0275advance(2),a.\u0275\u0275property("disabled",!0===t.servicesDisabled)("ngModel",t.estimate.clientServiceId),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",t.clientServicesIdentifiers),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngModel",t.estimate.estimateDesc),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngModel",t.estimate.estimateLien),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngModel",t.estimate.estimateFileName),a.\u0275\u0275advance(8),a.\u0275\u0275property("ngIf",t.isEditEstimate),a.\u0275\u0275advance(2),a.\u0275\u0275property("disabled",!t.allowsSaveEstimate()||t.mutliClickDisable)}},directives:[u.NgIf,p.\u0275NgNoValidate,p.NgControlStatusGroup,p.NgForm,v.KE,f.Nt,p.DefaultValueAccessor,p.RequiredValidator,p.NgControlStatus,p.NgModel,h.hl,h.nW,v.R9,h.Mq,y.s,p.MaxLengthValidator,g.z,I.gD,u.NgForOf,S.ey],styles:['form[_ngcontent-%COMP%]{padding:10px 20px}.file-upload-button[_ngcontent-%COMP%]{overflow:hidden;position:relative}.file-upload-button[_ngcontent-%COMP%]:after{content:"Upload";color:#fff;font-size:1.5rem;text-align:center}.file-upload-button[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{font-size:100px;left:0;opacity:0;position:absolute;top:0}.file-info[_ngcontent-%COMP%]{color:#999;font-family:Arial,Helvetica,sans-serif;margin-left:.3rem}.main-color[_ngcontent-%COMP%]{background:#3f629d}']}),x)},82480:function(e,t,i){i.d(t,{w:function(){return v}});var r,a=i(38583),o=i(32403),c=i(3679),s=i(22238),l=i(11494),m=i(10337),d=i(88136),u=i(36332),p=i(37716),v=((r=function e(){n(this,e)}).\u0275fac=function(e){return new(e||r)},r.\u0275mod=p.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=p.\u0275\u0275defineInjector({providers:[m.gq,d.c],imports:[[a.CommonModule,o.m,c.FormsModule,c.ReactiveFormsModule,o.q,s.Is,s.Is,u.o,l.JX],l.JX]}),r)},42352:function(e,i,r){r.d(i,{N:function(){return U}});var a=r(37716),o=r(11494),c=r(32789),s=r(88259),l=r.n(s),m=r(96523),d=r(10337),u=r(22238),p=r(88452),v=r(38583),f=r(38590),h=r(62758),y=r(17224);function g(e,t){1&e&&(a.\u0275\u0275elementStart(0,"mat-header-cell",17),a.\u0275\u0275text(1,"Reference"),a.\u0275\u0275elementEnd())}function I(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-cell",18),a.\u0275\u0275elementStart(1,"span",19),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275propertyInterpolate("matTooltip",n.estimateReference),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(n.estimateReference)}}function S(e,t){1&e&&(a.\u0275\u0275elementStart(0,"mat-header-cell",17),a.\u0275\u0275text(1,"Description"),a.\u0275\u0275elementEnd())}function P(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-cell",18),a.\u0275\u0275elementStart(1,"span",19),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275propertyInterpolate("matTooltip",n.estimateDesc),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(n.estimateDesc)}}function E(e,t){1&e&&(a.\u0275\u0275elementStart(0,"mat-header-cell",17),a.\u0275\u0275text(1,"Edition"),a.\u0275\u0275elementEnd())}function N(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-cell"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n.estimateEdit," ")}}function D(e,t){1&e&&(a.\u0275\u0275elementStart(0,"mat-header-cell",17),a.\u0275\u0275text(1,"Date"),a.\u0275\u0275elementEnd())}function b(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-cell"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"shortDate"),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,1,n.estimateDate)," ")}}function C(e,t){1&e&&(a.\u0275\u0275elementStart(0,"mat-header-cell",17),a.\u0275\u0275text(1,"Customer"),a.\u0275\u0275elementEnd())}function w(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-cell",18),a.\u0275\u0275elementStart(1,"span",19),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275propertyInterpolate("matTooltip",n.clientName),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1("",n.clientName," ")}}function A(e,t){1&e&&(a.\u0275\u0275elementStart(0,"mat-header-cell",17),a.\u0275\u0275text(1,"Status"),a.\u0275\u0275elementEnd())}function x(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-cell"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n.estimateState," ")}}function T(e,t){1&e&&(a.\u0275\u0275elementStart(0,"mat-header-cell",17),a.\u0275\u0275text(1,"Order"),a.\u0275\u0275elementEnd())}function k(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-cell"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n.contractReference," ")}}function M(e,t){1&e&&(a.\u0275\u0275elementStart(0,"mat-header-cell",17),a.\u0275\u0275text(1,"Order Date"),a.\u0275\u0275elementEnd())}function R(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-cell"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"shortDate"),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,1,n.orderDate)," ")}}function j(e,t){1&e&&(a.\u0275\u0275elementStart(0,"mat-header-cell",17),a.\u0275\u0275text(1,"Batch"),a.\u0275\u0275elementEnd())}function O(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"mat-cell",24),a.\u0275\u0275listener("click",function(){var e=a.\u0275\u0275restoreView(n).$implicit;return a.\u0275\u0275nextContext(2).goToBatchesDetail(e.pifId,e.projectId,e.batchId)}),a.\u0275\u0275elementStart(1,"span",19),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;a.\u0275\u0275propertyInterpolate("matTooltip",i.batchRefference),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",i.batchRefference," ")}}function F(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementContainerStart(1,20),a.\u0275\u0275template(2,T,2,0,"mat-header-cell",3),a.\u0275\u0275template(3,k,2,1,"mat-cell",7),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(4,21),a.\u0275\u0275template(5,M,2,0,"mat-header-cell",3),a.\u0275\u0275template(6,R,3,3,"mat-cell",7),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(7,22),a.\u0275\u0275template(8,j,2,0,"mat-header-cell",3),a.\u0275\u0275template(9,O,3,2,"mat-cell",23),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerEnd())}function B(e,t){1&e&&(a.\u0275\u0275elementStart(0,"mat-header-cell",17),a.\u0275\u0275text(1,"Amount"),a.\u0275\u0275elementEnd())}function G(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-cell"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"numberForm"),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,1,n.estimateAmount)," ")}}function V(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0,25),a.\u0275\u0275template(1,B,2,0,"mat-header-cell",3),a.\u0275\u0275template(2,G,3,3,"mat-cell",7),a.\u0275\u0275elementContainerEnd())}function z(e,t){1&e&&a.\u0275\u0275element(0,"mat-header-cell")}function _(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"mat-cell"),a.\u0275\u0275elementStart(1,"button",26),a.\u0275\u0275listener("click",function(){var e=a.\u0275\u0275restoreView(n).$implicit;return a.\u0275\u0275nextContext().toggleEditDetails(e)}),a.\u0275\u0275elementStart(2,"em",27),a.\u0275\u0275text(3,"edit"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275text(4," \xa0\xa0 "),a.\u0275\u0275elementStart(5,"button",28),a.\u0275\u0275listener("click",function(){var e=a.\u0275\u0275restoreView(n).$implicit;return a.\u0275\u0275nextContext().deleteEstimate(e.estimateId)}),a.\u0275\u0275elementStart(6,"em",27),a.\u0275\u0275text(7,"delete"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){var i=a.\u0275\u0275nextContext();a.\u0275\u0275advance(5),a.\u0275\u0275property("disabled",!i.allowsDeleteEstimate())}}function q(e,t){1&e&&a.\u0275\u0275element(0,"mat-header-row",29)}function L(e,t){1&e&&a.\u0275\u0275element(0,"mat-row")}var Q,U=((Q=function(){function e(t,i,r,o,s,l){n(this,e),this.invoicingService=t,this.notificationService=i,this.dialog=r,this.searchFilterService=o,this.router=s,this.activeRoute=l,this.displayedColumns=["estimateReference","estimateDesc","estimateEdit","estimateDate","clientName","estimateState","contractReference","orderDate","batchRefference","buttons"],this.dataSource=new c.by,this.estimateState=new a.EventEmitter}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.user=JSON.parse(localStorage.getItem("currentUser")),this.contractDetails||(this.displayedColumns=["estimateReference","estimateDesc","estimateEdit","estimateDate","clientName","estimateState","amount","buttons"]),this.isEditEstimate=!1,this.listView=!0,this.dataSource=new c.by(this.estimates),this.subscription=this.searchFilterService.resultChanged.subscribe(function(){e.dataSource=new c.by(e.searchFilterService.showingDataLastFilter)})}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"ngAfterViewInit",value:function(){this.dataSource.sort=this.sort}},{key:"toggleEditDetails",value:function(e){this.isEditEstimate=!0,this.estimateState.emit(e)}},{key:"deleteEstimate",value:function(e){var t=this;this.invoicingService.getEstimateContracts(e).subscribe(function(n){0===n[0].contractsCount?l().fire({text:"Are you sure to delete this Quotation ?",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",showLoaderOnConfirm:!0,preConfirm:function(){t.invoicingService.deleteEstimate(e).subscribe(function(){t.notificationService.success("This Quotation is deleted"),t.invoicingService.reloadEstimates.next()},function(){t.notificationService.danger("Delete quotation failed")})}}):t.notificationService.danger("Delete quotation failed,this estimate has an order")})}},{key:"onSortData",value:function(e){this.invoicingService.sortEstimates.next(e)}},{key:"goToBatchesDetail",value:function(e,t,n){this.router.navigate(["/project-management/project/edit/"+e.toString()+"/"+t.toString(),{title:"batches",batchId:n}],{relativeTo:this.activeRoute})}},{key:"allowsDeleteEstimate",value:function(){return null==this.isvisibleEditProject||this.isvisibleEditProject}}]),e}()).\u0275fac=function(e){return new(e||Q)(a.\u0275\u0275directiveInject(m.X),a.\u0275\u0275directiveInject(d.gq),a.\u0275\u0275directiveInject(u.uw),a.\u0275\u0275directiveInject(d.nJ),a.\u0275\u0275directiveInject(p.F0),a.\u0275\u0275directiveInject(p.gz))},Q.\u0275cmp=a.\u0275\u0275defineComponent({type:Q,selectors:[["app-estimates"]],viewQuery:function(e,t){var n;1&e&&a.\u0275\u0275viewQuery(o.YE,7),2&e&&a.\u0275\u0275queryRefresh(n=a.\u0275\u0275loadQuery())&&(t.sort=n.first)},inputs:{contractDetails:"contractDetails",project:"project",estimates:"estimates",estimateEditable:"estimateEditable",isvisibleEditProject:"isvisibleEditProject"},outputs:{estimateState:"estimateState"},decls:27,vars:6,consts:[["matSort","","matSortDirection","asc","matSortDisableClear","",3,"dataSource","matSortChange"],["table",""],["matColumnDef","estimateReference"],["mat-sort-header","",4,"matHeaderCellDef"],[3,"matTooltip",4,"matCellDef"],["matColumnDef","estimateDesc"],["matColumnDef","estimateEdit"],[4,"matCellDef"],["matColumnDef","estimateDate"],["matColumnDef","clientName"],["matColumnDef","estimateState"],[4,"ngIf"],["matColumnDef","amount",4,"ngIf"],["matColumnDef","buttons"],[4,"matHeaderCellDef"],["class"," table-primary table-*",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[3,"matTooltip"],[1,"span-ellipsis"],["matColumnDef","contractReference"],["matColumnDef","orderDate"],["matColumnDef","batchRefference"],["class","reference",3,"matTooltip","click",4,"matCellDef"],[1,"reference",3,"matTooltip","click"],["matColumnDef","amount"],["type","button","matTooltip","Edit estimate",1,"btn","btn-mini","btn-primary","ripple","f-center","light",3,"click"],[1,"material-icons"],["type","button","matTooltip","Delete estimate",1,"btn","btn-mini","btn-danger","ripple","f-center","light",3,"disabled","click"],[1,"table-primary","table-*"]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"mat-table",0,1),a.\u0275\u0275listener("matSortChange",function(e){return t.onSortData(e)}),a.\u0275\u0275elementContainerStart(2,2),a.\u0275\u0275template(3,g,2,0,"mat-header-cell",3),a.\u0275\u0275template(4,I,3,2,"mat-cell",4),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(5,5),a.\u0275\u0275template(6,S,2,0,"mat-header-cell",3),a.\u0275\u0275template(7,P,3,2,"mat-cell",4),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(8,6),a.\u0275\u0275template(9,E,2,0,"mat-header-cell",3),a.\u0275\u0275template(10,N,2,1,"mat-cell",7),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(11,8),a.\u0275\u0275template(12,D,2,0,"mat-header-cell",3),a.\u0275\u0275template(13,b,3,3,"mat-cell",7),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(14,9),a.\u0275\u0275template(15,C,2,0,"mat-header-cell",3),a.\u0275\u0275template(16,w,3,2,"mat-cell",4),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(17,10),a.\u0275\u0275template(18,A,2,0,"mat-header-cell",3),a.\u0275\u0275template(19,x,2,1,"mat-cell",7),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275template(20,F,10,0,"ng-container",11),a.\u0275\u0275template(21,V,3,0,"ng-container",12),a.\u0275\u0275elementContainerStart(22,13),a.\u0275\u0275template(23,z,1,0,"mat-header-cell",14),a.\u0275\u0275template(24,_,8,1,"mat-cell",7),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275template(25,q,1,0,"mat-header-row",15),a.\u0275\u0275template(26,L,1,0,"mat-row",16),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275property("dataSource",t.dataSource),a.\u0275\u0275advance(20),a.\u0275\u0275property("ngIf",t.contractDetails),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!t.contractDetails),a.\u0275\u0275advance(4),a.\u0275\u0275property("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),a.\u0275\u0275advance(1),a.\u0275\u0275property("matRowDefColumns",t.displayedColumns))},directives:[c.BZ,o.YE,c.w1,c.fO,c.Dz,v.NgIf,c.as,c.nj,c.ge,o.nU,c.ev,f.gM,c.XQ,c.Gk],pipes:[h.M,y.$],styles:[".mat-table[_ngcontent-%COMP%]{overflow:auto;border-radius:4px;max-height:calc(100vh - 392px)}table[_ngcontent-%COMP%]{width:100%}.span-ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mat-header-cell[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:600}.material-icons[_ngcontent-%COMP%]{font-size:15px}.mat-column-estimateReference[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}.mat-column-estimateEdit[_ngcontent-%COMP%]{flex:0 0 6%!important;width:6%!important;justify-content:center}.mat-column-estimateDate[_ngcontent-%COMP%]{flex:0 0 10%!important;width:10%!important;justify-content:center}.mat-column-clientName[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}.mat-column-estimateState[_ngcontent-%COMP%]{flex:0 0 6%!important;width:6%!important;justify-content:center}.mat-column-contractReference[_ngcontent-%COMP%]{width:11%!important}.mat-column-contractDate[_ngcontent-%COMP%]{width:8%!important;justify-content:center}.mat-column-batchRefference[_ngcontent-%COMP%]{width:16%!important}.mat-column-amount[_ngcontent-%COMP%]{flex:0 0 8%!important;width:8%!important;text-align:right;justify-content:flex-end;margin-right:1%}.mat-column-buttons[_ngcontent-%COMP%]{flex:0 0 8%!important;width:8%!important;justify-content:center}.pdf-ico[_ngcontent-%COMP%]{font-size:35px;margin-bottom:25px}  .mat-sort-header-arrow{color:#fff}.reference[_ngcontent-%COMP%]{color:#00f;cursor:pointer}"]}),Q)},27205:function(e,i,r){r.d(i,{b:function(){return B}});var a=r(37716),o=r(3679),c=r(70833),s=r(46782),l=r(90046),m=r(10337),d=r(96523),u=r(88452),p=r(6518),v=r(38583),f=r(98295),h=r(49983),y=r(36144),g=r(72172),I=r(67441),S=r(43220),P=r(72458),E=r(52218),N=r(76627),D=["InvoiceDetailsForm"],b=["BatchSelect"];function C(e,t){1&e&&(a.\u0275\u0275elementStart(0,"h5",32),a.\u0275\u0275text(1," Add Invoice "),a.\u0275\u0275elementEnd())}function w(e,t){1&e&&(a.\u0275\u0275elementStart(0,"h5",32),a.\u0275\u0275text(1," Edit Invoice "),a.\u0275\u0275elementEnd())}var A=function(e,t){return{"label-success":e,"label-danger":t}};function x(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"label",33),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction2(2,A,1===n.invoice.invoiceDeposit,1!==n.invoice.invoiceDeposit)),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(n.getValidationState(n.invoice.invoiceDeposit))}}function T(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",10),a.\u0275\u0275elementStart(1,"div",34),a.\u0275\u0275elementStart(2,"h5"),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(n.invoice.projectName)}}function k(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-option",39),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275property("value",n.batchId),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n.batchReference," ")}}function M(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"mat-form-field",11),a.\u0275\u0275elementStart(1,"mat-select",35,36),a.\u0275\u0275listener("selectionChange",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().onChangeBatch(e.value)})("ngModelChange",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().batch.batchId=e}),a.\u0275\u0275elementStart(3,"mat-option"),a.\u0275\u0275elementStart(4,"ngx-mat-select-search",37),a.\u0275\u0275elementStart(5,"mat-icon",38),a.\u0275\u0275text(6,"close"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(7,k,2,2,"mat-option",20),a.\u0275\u0275pipe(8,"async"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){var i=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("ngModel",i.batch.batchId),a.\u0275\u0275advance(3),a.\u0275\u0275property("formControl",i.batchFilterCtrl)("placeholderLabel","Search")("noEntriesFoundLabel","No options found"),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(8,5,i.filteredBatches))}}function R(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"mat-form-field",11),a.\u0275\u0275elementStart(1,"input",40),a.\u0275\u0275listener("ngModelChange",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().batch.batchReference=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){var i=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("ngModel",i.batch.batchReference)}}function j(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-option",39),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275property("value",n.id),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n.description," ")}}var O,F=function(){return{standalone:!0}},B=((O=function(){function e(t,i,r,s,m){n(this,e),this.notificationService=t,this.invoicingService=i,this.dateTimeService=r,this._avRoute=s,this.mailService=m,this.isSavedInvoice=new a.EventEmitter,this.batch=new l.El,this.initialInvoice=new l.mw,this.invoice=new l.mw,this.batchFilterCtrl=new o.FormControl,this._onDestroy=new c.xQ,this.filteredBatches=new c.tq(1),this.mutliClickDisable=!1}return t(e,[{key:"ngOnInit",value:function(){var e=this;if(this.user=JSON.parse(localStorage.getItem("currentUser")),this.batch.batchId=null,null!==this.project||void 0!==this.project){var t=+this._avRoute.snapshot.paramMap.get("invoiceId");this.getInvoice(t),this.getBatchNotInvoiced()}this.getListCurrency(),this.batchFilterCtrl.valueChanges.pipe((0,s.R)(this._onDestroy)).subscribe(function(){e.filterBatches()})}},{key:"getInvoice",value:function(e){var t=this;this.isEditInvoice&&void 0===this.selectedInvoice&&this.invoicingService.getInvoice(e).subscribe(function(e){t.invoice=Object.assign(new l.mw,e[0]),t.invoice.invoiceAmount=t.invoice.invoiceAmount.toString().replace(",","."),t.invoice.invoiceNetToBePayed=t.invoice.invoiceNetToBePayed.toString().replace(",","."),t.initialInvoice=Object.assign(new l.mw,e[0]),t.initialInvoice.invoiceAmount=t.initialInvoice.invoiceAmount.toString().replace(",","."),t.initialInvoice.invoiceNetToBePayed=t.initialInvoice.invoiceNetToBePayed.toString().replace(",","."),t.getBatchesByProject(t.project.projectId)}),this.isEditInvoice&&0===e||void 0!==this.selectedInvoice?(this.invoice=Object.assign(new l.mw,this.selectedInvoice),this.initialInvoice=Object.assign(new l.mw,this.selectedInvoice),this.getBatchesByProject(this.project.projectId)):(this.invoice=new l.mw,this.invoice.currencyId=l.F.Euro)}},{key:"getBatchNotInvoiced",value:function(){var e=this;void 0===this.selectedInvoice&&(this.selectedInvoice=new l.mw,this.selectedInvoice.projectId=this.project.projectId,this.invoicingService.getBatchNotInvoiced(this.project.projectId).subscribe(function(t){e.batches=t,e.filteredBatches.next(e.batches.slice()),null!=e.batchId?(e.batch.batchId=e.batchId,e.onChangeBatch(e.batch.batchId)):1===t.length&&(e.batch.batchId=t[0].batchId,e.onChangeBatch(e.batch.batchId))}))}},{key:"ngOnDestroy",value:function(){this.invoicingService.invoiceBatch.next()}},{key:"getBatchesByProject",value:function(e){var t=this;this.invoicingService.getBatchesByProject(e).subscribe(function(e){t.projectBatches=e,t.projectBatches.forEach(function(e){e.invoiceId===t.invoice.invoiceId&&(t.batch=e)})})}},{key:"getListCurrency",value:function(){var e=this;this.invoicingService.getCurrencies().subscribe(function(t){e.currenciesIdentifiers=t})}},{key:"onChangeBatch",value:function(e){var t=this;this.selectedBatch=this.batches.find(function(t){return t.batchId===e}),this.invoicingService.getBatchesByProject(this.selectedInvoice.projectId).subscribe(function(n){n.forEach(function(n){n.batchId===e&&(t.batch=n,t.invoice.currencyId=t.batch.currencyId,t.invoice.invoiceAmount=t.batch.batchAmount,t.invoice.invoiceAdressedTo=t.batch.batchAdressedTo)})})}},{key:"save",value:function(){var e=this;if(this.mutliClickDisable=!0,setTimeout(function(){e.mutliClickDisable=!1},1e3),this.detailsForm.valid){if(this.invoice.batchReference=this.batch.batchReference,this.invoice.batchId=this.batch.batchId,this.invoice.projectName=this.project.name,null===this.invoice.invoiceSaariReference){var t=Object.assign(new l.mw,this.invoice);this.invoicingService.saveInvoiceDetails(t).subscribe(function(){if(e.notificationService.success("Invoice is saved successfully"),e.isSavedInvoice.emit(!0),!0!==e.isEditInvoice)e.mailService.invoiceAdded(e.invoice);else{var t=e.prepareModification(e.initialInvoice,e.invoice);0!==t.length&&e.mailService.invoiceModified(e.invoice,t)}},function(t){e.notificationService.danger("Save invoice failed")})}}else this.notificationService.danger("Please fill all required fields")}},{key:"onCancel",value:function(){this.isSavedInvoice.emit(!0)}},{key:"isDespliyedTitle",value:function(){return null==this.project}},{key:"dateOnly",value:function(e){return this.dateTimeService.dateOnly(e)}},{key:"getValidationState",value:function(e){return 1===e?"validated":"pending"}},{key:"filterBatches",value:function(){if(this.batches){var e=this.batchFilterCtrl.value;e?(e=e.toLowerCase(),this.filteredBatches.next(this.batches.filter(function(t){return t.batchReference.toLowerCase().indexOf(e)>-1}))):this.filteredBatches.next(this.batches.slice())}}},{key:"modifInfoBuilder",value:function(e,t,n){return'<p><span style="color: #0000ff;">'+e+': <span style="color: #000000;"><strong>'+(t=null==t?"":t.toString())+"</strong> =&gt; <strong>"+(n=null==n?"":n.toString())+"</strong></span></span></p> "}},{key:"prepareModification",value:function(e,t){var n="";return t.invoiceDeliveryDate!==e.invoiceDeliveryDate&&(n=n.concat(this.modifInfoBuilder("Delivery Date",this.dateTimeService.getShortFormat(e.invoiceDeliveryDate),this.dateTimeService.getShortFormat(t.invoiceDeliveryDate)))),e.invoiceNetToBePayed!==t.invoiceNetToBePayed&&(n=n.concat(this.modifInfoBuilder("Net to pay",e.invoiceNetToBePayed,t.invoiceNetToBePayed))),e.invoiceReference!==t.invoiceReference&&(n=n.concat(this.modifInfoBuilder("Reference",e.invoiceReference,t.invoiceReference))),e.invoiceCashedOn!==t.invoiceCashedOn&&(n=n.concat(this.modifInfoBuilder("Cashed On",this.dateTimeService.getShortFormat(e.invoiceCashedOn),this.dateTimeService.getShortFormat(t.invoiceCashedOn)))),e.invoiceSaariReference!==t.invoiceSaariReference&&(n=n.concat(this.modifInfoBuilder("Saari Reference",e.invoiceSaariReference,t.invoiceSaariReference))),e.invoiceAdressedTo!==t.invoiceAdressedTo&&(n=n.concat(this.modifInfoBuilder("Adressed To",e.invoiceAdressedTo,t.invoiceAdressedTo))),e.currencyId!==t.currencyId&&(n=n.concat(this.modifInfoBuilder("Currency",e.currency,this.currenciesIdentifiers.find(function(e){return e.id===t.currencyId}).description))),n}},{key:"invoicePipe",value:function(e){return"0001-01-01T00:00:00"===e?"":e}}]),e}()).\u0275fac=function(e){return new(e||O)(a.\u0275\u0275directiveInject(m.gq),a.\u0275\u0275directiveInject(d.X),a.\u0275\u0275directiveInject(m.Cv),a.\u0275\u0275directiveInject(u.gz),a.\u0275\u0275directiveInject(p.Y))},O.\u0275cmp=a.\u0275\u0275defineComponent({type:O,selectors:[["app-edit-invoice"]],viewQuery:function(e,t){var n;1&e&&(a.\u0275\u0275viewQuery(D,7),a.\u0275\u0275viewQuery(b,7)),2&e&&(a.\u0275\u0275queryRefresh(n=a.\u0275\u0275loadQuery())&&(t.detailsForm=n.first),a.\u0275\u0275queryRefresh(n=a.\u0275\u0275loadQuery())&&(t.BatchSelect=n.first))},inputs:{project:"project",isNewInvoice:"isNewInvoice",batchId:"batchId",selectedInvoice:"selectedInvoice",isEditInvoice:"isEditInvoice",selectedInvoiceId:"selectedInvoiceId",isvisibleEditProject:"isvisibleEditProject"},outputs:{isSavedInvoice:"isSavedInvoice"},decls:45,vars:27,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],["_ngcontent-c17","",1,"main-color","card-header","ng-tns-c17-6","ng-star-inserted"],["_ngcontent-c17","","class","card-header-text","style","color: #ffffff;",4,"ngIf"],["class","label",3,"ngClass",4,"ngIf"],[1,"card-body"],["id","InvoiceDetailsForm"],["InvoiceDetailsForm","ngForm"],["class","row m-b-15",4,"ngIf"],[1,"row","m-b-15"],[1,"col-sm-3"],["placeholder","Invoice Reference","matInput","","name","invoiceReference","required","",3,"ngModel","ngModelChange"],["class","col-sm-3",4,"ngIf"],["placeholder","Addressed To","matInput","","name","addressedTo","appTextValidator","","maxlength","50",3,"ngModel","ngModelChange"],["placeholder","Order Reference","matInput","","name","orderReference","disabled","",3,"ngModel","ngModelChange"],[1,"col-sm-2"],["placeholder","Amount","matInput","","name","Amount","appNumberValidator","","required","",3,"ngModel","inputValue","ngModelChange"],[1,"col-sm-1"],["placeholder","Currency","name","currency","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Net to pay","matInput","","name","netToBePayed","appNumberValidator","","required","",3,"ngModel","inputValue","ngModelChange"],["matInput","","placeholder","Delivery Date","name","invoiceDeliveryDate","required","",3,"matDatepicker","ngModel","ngModelChange","keypress"],["matSuffix","",3,"for"],[3,"startView"],["PickerStartDay",""],["matInput","","placeholder","Cashed On","name","invoiceCashedOn","disabled","",3,"matDatepicker","ngModel","ngModelOptions","ngModelChange","keypress"],["picker11",""],["placeholder","Saari Reference","matInput","","name","saariReference","disabled","",3,"ngModel","ngModelChange"],[1,"text-center"],["type","submit",1,"btn","btn-md","btn-primary","ripple","light","m-r-20",3,"disabled","click"],[1,"btn","btn-md","btn-default","ripple",3,"click"],["_ngcontent-c17","",1,"card-header-text",2,"color","#ffffff"],[1,"label",3,"ngClass"],[1,"card-header"],["placeholder","Batch Reference","name","BatchReference","required","",3,"ngModel","selectionChange","ngModelChange"],["BatchSelect",""],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["ngxMatSelectSearchClear",""],[3,"value"],["placeholder","Batch Reference","matInput","","name","BatchReference","disabled","",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275elementStart(3,"div",3),a.\u0275\u0275template(4,C,2,0,"h5",4),a.\u0275\u0275template(5,w,2,0,"h5",4),a.\u0275\u0275template(6,x,2,5,"label",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"div",6),a.\u0275\u0275elementStart(8,"form",7,8),a.\u0275\u0275template(10,T,4,1,"div",9),a.\u0275\u0275elementStart(11,"div",10),a.\u0275\u0275elementStart(12,"mat-form-field",11),a.\u0275\u0275elementStart(13,"input",12),a.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceReference=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(14,M,9,7,"mat-form-field",13),a.\u0275\u0275template(15,R,2,1,"mat-form-field",13),a.\u0275\u0275elementStart(16,"mat-form-field",11),a.\u0275\u0275elementStart(17,"input",14),a.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceAdressedTo=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(18,"mat-form-field",11),a.\u0275\u0275elementStart(19,"input",15),a.\u0275\u0275listener("ngModelChange",function(e){return t.batch.contractReference=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(20,"div",10),a.\u0275\u0275elementStart(21,"mat-form-field",16),a.\u0275\u0275elementStart(22,"input",17),a.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceAmount=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(23,"mat-form-field",18),a.\u0275\u0275elementStart(24,"mat-select",19),a.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.currencyId=e}),a.\u0275\u0275template(25,j,2,2,"mat-option",20),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(26,"mat-form-field",16),a.\u0275\u0275elementStart(27,"input",21),a.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceNetToBePayed=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(28,"mat-form-field",16),a.\u0275\u0275elementStart(29,"input",22),a.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceDeliveryDate=e})("keypress",function(e){return t.dateOnly(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(30,"mat-datepicker-toggle",23),a.\u0275\u0275element(31,"mat-datepicker",24,25),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(33,"mat-form-field",16),a.\u0275\u0275elementStart(34,"input",26),a.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceCashedOn=e})("keypress",function(e){return t.dateOnly(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(35,"mat-datepicker-toggle",23),a.\u0275\u0275element(36,"mat-datepicker",24,27),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(38,"mat-form-field",11),a.\u0275\u0275elementStart(39,"input",28),a.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceSaariReference=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(40,"div",29),a.\u0275\u0275elementStart(41,"button",30),a.\u0275\u0275listener("click",function(){return t.save()}),a.\u0275\u0275text(42,"Save"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(43,"button",31),a.\u0275\u0275listener("click",function(){return t.onCancel()}),a.\u0275\u0275text(44,"Cancel"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275reference(32),i=a.\u0275\u0275reference(37);a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",!t.isEditInvoice),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.isEditInvoice),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.isEditInvoice),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",t.isDespliyedTitle()),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngModel",t.invoice.invoiceReference),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!t.isEditInvoice),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.isEditInvoice),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",t.invoice.invoiceAdressedTo),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",t.batch.contractReference),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngModel",t.invoice.invoiceAmount)("inputValue",t.invoice.invoiceAmount),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",t.invoice.currencyId),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",t.currenciesIdentifiers),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",t.invoice.invoiceNetToBePayed)("inputValue",t.invoice.invoiceNetToBePayed),a.\u0275\u0275advance(2),a.\u0275\u0275property("matDatepicker",n)("ngModel",t.invoicePipe(t.invoice.invoiceDeliveryDate)),a.\u0275\u0275advance(1),a.\u0275\u0275property("for",n),a.\u0275\u0275advance(1),a.\u0275\u0275property("startView","month"),a.\u0275\u0275advance(3),a.\u0275\u0275property("matDatepicker",i)("ngModel",t.invoicePipe(t.invoice.invoiceCashedOn))("ngModelOptions",a.\u0275\u0275pureFunction0(26,F)),a.\u0275\u0275advance(1),a.\u0275\u0275property("for",i),a.\u0275\u0275advance(1),a.\u0275\u0275property("startView","month"),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngModel",t.invoice.invoiceSaariReference),a.\u0275\u0275advance(2),a.\u0275\u0275property("disabled",null!==t.invoice.invoiceSaariReference||!t.isvisibleEditProject||t.mutliClickDisable)}},directives:[v.NgIf,o.\u0275NgNoValidate,o.NgControlStatusGroup,o.NgForm,f.KE,h.Nt,o.DefaultValueAccessor,o.RequiredValidator,o.NgControlStatus,o.NgModel,y.s,o.MaxLengthValidator,g.z,I.gD,v.NgForOf,S.hl,S.nW,f.R9,S.Mq,v.NgClass,P.ey,E.nu,o.FormControlDirective,N.Hw,E.w5],pipes:[v.AsyncPipe],styles:[".main-color[_ngcontent-%COMP%]{background:#3f629d}"]}),O)},88720:function(e,t,i){i.d(t,{b:function(){return v}});var r,a=i(38583),o=i(3679),c=i(22238),s=i(11494),l=i(96523),m=i(32403),d=i(10337),u=i(36332),p=i(37716),v=((r=function e(){n(this,e)}).\u0275fac=function(e){return new(e||r)},r.\u0275mod=p.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=p.\u0275\u0275defineInjector({providers:[d.gq,l.X],imports:[[a.CommonModule,m.m,o.FormsModule,o.ReactiveFormsModule,m.q,c.Is,c.Is,u.o,s.JX],s.JX]}),r)},38458:function(e,t,i){i.d(t,{l:function(){return p}});var r,a=i(38583),o=i(32403),c=i(3679),s=i(22238),l=i(11494),m=i(67827),d=i(91841),u=i(37716),p=((r=function e(){n(this,e)}).\u0275fac=function(e){return new(e||r)},r.\u0275mod=u.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=u.\u0275\u0275defineInjector({providers:[],imports:[[a.CommonModule,o.m,c.FormsModule,c.ReactiveFormsModule,o.q,s.Is,m.ZQ.forRoot(),d.HttpClientModule,l.JX],l.JX]}),r)},72172:function(e,i,r){r.d(i,{z:function(){return c}});var a,o=r(37716),c=((a=function(){function e(){n(this,e)}return t(e,[{key:"blockPaste",value:function(e){for(var t=e.clipboardData.getData("text"),n=0,i=!1;n<t.length&&!0!==i;)this.isNotNumber(t[n].charCodeAt())?(i=!0,e.preventDefault()):n++}},{key:"onKeydownHandler",value:function(e){var t=e.key;void 0!==t&&(this.isNotNumber(t.charCodeAt())&&"Backspace"!==t&&"Delete"!==t&&"ArrowLeft"!==t&&"ArrowRight"!==t&&"Tab"!==t&&e.preventDefault(),null!=this.inputValue&&(-1!==this.inputValue.toString().indexOf(".")||-1!==this.inputValue.toString().indexOf(","))&&(46===t.charCodeAt()||44===t.charCodeAt())&&e.preventDefault())}},{key:"isNotNumber",value:function(e){return e<44||e>57||45===e||47===e}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275dir=o.\u0275\u0275defineDirective({type:a,selectors:[["","appNumberValidator",""]],hostBindings:function(e,t){1&e&&o.\u0275\u0275listener("paste",function(e){return t.blockPaste(e)})("keydown",function(e){return t.onKeydownHandler(e)})},inputs:{inputValue:"inputValue"}}),a)},36144:function(e,i,r){r.d(i,{s:function(){return c}});var a,o=r(37716),c=((a=function(){function e(){n(this,e)}return t(e,[{key:"blockPaste",value:function(e){for(var t=e.clipboardData.getData("text"),n=0,i=!1;n<t.length&&!0!==i;)this.isSpecialCharacter(t[n].charCodeAt())?(i=!0,e.preventDefault()):n++}},{key:"onKeydownHandler",value:function(e){var t=e.key;void 0!==t&&this.isSpecialCharacter(t.charCodeAt())&&e.preventDefault()}},{key:"isSpecialCharacter",value:function(e){return e<32||e>32&&e<38||61===e||63===e||64===e||e>90&&e<95||123===e||124===e||125===e||126===e||127===e||e>154&&224!==e&&231!==e&&232!==e&&233!==e}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275dir=o.\u0275\u0275defineDirective({type:a,selectors:[["","appTextValidator",""]],hostBindings:function(e,t){1&e&&o.\u0275\u0275listener("paste",function(e){return t.blockPaste(e)})("keydown",function(e){return t.onKeydownHandler(e)})}}),a)},90046:function(e,t,i){i.d(t,{tR:function(){return r},El:function(){return u},F:function(){return d},B0:function(){return y},ag:function(){return g},mw:function(){return N},z0:function(){return D},$l:function(){return b},KM:function(){return T},tA:function(){return O}});var r=function e(){n(this,e)},a=i(82636),o=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};function c(e){return Reflect.metadata("type",e)}function s(e){return Reflect.metadata("dir",e)}function l(e){return Reflect.metadata("persisted",e)}var m,d=((m=d||(d={}))[m.Euro=5]="Euro",d),u=function e(){n(this,e),this.batchId=0,this.projectId=0,this.invoiceId=0,this.batchAmount=null,this.estimateId=null,this.contractId=null,this.batchTypeId=null,this.BatchChecked=!1,this.invoiceSaariReference=null};o([c(a.sP.Decimal),s(a.Nm.Input),l(!0)],u.prototype,"batchId",void 0),o([c(a.sP.Decimal),s(a.Nm.Input),l(!0)],u.prototype,"projectId",void 0),o([l(!1)],u.prototype,"projectName",void 0),o([c(a.sP.Decimal),s(a.Nm.Input),l(!0)],u.prototype,"invoiceId",void 0),o([c(a.sP.Decimal),s(a.Nm.Input),l(!0)],u.prototype,"currencyId",void 0),o([c(a.sP.NVarchar2),s(a.Nm.Input),l(!0)],u.prototype,"batchReference",void 0),o([c(a.sP.NVarchar2),s(a.Nm.Input),l(!0)],u.prototype,"batchDescription",void 0),o([c(a.sP.Date),s(a.Nm.Input),l(!0)],u.prototype,"batchDeliveryDate",void 0),o([c(a.sP.Decimal),s(a.Nm.Input),l(!0)],u.prototype,"batchAmount",void 0),o([c(a.sP.NVarchar2),s(a.Nm.Input),l(!0)],u.prototype,"batchAdressedTo",void 0),o([c(a.sP.Decimal),s(a.Nm.Input),l(!0)],u.prototype,"estimateId",void 0),o([c(a.sP.Decimal),s(a.Nm.Input),l(!0)],u.prototype,"contractId",void 0),o([l(!1)],u.prototype,"contractReference",void 0),o([c(a.sP.Decimal),s(a.Nm.Input),l(!0)],u.prototype,"batchTypeId",void 0),o([l(!1)],u.prototype,"BatchChecked",void 0),o([l(!1)],u.prototype,"invoiceDeliveryDate",void 0),o([l(!1)],u.prototype,"invoiceNetToBePayed",void 0),o([l(!1)],u.prototype,"invoiceSaariReference",void 0),o([l(!1)],u.prototype,"currency",void 0),o([l(!1)],u.prototype,"estimateReference",void 0),o([l(!1)],u.prototype,"customer",void 0),o([l(!1)],u.prototype,"activityName",void 0);var p=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};function v(e){return Reflect.metadata("type",e)}function f(e){return Reflect.metadata("dir",e)}function h(e){return Reflect.metadata("persisted",e)}var y=function e(){n(this,e),this.estimateId=0,this.estimateDesc=null,this.estimateLien="",this.projectId=0,this.clientId=0,this.activityId=0,this.clientServiceId=0,this.estimateAmount=null,this.estimateFileName=null,this.estimateFileType=null,this.estimateFileData=null,this.estimateFileChanged=0};p([v(a.sP.Decimal),f(a.Nm.InputOutput),h(!0)],y.prototype,"estimateId",void 0),p([v(a.sP.NVarchar2),f(a.Nm.Input),h(!0)],y.prototype,"estimateReference",void 0),p([v(a.sP.Date),f(a.Nm.Input),h(!0)],y.prototype,"estimateDate",void 0),p([v(a.sP.NVarchar2),f(a.Nm.Input),h(!0)],y.prototype,"estimateDesc",void 0),p([v(a.sP.NVarchar2),f(a.Nm.Input),h(!0)],y.prototype,"estimateEdit",void 0),p([v(a.sP.NVarchar2),f(a.Nm.Input),h(!0)],y.prototype,"estimateState",void 0),p([v(a.sP.NVarchar2),f(a.Nm.Input),h(!0)],y.prototype,"estimateLien",void 0),p([v(a.sP.Decimal),f(a.Nm.Input),h(!0)],y.prototype,"projectId",void 0),p([v(a.sP.Decimal),f(a.Nm.Input),h(!0)],y.prototype,"clientId",void 0),p([v(a.sP.Decimal),f(a.Nm.Input),h(!0)],y.prototype,"activityId",void 0),p([v(a.sP.Decimal),f(a.Nm.Input),h(!0)],y.prototype,"clientServiceId",void 0),p([v(a.sP.Decimal),f(a.Nm.InputOutput),h(!0)],y.prototype,"estimateAmount",void 0),p([v(a.sP.Varchar2),f(a.Nm.Input),h(!0)],y.prototype,"estimateFileName",void 0),p([v(a.sP.Varchar2),f(a.Nm.Input),h(!0)],y.prototype,"estimateFileType",void 0),p([v(a.sP.Blob),f(a.Nm.Input),h(!0)],y.prototype,"estimateFileData",void 0),p([v(a.sP.Decimal),f(a.Nm.Input),h(!0)],y.prototype,"estimateFileChanged",void 0),p([h(!1)],y.prototype,"clientName",void 0),p([h(!1)],y.prototype,"activityName",void 0),p([h(!1)],y.prototype,"contractReference",void 0),p([h(!1)],y.prototype,"contractDate",void 0),p([h(!1)],y.prototype,"batchReference",void 0),p([h(!1)],y.prototype,"projectName",void 0);var g=function e(){n(this,e)},I=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};function S(e){return Reflect.metadata("type",e)}function P(e){return Reflect.metadata("dir",e)}function E(e){return Reflect.metadata("persisted",e)}var N=function e(){n(this,e),this.invoiceId=0,this.invoiceReference="N/A",this.invoiceAdressedTo="",this.invoiceAmount="",this.invoiceDeposit=0,this.invoiceNetToBePayed="",this.invoiceDeliveryDate=null,this.invoiceCashedOn=null,this.invoiceSaariReference=null,this.batchId=0,this.projectId=0,this.invoiceChecked=!1};I([S(a.sP.Decimal),P(a.Nm.InputOutput),E(!0)],N.prototype,"invoiceId",void 0),I([S(a.sP.Decimal),P(a.Nm.Input),E(!0)],N.prototype,"currencyId",void 0),I([S(a.sP.NVarchar2),P(a.Nm.Input),E(!0)],N.prototype,"invoiceReference",void 0),I([S(a.sP.NVarchar2),P(a.Nm.Input),E(!0)],N.prototype,"invoiceAdressedTo",void 0),I([S(a.sP.NVarchar2),P(a.Nm.Input),E(!0)],N.prototype,"invoiceAmount",void 0),I([S(a.sP.Decimal),P(a.Nm.Input),E(!0)],N.prototype,"invoiceDeposit",void 0),I([S(a.sP.NVarchar2),P(a.Nm.Input),E(!0)],N.prototype,"invoiceNetToBePayed",void 0),I([S(a.sP.Date),P(a.Nm.Input),E(!0)],N.prototype,"invoiceDeliveryDate",void 0),I([S(a.sP.Date),P(a.Nm.Input),E(!1)],N.prototype,"invoiceCashedOn",void 0),I([S(a.sP.NVarchar2),P(a.Nm.Input),E(!1)],N.prototype,"invoiceSaariReference",void 0),I([S(a.sP.Decimal),P(a.Nm.Input),E(!0)],N.prototype,"batchId",void 0),I([E(!1)],N.prototype,"projectId",void 0),I([E(!1)],N.prototype,"projectName",void 0),I([E(!1)],N.prototype,"batchReference",void 0),I([E(!1)],N.prototype,"contractReference",void 0),I([E(!1)],N.prototype,"invoiceChecked",void 0),I([E(!1)],N.prototype,"currency",void 0),I([E(!1)],N.prototype,"customer",void 0),I([E(!1)],N.prototype,"activityId",void 0),I([E(!1)],N.prototype,"activityTotal",void 0),I([E(!1)],N.prototype,"activityName",void 0);var D=function e(){n(this,e)},b=function e(){n(this,e)},C=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};function w(e){return Reflect.metadata("type",e)}function A(e){return Reflect.metadata("dir",e)}function x(e){return Reflect.metadata("persisted",e)}var T=function e(){n(this,e),this.contractId=0,this.contractTypeId=0,this.contractAmount=null,this.estimateId=null,this.contractLink="",this.contractFileType=null,this.contractFileName=null,this.contractFileData=null,this.contractFileChanged=0,this.projectId=0,this.offreConfId=null,this.commentaire=""};C([w(a.sP.Decimal),A(a.Nm.Input),x(!0)],T.prototype,"contractId",void 0),C([w(a.sP.Decimal),A(a.Nm.Input),x(!0)],T.prototype,"contractTypeId",void 0),C([w(a.sP.Date),A(a.Nm.Input),x(!0)],T.prototype,"contractDate",void 0),C([w(a.sP.NVarchar2),A(a.Nm.Input),x(!0)],T.prototype,"contractName",void 0),C([x(!1)],T.prototype,"contractTypeName",void 0),C([w(a.sP.NVarchar2),A(a.Nm.Input),x(!0)],T.prototype,"contractReference",void 0),C([w(a.sP.NVarchar2),A(a.Nm.Input),x(!0)],T.prototype,"contractClientRef",void 0),C([w(a.sP.Decimal),A(a.Nm.Input),x(!0)],T.prototype,"contractAmount",void 0),C([w(a.sP.Decimal),A(a.Nm.Input),x(!0)],T.prototype,"estimateId",void 0),C([x(!1)],T.prototype,"estimateRef",void 0),C([w(a.sP.NVarchar2),A(a.Nm.Input),x(!0)],T.prototype,"contractLink",void 0),C([w(a.sP.NVarchar2),A(a.Nm.Input),x(!0)],T.prototype,"contractDesc",void 0),C([w(a.sP.NVarchar2),A(a.Nm.Input),x(!0)],T.prototype,"contractFileType",void 0),C([w(a.sP.NVarchar2),A(a.Nm.Input),x(!0)],T.prototype,"contractFileName",void 0),C([w(a.sP.Blob),A(a.Nm.Input),x(!0)],T.prototype,"contractFileData",void 0),C([w(a.sP.Decimal),A(a.Nm.Input),x(!0)],T.prototype,"contractFileChanged",void 0),C([w(a.sP.Decimal),A(a.Nm.Input),x(!0)],T.prototype,"projectId",void 0),C([w(a.sP.Decimal),A(a.Nm.Input),x(!0)],T.prototype,"offreConfId",void 0),C([w(a.sP.NVarchar2),A(a.Nm.Input),x(!0)],T.prototype,"commentaire",void 0),C([x(!1)],T.prototype,"offreConfDesc",void 0);var k=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};function M(e){return Reflect.metadata("type",e)}function R(e){return Reflect.metadata("dir",e)}function j(e){return Reflect.metadata("persisted",e)}var O=function e(){n(this,e),this.priceId=0,this.currencyId=5,this.currencySymbol="\u20ac"};k([M(a.sP.Decimal),R(a.Nm.InputOutput),j(!0)],O.prototype,"priceId",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"projectId",void 0),k([M(a.sP.Varchar2),R(a.Nm.Input),j(!0)],O.prototype,"userId",void 0),k([j(!1)],O.prototype,"userName",void 0),k([j(!1)],O.prototype,"userQualification",void 0),k([j(!1)],O.prototype,"userRole",void 0),k([j(!1)],O.prototype,"userQuit",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"currencyId",void 0),k([j(!1)],O.prototype,"currencySymbol",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"year",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month1",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month2",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month3",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month4",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month5",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month6",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month7",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month8",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month9",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month10",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month11",void 0),k([M(a.sP.Decimal),R(a.Nm.Input),j(!0)],O.prototype,"month12",void 0)},55750:function(e,t,n){n.d(t,{Ry:function(){return i.R}});var i=n(34239);n(62758)},17224:function(e,i,r){r.d(i,{$:function(){return c}});var a,o=r(37716),c=((a=function(){function e(){n(this,e)}return t(e,[{key:"transform",value:function(e){if(e)return+e.toString().replace(",",".")}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275pipe=o.\u0275\u0275definePipe({name:"numberForm",type:a,pure:!0}),a)},34239:function(e,i,r){r.d(i,{R:function(){return s}});var a,o=r(37716),c=r(10337),s=((a=function(){function e(t){n(this,e),this.searchFilterService=t}return t(e,[{key:"transform",value:function(e,t,n){if(this.startIndex=t*(n*this.searchFilterService.rowSpan)+1,this.endIndex=n*this.searchFilterService.rowSpan*(t+1),null!=e)return this.searchFilterService.showingDataLastFilter=e.slice(this.startIndex-1,this.endIndex),this.searchFilterService.resultChanged.next(),e.slice(this.startIndex-1,this.endIndex)}}]),e}()).\u0275fac=function(e){return new(e||a)(o.\u0275\u0275directiveInject(c.nJ,16))},a.\u0275pipe=o.\u0275\u0275definePipe({name:"paginator",type:a,pure:!0}),a)},96523:function(e,i,r){r.d(i,{a:function(){return v},X:function(){return d}});var a,o=r(70833),c=r(82636),s=r(51586),l=r(37716),m=r(10337),d=((a=function(){function e(t,i){n(this,e),this.genericService=t,this.entityParameterService=i,this.reloadPrices=new o.xQ,this.reloadEstimates=new o.xQ,this.reloadOrders=new o.xQ,this.reloadBatches=new o.xQ,this.reloadInvoices=new o.xQ,this.sortAllInvoices=new o.xQ,this.sortPrices=new o.xQ,this.sortEstimates=new o.xQ,this.sortInvoices=new o.xQ,this.sortBatches=new o.xQ,this.sortOrders=new o.xQ,this.insertInvoicingBatch=new o.xQ,this.getinvoicingBatches=new o.xQ,this.isSavedBatch=new o.tq,this.invoiceBatch=new o.xQ,this.isSavedInvoice=new o.tq,this.goToOrder=new o.xQ}return t(e,[{key:"getPricesByProject",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetPricesByProject",n.entitiesParameters=new Array(t),n.cursorName="Curs",this.genericService.createService("/Data/Get",n)}},{key:"getEstimateListByProject",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetEstimateByProject",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}},{key:"getRefEstimateByProject",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetRefEstimateByProject",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}},{key:"getBatchesByProject",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetBatchesByProject",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}},{key:"getContractsByProject",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetContractsByProject",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}},{key:"getInvoice",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"invoiceId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetInvoice",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}},{key:"getBatch",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"batchId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetBatch",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}},{key:"getInvoiceByProject",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetInvoiceByProject",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}},{key:"deleteInvoice",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"invoiceId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.DeleteInvoice",n.entitiesParameters=new Array(t),n.outputIdParameterName="invoiceId",this.genericService.createService("/Data/Delete",n)}},{key:"deleteBatch",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"batchId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.DeleteBatch",n.entitiesParameters=new Array(t),n.outputIdParameterName="batchId",this.genericService.createService("/Data/Delete",n)}},{key:"deleteEstimate",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"estimateId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.DeleteEstimate",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Delete",n)}},{key:"deleteUserPrices",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"priceId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.DeleteUserPrices",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Delete",n)}},{key:"deleteConract",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"contractId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.DeleteContract",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Delete",n)}},{key:"saveUsersPrices",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameters(t,e);var n=new s.u;return n.storedProcedureName="GPTT.InsertOrUpdateUsersPrices",n.entitiesParameters=new Array(t),n.outputIdParameterName="priceId",this.genericService.createService("/Data/Save",n)}},{key:"saveEstimateDetails",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameters(t,e);var n=new s.u;return n.storedProcedureName="GPTT.InsertOrUpdateEstimate",n.entitiesParameters=new Array(t),n.outputIdParameterName="estimateId",this.genericService.createService("/Data/Save",n)}},{key:"insertOrUpdateContract",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameters(t,e);var n=new s.u;return n.storedProcedureName="GPTT.InsertOrUpdateContract",n.entitiesParameters=new Array(t),n.outputIdParameterName="contractId",this.genericService.createService("/Data/Save",n)}},{key:"getContractsType",value:function(){var e=new s.u;return e.storedProcedureName="GPTT.GetContractsType",e.cursorName="PARAM",this.genericService.createService("/Data/Get",e)}},{key:"getCurrencies",value:function(){var e=new s.u;return e.storedProcedureName="GPTT.GetCurrencies",e.cursorName="PARAM1",this.genericService.createService("/Data/Get",e)}},{key:"getBatchesType",value:function(){var e=new s.u;return e.storedProcedureName="GPTT.GetBatchesType",e.cursorName="PARAM1",this.genericService.createService("/Data/Get",e)}},{key:"getLaunchInvoices",value:function(e,t,n){var i=new Array;this.entityParameterService.AddEntityParameter(i,"activities",e,c.sP.Varchar2,c.Nm.Input),this.entityParameterService.AddEntityParameter(i,"deliveryStartDate",t,c.sP.Date,c.Nm.Input),this.entityParameterService.AddEntityParameter(i,"deliveryEndDate",n,c.sP.Date,c.Nm.Input);var r=new s.u;return r.storedProcedureName="GPTT.GetLaunchInvoices",r.entitiesParameters=new Array(i),r.cursorName="curs",this.genericService.createService("/Data/Get",r)}},{key:"saveBatchDetails",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameters(t,e);var n=new s.u;return n.storedProcedureName="GPTT.InsertOrUpdateBatch",n.entitiesParameters=new Array(t),n.outputIdParameterName="batchId",this.genericService.createService("/Data/Save",n)}},{key:"getContracts",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetContracts",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}},{key:"saveInvoiceDetails",value:function(e){var t=new Array;null!=e.invoiceNetToBePayed&&(e.invoiceNetToBePayed=e.invoiceNetToBePayed.toString().replace(".",",")),null!==e.invoiceAmount&&(e.invoiceAmount=e.invoiceAmount.toString().replace(".",",")),this.entityParameterService.AddEntityParameters(t,e);var n=new s.u;return n.storedProcedureName="GPTT.InsertOrUpdateProjectInvoice",n.entitiesParameters=new Array(t),n.outputIdParameterName="invoiceId",this.genericService.createService("/Data/Save",n)}},{key:"saveInvoicesLaunch",value:function(e){var t=this,n=new Array;e.forEach(function(e){var i=new Array;t.entityParameterService.AddEntityParameter(i,"invoiceId",e.invoiceId,c.sP.Decimal,c.Nm.Input),t.entityParameterService.AddEntityParameter(i,"currencyId",e.currencyId,c.sP.Decimal,c.Nm.Input),t.entityParameterService.AddEntityParameter(i,"invoiceReference",e.invoiceReference,c.sP.Varchar2,c.Nm.Input),t.entityParameterService.AddEntityParameter(i,"invoiceAdressedTo",e.invoiceAdressedTo,c.sP.Varchar2,c.Nm.Input),t.entityParameterService.AddEntityParameter(i,"invoiceAmount",e.invoiceAmount,c.sP.Decimal,c.Nm.Input),t.entityParameterService.AddEntityParameter(i,"invoiceDeposit",e.invoiceDeposit,c.sP.Decimal,c.Nm.Input),e.invoiceNetToBePayed&&(e.invoiceNetToBePayed=e.invoiceNetToBePayed.toString().replace(".",",")),t.entityParameterService.AddEntityParameter(i,"invoiceNetToBePayed",e.invoiceNetToBePayed,c.sP.Varchar2,c.Nm.Input),t.entityParameterService.AddEntityParameter(i,"invoiceDeliveryDate",e.invoiceDeliveryDate,c.sP.Date,c.Nm.Input),t.entityParameterService.AddEntityParameter(i,"invoiceCashedOn",e.invoiceCashedOn,c.sP.Date,c.Nm.Input),t.entityParameterService.AddEntityParameter(i,"invoiceSaariReference",e.invoiceSaariReference,c.sP.Varchar2,c.Nm.Input),t.entityParameterService.AddEntityParameter(i,"batchId",e.batchId,c.sP.Decimal,c.Nm.Input),n.push(i)});var i=new s.u;return i.storedProcedureName="GPTT.InsertOrUpdateInvoice",i.entitiesParameters=n,i.outputIdParameterName="invoiceId",this.genericService.createService("/Data/Save",i)}},{key:"saveInvoiceCashedOn",value:function(e,t){var n=new Array;this.entityParameterService.AddEntityParameter(n,"invoiceId",e,c.sP.Decimal,c.Nm.InputOutput),this.entityParameterService.AddEntityParameter(n,"invoiceCashedOn",t,c.sP.Date,c.Nm.Input);var i=new s.u;return i.storedProcedureName="GPTT.UpdateInvoiceCashedOn",i.entitiesParameters=new Array(n),i.outputIdParameterName="invoiceId",this.genericService.createService("/Data/Save",i)}},{key:"saveInvoiceSaariRef",value:function(e,t){var n=new Array;this.entityParameterService.AddEntityParameter(n,"invoiceId",e,c.sP.Decimal,c.Nm.InputOutput),this.entityParameterService.AddEntityParameter(n,"invoiceSaariReference",t,c.sP.Varchar2,c.Nm.Input);var i=new s.u;return i.storedProcedureName="GPTT.UpdateInvoiceSaariRef",i.entitiesParameters=new Array(n),i.outputIdParameterName="invoiceId",this.genericService.createService("/Data/Save",i)}},{key:"getBatchNotInvoiced",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetBatchNotInvoiced",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}},{key:"getInvoices",value:function(e,t,n){var i=new Array;this.entityParameterService.AddEntityParameter(i,"activities",e,c.sP.Varchar2,c.Nm.Input),this.entityParameterService.AddEntityParameter(i,"deliveryStartDate",t,c.sP.Date,c.Nm.Input),this.entityParameterService.AddEntityParameter(i,"deliveryEndDate",n,c.sP.Date,c.Nm.Input);var r=new s.u;return r.storedProcedureName="GPTT.GetInvoices",r.entitiesParameters=new Array(i),r.cursorName="curs",this.genericService.createService("/Data/Get",r)}},{key:"getEstimates",value:function(e,t,n,i,r,a){var o=new Array;this.entityParameterService.AddEntityParameter(o,"estimateReference",e,c.sP.Varchar2,c.Nm.Input),this.entityParameterService.AddEntityParameter(o,"customers",t,c.sP.Varchar2,c.Nm.Input),this.entityParameterService.AddEntityParameter(o,"activities",n,c.sP.Varchar2,c.Nm.Input),this.entityParameterService.AddEntityParameter(o,"estimateState",i,c.sP.Varchar2,c.Nm.Input),this.entityParameterService.AddEntityParameter(o,"estimateStartDate",r,c.sP.Date,c.Nm.Input),this.entityParameterService.AddEntityParameter(o,"estimateEndDate",a,c.sP.Date,c.Nm.Input);var l=new s.u;return l.storedProcedureName="GPTT.GetEstimates",l.entitiesParameters=new Array(o),l.cursorName="curs",this.genericService.createService("/Data/Get",l)}},{key:"getEstimateFile",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"estimateId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetEstimateFile",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}},{key:"getContractFile",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"contractId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetContractFile",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}},{key:"getEstimateContracts",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"estimateId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetEstimateContracts",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}},{key:"getContractBatches",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"contractId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetContractBatches",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}},{key:"getContract",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"contractId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetContract",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}},{key:"getEstimate",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"estimateId",e,c.sP.Decimal,c.Nm.Input);var n=new s.u;return n.storedProcedureName="GPTT.GetEstimate",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}}]),e}()).\u0275fac=function(e){return new(e||a)(l.\u0275\u0275inject(m.MY),l.\u0275\u0275inject(m.RZ))},a.\u0275prov=l.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a),u=r(90046),p=r(72480),v=function(){var e=function(){function e(){n(this,e)}return t(e,[{key:"addGroupWithTotal",value:function(e,t,n){var i=new p.Z;return i.expanded=!0,this.getSublevelWithTotal(e,0,t,i,n)}},{key:"getSublevel",value:function(e,t,n,i){var r=this;if(t>=n.length)return e;var a=this.uniqueBy(e.map(function(e){var r=new p.Z;r.level=t+1,r.parent=i;for(var a=0;a<=t;a++)r[n[a]]=e[n[a]];return r}),JSON.stringify),o=n[t],c=[];return a.forEach(function(i){var a=e.filter(function(e){return i[o]===e[o]});i.totalCounts=a.length;var s=r.getSublevel(a,t+1,n,i);s.unshift(i),c=c.concat(s)}),this._allGroup=c,c}},{key:"getSublevelWithTotal",value:function(e,t,n,i,r){var a=this;if(t>=n.length)return e;var o=this.uniqueBy(e.map(function(e){var r=new p.Z;r.level=t+1,r.parent=i;for(var a=0;a<=t;a++)r[n[a]]=e[n[a]];return r}),JSON.stringify),c=n[t],s=[];return o.forEach(function(i){var o=e.filter(function(e){return i[c]===e[c]});i.totalCounts=o.length;var l=[];r.forEach(function(e){if(i[c]===e[c]&&void 0===l.find(function(t){return t.currencyId===e.currencyId})){var t=new u.tR;t.activityTotal=e.activityTotal,t.currency=e.currency,t.currencyId=e.currencyId,l.push(t)}}),l.sort(function(e,t){return e.currencyId-t.currencyId}),i.activitiesTotal=l;var m=a.getSublevel(o,t+1,n,i);m.unshift(i),s=s.concat(m)}),this._allGroup=s,s}},{key:"isGroup",value:function(e){return e.level}},{key:"uniqueBy",value:function(e,t){var n={};return e.filter(function(e){var i=t(e);return!n.hasOwnProperty(i)&&(n[i]=!0)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},39924:function(e,i,r){r.d(i,{J:function(){return h}});var a=r(37716),o=r(99692),c=r(10337),s=r(98295),l=r(67441),m=r(3679),d=r(38583),u=r(72458);function p(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"mat-option",6),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;a.\u0275\u0275property("value",n),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(n)}}var v,f=function(){return[6,12,24,60,120]},h=((v=function(){function e(t){n(this,e),this.searchFilterService=t,this.disabled=!1,this.hidePageSize=!1,this.showFirstLastButtons=!1,this.page=new a.EventEmitter}return t(e,[{key:"pageIndexChanged",set:function(e){this.pageIndex=e,this.updateGoto()}},{key:"lengthChanged",set:function(e){this.length=e,this.updateGoto()}},{key:"pageSizeChanged",set:function(e){this.pageSize=e,this.updateGoto()}},{key:"ngOnInit",value:function(){this.updateGoto()}},{key:"onPaginateChange",value:function(e){this.searchFilterService.pageIndex=e.pageIndex,this.searchFilterService.pageSize=e.pageSize,this.length=e.length,this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.updateGoto(),this.emitPageEvent(e)}},{key:"updateGoto",value:function(){this.goTo=(this.pageIndex||0)+1,this.pageNumbers=[];for(var e=Math.ceil(this.length/this.pageSize),t=1;t<=e;t++)this.pageNumbers.push(t)}},{key:"goToChange",value:function(){this.paginator.pageIndex=this.goTo-1,this.searchFilterService.pageIndex=this.paginator.pageIndex,this.searchFilterService.pageSize=this.paginator.pageSize,this.emitPageEvent({length:this.paginator.length,pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize})}},{key:"emitPageEvent",value:function(e){this.page.next(e)}}]),e}()).\u0275fac=function(e){return new(e||v)(a.\u0275\u0275directiveInject(c.nJ))},v.\u0275cmp=a.\u0275\u0275defineComponent({type:v,selectors:[["app-paginator"]],viewQuery:function(e,t){var n;1&e&&a.\u0275\u0275viewQuery(o.NW,7),2&e&&a.\u0275\u0275queryRefresh(n=a.\u0275\u0275loadQuery())&&(t.paginator=n.first)},inputs:{length:"length",pageIndex:"pageIndex",pageSize:"pageSize",disabled:"disabled",hidePageSize:"hidePageSize",pageSizeOptions:"pageSizeOptions",showFirstLastButtons:"showFirstLastButtons",pageIndexChanged:["pageIndex","pageIndexChanged"],lengthChanged:["length","lengthChanged"],pageSizeChanged:["pageSize","pageSizeChanged"]},outputs:{page:"page"},decls:8,vars:8,consts:[[1,"d-flex"],[3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275elementStart(1,"mat-paginator",1),a.\u0275\u0275listener("page",function(e){return t.onPaginateChange(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275elementStart(3,"div",3),a.\u0275\u0275text(4,"Go To: "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"mat-form-field"),a.\u0275\u0275elementStart(6,"mat-select",4),a.\u0275\u0275listener("ngModelChange",function(e){return t.goTo=e})("selectionChange",function(){return t.goToChange()}),a.\u0275\u0275template(7,p,2,2,"mat-option",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("length",t.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",a.\u0275\u0275pureFunction0(7,f))("showFirstLastButtons",!0),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngModel",t.goTo),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",t.pageNumbers))},directives:[o.NW,s.KE,l.gD,m.NgControlStatus,m.NgModel,d.NgForOf,u.ey],styles:['.mat-paginator[_ngcontent-%COMP%]{width:100%;float:right}.d-flex[_ngcontent-%COMP%]{display:flex}  .mat-select-trigger{font-size:12px}  .mat-option{font-size:12px}.go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}.go-to-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:56px;margin:6px 4px 0;font-size:12px;font-family:Roboto,"Helvetica Neue",sans-serif}.go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{width:36px;margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,"Helvetica Neue",sans-serif}']}),v)}}])}();