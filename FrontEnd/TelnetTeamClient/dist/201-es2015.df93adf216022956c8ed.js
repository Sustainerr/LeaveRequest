"use strict";(self.webpackChunktelnetteam_app=self.webpackChunktelnetteam_app||[]).push([[201],{90201:function(e,t,n){n.r(t),n.d(t,{LoginModule:function(){return w}});var r=n(38583),i=n(3679),a=n(88452),l=n(92340),o=n(44976),s=n(19552),d=n(37716),m=n(10337),c=n(31584),u=n(4885);function p(e,t){1&e&&(d.\u0275\u0275elementStart(0,"div",35),d.\u0275\u0275elementStart(1,"div",36),d.\u0275\u0275elementStart(2,"div",3),d.\u0275\u0275elementStart(3,"div",4),d.\u0275\u0275elementStart(4,"div",37),d.\u0275\u0275element(5,"mat-spinner"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd())}function h(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div",38),d.\u0275\u0275text(1," Version : "),d.\u0275\u0275elementStart(2,"span",39),d.\u0275\u0275text(3),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&e){const e=d.\u0275\u0275nextContext();d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate(e.commitTime)}}function f(e,t){1&e&&(d.\u0275\u0275elementStart(0,"div",40),d.\u0275\u0275elementStart(1,"strong"),d.\u0275\u0275text(2,"Login failed. Your login is invalid."),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd())}function g(e,t){1&e&&(d.\u0275\u0275elementStart(0,"div",40),d.\u0275\u0275elementStart(1,"strong"),d.\u0275\u0275text(2,"Captcha validation failed!"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd())}const v=function(e){return{required:e}},S=function(){return["/auth/send-reset-password"]},b=[{path:"",component:(()=>{class e{constructor(e,t,n,r){this.route=e,this.router=t,this.authenticationService=n,this.cookieService=r,this.idleState="Not started.",this.timedOut=!1,this.lastPing=null,this.idlestart=!1,this.failedLogin=!1,this.failedCaptcha=!1,this.recaptchaSended=!1,this.userLogin="",this.userPassword="",this.isLoading=!1,this.commitTime=l.N.commitTime}ngOnInit(){document.querySelector("body").setAttribute("themebg-pattern","theme1"),this.authenticationService.logout(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"dashboard",this.captchaComponent.captchaEndpoint=l.N.apiUrl+l.N.captchaEndpointUrl}validateCaptcha(){this.authenticationService.validateCaptcha({userEnteredCaptchaCode:this.captchaComponent.userEnteredCaptchaCode,captchaId:this.captchaComponent.captchaId}).subscribe(e=>{"false"===e?(this.failedLogin=!1,this.failedCaptcha=!0,this.captchaComponent.reloadImage()):(this.login(),this.failedCaptcha=!1)},e=>{this.failedLogin=!1,this.failedCaptcha=!0})}login(){this.isLoading=!0;const e=s.I.measureStrength(this.userPassword);this.authenticationService.login(this.userLogin,this.userPassword,e).subscribe(e=>{this.isLoading=!1,e&&this.authenticationService.isAuthenticated()?(this.cookieService.set("userLogin",this.userLogin),this.returnUrl.indexOf(";")>-1?this.getOptionalParameters(this.returnUrl):this.router.navigate([this.returnUrl])):(this.failedCaptcha=!1,this.failedLogin=!0)},()=>{this.isLoading=!1,this.failedCaptcha=!1,this.failedLogin=!0})}getOptionalParameters(e){const t={};let n,r;const i=e.substr(0,e.indexOf(";"));let a=e.substr(e.indexOf(";")+1,e.length-e.indexOf(";")-1);for(;a.indexOf(";")>-1;)n=a.substr(0,a.indexOf("=")),r=a.substr(a.indexOf("=")+1,a.indexOf(";")-a.indexOf("=")-1),t[n]=r,a=a.substr(a.indexOf(";")+1,a.length-a.indexOf(";")-1);n=a.substr(0,a.indexOf("=")),r=a.substr(a.indexOf("=")+1,a.length-a.indexOf("=")-1),t[n]=r,this.router.navigate([i],{queryParams:t})}}return e.\u0275fac=function(t){return new(t||e)(d.\u0275\u0275directiveInject(a.gz),d.\u0275\u0275directiveInject(a.F0),d.\u0275\u0275directiveInject(m.$h),d.\u0275\u0275directiveInject(c.N))},e.\u0275cmp=d.\u0275\u0275defineComponent({type:e,selectors:[["app-login"]],viewQuery:function(e,t){if(1&e&&d.\u0275\u0275viewQuery(o.h$,7),2&e){let e;d.\u0275\u0275queryRefresh(e=d.\u0275\u0275loadQuery())&&(t.captchaComponent=e.first)}},decls:53,vars:15,consts:[[1,"wrapper"],["class","overlay",4,"ngIf"],[1,"login-block"],[1,"container"],[1,"row"],[1,"col-sm-12"],["name","form","novalidate","",1,"md-float-material","form-material",3,"ngSubmit"],["loginForm","ngForm"],[1,"text-center"],["src","assets/images/logo.png","alt","logo.png"],[1,"auth-box","card"],[1,"card-block"],[1,"row","m-b-20"],[1,"col-md-12"],[1,"form-group","form-primary"],["type","text","name","usrNumber","required","",1,"form-control","login-input-style",3,"ngClass","ngModel","ngModelChange"],["usrNumber","ngModel"],[1,"form-bar"],[1,"float-label"],["type","password","name","usrPassword","required","",1,"form-control","login-input-style",3,"ngClass","ngModel","ngModelChange"],["usrPassword","ngModel"],["captchaStyleName","angularBasicCaptcha"],["id","tapa",2,"background-color","#ffffff","height","10px","width","250px","position","relative","top","-10px"],["title","hola",1,"form-group","form-primary"],["id","userCaptchaInput","name","userCaptchaInput","ngModel","",1,"form-control"],["userCaptchaInput","ngModel"],[1,"row","m-t-25","text-left"],[1,"col-12"],[1,"forgot-phone","text-right","f-right"],[1,"text-right","f-w-600",3,"routerLink"],[1,"row","m-t-30"],["type","submit",1,"btn","btn-primary","btn-md","btn-block","waves-light","text-center","m-b-5","ripple",3,"disabled"],[1,"col-md-12","text-center",2,"font-weight","bold","font-size","smaller"],["class","col-md-12 text-center","style","font-size:smaller;",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"overlay"],[1,"spinner-wrapper"],["id","loader"],[1,"col-md-12","text-center",2,"font-size","smaller"],[2,"color","#007bff"],[1,"alert","alert-danger"]],template:function(e,t){if(1&e){const e=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275template(1,p,6,0,"div",1),d.\u0275\u0275elementStart(2,"section",2),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275elementStart(4,"div",4),d.\u0275\u0275elementStart(5,"div",5),d.\u0275\u0275elementStart(6,"form",6,7),d.\u0275\u0275listener("ngSubmit",function(){return d.\u0275\u0275restoreView(e),d.\u0275\u0275reference(7).form.valid&&t.validateCaptcha()}),d.\u0275\u0275elementStart(8,"div",8),d.\u0275\u0275element(9,"img",9),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(10,"div",10),d.\u0275\u0275elementStart(11,"div",11),d.\u0275\u0275elementStart(12,"div",12),d.\u0275\u0275elementStart(13,"div",13),d.\u0275\u0275elementStart(14,"h3",8),d.\u0275\u0275text(15,"Sign In"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(16,"div",14),d.\u0275\u0275elementStart(17,"input",15,16),d.\u0275\u0275listener("ngModelChange",function(e){return t.userLogin=e}),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(19,"span",17),d.\u0275\u0275elementStart(20,"label",18),d.\u0275\u0275text(21,"Matricule Or Username "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(22,"div",14),d.\u0275\u0275elementStart(23,"input",19,20),d.\u0275\u0275listener("ngModelChange",function(e){return t.userPassword=e}),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(25,"span",17),d.\u0275\u0275elementStart(26,"label",18),d.\u0275\u0275text(27,"Password"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(28,"botdetect-captcha",21),d.\u0275\u0275element(29,"div",22),d.\u0275\u0275element(30,"br"),d.\u0275\u0275elementStart(31,"div",23),d.\u0275\u0275element(32,"input",24,25),d.\u0275\u0275element(34,"span",17),d.\u0275\u0275elementStart(35,"label",18),d.\u0275\u0275text(36,"Retype the characters from the picture:"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(37,"div",26),d.\u0275\u0275elementStart(38,"div",27),d.\u0275\u0275elementStart(39,"div",28),d.\u0275\u0275elementStart(40,"a",29),d.\u0275\u0275text(41," Reset Password ?"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(42,"div",30),d.\u0275\u0275elementStart(43,"div",13),d.\u0275\u0275elementStart(44,"button",31),d.\u0275\u0275text(45,"Sign in"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(46,"div",32),d.\u0275\u0275text(47," \xa9 Telnet 2021 (Internal use) "),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(48,h,4,1,"div",33),d.\u0275\u0275elementStart(49,"div",30),d.\u0275\u0275elementStart(50,"div",13),d.\u0275\u0275template(51,f,3,0,"div",34),d.\u0275\u0275template(52,g,3,0,"div",34),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&e){const e=d.\u0275\u0275reference(7),n=d.\u0275\u0275reference(18),r=d.\u0275\u0275reference(24);d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",t.isLoading),d.\u0275\u0275advance(16),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(10,v,!(n.valid||n.pristine)))("ngModel",t.userLogin),d.\u0275\u0275advance(6),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(12,v,!(r.valid||r.pristine)))("ngModel",t.userPassword),d.\u0275\u0275advance(17),d.\u0275\u0275property("routerLink",d.\u0275\u0275pureFunction0(14,S)),d.\u0275\u0275advance(4),d.\u0275\u0275property("disabled",!e.form.valid),d.\u0275\u0275advance(4),d.\u0275\u0275property("ngIf",""!==t.commitTime),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngIf",t.failedLogin),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",t.failedCaptcha)}},directives:[r.NgIf,i.\u0275NgNoValidate,i.NgControlStatusGroup,i.NgForm,i.DefaultValueAccessor,i.RequiredValidator,r.NgClass,i.NgControlStatus,i.NgModel,o.h$,a.yS,u.$g],styles:[".wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.overlay[_ngcontent-%COMP%]{top:0;position:absolute;z-index:1002;background-color:#ffffff80;width:100%;height:100%}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center}#loader[_ngcontent-%COMP%]{bottom:0;height:20%;left:0;margin:auto;position:absolute;right:0;top:0;width:6%}"]}),e})(),data:{title:"Login"}}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=d.\u0275\u0275defineInjector({imports:[[a.Bz.forChild(b)],a.Bz]}),e})();var E=n(32403),x=n(22238),y=n(77001);let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=d.\u0275\u0275defineInjector({providers:[m.gq,{provide:x.Bq,useValue:{hasBackdrop:!1}}],imports:[[r.CommonModule,C,E.m,i.FormsModule,x.Is,y.ZX,o.hM,u.Cq]]}),e})()}}]);