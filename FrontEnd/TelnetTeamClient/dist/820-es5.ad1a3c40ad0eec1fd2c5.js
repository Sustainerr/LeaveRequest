!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}(self.webpackChunktelnetteam_app=self.webpackChunktelnetteam_app||[]).push([[820],{54820:function(t,n,o){o.r(n),o.d(n,{CUSTOM_DT_FORMATS:function(){return Fe},WorkFromHomeModule:function(){return be}});var i=o(38583),a=o(32403),s=o(72458),l=o(22238),m=o(36063),d=o(67827),c=o(91841),u=o(10337),h=o(36332),p=o(88452),f=o(62028),g=o(63753),v=o(70833),k=o(55750),S=o(8799),w=o(27452),y=o(3679),F=o(46782),b=o(37716),x=o(98295),R=o(67441),H=o(52218),C=o(76627),D=o(7539),q=o(49983),I=o(43220),E=["workFromHomeRequestForm"];function M(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"mat-option",27),b.\u0275\u0275text(1),b.\u0275\u0275elementEnd()),2&e){var r=t.$implicit;b.\u0275\u0275property("value",r.id),b.\u0275\u0275advance(1),b.\u0275\u0275textInterpolate1(" ",r.description," ")}}function A(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"mat-option",27),b.\u0275\u0275text(1),b.\u0275\u0275elementEnd()),2&e){var r=t.$implicit;b.\u0275\u0275property("value",r),b.\u0275\u0275advance(1),b.\u0275\u0275textInterpolate1(" ",r," ")}}var W,O=((W=function(){function t(r,n,o,i,a,s){e(this,t),this.workFromHomeService=r,this.notificationService=n,this.mailService=o,this.datepipe=i,this.dialogRef=a,this.data=s,this.initialWorkFromHomeRequest=new S.ml,this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.resourceFilterCtrl=new y.FormControl,this.filteredResources=new v.tq(1),this.halefDayItems=Object.values(S.jt).map(function(e){return S.jt[e]}),this.selectedHalefDayItem=this.halefDayItems[0],this.forbiddenResources=!0,this._onDestroy=new v.xQ,this.isEdit=!1}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.workFromHomeRequestId=this.data.workFromHomeRequestId,this.isSuperAdmin()?this.getResources():this.getReporters(),this.resourceFilterCtrl.valueChanges.pipe((0,F.R)(this._onDestroy)).subscribe(function(){e.filterIdentifiers(e.resourcesIdentifiers,e.filteredResources,e.resourceFilterCtrl)}),this.forbiddenResources=this.currentUser.groupId!==f.Fl.SuperAdmin&&!this.currentUser.hasSubordinates,this.data&&(this.workFromHomeRequest=new S.ml,this.isEdit=this.data.isEdit,this.isEdit?(this.modelTitel="Edit Work From Home Request",this.getWorkFromHomeRequestInProgress()):(this.modelTitel="Add Work From Home Request",this.workFromHomeRequest.userId=this.currentUser.userId))}},{key:"getWorkFromHomeRequestInProgress",value:function(){var e=this;this.workFromHomeRequestId&&this.workFromHomeService.getWorkHomeRequestInProgress(this.workFromHomeRequestId).subscribe(function(t){0!==t.length?(e.workFromHomeRequest=Object.assign(new S.ml,t[0]),e.workFromHomeRequest.startDate=new Date(e.workFromHomeRequest.startDate),e.workFromHomeRequest.endDate=new Date(e.workFromHomeRequest.endDate),e.initialWorkFromHomeRequest=Object.assign(new S.ml,t[0]),e.initialWorkFromHomeRequest.startDate=new Date(e.initialWorkFromHomeRequest.startDate),e.initialWorkFromHomeRequest.endDate=new Date(e.initialWorkFromHomeRequest.endDate),null!==e.workFromHomeRequest.halfDay&&(e.isHalfDayChecked=!0)):(e.close(),e.workFromHomeService.refreshWorkFomHomeRequest.next(),e.notificationService.danger("This Work From Home Request does not yet exist or not in progress"))})}},{key:"OnChangeHalfDay",value:function(){this.isHalfDayChecked?this.workFromHomeRequest.endDate=this.workFromHomeRequest.startDate:this.workFromHomeRequest.halfDay=null}},{key:"getResources",value:function(){var e=this;this.workFromHomeService.getResources().subscribe(function(t){null!=t&&(e.resourcesIdentifiers=t,e.filteredResources.next(e.resourcesIdentifiers.slice()))})}},{key:"getReporters",value:function(){var e=this;this.workFromHomeService.getReporters(this.currentUser.userId).subscribe(function(t){null!=t&&(e.resourcesIdentifiers=t,e.filteredResources.next(e.resourcesIdentifiers.slice()))})}},{key:"isSuperAdmin",value:function(){return this.currentUser.groupId===f.Fl.SuperAdmin}},{key:"filterIdentifiers",value:function(e,t,r){if(e){var n=r.value;n?(n=n.toLowerCase(),t.next(e.filter(function(e){return e.description.toLowerCase().indexOf(n)>-1}))):t.next(e.slice())}}},{key:"close",value:function(){this.dialogRef.close()}},{key:"cancel",value:function(){this.close()}},{key:"dateOnly",value:function(e){return this.dateTimeService.dateOnly(e)}},{key:"onChangingDate",value:function(){(this.isHalfDayChecked||!this.workFromHomeRequest.endDate||this.workFromHomeRequest.startDate>this.workFromHomeRequest.endDate)&&(this.workFromHomeRequest.endDate=this.workFromHomeRequest.startDate)}},{key:"formControl",value:function(){this.errorMessage="";var e=!0;return this.workFromHomeRequest.startDate>this.workFromHomeRequest.endDate&&(this.errorMessage="End Date must be greater than Start Date.",e=!1),this.isHalfDayChecked&&(""===this.workFromHomeRequest.halfDay||null===this.workFromHomeRequest.halfDay)&&(this.errorMessage="Day Time is required",e=!1),e}},{key:"save",value:function(){var e=this;this.workFromHomeRequestForm.valid?this.formControl()?(this.prepareWorkFromHomeRequest(this.workFromHomeRequest),this.workFromHomeService.IsDateExistOrInProgressWorkHome(this.workFromHomeRequest.workHomeRequestId,this.workFromHomeRequest.userId,this.workFromHomeRequest.startDate,this.workFromHomeRequest.endDate).subscribe(function(t){switch(t){case 0:e.workFromHomeService.insertOrUpdateWorkFromHomeRequest(e.workFromHomeRequest).subscribe(function(){e.notifications(),e.close(),e.workFromHomeService.refreshWorkFomHomeRequest.next()});break;case 1:e.close(),e.workFromHomeService.refreshWorkFomHomeRequest.next(),e.notificationService.danger("This Work From Home Request does not yet exist or not in progress");break;case 2:e.notificationService.danger("This person has a work from home request at this date.")}})):this.notificationService.danger(this.errorMessage):this.notificationService.danger("Please fill all required fields")}},{key:"notifications",value:function(){this.isEdit?this.checkModification(this.initialWorkFromHomeRequest,this.workFromHomeRequest)&&(this.notificationService.success("This Work From Home Request is modified successfully"),this.mailService.workFromHomeRequestModified(this.workFromHomeRequest,this.initialWorkFromHomeRequest)):(this.notificationService.success("This Work From Home Request is added successfully"),this.mailService.workFromHomeRequestAdded(this.workFromHomeRequest))}},{key:"prepareWorkFromHomeRequest",value:function(e){0===e.workHomeRequestId&&(e.state=1),e.motive="",e.userFullName=this.resourcesIdentifiers.find(function(t){return t.id===e.userId}).description,e.dayNumber=this.calculateBetweenDates()}},{key:"calculateBetweenDates",value:function(){var e=0;if(this.isHalfDayChecked)e=.5;else{var t=new Date(this.workFromHomeRequest.startDate);e=(new Date(this.workFromHomeRequest.endDate).getTime()-t.getTime())/864e5+1}return console.log(e),e}},{key:"checkModification",value:function(e,t){var r=!1;return(e.startDate!==t.startDate||e.endDate!==t.endDate||e.halfDay!==t.halfDay||e.dayNumber!==t.dayNumber)&&(r=!0),r}}]),t}()).\u0275fac=function(e){return new(e||W)(b.\u0275\u0275directiveInject(w.P),b.\u0275\u0275directiveInject(u.gq),b.\u0275\u0275directiveInject(u.YT),b.\u0275\u0275directiveInject(i.DatePipe),b.\u0275\u0275directiveInject(l.so),b.\u0275\u0275directiveInject(l.WI))},W.\u0275cmp=b.\u0275\u0275defineComponent({type:W,selectors:[["app-edit-work-from-home-request"]],viewQuery:function(e,t){var r;1&e&&b.\u0275\u0275viewQuery(E,7),2&e&&b.\u0275\u0275queryRefresh(r=b.\u0275\u0275loadQuery())&&(t.workFromHomeRequestForm=r.first)},decls:47,vars:20,consts:[[1,"modal_header"],[1,"modal_title"],[1,"material-icons","modal-close",3,"click"],[1,"modal_body"],["placement","bottom",1,"p-20","z-depth-top-0","waves-effect"],["id","workFromHomeRequestForm"],["workFromHomeRequestForm","ngForm"],[1,"row","m-b-6"],[1,"col-sm-12"],["placeholder","Resource","name","resource","required","",3,"ngModel","disabled","ngModelChange"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["ngxMatSelectSearchClear",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-6"],["name","halfDayCheckBox",1,"checkbox-halfday",3,"ngModel","ngModelChange","change"],["placeholder","Day Time...","name","DayTime",3,"disabled","ngModel","ngModelChange"],[1,"date-field","col-sm-6"],["name","startDate","matInput","","placeholder","From","required","",3,"matDatepicker","ngModel","keypress","ngModelChange"],["matSuffix","",3,"for"],["picker11",""],["name","EndDate","matInput","","placeholder","To","required","",3,"matDatepicker","disabled","ngModel","keypress","ngModelChange"],["picker22",""],[1,"row","m-t-20"],[1,"col-lg-12"],[1,"row","f-right"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","submit",1,"btn","btn-primary","ripple","light","btn-md",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"div",0),b.\u0275\u0275elementStart(1,"div",1),b.\u0275\u0275elementStart(2,"span"),b.\u0275\u0275text(3),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(4,"span"),b.\u0275\u0275elementStart(5,"em",2),b.\u0275\u0275listener("click",function(){return t.close()}),b.\u0275\u0275text(6,"close"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(7,"div",3),b.\u0275\u0275elementStart(8,"div",4),b.\u0275\u0275elementStart(9,"form",5,6),b.\u0275\u0275elementStart(11,"div",7),b.\u0275\u0275elementStart(12,"mat-form-field",8),b.\u0275\u0275elementStart(13,"mat-select",9),b.\u0275\u0275listener("ngModelChange",function(e){return t.workFromHomeRequest.userId=e}),b.\u0275\u0275elementStart(14,"mat-option"),b.\u0275\u0275elementStart(15,"ngx-mat-select-search",10),b.\u0275\u0275elementStart(16,"mat-icon",11),b.\u0275\u0275text(17,"close"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275template(18,M,2,2,"mat-option",12),b.\u0275\u0275pipe(19,"async"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(20,"div",7),b.\u0275\u0275elementStart(21,"div",13),b.\u0275\u0275elementStart(22,"mat-checkbox",14),b.\u0275\u0275listener("ngModelChange",function(e){return t.isHalfDayChecked=e})("change",function(){return t.OnChangeHalfDay()}),b.\u0275\u0275text(23," Half Day "),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(24,"mat-form-field",13),b.\u0275\u0275elementStart(25,"mat-select",15),b.\u0275\u0275listener("ngModelChange",function(e){return t.workFromHomeRequest.halfDay=e}),b.\u0275\u0275template(26,A,2,2,"mat-option",12),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(27,"div",7),b.\u0275\u0275elementStart(28,"mat-form-field",16),b.\u0275\u0275elementStart(29,"input",17),b.\u0275\u0275listener("keypress",function(e){return t.dateOnly(e)})("ngModelChange",function(e){return t.workFromHomeRequest.startDate=e})("ngModelChange",function(){return t.onChangingDate()}),b.\u0275\u0275elementEnd(),b.\u0275\u0275element(30,"mat-datepicker-toggle",18),b.\u0275\u0275element(31,"mat-datepicker",null,19),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(33,"mat-form-field",16),b.\u0275\u0275elementStart(34,"input",20),b.\u0275\u0275listener("keypress",function(e){return t.dateOnly(e)})("ngModelChange",function(e){return t.workFromHomeRequest.endDate=e}),b.\u0275\u0275elementEnd(),b.\u0275\u0275element(35,"mat-datepicker-toggle",18),b.\u0275\u0275element(36,"mat-datepicker",null,21),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(38,"div",22),b.\u0275\u0275elementStart(39,"div",23),b.\u0275\u0275elementStart(40,"div",24),b.\u0275\u0275elementStart(41,"div",23),b.\u0275\u0275elementStart(42,"button",25),b.\u0275\u0275listener("click",function(){return t.cancel()}),b.\u0275\u0275text(43,"Cancel"),b.\u0275\u0275elementEnd(),b.\u0275\u0275text(44," \xa0 \xa0 "),b.\u0275\u0275elementStart(45,"button",26),b.\u0275\u0275listener("click",function(){return t.save()}),b.\u0275\u0275text(46," Save "),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd()),2&e){var r=b.\u0275\u0275reference(32),n=b.\u0275\u0275reference(37);b.\u0275\u0275advance(3),b.\u0275\u0275textInterpolate1(" ",t.modelTitel," "),b.\u0275\u0275advance(10),b.\u0275\u0275property("ngModel",t.workFromHomeRequest.userId)("disabled",t.isEdit||t.forbiddenResources),b.\u0275\u0275advance(2),b.\u0275\u0275property("formControl",t.resourceFilterCtrl)("placeholderLabel","Search")("noEntriesFoundLabel","No options found"),b.\u0275\u0275advance(3),b.\u0275\u0275property("ngForOf",b.\u0275\u0275pipeBind1(19,18,t.filteredResources)),b.\u0275\u0275advance(4),b.\u0275\u0275property("ngModel",t.isHalfDayChecked),b.\u0275\u0275advance(3),b.\u0275\u0275property("disabled",!t.isHalfDayChecked)("ngModel",t.workFromHomeRequest.halfDay),b.\u0275\u0275advance(1),b.\u0275\u0275property("ngForOf",t.halefDayItems),b.\u0275\u0275advance(3),b.\u0275\u0275property("matDatepicker",r)("ngModel",t.workFromHomeRequest.startDate),b.\u0275\u0275advance(1),b.\u0275\u0275property("for",r),b.\u0275\u0275advance(4),b.\u0275\u0275property("matDatepicker",n)("disabled",t.isHalfDayChecked)("ngModel",t.workFromHomeRequest.endDate),b.\u0275\u0275advance(1),b.\u0275\u0275property("for",n)}},directives:[y.\u0275NgNoValidate,y.NgControlStatusGroup,y.NgForm,x.KE,R.gD,y.RequiredValidator,y.NgControlStatus,y.NgModel,s.ey,H.nu,y.FormControlDirective,C.Hw,H.w5,i.NgForOf,D.oG,q.Nt,I.hl,y.DefaultValueAccessor,I.nW,x.R9,I.Mq],pipes:[i.AsyncPipe],styles:[".col-sm-2[_ngcontent-%COMP%]{width:auto}.icon-pointer[_ngcontent-%COMP%]{cursor:pointer}.th-firstCell-style[_ngcontent-%COMP%]{font-weight:bolder}.th-table-style[_ngcontent-%COMP%]{text-align:center;font-weight:bolder}.td-table-style[_ngcontent-%COMP%]{text-align:center}.td-title-style[_ngcontent-%COMP%]{max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:center}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:5px!important;padding:0!important;overflow:hidden}.modal_body[_ngcontent-%COMP%]{overflow:hidden}.modal_header[_ngcontent-%COMP%]{height:50px;background-color:#3f629d;padding:18px 15px}.modal_header[_ngcontent-%COMP%]   .modal_title[_ngcontent-%COMP%]{color:#fff;line-height:1}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{float:right;cursor:pointer}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:red}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]{cursor:not-allowed;color:#dcdcdc}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]:hover{color:#dcdcdc}.checkbox-halfday[_ngcontent-%COMP%]{padding-top:15px!important}"]}),W),P=o(16738),N=o(19992),T=o(69517),j=o(39924),_=o(4885),z=o(32789),L=o(88259),B=o.n(L),J=o(11494),U=o(38590);function V(e,t){1&e&&(b.\u0275\u0275elementStart(0,"mat-header-cell",19),b.\u0275\u0275text(1,"Matricule"),b.\u0275\u0275elementEnd())}function Y(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"mat-cell",20),b.\u0275\u0275text(1),b.\u0275\u0275elementEnd()),2&e){var r=t.$implicit;b.\u0275\u0275propertyInterpolate("matTooltip",r.userNumber),b.\u0275\u0275advance(1),b.\u0275\u0275textInterpolate1(" ",r.userNumber," ")}}function $(e,t){1&e&&(b.\u0275\u0275elementStart(0,"mat-header-cell",19),b.\u0275\u0275text(1,"Resource"),b.\u0275\u0275elementEnd())}function G(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"mat-cell"),b.\u0275\u0275text(1),b.\u0275\u0275elementEnd()),2&e){var r=t.$implicit;b.\u0275\u0275advance(1),b.\u0275\u0275textInterpolate1(" ",r.userFullName," ")}}function Q(e,t){1&e&&(b.\u0275\u0275elementStart(0,"mat-header-cell",19),b.\u0275\u0275text(1,"Activity"),b.\u0275\u0275elementEnd())}function K(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"mat-cell",20),b.\u0275\u0275text(1),b.\u0275\u0275elementEnd()),2&e){var r=t.$implicit;b.\u0275\u0275propertyInterpolate("matTooltip",r.userActivity),b.\u0275\u0275advance(1),b.\u0275\u0275textInterpolate1(" ",r.activityName," ")}}function Z(e,t){1&e&&(b.\u0275\u0275elementStart(0,"mat-header-cell",19),b.\u0275\u0275text(1,"Start Date"),b.\u0275\u0275elementEnd())}function X(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"mat-cell"),b.\u0275\u0275text(1),b.\u0275\u0275pipe(2,"date"),b.\u0275\u0275elementEnd()),2&e){var r=t.$implicit;b.\u0275\u0275advance(1),b.\u0275\u0275textInterpolate1(" ",b.\u0275\u0275pipeBind2(2,1,r.startDate,"E dd/MM/y")," ")}}function ee(e,t){1&e&&(b.\u0275\u0275elementStart(0,"mat-header-cell",19),b.\u0275\u0275text(1,"End Date"),b.\u0275\u0275elementEnd())}function te(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"mat-cell"),b.\u0275\u0275text(1),b.\u0275\u0275pipe(2,"date"),b.\u0275\u0275elementEnd()),2&e){var r=t.$implicit;b.\u0275\u0275advance(1),b.\u0275\u0275textInterpolate1(" ",b.\u0275\u0275pipeBind2(2,1,r.endDate,"E dd/MM/y")," ")}}function re(e,t){1&e&&(b.\u0275\u0275elementStart(0,"mat-header-cell",19),b.\u0275\u0275text(1,"Day(s)"),b.\u0275\u0275elementEnd())}function ne(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"mat-cell"),b.\u0275\u0275text(1),b.\u0275\u0275elementEnd()),2&e){var r=t.$implicit;b.\u0275\u0275advance(1),b.\u0275\u0275textInterpolate1(" ",r.dayNumber," ")}}function oe(e,t){1&e&&(b.\u0275\u0275elementStart(0,"mat-header-cell",19),b.\u0275\u0275text(1,"Day Time"),b.\u0275\u0275elementEnd())}function ie(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"mat-cell"),b.\u0275\u0275text(1),b.\u0275\u0275elementEnd()),2&e){var r=t.$implicit;b.\u0275\u0275advance(1),b.\u0275\u0275textInterpolate1(" ",r.halfDay," ")}}function ae(e,t){1&e&&(b.\u0275\u0275elementStart(0,"mat-header-cell",19),b.\u0275\u0275text(1,"Status"),b.\u0275\u0275elementEnd())}var se=function(e,t,r){return{"label-default":e,"label-success":t,"label-danger":r}};function le(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"mat-cell"),b.\u0275\u0275elementStart(1,"label",21),b.\u0275\u0275text(2),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd()),2&e){var r=t.$implicit,n=b.\u0275\u0275nextContext(2);b.\u0275\u0275advance(1),b.\u0275\u0275property("ngClass",b.\u0275\u0275pureFunction3(2,se,n.isInProgress(r),n.isApproved(r),n.isRejected(r))),b.\u0275\u0275advance(1),b.\u0275\u0275textInterpolate1(" ",n.getworkFromHomeLabel(r.state),"")}}function me(e,t){1&e&&b.\u0275\u0275element(0,"mat-header-cell")}function de(e,t){if(1&e){var r=b.\u0275\u0275getCurrentView();b.\u0275\u0275elementStart(0,"mat-cell"),b.\u0275\u0275elementStart(1,"button",22),b.\u0275\u0275listener("click",function(){var e=b.\u0275\u0275restoreView(r).$implicit;return b.\u0275\u0275nextContext(2).approveWorkFromHomeRequest(e)}),b.\u0275\u0275elementStart(2,"em",23),b.\u0275\u0275text(3,"done"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(4,"button",24),b.\u0275\u0275listener("click",function(){var e=b.\u0275\u0275restoreView(r).$implicit;return b.\u0275\u0275nextContext(2).rejectWorkFromHomeRequest(e)}),b.\u0275\u0275elementStart(5,"em",23),b.\u0275\u0275text(6,"cancel"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(7,"button",25),b.\u0275\u0275listener("click",function(){var e=b.\u0275\u0275restoreView(r).$implicit;return b.\u0275\u0275nextContext(2).openEditRequestDialog(e)}),b.\u0275\u0275elementStart(8,"em",23),b.\u0275\u0275text(9,"edit"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(10,"button",26),b.\u0275\u0275listener("click",function(){var e=b.\u0275\u0275restoreView(r).$implicit;return b.\u0275\u0275nextContext(2).deleteWorkFromHomeRequest(e)}),b.\u0275\u0275elementStart(11,"em",23),b.\u0275\u0275text(12,"delete"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd()}if(2&e){var n=t.$implicit,o=b.\u0275\u0275nextContext(2);b.\u0275\u0275advance(1),b.\u0275\u0275property("disabled",o.forbiddenRejecteValidate||o.isMyWorkFromHomeRequestApprovedAndRejected(n)||o.isMyWorkFromHomeRequestInProgress(n)||o.isApproved(n)||o.isRejected(n)),b.\u0275\u0275advance(3),b.\u0275\u0275property("disabled",o.forbiddenRejectValidate||o.isMyWorkFromHomeRequestApprovedAndRejected(n)||o.isMyWorkFromHomeRequestInProgress(n)||o.isRejected(n)),b.\u0275\u0275advance(3),b.\u0275\u0275property("disabled",o.isMyWorkFromHomeRequestApprovedAndRejected(n)||o.isApproved(n)||o.isRejected(n)),b.\u0275\u0275advance(3),b.\u0275\u0275property("disabled",o.isMyWorkFromHomeRequestApprovedAndRejected(n))}}function ce(e,t){1&e&&b.\u0275\u0275element(0,"mat-header-row",27)}function ue(e,t){1&e&&b.\u0275\u0275element(0,"mat-row")}function he(e,t){if(1&e){var r=b.\u0275\u0275getCurrentView();b.\u0275\u0275elementStart(0,"div",1),b.\u0275\u0275elementStart(1,"mat-table",2,3),b.\u0275\u0275listener("matSortChange",function(e){return b.\u0275\u0275restoreView(r),b.\u0275\u0275nextContext().onSortData(e)}),b.\u0275\u0275elementContainerStart(3,4),b.\u0275\u0275template(4,V,2,0,"mat-header-cell",5),b.\u0275\u0275template(5,Y,2,2,"mat-cell",6),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(6,7),b.\u0275\u0275template(7,$,2,0,"mat-header-cell",5),b.\u0275\u0275template(8,G,2,1,"mat-cell",8),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(9,9),b.\u0275\u0275template(10,Q,2,0,"mat-header-cell",5),b.\u0275\u0275template(11,K,2,2,"mat-cell",6),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(12,10),b.\u0275\u0275template(13,Z,2,0,"mat-header-cell",5),b.\u0275\u0275template(14,X,3,4,"mat-cell",8),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(15,11),b.\u0275\u0275template(16,ee,2,0,"mat-header-cell",5),b.\u0275\u0275template(17,te,3,4,"mat-cell",8),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(18,12),b.\u0275\u0275template(19,re,2,0,"mat-header-cell",5),b.\u0275\u0275template(20,ne,2,1,"mat-cell",8),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(21,13),b.\u0275\u0275template(22,oe,2,0,"mat-header-cell",5),b.\u0275\u0275template(23,ie,2,1,"mat-cell",8),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(24,14),b.\u0275\u0275template(25,ae,2,0,"mat-header-cell",5),b.\u0275\u0275template(26,le,3,6,"mat-cell",8),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(27,15),b.\u0275\u0275template(28,me,1,0,"mat-header-cell",16),b.\u0275\u0275template(29,de,13,4,"mat-cell",8),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275template(30,ce,1,0,"mat-header-row",17),b.\u0275\u0275template(31,ue,1,0,"mat-row",18),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd()}if(2&e){var n=b.\u0275\u0275nextContext();b.\u0275\u0275advance(1),b.\u0275\u0275property("dataSource",n.dataSource),b.\u0275\u0275advance(29),b.\u0275\u0275property("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),b.\u0275\u0275advance(1),b.\u0275\u0275property("matRowDefColumns",n.displayedColumns)}}var pe=function(){var t=function(){function t(r,n,o,i,a,s){e(this,t),this.notificationService=r,this.dialog=n,this.searchFilterService=o,this.workFromHomeService=i,this.mailService=a,this.dateTimeService=s,this.displayedColumns=["userNumber","userFullName","activityName","startDate","endDate","dayNumber","halfDay","state","buttons"],this.dataSource=new z.by,this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.forbiddenRejectValidate=!0,this.listView=!1}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.forbiddenRejectValidate=this.currentUser.groupId!==f.Fl.SuperAdmin&&!this.currentUser.hasSubordinates,0!==this.workFromHomeRequests.length&&(this.listView=!0),this.selectedWorkHomeRequestId=0,this.dataSource=new z.by(this.workFromHomeRequests),this.subscription=this.searchFilterService.resultChanged.subscribe(function(){e.dataSource=new z.by(e.searchFilterService.showingDataLastFilter)})}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onSortData",value:function(e){this.workFromHomeService.sortWorkFromHomeRequest.next(e)}},{key:"isMyWorkFromHomeRequestApprovedAndRejected",value:function(e){return e.userId===this.currentUser.userId&&(e.state===S.Jq.Approved||e.state===S.Jq.Rejected)}},{key:"isApproved",value:function(e){return e.state===S.Jq.Approved}},{key:"isRejected",value:function(e){return e.state===S.Jq.Rejected}},{key:"isInProgress",value:function(e){return e.state===S.Jq.InProgress}},{key:"isMyWorkFromHomeRequestInProgress",value:function(e){return e.userId===this.currentUser.userId&&e.state===S.Jq.InProgress}},{key:"getworkFromHomeLabel",value:function(e){switch(e){case S.Jq.InProgress:return S.he.InProgress;case S.Jq.Approved:return S.he.Approved;case S.Jq.Rejected:return S.he.Rejected;default:return""}}},{key:"openEditRequestDialog",value:function(e){this.displayAddRequestComponentdialogRef=this.dialog.open(O,{disableClose:!1,hasBackdrop:!0,width:"500px",height:"350px",data:{workFromHomeRequestId:e.workHomeRequestId,isEdit:!0}})}},{key:"deleteWorkFromHomeRequest",value:function(e){var t=this;B().fire({text:"Are you sure to delete this Work From Home ".concat(this.getworkFromHomeLabel(e.state)," Request for ").concat(e.userFullName," from ").concat(this.dateTimeService.getShortFormat(e.startDate)," to ").concat(this.dateTimeService.getShortFormat(e.endDate)," ?"),icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",showLoaderOnConfirm:!0,preConfirm:function(){t.workFromHomeService.deleteWorkFromHomeRequest(e.workHomeRequestId,t.currentUser.userId).subscribe(function(r){0!==r?(t.notificationService.success("This Work From Home Request is deleted"),t.workFromHomeService.refreshWorkFomHomeRequest.next(),e.state===S.Jq.Approved&&t.mailService.workFromHomeRequestDeleted(e)):(t.workFromHomeService.refreshWorkFomHomeRequest.next(),t.notificationService.danger("Delete Work From Home Request failed"))},function(){t.notificationService.danger("Delete Work From Home Request failed"),t.workFromHomeService.refreshWorkFomHomeRequest.next()})}})}},{key:"rejectWorkFromHomeRequest",value:function(e){var t=this;B().fire({text:"Are you sure to reject this Work From Home ".concat(this.getworkFromHomeLabel(e.state)," Request for ").concat(e.userFullName," from ").concat(this.dateTimeService.getShortFormat(e.startDate)," to ").concat(this.dateTimeService.getShortFormat(e.endDate)," ?"),icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, reject it!",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:function(){t.workFromHomeService.updateStatusWorkFromHomeRequest(e,S.Jq.Rejected).subscribe(function(r){0!==r?(t.notificationService.success("This Work From Home Request is rejected"),t.workFromHomeService.refreshWorkFomHomeRequest.next(),t.mailService.workFromHomeRequestRejected(e)):(t.workFromHomeService.refreshWorkFomHomeRequest.next(),t.notificationService.danger("Reject Work From Home Request failed"),t.workFromHomeService.refreshWorkFomHomeRequest.next())},function(){t.notificationService.danger("Reject Work From Home Request failed"),t.workFromHomeService.refreshWorkFomHomeRequest.next()})}})}},{key:"approveWorkFromHomeRequest",value:function(e){var t=this;this.workFromHomeService.updateStatusWorkFromHomeRequest(e,S.Jq.Approved).subscribe(function(r){0!==r?(t.notificationService.success("This Work From Home Request is approved"),t.workFromHomeService.refreshWorkFomHomeRequest.next(),t.mailService.workFromHomeRequestApproved(e)):(t.workFromHomeService.refreshWorkFomHomeRequest.next(),t.notificationService.danger("Approve Work From Home Request failed"),t.workFromHomeService.refreshWorkFomHomeRequest.next())},function(){t.notificationService.danger("Approve Work From Home Request failed"),t.workFromHomeService.refreshWorkFomHomeRequest.next()})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(b.\u0275\u0275directiveInject(u.gq),b.\u0275\u0275directiveInject(l.uw),b.\u0275\u0275directiveInject(u.nJ),b.\u0275\u0275directiveInject(w.P),b.\u0275\u0275directiveInject(u.YT),b.\u0275\u0275directiveInject(u.Cv))},t.\u0275cmp=b.\u0275\u0275defineComponent({type:t,selectors:[["app-work-from-home-request-table"]],inputs:{workFromHomeRequests:"workFromHomeRequests"},decls:1,vars:1,consts:[["class","example-container mat-elevation-z8",4,"ngIf"],[1,"example-container","mat-elevation-z8"],["matSort","","matSortDirection","asc","matSortDisableClear","",3,"dataSource","matSortChange"],["table",""],["matColumnDef","userNumber",1,"table-hover","table-striped","table-styling"],["mat-sort-header","",4,"matHeaderCellDef"],[3,"matTooltip",4,"matCellDef"],["matColumnDef","userFullName"],[4,"matCellDef"],["matColumnDef","activityName"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","dayNumber"],["matColumnDef","halfDay"],["matColumnDef","state"],["matColumnDef","buttons"],[4,"matHeaderCellDef"],["class"," table-primary table-*",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[3,"matTooltip"],[1,"label",3,"ngClass"],["type","button","matTooltip","Approve",1,"btn","btn-mini","btn-primary","m-r-5","ripple","light","f-right",3,"disabled","click"],[1,"material-icons"],["type","button","matTooltip","Reject",1,"btn","btn-mini","btn-danger","m-r-5","ripple","light",3,"disabled","click"],["type","button","matTooltip","Edit",1,"btn","btn-mini","btn-primary","m-r-5","ripple","light",3,"disabled","click"],["type","button","matTooltip","Delete",1,"btn","btn-mini","btn-danger","ripple","light",3,"disabled","click"],[1,"table-primary","table-*"]],template:function(e,t){1&e&&b.\u0275\u0275template(0,he,32,4,"div",0),2&e&&b.\u0275\u0275property("ngIf",t.listView)},directives:[i.NgIf,z.BZ,J.YE,z.w1,z.fO,z.Dz,z.as,z.nj,z.ge,J.nU,z.ev,U.gM,i.NgClass,z.XQ,z.Gk],pipes:[i.DatePipe],styles:[".mat-table[_ngcontent-%COMP%]{overflow:auto;border-radius:4px;max-height:calc(100vh - 392px)}.mat-header-cell[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:600}.material-icons[_ngcontent-%COMP%]{font-size:15px}table[_ngcontent-%COMP%]{width:100%}.mat-column-Ressource[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 17%!important;width:17%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-clientName[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 20%!important;width:20%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-missionStartDate[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 9%!important;width:9%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-missionEndDate[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 9%!important;width:9%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-invoicing[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 9%!important;width:9%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-etatMission[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 11%!important;width:11%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-buttons[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 12%!important;width:12%!important;overflow-wrap:break-word;justify-content:center;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}  .mat-sort-header-arrow{color:#fff}"]}),t}(),fe=o(34239);function ge(e,t){if(1&e){var r=b.\u0275\u0275getCurrentView();b.\u0275\u0275elementStart(0,"mat-checkbox",38),b.\u0275\u0275listener("ngModelChange",function(e){return b.\u0275\u0275restoreView(r),b.\u0275\u0275nextContext().onlyMySubordinates=e}),b.\u0275\u0275text(1," Mines "),b.\u0275\u0275elementEnd()}if(2&e){var n=b.\u0275\u0275nextContext();b.\u0275\u0275property("ngModel",n.onlyMySubordinates)}}function ve(e,t){1&e&&(b.\u0275\u0275elementStart(0,"div"),b.\u0275\u0275elementStart(1,"h1"),b.\u0275\u0275text(2,"No Result Found"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd())}function ke(e,t){1&e&&(b.\u0275\u0275elementStart(0,"div",39),b.\u0275\u0275elementStart(1,"div",40),b.\u0275\u0275elementStart(2,"div",41),b.\u0275\u0275elementStart(3,"div",1),b.\u0275\u0275elementStart(4,"div",42),b.\u0275\u0275element(5,"mat-spinner"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd())}function Se(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"div",43),b.\u0275\u0275element(1,"app-work-from-home-request-table",44),b.\u0275\u0275pipe(2,"paginator"),b.\u0275\u0275elementEnd()),2&e){var r=b.\u0275\u0275nextContext();b.\u0275\u0275classProp("blurred",r.isLoading),b.\u0275\u0275advance(1),b.\u0275\u0275property("workFromHomeRequests",b.\u0275\u0275pipeBind3(2,3,r.workFromHomeRequests,r.searchFilterService.pageIndex,r.searchFilterService.pageSize))}}var we=[{path:"",data:{title:"work-from-home",function:f.FI.WorkFromHome,status:!1},canActivate:[g.a1],children:[{canActivate:[g.a1],path:"work-from-home",component:function(){var t=function(){function t(r){e(this,t),this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.dropdownSettings={},this.dropdownSettingsStatus={},this.activitiesIdentifiers=[],this.selectedActivitiesIdentifiers=[],this.statusIdentifiers=[],this.selectedStatusesIdentifiers=[],this.workFromHomeRequests=[],this.isLoading=!1,this.destroyed=new v.xQ,this.forbiddenActivityResource=!0,this.onlyMySubordinates=!0,this.workFromHomeService=r.get(w.P),this.searchFilterService=r.get(u.nJ),this.sortService=r.get(u.Kx),this.dateTimeService=r.get(u.Cv),this.excelService=r.get(u.xB),this.router=r.get(p.F0),this.paginatorPipe=new k.Ry(this.searchFilterService),this.dialog=r.get(l.uw)}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.listView=!1,this.emptyResult=!1,this.searchFilterService.pageIndex=0,this.searchFilterService.pageSize=24,this.dropdownSettings={singleSelection:!1,idField:"id",textField:"description",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,enableCheckAll:!0,allowSearchFilter:!0,maxHeight:150,placeholder:"criteria",searchPlaceholderText:"Search..."},this.dropdownSettingsStatus={singleSelection:!1,idField:"id",textField:"description",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,enableCheckAll:!0,allowSearchFilter:!1,maxHeight:150,placeholder:"criteria",searchPlaceholderText:"Search..."},this.forbiddenActivityResource=this.currentUser.groupId!==f.Fl.SuperAdmin&&!this.currentUser.hasSubordinates,this.isSuperAdmin()&&!1===this.currentUser.hasSubordinates&&(this.onlyMySubordinates=!1),this.getActivities(),this.getStatus(),this.getPersistedFilter(),this.subscription=this.workFromHomeService.sortWorkFromHomeRequest.subscribe(function(t){e.onSortData(t)}),this.refreshSubscription=this.workFromHomeService.refreshWorkFomHomeRequest.subscribe(function(){e.getPersistedFilter(),e.getWorkFromHomeRequests()})}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"getActivities",value:function(){var e=this;this.workFromHomeService.getActivities().subscribe(function(t){null!=t&&(e.activitiesIdentifiers=t)})}},{key:"getStatus",value:function(){var e=this;this.workFromHomeService.getStatus().subscribe(function(t){null!=t&&(e.statusIdentifiers=t)})}},{key:"filterWorkFromHomeRequest",value:function(){this.searchFilterService.pageIndex=0,this.persistFilter(),this.getWorkFromHomeRequests()}},{key:"onResetAllFilters",value:function(){sessionStorage.removeItem("workFromHomeSearch");var e=new Date;this.fromDate=new Date(e.getFullYear(),e.getMonth()-1,1),this.toDate=new Date(e.getFullYear(),e.getMonth()+1,0),this.resourceName="",this.selectedStatusesIdentifiers=[],this.selectedActivitiesIdentifiers=[]}},{key:"dateOnly",value:function(e){return this.dateTimeService.dateOnly(e)}},{key:"onSortData",value:function(e){var t=this;e.active&&""!==e.direction&&void 0!==this.workFromHomeRequests&&this.workFromHomeRequests.sort(function(r,n){var o="asc"===e.direction;switch(e.active){case"userNumber":return t.sortService.compare(r.userNumber,n.userNumber,o,!1);case"userFullName":return t.sortService.compare(r.userFullName,n.userFullName,o,!1);case"activityName":return t.sortService.compare(r.activityName,n.activityName,o,!1);case"startDate":return t.sortService.compare(r.startDate,n.startDate,o,!1);case"endDate":return t.sortService.compare(r.endDate,n.endDate,o,!1);case"state":return t.sortService.compare(r.state,n.state,o,!1);case"halfDay":return t.sortService.compare(r.halfDay,n.halfDay,o,!1);default:return 0}}),this.paginatorPipe.transform(this.workFromHomeRequests,this.searchFilterService.pageIndex,this.searchFilterService.pageSize)}},{key:"isSuperAdmin",value:function(){return this.currentUser.groupId===f.Fl.SuperAdmin}},{key:"openEditRequestDialog",value:function(){this.displayAddRequestComponentdialogRef=this.dialog.open(O,{disableClose:!1,hasBackdrop:!0,width:"500px",height:"350px",data:{isEdit:!1}})}},{key:"onClickingEnter",value:function(e){"Enter"===e.key&&this.filterWorkFromHomeRequest()}},{key:"persistFilter",value:function(){var e=new S.nK;e.periodFrom=this.fromDate,e.periodTo=this.toDate,e.mines=this.onlyMySubordinates,e.resourceName=this.resourceName,e.selectedStatusesIdentifiers=this.selectedStatusesIdentifiers,e.selectedActivitiesIdentifiers=this.selectedActivitiesIdentifiers,sessionStorage.setItem("workFromHomeSearch",JSON.stringify(e))}},{key:"getPersistedFilter",value:function(){var e=JSON.parse(sessionStorage.getItem("workFromHomeSearch"));if(null!==e)null!=e.periodFrom&&(this.fromDate=e.periodFrom),null!=e.periodTo&&(this.toDate=e.periodTo),this.onlyMySubordinates=e.mines,this.resourceName=e.resourceName,this.selectedStatusesIdentifiers=e.selectedStatusesIdentifiers,this.selectedActivitiesIdentifiers=e.selectedActivitiesIdentifiers;else{var t=new Date;this.fromDate=new Date(t.getFullYear(),t.getMonth()-1,1),this.toDate=new Date(t.getFullYear(),t.getMonth()+1,0)}}},{key:"getWorkFromHomeRequests",value:function(){var e,t=this;this.isLoading=!0,e=this.isSuperAdmin()&&!1===this.onlyMySubordinates?214:this.currentUser.userId,this.selectedActivitiesIds=this.selectedActivitiesIdentifiers.map(function(e){return e.id}).join(","),this.selectedStatusesIds=this.selectedStatusesIdentifiers.map(function(e){return e.id}).join(","),this.workFromHomeService.getWorkFromHomeRequests(e,this.fromDate,this.toDate,this.resourceName,this.selectedActivitiesIds,this.selectedStatusesIds).subscribe(function(e){null!=e&&(t.workFromHomeRequests=e,t.lengthWorkFromHomeRequests=t.workFromHomeRequests.length,t.listView=0!==e.length),t.isLoading=!1})}},{key:"exportToExcel",value:function(){var e=this;if(void 0!==this.workFromHomeRequests&&0!==this.workFromHomeRequests.length){var t=[],r=[];r.push({cell:"A1",font:{bold:!0}},{cell:"B1",font:{bold:!0}},{cell:"C1",font:{bold:!0}},{cell:"D1",font:{bold:!0}},{cell:"E1",font:{bold:!0}},{cell:"F1",font:{bold:!0}},{cell:"G1",font:{bold:!0}},{cell:"H1",font:{bold:!0}}),this.workFromHomeRequests.forEach(function(r){var n=[];n.push(r.userNumber),n.push(r.userFullName),n.push(r.activityName),n.push(e.getShortFormatWithDay(r.startDate)),n.push(e.getShortFormatWithDay(r.endDate)),n.push(r.dayNumber),n.push(r.halfDay),n.push(e.getworkFromHomeLabel(r.state)),t.push(n)}),this.excelService.generateExcel([{header:"Matricule",key:"userNumber",width:10},{header:"Resource",key:"userFullName",width:30},{header:"Activity",key:"activityName",width:10},{header:"Start Date",key:"startDate",width:15},{header:"End Date",key:"endDate",width:15},{header:"Days",key:"dayNumber",width:15},{header:"Day Time",key:"halfDay",width:15},{header:"Status",key:"state",width:15}],t,[],r,"Work_From_Home_Requests")}}},{key:"getShortFormatWithDay",value:function(e){if(this.dateTimeService.isNullDate(e))return"";var t=P(e).locale("ang");return t.format("ddd")+" "+t.format("L")}},{key:"getworkFromHomeLabel",value:function(e){switch(e){case S.Jq.InProgress:return S.he.InProgress;case S.Jq.Approved:return S.he.Approved;case S.Jq.Rejected:return S.he.Rejected;default:return""}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(b.\u0275\u0275directiveInject(b.Injector))},t.\u0275cmp=b.\u0275\u0275defineComponent({type:t,selectors:[["app-work-from-home"]],decls:63,vars:28,consts:[[1,"page-body"],[1,"row"],[1,"col-xl-12","col-lg-12","filter-bar"],[1,"card","m-b-10"],[1,"card-body","p-t-10"],[1,"col-xl-4","col-lg-12"],[1,"mat-subheader","col-sm-2"],[1,"date-field","col-sm-5"],["matInput","","placeholder","From",3,"matDatepicker","max","ngModel","keypress","ngModelChange","keydown"],["matSuffix","",3,"for"],["picker110",""],["matInput","","placeholder","To",3,"matDatepicker","min","ngModel","keypress","ngModelChange","keydown"],["picker220",""],[1,"mat-subheader","col-sm-2",3,"hidden"],[1,"search-input","col-sm-7",3,"hidden"],["placeholder","Search here...","matInput","","name","searchInput",3,"ngModel","ngModelChange","keydown"],[1,"col-sm-3"],[3,"ngModel","ngModelChange",4,"ngIf"],[1,"col-sm-10"],[1,"multi-search",2,"width","100%",3,"placeholder","data","ngModel","hidden","settings","ngModelChange"],[1,"col-xl-3","col-lg-12"],[1,"multi-search",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],[1,"col-xl-1","col-lg-12"],[1,"text-center"],[1,"btn","btn-md","btn-primary","ripple","m-t-5",3,"click"],[1,"btn","btn-md","btn-default","ripple","light","m-t-10",3,"click"],[1,"navbar","navbar-light","bg-faded","m-b-10","p-10"],[1,"col-sm-4"],["type","button",1,"btn","btn-sm","btn-primary","waves-light","m-r-10","ripple",2,"font-size","inherit",3,"click"],[1,"icofont","icofont-plus"],["type","button",1,"export","btn","btn-sm","btn-primary","m-r-10",2,"font-size","inherit",3,"click"],[1,"fa","fa-file-excel-o",2,"font-size","medium"],[1,"col-sm-8"],[3,"pageSize","pageIndex","length"],[4,"ngIf"],[1,"wrapper"],["class","overlay",4,"ngIf"],["class","loaded-content",3,"blurred",4,"ngIf"],[3,"ngModel","ngModelChange"],[1,"overlay"],[1,"spinner-wrapper"],[1,"container"],["id","loader"],[1,"loaded-content"],[3,"workFromHomeRequests"]],template:function(e,t){if(1&e&&(b.\u0275\u0275elementStart(0,"div",0),b.\u0275\u0275elementStart(1,"div",1),b.\u0275\u0275elementStart(2,"div",2),b.\u0275\u0275elementStart(3,"div",3),b.\u0275\u0275elementStart(4,"div",4),b.\u0275\u0275elementStart(5,"div",1),b.\u0275\u0275elementStart(6,"div",5),b.\u0275\u0275elementStart(7,"mat-list"),b.\u0275\u0275elementStart(8,"mat-list-item"),b.\u0275\u0275elementStart(9,"h3",6),b.\u0275\u0275text(10,"Period"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(11,"mat-form-field",7),b.\u0275\u0275elementStart(12,"input",8),b.\u0275\u0275listener("keypress",function(e){return t.dateOnly(e)})("ngModelChange",function(e){return t.fromDate=e})("keydown",function(e){return t.onClickingEnter(e)}),b.\u0275\u0275elementEnd(),b.\u0275\u0275element(13,"mat-datepicker-toggle",9),b.\u0275\u0275element(14,"mat-datepicker",null,10),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(16,"mat-form-field",7),b.\u0275\u0275elementStart(17,"input",11),b.\u0275\u0275listener("keypress",function(e){return t.dateOnly(e)})("ngModelChange",function(e){return t.toDate=e})("keydown",function(e){return t.onClickingEnter(e)}),b.\u0275\u0275elementEnd(),b.\u0275\u0275element(18,"mat-datepicker-toggle",9),b.\u0275\u0275element(19,"mat-datepicker",null,12),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(21,"mat-list-item"),b.\u0275\u0275elementStart(22,"h3",13),b.\u0275\u0275text(23,"Resource"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(24,"mat-form-field",14),b.\u0275\u0275elementStart(25,"input",15),b.\u0275\u0275listener("ngModelChange",function(e){return t.resourceName=e})("keydown",function(e){return t.onClickingEnter(e)}),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(26,"div",16),b.\u0275\u0275template(27,ge,2,1,"mat-checkbox",17),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(28,"div",5),b.\u0275\u0275elementStart(29,"mat-list"),b.\u0275\u0275elementStart(30,"mat-list-item"),b.\u0275\u0275elementStart(31,"h3",13),b.\u0275\u0275text(32,"Activity"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(33,"div",18),b.\u0275\u0275elementStart(34,"ng-multiselect-dropdown",19),b.\u0275\u0275listener("ngModelChange",function(e){return t.selectedActivitiesIdentifiers=e}),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(35,"div",20),b.\u0275\u0275elementStart(36,"mat-list"),b.\u0275\u0275elementStart(37,"mat-list-item"),b.\u0275\u0275elementStart(38,"h3",6),b.\u0275\u0275text(39,"Status"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(40,"div",18),b.\u0275\u0275elementStart(41,"ng-multiselect-dropdown",21),b.\u0275\u0275listener("ngModelChange",function(e){return t.selectedStatusesIdentifiers=e}),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(42,"div",22),b.\u0275\u0275elementStart(43,"div",23),b.\u0275\u0275elementStart(44,"button",24),b.\u0275\u0275listener("click",function(){return t.filterWorkFromHomeRequest()}),b.\u0275\u0275text(45,"Search"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(46,"div",23),b.\u0275\u0275elementStart(47,"button",25),b.\u0275\u0275listener("click",function(){return t.onResetAllFilters()}),b.\u0275\u0275text(48,"Reset"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(49,"nav",26),b.\u0275\u0275elementStart(50,"div",27),b.\u0275\u0275elementStart(51,"button",28),b.\u0275\u0275listener("click",function(){return t.openEditRequestDialog()}),b.\u0275\u0275element(52,"em",29),b.\u0275\u0275text(53," Add request "),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(54,"button",30),b.\u0275\u0275listener("click",function(){return t.exportToExcel()}),b.\u0275\u0275element(55,"em",31),b.\u0275\u0275text(56," Export "),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(57,"div",32),b.\u0275\u0275element(58,"app-paginator",33),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275template(59,ve,3,0,"div",34),b.\u0275\u0275elementStart(60,"div",35),b.\u0275\u0275template(61,ke,6,0,"div",36),b.\u0275\u0275template(62,Se,3,7,"div",37),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd()),2&e){var r=b.\u0275\u0275reference(15),n=b.\u0275\u0275reference(20);b.\u0275\u0275advance(12),b.\u0275\u0275property("matDatepicker",r)("max",t.toDate)("ngModel",t.fromDate),b.\u0275\u0275advance(1),b.\u0275\u0275property("for",r),b.\u0275\u0275advance(4),b.\u0275\u0275property("matDatepicker",n)("min",t.fromDate)("ngModel",t.toDate),b.\u0275\u0275advance(1),b.\u0275\u0275property("for",n),b.\u0275\u0275advance(4),b.\u0275\u0275property("hidden",t.forbiddenActivityResource),b.\u0275\u0275advance(2),b.\u0275\u0275property("hidden",t.forbiddenActivityResource),b.\u0275\u0275advance(1),b.\u0275\u0275property("ngModel",t.resourceName),b.\u0275\u0275advance(2),b.\u0275\u0275property("ngIf",t.isSuperAdmin()),b.\u0275\u0275advance(4),b.\u0275\u0275property("hidden",t.forbiddenActivityResource),b.\u0275\u0275advance(3),b.\u0275\u0275property("placeholder","Select...")("data",t.activitiesIdentifiers)("ngModel",t.selectedActivitiesIdentifiers)("hidden",t.forbiddenActivityResource)("settings",t.dropdownSettings),b.\u0275\u0275advance(7),b.\u0275\u0275property("placeholder","Select...")("settings",t.dropdownSettingsStatus)("data",t.statusIdentifiers)("ngModel",t.selectedStatusesIdentifiers),b.\u0275\u0275advance(17),b.\u0275\u0275property("pageSize",t.searchFilterService.pageSize)("pageIndex",t.searchFilterService.pageIndex)("length",t.lengthWorkFromHomeRequests),b.\u0275\u0275advance(1),b.\u0275\u0275property("ngIf",0===t.lengthWorkFromHomeRequests),b.\u0275\u0275advance(2),b.\u0275\u0275property("ngIf",t.isLoading),b.\u0275\u0275advance(1),b.\u0275\u0275property("ngIf",t.listView)}},directives:[N.i$,N.Tg,x.KE,q.Nt,I.hl,y.DefaultValueAccessor,y.NgControlStatus,y.NgModel,I.nW,x.R9,I.Mq,i.NgIf,d.OP,T.M2,j.J,D.oG,_.$g,pe],pipes:[fe.R],styles:[".filter-button{text-align:center;width:100%;margin:2%}.search-input{font-size:14px}.date-field{font-size:14px}.pointer{cursor:pointer}.reset-all-btn{cursor:pointer;font-size:20px}.reset-all-btn:hover{color:red}.arrow-icon{font-size:10px}.close-icon{float:right;font-size:22px}.multi-search{width:100%}.ngb-accordion .card .card-header{padding-left:5px}.ngb-accordion .card .card-header .a{font-size:15px}.mat-list .mat-subheader{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.mat-list-header{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.wrapper{width:100%;height:100%}.overlay{position:absolute;z-index:1002;background-color:#ffffff80;width:100%;height:100%}.spinner-wrapper{display:flex;justify-content:center;justify-items:center}#loader{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}.mat-checkbox-layout{margin-bottom:0}.mat-checkbox-layout .mat-checkbox-label{font-size:15px;font-weight:bolder;color:#0000008a}\n"],encapsulation:2}),t}(),data:{title:"Work From Home",function:f.FI.WorkFromHome,status:!0}}]}],ye=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=b.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=b.\u0275\u0275defineInjector({imports:[[p.Bz.forChild(we)],p.Bz]}),t}(),Fe={parse:{dateInput:"L"},display:{dateInput:"L",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}},be=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=b.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=b.\u0275\u0275defineInjector({providers:[w.P,u.nJ,i.DatePipe,{provide:s.Ad,useValue:"fr-FR"},{provide:s._A,useClass:m.t7,deps:[s.Ad]},{provide:s.sG,useValue:Fe}],imports:[[i.CommonModule,a.m,y.FormsModule,y.ReactiveFormsModule,a.q,l.Is,d.ZQ.forRoot(),c.HttpClientModule,h.o,ye]]}),t}()},55750:function(e,t,r){r.d(t,{Ry:function(){return n.R}});var n=r(34239);r(62758)},34239:function(t,n,o){o.d(n,{R:function(){return l}});var i,a=o(37716),s=o(10337),l=((i=function(){function t(r){e(this,t),this.searchFilterService=r}return r(t,[{key:"transform",value:function(e,t,r){if(this.startIndex=t*(r*this.searchFilterService.rowSpan)+1,this.endIndex=r*this.searchFilterService.rowSpan*(t+1),null!=e)return this.searchFilterService.showingDataLastFilter=e.slice(this.startIndex-1,this.endIndex),this.searchFilterService.resultChanged.next(),e.slice(this.startIndex-1,this.endIndex)}}]),t}()).\u0275fac=function(e){return new(e||i)(a.\u0275\u0275directiveInject(s.nJ,16))},i.\u0275pipe=a.\u0275\u0275definePipe({name:"paginator",type:i,pure:!0}),i)},39924:function(t,n,o){o.d(n,{J:function(){return f}});var i=o(37716),a=o(99692),s=o(10337),l=o(98295),m=o(67441),d=o(3679),c=o(38583),u=o(72458);function h(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-option",6),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){var r=t.$implicit;i.\u0275\u0275property("value",r),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(r)}}var p=function(){return[6,12,24,60,120]},f=function(){var t=function(){function t(r){e(this,t),this.searchFilterService=r,this.disabled=!1,this.hidePageSize=!1,this.showFirstLastButtons=!1,this.page=new i.EventEmitter}return r(t,[{key:"pageIndexChanged",set:function(e){this.pageIndex=e,this.updateGoto()}},{key:"lengthChanged",set:function(e){this.length=e,this.updateGoto()}},{key:"pageSizeChanged",set:function(e){this.pageSize=e,this.updateGoto()}},{key:"ngOnInit",value:function(){this.updateGoto()}},{key:"onPaginateChange",value:function(e){this.searchFilterService.pageIndex=e.pageIndex,this.searchFilterService.pageSize=e.pageSize,this.length=e.length,this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.updateGoto(),this.emitPageEvent(e)}},{key:"updateGoto",value:function(){this.goTo=(this.pageIndex||0)+1,this.pageNumbers=[];for(var e=Math.ceil(this.length/this.pageSize),t=1;t<=e;t++)this.pageNumbers.push(t)}},{key:"goToChange",value:function(){this.paginator.pageIndex=this.goTo-1,this.searchFilterService.pageIndex=this.paginator.pageIndex,this.searchFilterService.pageSize=this.paginator.pageSize,this.emitPageEvent({length:this.paginator.length,pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize})}},{key:"emitPageEvent",value:function(e){this.page.next(e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.\u0275\u0275directiveInject(s.nJ))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-paginator"]],viewQuery:function(e,t){var r;(1&e&&i.\u0275\u0275viewQuery(a.NW,7),2&e)&&(i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.paginator=r.first))},inputs:{length:"length",pageIndex:"pageIndex",pageSize:"pageSize",disabled:"disabled",hidePageSize:"hidePageSize",pageSizeOptions:"pageSizeOptions",showFirstLastButtons:"showFirstLastButtons",pageIndexChanged:["pageIndex","pageIndexChanged"],lengthChanged:["length","lengthChanged"],pageSizeChanged:["pageSize","pageSizeChanged"]},outputs:{page:"page"},decls:8,vars:8,consts:[[1,"d-flex"],[3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"mat-paginator",1),i.\u0275\u0275listener("page",function(e){return t.onPaginateChange(e)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275text(4,"Go To: "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"mat-form-field"),i.\u0275\u0275elementStart(6,"mat-select",4),i.\u0275\u0275listener("ngModelChange",function(e){return t.goTo=e})("selectionChange",function(){return t.goToChange()}),i.\u0275\u0275template(7,h,2,2,"mat-option",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("length",t.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",i.\u0275\u0275pureFunction0(7,p))("showFirstLastButtons",!0),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngModel",t.goTo),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.pageNumbers))},directives:[a.NW,l.KE,m.gD,d.NgControlStatus,d.NgModel,c.NgForOf,u.ey],styles:['.mat-paginator[_ngcontent-%COMP%]{width:100%;float:right}.d-flex[_ngcontent-%COMP%]{display:flex}  .mat-select-trigger{font-size:12px}  .mat-option{font-size:12px}.go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}.go-to-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:56px;margin:6px 4px 0;font-size:12px;font-family:Roboto,"Helvetica Neue",sans-serif}.go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{width:36px;margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,"Helvetica Neue",sans-serif}']}),t}()}}])}();