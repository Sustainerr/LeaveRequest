!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunktelnetteam_app=self.webpackChunktelnetteam_app||[]).push([[236],{15236:function(e,r,i){i.r(r),i.d(r,{CUSTOM_DT_FORMATS:function(){return Ke},CostingModule:function(){return Xe}});var o=i(38583),a=i(32403),s=i(10337),l=i(3679),c=i(72458),d=i(22238),u=i(36063),m=i(88452),h=i(63753),p=i(62028),f=i(70833),g=i(82636),v=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};function S(e){return Reflect.metadata("type",e)}function y(e){return Reflect.metadata("dir",e)}function C(e){return Reflect.metadata("persisted",e)}var b=function e(){n(this,e),this.userCostId=0,this.currencyId=5,this.currencySymbol="\u20ac"};v([S(g.sP.Decimal),y(g.Nm.InputOutput),C(!0)],b.prototype,"userCostId",void 0),v([S(g.sP.Varchar2),y(g.Nm.Input),C(!0)],b.prototype,"userId",void 0),v([C(!1)],b.prototype,"userNumber",void 0),v([C(!1)],b.prototype,"userName",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"currencyId",void 0),v([C(!1)],b.prototype,"currencySymbol",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"year",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month1",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month2",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month3",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month4",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month5",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month6",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month7",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month8",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month9",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month10",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month11",void 0),v([S(g.sP.Decimal),y(g.Nm.Input),C(!0)],b.prototype,"month12",void 0);var x,I=function e(){n(this,e)},w=i(46782),D=i(37716),E=i(51586),P=((x=function(){function e(t,r){n(this,e),this.genericService=t,this.entityParameterService=r,this.sortCosts=new f.xQ,this.reloadCosts=new f.tq(1)}return t(e,[{key:"getResourcesCosts",value:function(e,t,n){var r=new Array;this.entityParameterService.AddEntityParameter(r,"resourcesId",e,g.sP.Varchar2,g.Nm.Input),this.entityParameterService.AddEntityParameter(r,"startYear",t,g.sP.Decimal,g.Nm.Input),this.entityParameterService.AddEntityParameter(r,"endYear",n,g.sP.Decimal,g.Nm.Input);var i=new E.u;return i.storedProcedureName="GPTT.GetResourcesCosts",i.entitiesParameters=new Array(r),i.cursorName="curs",this.genericService.createService("/Data/Get",i)}},{key:"getResourceCosts",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"userCostId",e,g.sP.Decimal,g.Nm.Input);var n=new E.u;return n.storedProcedureName="GPTT.GetResourceCosts",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}},{key:"saveResourcesCosts",value:function(e,t){var n=this,r=new Array;e.forEach(function(e){var i=new Array;n.entityParameterService.AddEntityParameters(i,e),n.entityParameterService.AddEntityParameter(i,"currentUserId",t,g.sP.Decimal,g.Nm.Input),r.push(i)});var i=new E.u;return i.storedProcedureName="GPTT.InsertOrUpdateResourceCosts",i.entitiesParameters=r,i.outputIdParameterName="userCostId",this.genericService.createService("/Data/Save",i)}},{key:"deleteResourceCosts",value:function(e,t){var n=new Array;this.entityParameterService.AddEntityParameter(n,"userCostId",e,g.sP.Decimal,g.Nm.Input),this.entityParameterService.AddEntityParameter(n,"currentUserId",t,g.sP.Decimal,g.Nm.Input);var r=new E.u;return r.storedProcedureName="GPTT.DeleteResourceCosts",r.entitiesParameters=new Array(n),this.genericService.createService("/Data/Delete",r)}},{key:"deleteAllCosts",value:function(e,t){var n=this,r=new Array;e.forEach(function(e){var i=new Array;n.entityParameterService.AddEntityParameter(i,"userCostId",e.userCostId,g.sP.Decimal,g.Nm.Input),n.entityParameterService.AddEntityParameter(i,"currentUserId",t,g.sP.Decimal,g.Nm.Input),r.push(i)});var i=new E.u;return i.storedProcedureName="GPTT.DeleteResourceCosts",i.entitiesParameters=r,this.genericService.createService("/Data/Delete",i)}}]),e}()).\u0275fac=function(e){return new(e||x)(D.\u0275\u0275inject(s.MY),D.\u0275\u0275inject(s.RZ))},x.\u0275prov=D.\u0275\u0275defineInjectable({token:x,factory:x.\u0275fac}),x),M=i(98295),R=i(67441),k=i(52218),F=i(76627),O=i(64576),N=i(49983),_=i(72172),z=["resourceCostDetailsForm"];function A(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-option",18),D.\u0275\u0275text(1),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275property("value",n),D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate1(" ",n.description," ")}}function Y(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-option",18),D.\u0275\u0275text(1),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275property("value",n.id),D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate1(" ",n.description," ")}}function T(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-option",18),D.\u0275\u0275text(1),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275property("value",n.id),D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate1(" ",n.description," ")}}var j=function(){var e=function(){function e(t,r,i,o,a){n(this,e),this.coreDataService=t,this.costingService=r,this.notificationService=i,this._avRoute=o,this.router=a,this.resourceFilterCtrl=new l.FormControl,this.filteredResources=new f.tq(1),this._onDestroy=new f.xQ,this.previousState={getPrevious:!1,pageIndex:null,pageSize:null},this.subscription=new f.w0,this.mutliClickDisable=!1,this.isNewResourceCost=!0,this.resourceCost=new b,this.Resources=[],this.months=[{id:1,description:"January"},{id:2,description:"February"},{id:3,description:"Mars"},{id:4,description:"April"},{id:5,description:"May"},{id:6,description:"June"},{id:7,description:"July"},{id:8,description:"August"},{id:9,description:"September"},{id:10,description:"October"},{id:11,description:"November"},{id:12,description:"December"}],this.fromMonth={id:1,description:"January"},this.toMonth={id:12,description:"December"}}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.yearMin=(new Date).getFullYear()-10,this.yearMax=(new Date).getFullYear()+10,this.year=(new Date).getFullYear(),this.getResources(),this.resourceFilterCtrl.valueChanges.pipe((0,w.R)(this._onDestroy)).subscribe(function(){e.filterResources()}),this.subscription.add(this.costingService.reloadCosts.subscribe(function(t){t&&(e.previousState=t)}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"getResources",value:function(){var e=this;this.coreDataService.getUsers().subscribe(function(t){null!=t&&(e.Resources=t,e.Resources=e.Resources.filter(function(e){return-1===e.description.indexOf(" (PFE")&&-1===e.description.indexOf(" (STA")}),e.filteredResources.next(e.Resources.slice()),e.getResourceCosts())})}},{key:"getResourceCosts",value:function(){var e=this;this._avRoute.params.subscribe(function(t){null!=t.userCostId&&(e.isNewResourceCost=!1,e.detailsForm.controls.selectedResource.disable(),e.costingService.getResourceCosts(+t.userCostId).subscribe(function(t){e.resourceCost=Object.assign(new b,t[0]),e.selectedResource=e.Resources.find(function(t){return t.id===e.resourceCost.userId}),e.year=e.resourceCost.year,e.monthResourceCost=e.resourceCost.month1}))})}},{key:"filterResources",value:function(){if(this.Resources){var e=this.resourceFilterCtrl.value;e?(e=e.toLowerCase(),this.filteredResources.next(this.Resources.filter(function(t){return t.description.toLowerCase().indexOf(e)>-1}))):this.filteredResources.next(this.Resources.slice())}}},{key:"save",value:function(){var e=this;this.mutliClickDisable=!0,setTimeout(function(){e.mutliClickDisable=!1},1e3),this.validCosts()&&this.costingService.saveResourcesCosts(this.buildResourceCosts(),this.currentUser.userId).subscribe(function(t){0!==t?(e.notificationService.success("Costs saved successfully"),null!=e.previousState.pageIndex&&(e.previousState.getPrevious=!0,e.costingService.reloadCosts.next(e.previousState)),e.router.navigate(["/project-management/costing/resource-cost"])):e.notificationService.danger("Costs not saved. Costs may already exists!")},function(){e.notificationService.danger("Costs not saved!")})}},{key:"validCosts",value:function(){if(this.detailsForm.valid)if(this.fromMonth.id<=this.toMonth.id){if(this.year>=this.yearMin&&this.year<=this.yearMax)return!0;this.notificationService.danger("Year must be between ".concat(this.yearMin," and ").concat(this.yearMax,"!"))}else this.notificationService.danger("To Month must be greater than From Month!");else this.notificationService.danger("Please fill all required fields!");return!1}},{key:"buildResourceCosts",value:function(){var e=[],t=new b;t.userCostId=this.resourceCost.userCostId,t.userId=this.selectedResource.id,t.year=this.year;var n=0!==this.resourceCost.userCostId?-1:0;return t.month1=this.getMonthCost(1,n),t.month2=this.getMonthCost(2,n),t.month3=this.getMonthCost(3,n),t.month4=this.getMonthCost(4,n),t.month5=this.getMonthCost(5,n),t.month6=this.getMonthCost(6,n),t.month7=this.getMonthCost(7,n),t.month8=this.getMonthCost(8,n),t.month9=this.getMonthCost(9,n),t.month10=this.getMonthCost(10,n),t.month11=this.getMonthCost(11,n),t.month12=this.getMonthCost(12,n),e.push(t),e}},{key:"getMonthCost",value:function(e,t){return this.fromMonth.id<=e&&this.toMonth.id>=e?this.monthResourceCost:t}},{key:"yearChanged",value:function(e){this.year=new Date(e).getFullYear()}},{key:"numberOnly",value:function(e){var t=e.which?e.which:e.keyCode;return!(t>31&&(t<44||t>57)||45===t||47===t)}},{key:"onCancel",value:function(){null!=this.previousState.pageIndex&&(this.previousState.getPrevious=!0,this.costingService.reloadCosts.next(this.previousState)),this.router.navigate(["/project-management/costing/resource-cost"])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(D.\u0275\u0275directiveInject(s.YY),D.\u0275\u0275directiveInject(P),D.\u0275\u0275directiveInject(s.gq),D.\u0275\u0275directiveInject(m.gz),D.\u0275\u0275directiveInject(m.F0))},e.\u0275cmp=D.\u0275\u0275defineComponent({type:e,selectors:[["app-edit-resource-cost"]],viewQuery:function(e,t){var n;(1&e&&D.\u0275\u0275viewQuery(z,7),2&e)&&(D.\u0275\u0275queryRefresh(n=D.\u0275\u0275loadQuery())&&(t.detailsForm=n.first))},decls:31,vars:17,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["id","resourceCostDetailsForm"],["resourceCostDetailsForm","ngForm"],["placeholder","Resource","name","selectedResource","required","",3,"ngModel","ngModelChange"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["ngxMatSelectSearchClear",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-3"],[3,"enabled","year","displayPlaceHolder","yearChange"],["placeholder","From Month","name","fromMonth","required","",3,"ngModel","ngModelChange"],["placeholder","To Month","name","toMonth","required","",3,"ngModel","ngModelChange"],["placeholder","Cost","matInput","","appNumberValidator","","name","monthResourceCost","required","",3,"ngModel","inputValue","ngModelChange","keypress"],[1,"text-center"],["type","submit",1,"btn","btn-md","btn-primary","ripple","light","m-r-20",3,"disabled","click"],[1,"btn","btn-md","btn-default","ripple",3,"click"],[3,"value"]],template:function(e,t){1&e&&(D.\u0275\u0275elementStart(0,"div",0),D.\u0275\u0275elementStart(1,"div",1),D.\u0275\u0275elementStart(2,"div",2),D.\u0275\u0275elementStart(3,"div",3),D.\u0275\u0275elementStart(4,"form",4,5),D.\u0275\u0275elementStart(6,"div",0),D.\u0275\u0275elementStart(7,"mat-form-field",1),D.\u0275\u0275elementStart(8,"mat-select",6),D.\u0275\u0275listener("ngModelChange",function(e){return t.selectedResource=e}),D.\u0275\u0275elementStart(9,"mat-option"),D.\u0275\u0275elementStart(10,"ngx-mat-select-search",7),D.\u0275\u0275elementStart(11,"mat-icon",8),D.\u0275\u0275text(12,"close"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275template(13,A,2,2,"mat-option",9),D.\u0275\u0275pipe(14,"async"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(15,"div",0),D.\u0275\u0275elementStart(16,"div",10),D.\u0275\u0275elementStart(17,"app-input-year",11),D.\u0275\u0275listener("yearChange",function(e){return t.yearChanged(e)}),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(18,"mat-form-field",10),D.\u0275\u0275elementStart(19,"mat-select",12),D.\u0275\u0275listener("ngModelChange",function(e){return t.fromMonth.id=e}),D.\u0275\u0275template(20,Y,2,2,"mat-option",9),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(21,"mat-form-field",10),D.\u0275\u0275elementStart(22,"mat-select",13),D.\u0275\u0275listener("ngModelChange",function(e){return t.toMonth.id=e}),D.\u0275\u0275template(23,T,2,2,"mat-option",9),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(24,"mat-form-field",10),D.\u0275\u0275elementStart(25,"input",14),D.\u0275\u0275listener("ngModelChange",function(e){return t.monthResourceCost=e})("keypress",function(e){return t.numberOnly(e)}),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(26,"div",15),D.\u0275\u0275elementStart(27,"button",16),D.\u0275\u0275listener("click",function(){return t.save()}),D.\u0275\u0275text(28,"Save"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(29,"button",17),D.\u0275\u0275listener("click",function(){return t.onCancel()}),D.\u0275\u0275text(30,"Cancel"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd()),2&e&&(D.\u0275\u0275advance(8),D.\u0275\u0275property("ngModel",t.selectedResource),D.\u0275\u0275advance(2),D.\u0275\u0275property("formControl",t.resourceFilterCtrl)("placeholderLabel","Search")("noEntriesFoundLabel","No options found"),D.\u0275\u0275advance(3),D.\u0275\u0275property("ngForOf",D.\u0275\u0275pipeBind1(14,15,t.filteredResources)),D.\u0275\u0275advance(4),D.\u0275\u0275property("enabled",t.isNewResourceCost)("year",t.year)("displayPlaceHolder",!0),D.\u0275\u0275advance(2),D.\u0275\u0275property("ngModel",t.fromMonth.id),D.\u0275\u0275advance(1),D.\u0275\u0275property("ngForOf",t.months),D.\u0275\u0275advance(2),D.\u0275\u0275property("ngModel",t.toMonth.id),D.\u0275\u0275advance(1),D.\u0275\u0275property("ngForOf",t.months),D.\u0275\u0275advance(2),D.\u0275\u0275property("ngModel",t.monthResourceCost)("inputValue",t.monthResourceCost),D.\u0275\u0275advance(2),D.\u0275\u0275property("disabled",t.mutliClickDisable))},directives:[l.\u0275NgNoValidate,l.NgControlStatusGroup,l.NgForm,M.KE,R.gD,l.RequiredValidator,l.NgControlStatus,l.NgModel,c.ey,k.nu,l.FormControlDirective,F.Hw,k.w5,o.NgForOf,O.G,N.Nt,l.DefaultValueAccessor,_.z],pipes:[o.AsyncPipe],styles:["form[_ngcontent-%COMP%]{padding:10px 20px}.main-color[_ngcontent-%COMP%]{background:#3f629d}"]}),e}(),L=i(55750),B=i(56185),V=function(){var e=function(){function e(t,r,i,o){n(this,e),this.coreDataService=t,this.costingService=r,this.notificationService=i,this.dialogRef=o,this.readyToImport=!1,this.mutliClickDisable=!1,this.previousState={getPrevious:!1,pageIndex:null,pageSize:null},this.subscription=new f.w0,this.resourcesCosts=[],this.resourcesIdentifiers=[]}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.year=(new Date).getFullYear(),this.yearMin=this.year-10,this.yearMax=this.year+10,this.getResources(),this.subscription.add(this.costingService.reloadCosts.subscribe(function(t){t&&(e.previousState=t)}))}},{key:"getResources",value:function(){var e=this;this.coreDataService.getUsers().subscribe(function(t){null!=t&&(e.resourcesIdentifiers=t,e.resourcesIdentifiers=e.resourcesIdentifiers.filter(function(e){return-1===e.description.indexOf(" (PFE")&&-1===e.description.indexOf(" (STA")}))})}},{key:"yearChanged",value:function(e){var t=this;this.year=new Date(e).getFullYear(),0!==this.resourcesCosts.length&&this.resourcesCosts.forEach(function(e){e.year=t.year})}},{key:"fileImport",value:function(e){var t=this,n=e.target;if(1!==n.files.length)throw new Error("Cannot use multiple files");this.fileName=n.files[0].name;var r=new FileReader;r.onload=function(){var e=new B.Workbook,n=[];e.xlsx.load(r.result).then(function(e){var r=e.getWorksheet(1),i=r.getRow(1).values.length;r.eachRow(function(e){for(var r=[],o=1;o<i;o++){var a=e.values[o];void 0===a&&(a=""),r.push(a)}n.push(r),t.processXlsFile(n)})})},r.readAsArrayBuffer(n.files[0])}},{key:"processXlsFile",value:function(e){if(this.isXlsFileHeader(e[0])){this.resourcesCostsCount=0,this.resourcesCosts=[];var t=this.buildXlsFileRows(e);0===t.length?this.notificationService.success("File format valid."):this.notificationService.warning("File contain invalid line(s):<br>"+t.join("<br>")+"."),0!==this.resourcesCostsCount?this.readyToImport=!0:this.notificationService.warning("There is no lines to load.")}else this.notificationService.danger("File format invalid.")}},{key:"isXlsFileHeader",value:function(e){return void 0!==e&&2===e.length&&"Matricule"===e[0]&&"Resource Cost"===e[1]}},{key:"buildXlsFileRows",value:function(e){for(var t=this,n=[],r=1;r<e.length;r++){var i=e[r];i.length>=2&&void 0!==i[0]&&void 0!==i[1]?function(){var e="("+i[0].replace(/\s/g,"").toString()+")",o=t.resourcesIdentifiers.find(function(t){return t.description.endsWith(e)});if(void 0!==o){var a=o.id,s=+Number(i[1].toString().replace(/\s/g,""));Number.isNaN(s)?n.push("Line ".concat(r+1,": Invalid Cost (").concat(i[1],")")):t.buildXlsFileRow(a,s)}else n.push("Line ".concat(r+1,": Invalid Matricule (").concat(i[0],")"))}():n.push("Line ".concat(r+1,": Invalid Line (").concat(i,")"))}return n}},{key:"buildXlsFileRow",value:function(e,t){if(0!==t){var n=new b;n.userId=e,n.year=this.year,n.month1=t,n.month2=t,n.month3=t,n.month4=t,n.month5=t,n.month6=t,n.month7=t,n.month8=t,n.month9=t,n.month10=t,n.month11=t,n.month12=t,this.resourcesCostsCount++,this.resourcesCosts.push(n)}}},{key:"importResourcesCosts",value:function(){var e=this;this.mutliClickDisable=!0,setTimeout(function(){e.mutliClickDisable=!1},1e3),this.year>=this.yearMin&&this.year<=this.yearMax?this.costingService.saveResourcesCosts(this.resourcesCosts,this.currentUser.userId).subscribe(function(t){0!==t?(e.notificationService.success("Costs saved successfully"),null!=e.previousState.pageIndex&&(e.previousState.getPrevious=!0,e.costingService.reloadCosts.next(e.previousState)),e.close()):e.notificationService.danger("Costs not saved. Some costs may already exists!")},function(){e.notificationService.danger("Costs not saved!")}):this.notificationService.danger("Year must be between ".concat(this.yearMin," and ").concat(this.yearMax,"!"))}},{key:"close",value:function(){this.dialogRef.close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(D.\u0275\u0275directiveInject(s.YY),D.\u0275\u0275directiveInject(P),D.\u0275\u0275directiveInject(s.gq),D.\u0275\u0275directiveInject(d.so))},e.\u0275cmp=D.\u0275\u0275defineComponent({type:e,selectors:[["app-import-resources-costs"]],decls:24,vars:5,consts:[[1,"form-container"],[1,"modal_header"],[1,"modal_title"],[1,"material-icons","modal-close",3,"click"],[1,"modal_body"],[1,"row"],[1,"col-sm-3"],[3,"enabled","year","displayPlaceHolder","yearChange"],[1,"col-sm-7"],["placeholder","File Name *","matInput","","name","fileName","disabled","","required","",3,"ngModel","ngModelChange"],[1,"col-sm-2"],[1,"btn","btn-sm","btn-primary","waves-light","ripple","file-upload-button",2,"font-size","inherit"],["type","file","accept",".xlsx",3,"change"],["fileInput",""],[1,"icofont","icofont-folder-open",2,"font-size","medium"],[1,"modal_footer"],[1,"pull-right"],["type","button",1,"btn","btn-outline-primary","m-r-5",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(D.\u0275\u0275elementStart(0,"form",0),D.\u0275\u0275elementStart(1,"div",1),D.\u0275\u0275elementStart(2,"div",2),D.\u0275\u0275elementStart(3,"span"),D.\u0275\u0275text(4," Import "),D.\u0275\u0275elementStart(5,"em",3),D.\u0275\u0275listener("click",function(){return t.close()}),D.\u0275\u0275text(6,"close"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(7,"div",4),D.\u0275\u0275elementStart(8,"div",5),D.\u0275\u0275elementStart(9,"div",6),D.\u0275\u0275elementStart(10,"app-input-year",7),D.\u0275\u0275listener("yearChange",function(e){return t.yearChanged(e)}),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(11,"mat-form-field",8),D.\u0275\u0275elementStart(12,"input",9),D.\u0275\u0275listener("ngModelChange",function(e){return t.fileName=e}),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(13,"div",10),D.\u0275\u0275elementStart(14,"button",11),D.\u0275\u0275elementStart(15,"input",12,13),D.\u0275\u0275listener("change",function(e){return t.fileImport(e)}),D.\u0275\u0275elementEnd(),D.\u0275\u0275element(17,"em",14),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(18,"div",15),D.\u0275\u0275elementStart(19,"div",16),D.\u0275\u0275elementStart(20,"button",17),D.\u0275\u0275listener("click",function(){return t.close()}),D.\u0275\u0275text(21,"Cancel"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(22,"button",18),D.\u0275\u0275listener("click",function(){return t.importResourcesCosts()}),D.\u0275\u0275text(23,"Import"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd()),2&e&&(D.\u0275\u0275advance(10),D.\u0275\u0275property("enabled",!0)("year",t.year)("displayPlaceHolder",!0),D.\u0275\u0275advance(2),D.\u0275\u0275property("ngModel",t.fileName),D.\u0275\u0275advance(10),D.\u0275\u0275property("disabled",!t.readyToImport&&!t.mutliClickDisable))},directives:[l.\u0275NgNoValidate,l.NgControlStatusGroup,l.NgForm,O.G,M.KE,N.Nt,l.DefaultValueAccessor,l.RequiredValidator,l.NgControlStatus,l.NgModel],styles:['.modal_header[_ngcontent-%COMP%]{height:50px;background-color:#3f629d;padding:18px 15px}.modal_header[_ngcontent-%COMP%]   .modal_title[_ngcontent-%COMP%]{color:#fff;line-height:1}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{float:right;cursor:pointer}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:red}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]{cursor:not-allowed;color:#dcdcdc}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]:hover{color:#dcdcdc}.modal_body[_ngcontent-%COMP%]{height:110px;padding:25px;overflow-y:auto}.modal_footer[_ngcontent-%COMP%]{padding:25px}.file-upload-button[_ngcontent-%COMP%]{overflow:hidden;position:relative}.file-upload-button[_ngcontent-%COMP%]:after{content:"load";color:#fff;font-size:1.5rem;text-align:center}.file-upload-button[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{font-size:100px;left:0;opacity:0;position:absolute;top:0}']}),e}(),G=i(16738),J=i(88259),$=i.n(J),H=i(19992),U=i(43220),q=G,Q={parse:{dateInput:"YYYY"},display:{dateInput:"YYYY",yearLabel:"YYYY",dateA11yLabel:"LL",yearA11yLabel:"YYYY"}},K=function(){var e=function(){function e(){n(this,e),this.date=new l.FormControl(q()),this.daysChange=new D.EventEmitter}return t(e,[{key:"ngOnInit",value:function(){this.selectedDate&&(this.selectedDate=new Date(this.selectedDate),this.date.setValue(q([this.selectedDate.getFullYear()])))}},{key:"chosenYearHandler",value:function(e,t){(null==this.minDate||e>=q(this.minDate))&&(null==this.maxDate||e<=q(this.maxDate))&&(this.date.setValue(e),this.daysChange.emit(this.date.value)),t&&t.close()}},{key:"previousYear",value:function(e){if(void 0!==this.minDate&&this.date.value<=this.minDate)return e.stopPropagation(),e.preventDefault(),!1;this.date.setValue(q(this.date.value.subtract(1,"years").startOf("year"))),this.daysChange.emit(this.date.value)}},{key:"nextYear",value:function(e){if(void 0!==this.maxDate&&q(this.date.value).endOf("year").toDate()>=this.maxDate)return e.stopPropagation(),e.preventDefault(),!1;this.date.setValue(q(this.date.value.add(1,"years").startOf("year"))),this.daysChange.emit(this.date.value)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=D.\u0275\u0275defineComponent({type:e,selectors:[["app-select-year"]],inputs:{maxDate:"maxDate",minDate:"minDate",selectedDate:"selectedDate"},outputs:{daysChange:"daysChange"},features:[D.\u0275\u0275ProvidersFeature([{provide:c._A,useClass:u.t7,deps:[c.Ad,u.o8]},{provide:c.sG,useValue:Q}])],decls:22,vars:9,consts:[[2,"padding","0px"],[1,"td-calendar"],["scope","col"],[1,"td-arrow","pointer",3,"click"],[1,"material-icons"],[1,"td-date"],[1,"td-calendar","pointer",3,"click"],["matInput","",3,"matDatepicker","formControl","min","max"],["matSuffix","",3,"for"],["startView","multi-year","panelClass","example-month-picker",3,"yearSelected"],["picker",""]],template:function(e,t){if(1&e){var n=D.\u0275\u0275getCurrentView();D.\u0275\u0275elementStart(0,"table"),D.\u0275\u0275element(1,"caption",0),D.\u0275\u0275elementStart(2,"tr",1),D.\u0275\u0275element(3,"th",2),D.\u0275\u0275elementStart(4,"td",3),D.\u0275\u0275listener("click",function(e){return t.previousYear(e)}),D.\u0275\u0275elementStart(5,"em",4),D.\u0275\u0275text(6,"keyboard_arrow_left"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(7,"td",5),D.\u0275\u0275elementStart(8,"span"),D.\u0275\u0275text(9),D.\u0275\u0275pipe(10,"date"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(11,"td",6),D.\u0275\u0275listener("click",function(){return D.\u0275\u0275restoreView(n),D.\u0275\u0275reference(18).open()}),D.\u0275\u0275elementStart(12,"em",4),D.\u0275\u0275text(13,"date_range"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(14,"mat-form-field"),D.\u0275\u0275element(15,"input",7),D.\u0275\u0275element(16,"mat-datepicker-toggle",8),D.\u0275\u0275elementStart(17,"mat-datepicker",9,10),D.\u0275\u0275listener("yearSelected",function(e){D.\u0275\u0275restoreView(n);var r=D.\u0275\u0275reference(18);return t.chosenYearHandler(e,r)}),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(19,"td",3),D.\u0275\u0275listener("click",function(e){return t.nextYear(e)}),D.\u0275\u0275elementStart(20,"em",4),D.\u0275\u0275text(21,"keyboard_arrow_right"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd()}if(2&e){var r=D.\u0275\u0275reference(18);D.\u0275\u0275advance(9),D.\u0275\u0275textInterpolate(D.\u0275\u0275pipeBind2(10,6,t.date.value,"yyyy")),D.\u0275\u0275advance(6),D.\u0275\u0275property("matDatepicker",r)("formControl",t.date)("min",t.minDate)("max",t.maxDate),D.\u0275\u0275advance(1),D.\u0275\u0275property("for",r)}},directives:[M.KE,N.Nt,U.hl,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlDirective,U.nW,M.R9,U.Mq],pipes:[o.DatePipe],styles:["table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border:1px solid gainsboro}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;font-size:25px;cursor:pointer}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:4px}table[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:1px;left:3px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:0px;height:0px;visibility:hidden}"]}),e}(),X=i(67827),W=i(69517),Z=i(39924),ee=i(4885),te=i(11494),ne=i(32789),re=i(38590);function ie(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Matricule"),D.\u0275\u0275elementEnd())}function oe(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate1(" ",n.userNumber," ")}}function ae(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Resource"),D.\u0275\u0275elementEnd())}function se(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell",25),D.\u0275\u0275elementStart(1,"span",26),D.\u0275\u0275text(2),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275propertyInterpolate("matTooltip",n.userName),D.\u0275\u0275advance(2),D.\u0275\u0275textInterpolate(n.userName)}}function le(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Year"),D.\u0275\u0275elementEnd())}function ce(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate1(" ",n.year," ")}}function de(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Jan"),D.\u0275\u0275elementEnd())}function ue(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month1,"1.0-1")," ",n.currencySymbol," ")}}function me(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Feb"),D.\u0275\u0275elementEnd())}function he(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month2,"1.0-1")," ",n.currencySymbol," ")}}function pe(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Mar"),D.\u0275\u0275elementEnd())}function fe(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month3,"1.0-1")," ",n.currencySymbol," ")}}function ge(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Apr"),D.\u0275\u0275elementEnd())}function ve(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month4,"1.0-1")," ",n.currencySymbol," ")}}function Se(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"May"),D.\u0275\u0275elementEnd())}function ye(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month5,"1.0-1")," ",n.currencySymbol," ")}}function Ce(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Jun"),D.\u0275\u0275elementEnd())}function be(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month6,"1.0-1")," ",n.currencySymbol," ")}}function xe(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Jul"),D.\u0275\u0275elementEnd())}function Ie(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month7,"1.0-1")," ",n.currencySymbol," ")}}function we(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Aug"),D.\u0275\u0275elementEnd())}function De(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month8,"1.0-1")," ",n.currencySymbol," ")}}function Ee(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Sep"),D.\u0275\u0275elementEnd())}function Pe(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month9,"1.0-1")," ",n.currencySymbol," ")}}function Me(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Oct"),D.\u0275\u0275elementEnd())}function Re(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month10,"1.0-1")," ",n.currencySymbol," ")}}function ke(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Nov"),D.\u0275\u0275elementEnd())}function Fe(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month11,"1.0-1")," ",n.currencySymbol," ")}}function Oe(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-header-cell",24),D.\u0275\u0275text(1,"Dec"),D.\u0275\u0275elementEnd())}function Ne(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275text(1),D.\u0275\u0275pipe(2,"number"),D.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate2(" ",D.\u0275\u0275pipeBind2(2,2,n.month12,"1.0-1")," ",n.currencySymbol," ")}}function _e(e,t){1&e&&D.\u0275\u0275element(0,"mat-header-cell")}function ze(e,t){if(1&e){var n=D.\u0275\u0275getCurrentView();D.\u0275\u0275elementStart(0,"mat-cell"),D.\u0275\u0275elementStart(1,"button",27),D.\u0275\u0275listener("click",function(){var e=D.\u0275\u0275restoreView(n).$implicit;return D.\u0275\u0275nextContext().editResourceCosts(e)}),D.\u0275\u0275elementStart(2,"em",28),D.\u0275\u0275text(3,"edit"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275text(4," \xa0\xa0 "),D.\u0275\u0275elementStart(5,"button",29),D.\u0275\u0275listener("click",function(){var e=D.\u0275\u0275restoreView(n).$implicit;return D.\u0275\u0275nextContext().deleteResourceCosts(e)}),D.\u0275\u0275elementStart(6,"em",28),D.\u0275\u0275text(7,"delete"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd()}}function Ae(e,t){1&e&&D.\u0275\u0275element(0,"mat-header-row",30)}function Ye(e,t){1&e&&D.\u0275\u0275element(0,"mat-row")}var Te=function(){var e=function(){function e(t,r,i,o,a){n(this,e),this.costingService=t,this.notificationService=r,this.dialog=i,this.searchFilterService=o,this.router=a,this.dataSource=new ne.by,this.displayedColumns=["userNumber","userName","year","month1","month2","month3","month4","month5","month6","month7","month8","month9","month10","month11","month12","buttons"]}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.dataSource=new ne.by(this.resourcesCosts),this.subscription=this.searchFilterService.resultChanged.subscribe(function(){e.dataSource=new ne.by(e.searchFilterService.showingDataLastFilter)})}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"ngAfterViewInit",value:function(){this.dataSource.sort=this.sort}},{key:"editResourceCosts",value:function(e){this.router.navigate(["/project-management/costing/edit-resource-cost/"+e.userCostId.toString()]),this.costingService.reloadCosts.next({getPrevious:!1,pageIndex:this.searchFilterService.pageIndex,pageSize:this.searchFilterService.pageSize})}},{key:"deleteResourceCosts",value:function(e){var t=this;$().fire({text:"Are you sure to delete this cost?",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",showLoaderOnConfirm:!0,preConfirm:function(){t.costingService.deleteResourceCosts(e.userCostId,t.currentUser.userId).subscribe(function(){t.notificationService.success("User costs deleted"),t.costingService.reloadCosts.next({getPrevious:!0,pageIndex:t.searchFilterService.pageIndex,pageSize:t.searchFilterService.pageSize})},function(){t.notificationService.danger("Delete costs failed")})}})}},{key:"onSortData",value:function(e){this.costingService.sortCosts.next(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(D.\u0275\u0275directiveInject(P),D.\u0275\u0275directiveInject(s.gq),D.\u0275\u0275directiveInject(d.uw),D.\u0275\u0275directiveInject(s.nJ),D.\u0275\u0275directiveInject(m.F0))},e.\u0275cmp=D.\u0275\u0275defineComponent({type:e,selectors:[["app-resources-costs"]],viewQuery:function(e,t){var n;(1&e&&D.\u0275\u0275viewQuery(te.YE,7),2&e)&&(D.\u0275\u0275queryRefresh(n=D.\u0275\u0275loadQuery())&&(t.sort=n.first))},inputs:{resourcesCosts:"resourcesCosts"},decls:52,vars:4,consts:[["matSort","","matSortDirection","asc","matSortDisableClear","",3,"dataSource","matSortChange"],["table",""],["matColumnDef","userNumber"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","userName"],[3,"matTooltip",4,"matCellDef"],["matColumnDef","year"],["matColumnDef","month1"],["matColumnDef","month2"],["matColumnDef","month3"],["matColumnDef","month4"],["matColumnDef","month5"],["matColumnDef","month6"],["matColumnDef","month7"],["matColumnDef","month8"],["matColumnDef","month9"],["matColumnDef","month10"],["matColumnDef","month11"],["matColumnDef","month12"],["matColumnDef","buttons"],[4,"matHeaderCellDef"],["class"," table-primary table-*",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[3,"matTooltip"],[1,"span-ellipsis"],["type","button","matTooltip","Edit cost",1,"btn","btn-mini","btn-primary","ripple","f-center","light",3,"click"],[1,"material-icons"],["type","button","matTooltip","Delete cost",1,"btn","btn-mini","btn-danger","ripple","f-center","light",3,"click"],[1,"table-primary","table-*"]],template:function(e,t){1&e&&(D.\u0275\u0275elementStart(0,"mat-table",0,1),D.\u0275\u0275listener("matSortChange",function(e){return t.onSortData(e)}),D.\u0275\u0275elementContainerStart(2,2),D.\u0275\u0275template(3,ie,2,0,"mat-header-cell",3),D.\u0275\u0275template(4,oe,2,1,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(5,5),D.\u0275\u0275template(6,ae,2,0,"mat-header-cell",3),D.\u0275\u0275template(7,se,3,2,"mat-cell",6),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(8,7),D.\u0275\u0275template(9,le,2,0,"mat-header-cell",3),D.\u0275\u0275template(10,ce,2,1,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(11,8),D.\u0275\u0275template(12,de,2,0,"mat-header-cell",3),D.\u0275\u0275template(13,ue,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(14,9),D.\u0275\u0275template(15,me,2,0,"mat-header-cell",3),D.\u0275\u0275template(16,he,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(17,10),D.\u0275\u0275template(18,pe,2,0,"mat-header-cell",3),D.\u0275\u0275template(19,fe,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(20,11),D.\u0275\u0275template(21,ge,2,0,"mat-header-cell",3),D.\u0275\u0275template(22,ve,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(23,12),D.\u0275\u0275template(24,Se,2,0,"mat-header-cell",3),D.\u0275\u0275template(25,ye,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(26,13),D.\u0275\u0275template(27,Ce,2,0,"mat-header-cell",3),D.\u0275\u0275template(28,be,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(29,14),D.\u0275\u0275template(30,xe,2,0,"mat-header-cell",3),D.\u0275\u0275template(31,Ie,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(32,15),D.\u0275\u0275template(33,we,2,0,"mat-header-cell",3),D.\u0275\u0275template(34,De,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(35,16),D.\u0275\u0275template(36,Ee,2,0,"mat-header-cell",3),D.\u0275\u0275template(37,Pe,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(38,17),D.\u0275\u0275template(39,Me,2,0,"mat-header-cell",3),D.\u0275\u0275template(40,Re,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(41,18),D.\u0275\u0275template(42,ke,2,0,"mat-header-cell",3),D.\u0275\u0275template(43,Fe,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(44,19),D.\u0275\u0275template(45,Oe,2,0,"mat-header-cell",3),D.\u0275\u0275template(46,Ne,3,5,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275elementContainerStart(47,20),D.\u0275\u0275template(48,_e,1,0,"mat-header-cell",21),D.\u0275\u0275template(49,ze,8,0,"mat-cell",4),D.\u0275\u0275elementContainerEnd(),D.\u0275\u0275template(50,Ae,1,0,"mat-header-row",22),D.\u0275\u0275template(51,Ye,1,0,"mat-row",23),D.\u0275\u0275elementEnd()),2&e&&(D.\u0275\u0275property("dataSource",t.dataSource),D.\u0275\u0275advance(50),D.\u0275\u0275property("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),D.\u0275\u0275advance(1),D.\u0275\u0275property("matRowDefColumns",t.displayedColumns))},directives:[ne.BZ,te.YE,ne.w1,ne.fO,ne.Dz,ne.as,ne.nj,ne.ge,te.nU,ne.ev,re.gM,ne.XQ,ne.Gk],pipes:[o.DecimalPipe],styles:[".mat-table[_ngcontent-%COMP%]{overflow:auto;border-radius:4px;max-height:calc(100vh - 342px)}table[_ngcontent-%COMP%]{width:100%}.span-ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mat-header-cell[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:600}.material-icons[_ngcontent-%COMP%]{font-size:15px}.mat-column-userNumber[_ngcontent-%COMP%]{flex:0 0 8%!important;width:8%!important}.mat-column-userName[_ngcontent-%COMP%]{flex:0 0 14%!important;width:14%!important}.mat-column-year[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month1[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month2[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month3[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month4[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month5[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month6[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month7[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month8[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month9[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month10[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month11[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month12[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-buttons[_ngcontent-%COMP%]{flex:0 0 8%!important;width:8%!important;justify-content:center}  .mat-sort-header-arrow{color:#fff}"]}),e}(),je=i(34239);function Le(e,t){1&e&&(D.\u0275\u0275elementStart(0,"div"),D.\u0275\u0275elementStart(1,"h1"),D.\u0275\u0275text(2,"No Result Found"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd())}function Be(e,t){1&e&&(D.\u0275\u0275elementStart(0,"div",30),D.\u0275\u0275elementStart(1,"div",31),D.\u0275\u0275elementStart(2,"div",32),D.\u0275\u0275elementStart(3,"div",1),D.\u0275\u0275elementStart(4,"div",33),D.\u0275\u0275element(5,"mat-spinner"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd())}function Ve(e,t){if(1&e&&(D.\u0275\u0275elementStart(0,"div",34),D.\u0275\u0275element(1,"app-resources-costs",35),D.\u0275\u0275pipe(2,"paginator"),D.\u0275\u0275elementEnd()),2&e){var n=D.\u0275\u0275nextContext();D.\u0275\u0275classProp("blurred",n.isLoading),D.\u0275\u0275advance(1),D.\u0275\u0275property("resourcesCosts",D.\u0275\u0275pipeBind3(2,3,n.resourcesCosts,n.searchFilterService.pageIndex,n.searchFilterService.pageSize))}}var Ge=i(49457),Je=[{path:"",data:{title:"Costing",function:p.FI.Costing,status:!1},canActivate:[h.a1],children:[{path:"resource-cost",component:function(){var e=function(){function e(t){n(this,e),this.emptyResult=!1,this.listView=!1,this.resourcesCosts=[],this.resourcesIdentifiers=[],this.selectedResourcesIdentifiers=[],this.dropdownSettings={},this.subscription=new f.w0,this.destroyed=new f.xQ,this.dialog=t.get(d.uw),this.searchFilterService=t.get(s.nJ),this.notificationService=t.get(s.gq),this.excelService=t.get(s.xB),this.coreDataService=t.get(s.YY),this.costingService=t.get(P),this.dateTimeService=t.get(s.Cv),this.sortService=t.get(s.Kx),this.router=t.get(m.F0),this.paginatorPipe=new L.Ry(this.searchFilterService)}return t(e,[{key:"ngOnInit",value:function(){var e=this,t=this.dateTimeService.today();this.startDate=G([t.getFullYear(),t.getMonth()]).toDate(),this.endDate=G(t).endOf("month").toDate(),this.minDate=this.startDate,this.maxDate=this.endDate,this.subscription.add(this.costingService.sortCosts.subscribe(function(t){e.onSortData(t)})),this.searchFilterService.pageIndex=0,this.searchFilterService.pageSize=24,this.dropdownSettings={singleSelection:!0,idField:"id",textField:"description",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,enableCheckAll:!0,allowSearchFilter:!0,maxHeight:150,placeholder:"criteria",searchPlaceholderText:"Search..."},this.user=JSON.parse(localStorage.getItem("currentUser")),this.subscription.add(this.searchFilterService.resultChanged.subscribe(function(){setTimeout(function(){e.emptyResult=0===e.searchFilterService.showingDataLastFilter.length})}));var n=JSON.parse(sessionStorage.getItem("ResourceCostSearch"));null!==n&&(null!=n.startDate&&(this.startDate=new Date(n.startDate),this.minDate=this.startDate),null!=n.endDate&&(this.endDate=new Date(n.endDate),this.maxDate=this.endDate),this.selectedResourcesIdentifiers=n.selectedResourcesIdentifiers,this.selectedResourcesIds=this.selectedResourcesIdentifiers.map(function(e){return e.id}).join(",")),this.getResources(),this.subscription.add(this.costingService.reloadCosts.subscribe(function(t){t&&!0===t.getPrevious&&(e.searchResourcesCosts(),e.searchFilterService.pageSize=t.pageSize,e.searchFilterService.pageIndex=t.pageIndex,e.costingService.reloadCosts.next())}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe(),this.searchFilterService.showingDataLastFilter=[]}},{key:"getResources",value:function(){var e=this;this.coreDataService.getUsers().subscribe(function(t){null!=t&&(e.resourcesIdentifiers=t,e.resourcesIdentifiers=e.resourcesIdentifiers.filter(function(e){return-1===e.description.indexOf(" (PFE")&&-1===e.description.indexOf(" (STA")}))})}},{key:"searchResourcesCosts",value:function(){var e=this;this.searchFilterService.pageIndex=0,this.selectedResourcesIds=this.selectedResourcesIdentifiers.map(function(e){return e.id}).join(",");var t=new I;t.startDate=this.startDate,t.endDate=this.endDate,t.selectedResourcesIdentifiers=this.selectedResourcesIdentifiers,sessionStorage.setItem("ResourceCostSearch",JSON.stringify(t)),this.isLoading=!0,this.costingService.getResourcesCosts(this.selectedResourcesIds,this.startDate.getFullYear(),this.endDate.getFullYear()).subscribe(function(t){e.isLoading=!1,e.resourcesCosts=t,e.resourcesCostsLength=e.resourcesCosts.length,e.listView=!0,e.emptyResult=!1})}},{key:"dateFormat",value:function(e){return null==e||"0001-01-01T00:00:00"===e?"":this.dateTimeService.getShortFormat(e)}},{key:"dateOnly",value:function(e){return this.dateTimeService.dateOnly(e)}},{key:"onSortData",value:function(e){var t=this;e.active&&""!==e.direction&&this.resourcesCosts.sort(function(n,r){var i="asc"===e.direction;switch(e.active){case"userNumber":return t.sortService.compare(n.userNumber,r.userNumber,i,!1);case"userName":return t.sortService.compare(n.userName,r.userName,i,!1);case"year":return t.sortService.compare(n.year,r.year,i,!1);case"month1":return t.sortService.compare(n.month1,r.month1,i,!0);case"month2":return t.sortService.compare(n.month2,r.month2,i,!0);case"month3":return t.sortService.compare(n.month3,r.month3,i,!0);case"month4":return t.sortService.compare(n.month4,r.month4,i,!0);case"month5":return t.sortService.compare(n.month5,r.month5,i,!0);case"month6":return t.sortService.compare(n.month6,r.month6,i,!0);case"month7":return t.sortService.compare(n.month7,r.month7,i,!0);case"month8":return t.sortService.compare(n.month8,r.month8,i,!0);case"month9":return t.sortService.compare(n.month9,r.month9,i,!0);case"month10":return t.sortService.compare(n.month10,r.month10,i,!0);case"month11":return t.sortService.compare(n.month11,r.month11,i,!0);case"month12":return t.sortService.compare(n.month12,r.month12,i,!0);default:return 0}}),this.paginatorPipe.transform(this.resourcesCosts,this.searchFilterService.pageIndex,this.searchFilterService.pageSize)}},{key:"daysChangePeriodFrom",value:function(e){var t=new Date(e);this.startDate=G([t.getFullYear()]).toDate(),this.minDate=this.startDate}},{key:"daysChangePeriodTo",value:function(e){var t=new Date(e);this.endDate=G(t).endOf("year").toDate(),this.maxDate=this.endDate}},{key:"addResourceCosts",value:function(){this.router.navigate(["/project-management/costing/add-resource-cost"]),void 0!==this.resourcesCostsLength&&this.costingService.reloadCosts.next({getPrevious:!1,pageIndex:this.searchFilterService.pageIndex,pageSize:this.searchFilterService.pageSize})}},{key:"DeleteAllCosts",value:function(){var e=this,t=JSON.parse(sessionStorage.getItem("ResourceCostSearch")),n="Are you sur to delete all the costs for the period from ";t&&(t.startDate&&(n+=new Date(t.startDate).getFullYear()),t.endDate&&(n+=" to "+new Date(t.endDate).getFullYear()),t.selectedResourcesIdentifiers&&t.selectedResourcesIdentifiers[0]&&(n+=" and for ressource "+t.selectedResourcesIdentifiers[0].description),n+=" ?"),$().fire({text:n,icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",showLoaderOnConfirm:!0,preConfirm:function(){e.costingService.deleteAllCosts(e.resourcesCosts,e.user.userId).subscribe(function(){e.notificationService.success("User costs deleted"),e.costingService.reloadCosts.next({getPrevious:!0,pageIndex:e.searchFilterService.pageIndex,pageSize:e.searchFilterService.pageSize})},function(){e.notificationService.danger("Delete costs failed")})}})}},{key:"downloadTemplate",value:function(){Ge.saveAs("./assets/docs/ImportResourcesCostsTemplate.xlsx","Import Resources Costs Template")}},{key:"importFromExcel",value:function(){this.uploadDialogRef=this.dialog.open(V,{disableClose:!1,panelClass:"form_modal",width:"600",height:"260px",hasBackdrop:!0,data:{}}),this.costingService.reloadCosts.next({getPrevious:!1,pageIndex:this.searchFilterService.pageIndex,pageSize:this.searchFilterService.pageSize})}},{key:"exportToExcel",value:function(){if(void 0!==this.resourcesCosts&&0!==this.resourcesCosts.length){var e=[],t=[];t.push({cell:"A1",font:{bold:!0}},{cell:"B1",font:{bold:!0}},{cell:"C1",font:{bold:!0}},{cell:"D1",font:{bold:!0}},{cell:"E1",font:{bold:!0}},{cell:"F1",font:{bold:!0}},{cell:"G1",font:{bold:!0}},{cell:"H1",font:{bold:!0}},{cell:"I1",font:{bold:!0}},{cell:"J1",font:{bold:!0}},{cell:"K1",font:{bold:!0}},{cell:"L1",font:{bold:!0}},{cell:"M1",font:{bold:!0}},{cell:"N1",font:{bold:!0}},{cell:"O1",font:{bold:!0}}),this.resourcesCosts.forEach(function(t){var n=[];n.push(t.userNumber),n.push(t.userName),n.push(t.year),n.push(t.month1),n.push(t.month2),n.push(t.month3),n.push(t.month4),n.push(t.month5),n.push(t.month6),n.push(t.month7),n.push(t.month8),n.push(t.month9),n.push(t.month10),n.push(t.month11),n.push(t.month12),e.push(n)}),this.excelService.generateExcel([{header:"Matricule",key:"userNumber",width:10},{header:"Ressource",key:"userName",width:30},{header:"Year",key:"year",width:10},{header:"January",key:"month1",width:15},{header:"February",key:"month2",width:15},{header:"March",key:"month3",width:15},{header:"April",key:"month4",width:15},{header:"May",key:"month5",width:15},{header:"June",key:"month6",width:15},{header:"July",key:"month7",width:15},{header:"August",key:"month8",width:15},{header:"September",key:"month9",width:15},{header:"October",key:"month10",width:15},{header:"November",key:"month11",width:15},{header:"December",key:"month12",width:15}],e,[],t,"Resource_Cost")}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(D.\u0275\u0275directiveInject(D.Injector))},e.\u0275cmp=D.\u0275\u0275defineComponent({type:e,selectors:[["app-resource-cost"]],decls:51,vars:14,consts:[[1,"page-body"],[1,"row"],[1,"col-xl-12","col-lg-12","filter-bar"],[1,"card","m-b-10"],[1,"card-body","p-t-10"],[1,"col-xl-4","col-lg-12"],[1,"mat-subheader","col-sm-2"],[1,"search-input","col-sm-5"],[3,"selectedDate","maxDate","daysChange"],[3,"selectedDate","minDate","daysChange"],[1,"col-sm-10"],[1,"multi-search",2,"width","120%",3,"placeholder","data","ngModel","settings","ngModelChange"],[1,"col-xl-3","col-lg-12"],[1,"col-xl-1","col-lg-12"],[1,"text-center"],[1,"btn","btn-md","btn-primary","ripple","m-t-5",3,"click"],[1,"navbar","navbar-light","bg-faded","m-b-10","p-10"],[1,"nav-item","nav-grid","col-sm-5"],["type","button",1,"btn","btn-sm","btn-primary","m-r-10",2,"font-size","inherit",3,"click"],[1,"icofont","icofont-plus"],[1,"icofont","icofont-ui-delete","icon-pointer",2,"font-size","medium"],[1,"icofont","icofont-upload-alt",2,"font-size","medium"],[1,"fa","fa-file-excel-o",2,"font-size","medium"],[1,"col-sm-7"],[3,"pageSize","pageIndex","length"],[4,"ngIf"],[1,"wrapper"],[1,"div-scrollable"],["class","overlay",4,"ngIf"],["class","loaded-content",3,"blurred",4,"ngIf"],[1,"overlay"],[1,"spinner-wrapper"],[1,"container"],["id","loader"],[1,"loaded-content"],[3,"resourcesCosts"]],template:function(e,t){1&e&&(D.\u0275\u0275elementStart(0,"div",0),D.\u0275\u0275elementStart(1,"div",1),D.\u0275\u0275elementStart(2,"div",2),D.\u0275\u0275elementStart(3,"div",3),D.\u0275\u0275elementStart(4,"div",4),D.\u0275\u0275elementStart(5,"div",1),D.\u0275\u0275elementStart(6,"div",5),D.\u0275\u0275elementStart(7,"mat-list"),D.\u0275\u0275elementStart(8,"mat-list-item"),D.\u0275\u0275elementStart(9,"h3",6),D.\u0275\u0275text(10,"Period"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(11,"div",7),D.\u0275\u0275elementStart(12,"app-select-year",8),D.\u0275\u0275listener("daysChange",function(e){return t.daysChangePeriodFrom(e)}),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(13,"div",7),D.\u0275\u0275elementStart(14,"app-select-year",9),D.\u0275\u0275listener("daysChange",function(e){return t.daysChangePeriodTo(e)}),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(15,"div",5),D.\u0275\u0275elementStart(16,"mat-list"),D.\u0275\u0275elementStart(17,"mat-list-item"),D.\u0275\u0275elementStart(18,"h3",6),D.\u0275\u0275text(19,"Resource"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(20,"div",10),D.\u0275\u0275elementStart(21,"ng-multiselect-dropdown",11),D.\u0275\u0275listener("ngModelChange",function(e){return t.selectedResourcesIdentifiers=e}),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275element(22,"div",12),D.\u0275\u0275elementStart(23,"div",13),D.\u0275\u0275elementStart(24,"div",14),D.\u0275\u0275elementStart(25,"button",15),D.\u0275\u0275listener("click",function(){return t.searchResourcesCosts()}),D.\u0275\u0275text(26,"Search"),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(27,"nav",16),D.\u0275\u0275elementStart(28,"div",17),D.\u0275\u0275elementStart(29,"button",18),D.\u0275\u0275listener("click",function(){return t.addResourceCosts()}),D.\u0275\u0275element(30,"em",19),D.\u0275\u0275text(31," Costs "),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(32,"button",18),D.\u0275\u0275listener("click",function(){return t.DeleteAllCosts()}),D.\u0275\u0275element(33,"em",20),D.\u0275\u0275text(34," Delete all "),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(35,"button",18),D.\u0275\u0275listener("click",function(){return t.downloadTemplate()}),D.\u0275\u0275element(36,"em",21),D.\u0275\u0275text(37," Template "),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(38,"button",18),D.\u0275\u0275listener("click",function(){return t.importFromExcel()}),D.\u0275\u0275element(39,"em",22),D.\u0275\u0275text(40," Import "),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(41,"button",18),D.\u0275\u0275listener("click",function(){return t.exportToExcel()}),D.\u0275\u0275element(42,"em",22),D.\u0275\u0275text(43," Export "),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(44,"div",23),D.\u0275\u0275element(45,"app-paginator",24),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275template(46,Le,3,0,"div",25),D.\u0275\u0275elementStart(47,"div",26),D.\u0275\u0275elementStart(48,"div",27),D.\u0275\u0275template(49,Be,6,0,"div",28),D.\u0275\u0275template(50,Ve,3,7,"div",29),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd()),2&e&&(D.\u0275\u0275advance(12),D.\u0275\u0275property("selectedDate",t.startDate)("maxDate",t.maxDate),D.\u0275\u0275advance(2),D.\u0275\u0275property("selectedDate",t.endDate)("minDate",t.minDate),D.\u0275\u0275advance(7),D.\u0275\u0275property("placeholder","Select...")("data",t.resourcesIdentifiers)("ngModel",t.selectedResourcesIdentifiers)("settings",t.dropdownSettings),D.\u0275\u0275advance(24),D.\u0275\u0275property("pageSize",t.searchFilterService.pageSize)("pageIndex",t.searchFilterService.pageIndex)("length",t.resourcesCostsLength),D.\u0275\u0275advance(1),D.\u0275\u0275property("ngIf",t.emptyResult&&t.listView),D.\u0275\u0275advance(3),D.\u0275\u0275property("ngIf",t.isLoading),D.\u0275\u0275advance(1),D.\u0275\u0275property("ngIf",t.listView&&!t.emptyResult))},directives:[H.i$,H.Tg,K,X.OP,l.NgControlStatus,l.NgModel,W.M2,Z.J,o.NgIf,ee.$g,Te],pipes:[je.R],styles:[".filter-button{text-align:center;width:100%;margin:2%}.search-input{font-size:14px}.pointer{cursor:pointer}.reset-all-btn{cursor:pointer;font-size:20px}.reset-all-btn:hover{color:red}.arrow-icon{font-size:10px}.close-icon{float:right;font-size:22px}.multi-search{width:100%}.mat-list .mat-subheader{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.mat-list-header{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.material-icons{font-size:25px}.wrapper{width:100%;height:100%}.overlay{position:absolute;z-index:1002;background-color:#ffffff80;width:100%;height:100%}.spinner-wrapper{display:flex;justify-content:center;justify-items:center}#loader{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}\n"],encapsulation:2}),e}(),data:{title:"Resource Cost",icon:"icon-home",caption:"",function:p.FI.ResourceCost,status:!0},canActivate:[h.a1]},{path:"add-resource-cost",component:j,data:{title:"Add Resource Cost",icon:"icon-home",function:p.FI.ResourceCost,status:!0},canActivate:[h.a1]},{path:"edit-resource-cost/:userCostId",component:j,data:{title:"Edit Resource Cost",icon:"icon-home",function:p.FI.ResourceCost,status:!0},canActivate:[h.a1]}]}],$e=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=D.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=D.\u0275\u0275defineInjector({imports:[[m.Bz.forChild(Je)],m.Bz]}),e}(),He=i(91841),Ue=i(36332),qe=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=D.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=D.\u0275\u0275defineInjector({providers:[],imports:[[o.CommonModule,a.m,l.FormsModule,l.ReactiveFormsModule,a.q,d.Is,Ue.o,X.ZQ.forRoot(),He.HttpClientModule]]}),e}(),Qe=i(44995),Ke={parse:{dateInput:"L"},display:{dateInput:"L",yearLabel:"YYYY",dateA11yLabel:"LL",yearA11yLabel:"YYYY"}},Xe=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=D.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=D.\u0275\u0275defineInjector({providers:[Qe.Y4,P,s.n4,s.Kx,{provide:c.Ad,useValue:"fr-FR"},{provide:c._A,useClass:u.t7,deps:[c.Ad]},{provide:c.sG,useValue:Ke}],imports:[[o.CommonModule,$e,a.m,l.FormsModule,l.ReactiveFormsModule,a.q,d.Is,qe]]}),e}()},72172:function(e,r,i){i.d(r,{z:function(){return s}});var o,a=i(37716),s=((o=function(){function e(){n(this,e)}return t(e,[{key:"blockPaste",value:function(e){for(var t=e.clipboardData.getData("text"),n=0,r=!1;n<t.length&&!0!==r;)this.isNotNumber(t[n].charCodeAt())?(r=!0,e.preventDefault()):n++}},{key:"onKeydownHandler",value:function(e){var t=e.key;void 0!==t&&(this.isNotNumber(t.charCodeAt())&&"Backspace"!==t&&"Delete"!==t&&"ArrowLeft"!==t&&"ArrowRight"!==t&&"Tab"!==t&&e.preventDefault(),null!=this.inputValue&&(-1!==this.inputValue.toString().indexOf(".")||-1!==this.inputValue.toString().indexOf(","))&&(46===t.charCodeAt()||44===t.charCodeAt())&&e.preventDefault())}},{key:"isNotNumber",value:function(e){return e<44||e>57||45===e||47===e}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275dir=a.\u0275\u0275defineDirective({type:o,selectors:[["","appNumberValidator",""]],hostBindings:function(e,t){1&e&&a.\u0275\u0275listener("paste",function(e){return t.blockPaste(e)})("keydown",function(e){return t.onKeydownHandler(e)})},inputs:{inputValue:"inputValue"}}),o)},55750:function(e,t,n){n.d(t,{Ry:function(){return r.R}});var r=n(34239);n(62758)},34239:function(e,r,i){i.d(r,{R:function(){return l}});var o,a=i(37716),s=i(10337),l=((o=function(){function e(t){n(this,e),this.searchFilterService=t}return t(e,[{key:"transform",value:function(e,t,n){if(this.startIndex=t*(n*this.searchFilterService.rowSpan)+1,this.endIndex=n*this.searchFilterService.rowSpan*(t+1),null!=e)return this.searchFilterService.showingDataLastFilter=e.slice(this.startIndex-1,this.endIndex),this.searchFilterService.resultChanged.next(),e.slice(this.startIndex-1,this.endIndex)}}]),e}()).\u0275fac=function(e){return new(e||o)(a.\u0275\u0275directiveInject(s.nJ,16))},o.\u0275pipe=a.\u0275\u0275definePipe({name:"paginator",type:o,pure:!0}),o)},39924:function(e,r,i){i.d(r,{J:function(){return g}});var o=i(37716),a=i(99692),s=i(10337),l=i(98295),c=i(67441),d=i(3679),u=i(38583),m=i(72458);function h(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",6),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;o.\u0275\u0275property("value",n),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(n)}}var p,f=function(){return[6,12,24,60,120]},g=((p=function(){function e(t){n(this,e),this.searchFilterService=t,this.disabled=!1,this.hidePageSize=!1,this.showFirstLastButtons=!1,this.page=new o.EventEmitter}return t(e,[{key:"pageIndexChanged",set:function(e){this.pageIndex=e,this.updateGoto()}},{key:"lengthChanged",set:function(e){this.length=e,this.updateGoto()}},{key:"pageSizeChanged",set:function(e){this.pageSize=e,this.updateGoto()}},{key:"ngOnInit",value:function(){this.updateGoto()}},{key:"onPaginateChange",value:function(e){this.searchFilterService.pageIndex=e.pageIndex,this.searchFilterService.pageSize=e.pageSize,this.length=e.length,this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.updateGoto(),this.emitPageEvent(e)}},{key:"updateGoto",value:function(){this.goTo=(this.pageIndex||0)+1,this.pageNumbers=[];for(var e=Math.ceil(this.length/this.pageSize),t=1;t<=e;t++)this.pageNumbers.push(t)}},{key:"goToChange",value:function(){this.paginator.pageIndex=this.goTo-1,this.searchFilterService.pageIndex=this.paginator.pageIndex,this.searchFilterService.pageSize=this.paginator.pageSize,this.emitPageEvent({length:this.paginator.length,pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize})}},{key:"emitPageEvent",value:function(e){this.page.next(e)}}]),e}()).\u0275fac=function(e){return new(e||p)(o.\u0275\u0275directiveInject(s.nJ))},p.\u0275cmp=o.\u0275\u0275defineComponent({type:p,selectors:[["app-paginator"]],viewQuery:function(e,t){var n;1&e&&o.\u0275\u0275viewQuery(a.NW,7),2&e&&o.\u0275\u0275queryRefresh(n=o.\u0275\u0275loadQuery())&&(t.paginator=n.first)},inputs:{length:"length",pageIndex:"pageIndex",pageSize:"pageSize",disabled:"disabled",hidePageSize:"hidePageSize",pageSizeOptions:"pageSizeOptions",showFirstLastButtons:"showFirstLastButtons",pageIndexChanged:["pageIndex","pageIndexChanged"],lengthChanged:["length","lengthChanged"],pageSizeChanged:["pageSize","pageSizeChanged"]},outputs:{page:"page"},decls:8,vars:8,consts:[[1,"d-flex"],[3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-paginator",1),o.\u0275\u0275listener("page",function(e){return t.onPaginateChange(e)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(2,"div",2),o.\u0275\u0275elementStart(3,"div",3),o.\u0275\u0275text(4,"Go To: "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-form-field"),o.\u0275\u0275elementStart(6,"mat-select",4),o.\u0275\u0275listener("ngModelChange",function(e){return t.goTo=e})("selectionChange",function(){return t.goToChange()}),o.\u0275\u0275template(7,h,2,2,"mat-option",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("length",t.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",o.\u0275\u0275pureFunction0(7,f))("showFirstLastButtons",!0),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngModel",t.goTo),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.pageNumbers))},directives:[a.NW,l.KE,c.gD,d.NgControlStatus,d.NgModel,u.NgForOf,m.ey],styles:['.mat-paginator[_ngcontent-%COMP%]{width:100%;float:right}.d-flex[_ngcontent-%COMP%]{display:flex}  .mat-select-trigger{font-size:12px}  .mat-option{font-size:12px}.go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}.go-to-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:56px;margin:6px 4px 0;font-size:12px;font-family:Roboto,"Helvetica Neue",sans-serif}.go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{width:36px;margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,"Helvetica Neue",sans-serif}']}),p)}}])}();