!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunktelnetteam_app=self.webpackChunktelnetteam_app||[]).push([[258],{60258:function(e,i,r){r.r(i),r.d(i,{AttendanceModule:function(){return St}});var a=r(38583),o=r(3679),s=r(22238),l=r(38590),c=r(32403),d=r(88452),m=r(63753),u=r(62028),g=r(70833),p=r(46782),h=function e(){n(this,e)},f=function e(){n(this,e)},v=r(82636),y=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};function k(e){return Reflect.metadata("type",e)}function S(e){return Reflect.metadata("dir",e)}function b(e){return Reflect.metadata("persisted",e)}var C,D=((C=D||(D={}))[C.In=1]="In",C[C.Out=2]="Out",D),x=function(){return(e=x||(x={}))[e.New=0]="New",e[e.Valid=1]="Valid",x;var e}(),w=function e(){n(this,e)};y([b(!0),k(v.sP.Decimal),S(v.Nm.Input)],w.prototype,"clockingId",void 0),y([b(!0),k(v.sP.Decimal),S(v.Nm.Input)],w.prototype,"clockingType",void 0),y([b(!0),k(v.sP.Decimal),S(v.Nm.Input)],w.prototype,"clockingSite",void 0),y([b(!0),k(v.sP.Date),S(v.Nm.Input)],w.prototype,"clockingDate",void 0),y([b(!0),k(v.sP.Decimal),S(v.Nm.Input)],w.prototype,"clockingAnomaly",void 0),y([b(!0),k(v.sP.Decimal),S(v.Nm.Input)],w.prototype,"userId",void 0),y([b(!1)],w.prototype,"clockingSingleSession",void 0),y([b(!1),k(v.sP.Decimal),S(v.Nm.Input)],w.prototype,"clockingState",void 0),y([b(!0),k(v.sP.Decimal),S(v.Nm.Input)],w.prototype,"userModif",void 0),y([b(!1)],w.prototype,"firstName",void 0),y([b(!1)],w.prototype,"lastName",void 0),y([b(!1)],w.prototype,"userNumber",void 0),y([b(!1)],w.prototype,"clockingAnomalieDesc",void 0),y([b(!1)],w.prototype,"clockingSiteDesc",void 0);var I=function e(){n(this,e)},T=function e(){n(this,e)},E=function e(){n(this,e)},M=r(55750),P=r(37716),O=r(51586),A=r(10337),N=function(){var e=function(){function e(t,i){n(this,e),this.genericService=t,this.entityParameterService=i,this.previousState=new g.tq(1),this.sortClockings=new g.xQ,this.selectCurrentWeek=new g.xQ,this.selectedUser=new g.xQ,this.stopClockingsGet=new g.xQ}return t(e,[{key:"getUserClockings",value:function(e,t,n){var i=new Array;this.entityParameterService.AddEntityParameter(i,"userId",e.toString(),v.sP.Decimal,v.Nm.Input),this.entityParameterService.AddEntityParameter(i,"fromDate",t.toString(),v.sP.Date,v.Nm.Input),this.entityParameterService.AddEntityParameter(i,"toDate",n.toString(),v.sP.Date,v.Nm.Input);var r=new O.u;return r.storedProcedureName="RHTT.GetUserClockings",r.entitiesParameters=new Array(i),r.cursorName="curs",this.genericService.createService("/Data/Get",r)}},{key:"deleteClocking",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"pointageId",e.toString(),v.sP.Decimal,v.Nm.InputOutput);var n=new O.u;return n.storedProcedureName="RHTT.DeletePointage",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Delete",n)}},{key:"InsertOrModifyClocking",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameters(t,e);var n=new O.u;return n.storedProcedureName="RHTT.InsertOrModifyClocking",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Save",n)}},{key:"getUsersClockings",value:function(e,t,n,i,r){var a=new Array;this.entityParameterService.AddEntityParameter(a,"usersId",e,v.sP.Varchar2,v.Nm.Input),this.entityParameterService.AddEntityParameter(a,"statesId",t,v.sP.Varchar2,v.Nm.Input),this.entityParameterService.AddEntityParameter(a,"typesId",n,v.sP.Varchar2,v.Nm.Input),this.entityParameterService.AddEntityParameter(a,"fromDate",null!=i?i.toString():"",v.sP.Date,v.Nm.Input),this.entityParameterService.AddEntityParameter(a,"toDate",null!=r?r.toString():"",v.sP.Date,v.Nm.Input);var o=new O.u;return o.storedProcedureName="RHTT.GetUsersClockings",o.entitiesParameters=new Array(a),o.cursorName="curs",this.genericService.createService("/Data/Get",o)}},{key:"getSites",value:function(){var e=new O.u;return e.storedProcedureName="RHTT.GetSites",e.cursorName="curs",this.genericService.createService("/Data/Get",e)}},{key:"validateClocking",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameters(t,e);var n=new O.u;return n.storedProcedureName="RHTT.ValidateClocking",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Save",n)}},{key:"refuseClocking",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"clockingId",e.toString(),v.sP.Decimal,v.Nm.InputOutput);var n=new O.u;return n.storedProcedureName="RHTT.RefuseClocking",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Save",n)}},{key:"deleteNewClocking",value:function(e){var t=new Array;this.entityParameterService.AddEntityParameter(t,"clockingId",e.toString(),v.sP.Decimal,v.Nm.InputOutput);var n=new O.u;return n.storedProcedureName="RHTT.DeleteNewClocking",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Save",n)}},{key:"getAnomalies",value:function(){var e=new O.u;return e.storedProcedureName="RHTT.GetAnomalies",e.cursorName="curs",this.genericService.createService("/Data/Get",e)}},{key:"getMissionInWeek",value:function(e,t,n){var i=new Array;this.entityParameterService.AddEntityParameter(i,"userId",e.toString(),v.sP.Decimal,v.Nm.Input),this.entityParameterService.AddEntityParameter(i,"fromDate",t.toString(),v.sP.Date,v.Nm.Input),this.entityParameterService.AddEntityParameter(i,"toDate",n.toString(),v.sP.Date,v.Nm.Input);var r=new O.u;return r.storedProcedureName="RHTT.GetMissionInWeek",r.entitiesParameters=new Array(i),r.cursorName="curs",this.genericService.createService("/Data/Get",r)}},{key:"getBusinessTripInWeek",value:function(e,t,n){var i=new Array;this.entityParameterService.AddEntityParameter(i,"userId",e.toString(),v.sP.Decimal,v.Nm.Input),this.entityParameterService.AddEntityParameter(i,"fromDate",t.toString(),v.sP.Date,v.Nm.Input),this.entityParameterService.AddEntityParameter(i,"toDate",n.toString(),v.sP.Date,v.Nm.Input);var r=new O.u;return r.storedProcedureName="RHTT.GetBusinessTripInWeek",r.entitiesParameters=new Array(i),r.cursorName="curs",this.genericService.createService("/Data/Get",r)}},{key:"GetPublicHoliday",value:function(){var e=new O.u;return e.storedProcedureName="RHTT.GetPublicHoliday",e.cursorName="curs",this.genericService.createService("/Data/Get",e)}},{key:"getHolidaysInWeek",value:function(e,t){var n=new Array;this.entityParameterService.AddEntityParameter(n,"fromDate",e.toString(),v.sP.Date,v.Nm.Input),this.entityParameterService.AddEntityParameter(n,"toDate",t.toString(),v.sP.Date,v.Nm.Input);var i=new O.u;return i.storedProcedureName="RHTT.GetHolidaysInWeek",i.entitiesParameters=new Array(n),i.cursorName="curs",this.genericService.createService("/Data/Get",i)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(P.\u0275\u0275inject(A.MY),P.\u0275\u0275inject(A.RZ))},e.\u0275prov=P.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),F=r(19992),H=r(98295),_=r(49983),W=r(43220),L=r(67827),V=r(69517),j=r(39924),U=r(4885),R=r(71840);function z(e,t){1&e&&(P.\u0275\u0275elementStart(0,"strong",17),P.\u0275\u0275text(1,"Entry"),P.\u0275\u0275elementEnd())}function B(e,t){1&e&&(P.\u0275\u0275elementStart(0,"strong",18),P.\u0275\u0275text(1,"Exit"),P.\u0275\u0275elementEnd())}function $(e,t){1&e&&(P.\u0275\u0275elementStart(0,"strong",19),P.\u0275\u0275text(1,"New"),P.\u0275\u0275elementEnd())}function G(e,t){1&e&&(P.\u0275\u0275elementStart(0,"strong",20),P.\u0275\u0275text(1,"Valid"),P.\u0275\u0275elementEnd())}function q(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"button",21),P.\u0275\u0275listener("click",function(){return P.\u0275\u0275restoreView(n),P.\u0275\u0275nextContext().validateClocking()}),P.\u0275\u0275elementStart(1,"em",22),P.\u0275\u0275text(2,"done"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}}function Y(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"button",23),P.\u0275\u0275listener("click",function(){return P.\u0275\u0275restoreView(n),P.\u0275\u0275nextContext().refuseClocking()}),P.\u0275\u0275elementStart(1,"em",22),P.\u0275\u0275text(2,"cancel"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}}function J(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"button",23),P.\u0275\u0275listener("click",function(){return P.\u0275\u0275restoreView(n),P.\u0275\u0275nextContext().edit()}),P.\u0275\u0275elementStart(1,"em",22),P.\u0275\u0275text(2,"edit"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}}function Q(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"button",23),P.\u0275\u0275listener("click",function(){return P.\u0275\u0275restoreView(n),P.\u0275\u0275nextContext().refuseClocking()}),P.\u0275\u0275elementStart(1,"em",22),P.\u0275\u0275text(2,"delete_forever"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}}var K=function(){var e=function(){function e(t,i,r){n(this,e),this.attendanceService=t,this.notificationService=i,this._router=r,this.refreshCard=new P.EventEmitter}return t(e,[{key:"ngOnInit",value:function(){this.currentUser=JSON.parse(localStorage.getItem("currentUser"))}},{key:"convertToInt",value:function(e){return+e}},{key:"isButtonDeletedVisible",value:function(){return this.clocking.clockingState===R.nx.New&&this.clocking.userId===this.currentUser.userId}},{key:"isButtonVisible",value:function(){return this.clocking.clockingState===R.nx.New&&this.clocking.userId!==this.currentUser.userId||-1!==this.currentUser.functionsId.indexOf(u.FI.ValidateLeave)}},{key:"validateClocking",value:function(){var e=this;this.clocking.userModif=this.currentUser.userId,this.attendanceService.validateClocking(this.clocking).subscribe(function(){e.notificationService.success("Clocking is Validate"),e.refreshCard.emit()})}},{key:"refuseClocking",value:function(){var e=this;this.attendanceService.refuseClocking(this.clocking.clockingId).subscribe(function(){e.notificationService.success("Clocking is refused"),e.refreshCard.emit()})}},{key:"deleteClocking",value:function(){var e=this;this.attendanceService.refuseClocking(this.clocking.clockingId).subscribe(function(){e.notificationService.success("Clocking is deleted"),e.refreshCard.emit()})}},{key:"edit",value:function(){this._router.navigate(["/attendance/attendance/"+this.clocking.clockingId])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(P.\u0275\u0275directiveInject(N),P.\u0275\u0275directiveInject(A.gq),P.\u0275\u0275directiveInject(d.F0))},e.\u0275cmp=P.\u0275\u0275defineComponent({type:e,selectors:[["app-clocking-card"]],inputs:{clocking:"clocking"},outputs:{refreshCard:"refreshCard"},decls:37,vars:21,consts:[[1,"card"],[1,"card-header"],[1,"thick",2,"display","inline"],[1,"n","f-right"],["class","label label-entry",4,"ngIf"],["class","label label-exit",4,"ngIf"],["class","label label-new",4,"ngIf"],["class","label label-valid",4,"ngIf"],[1,"card-body"],[1,"row"],[1,"col-sm-12"],[1,"list","list-unstyled","text"],[1,"thick"],[1,"card-footer"],[1,"task-board"],["class","btn btn-mini btn-primary m-r-10 ripple light","type","button",3,"click",4,"ngIf"],["class","btn btn-mini btn-primary ripple light f-right","type","button",3,"click",4,"ngIf"],[1,"label","label-entry"],[1,"label","label-exit"],[1,"label","label-new"],[1,"label","label-valid"],["type","button",1,"btn","btn-mini","btn-primary","m-r-10","ripple","light",3,"click"],[1,"material-icons","icon"],["type","button",1,"btn","btn-mini","btn-primary","ripple","light","f-right",3,"click"]],template:function(e,t){1&e&&(P.\u0275\u0275elementStart(0,"div",0),P.\u0275\u0275elementStart(1,"div",1),P.\u0275\u0275elementStart(2,"span",2),P.\u0275\u0275text(3),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(4,"div",3),P.\u0275\u0275template(5,z,2,0,"strong",4),P.\u0275\u0275template(6,B,2,0,"strong",5),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(7,"div",3),P.\u0275\u0275template(8,$,2,0,"strong",6),P.\u0275\u0275template(9,G,2,0,"strong",7),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(10,"div",8),P.\u0275\u0275elementStart(11,"div",9),P.\u0275\u0275elementStart(12,"div",10),P.\u0275\u0275elementStart(13,"ul",11),P.\u0275\u0275elementStart(14,"strong",12),P.\u0275\u0275text(15," Date: "),P.\u0275\u0275elementEnd(),P.\u0275\u0275text(16),P.\u0275\u0275pipe(17,"date"),P.\u0275\u0275elementStart(18,"strong",12),P.\u0275\u0275text(19," Time: "),P.\u0275\u0275elementEnd(),P.\u0275\u0275text(20),P.\u0275\u0275pipe(21,"date"),P.\u0275\u0275elementStart(22,"li"),P.\u0275\u0275elementStart(23,"strong",12),P.\u0275\u0275text(24,"Location: "),P.\u0275\u0275elementEnd(),P.\u0275\u0275text(25),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(26,"li"),P.\u0275\u0275elementStart(27,"strong",12),P.\u0275\u0275text(28,"Anomaly: "),P.\u0275\u0275elementEnd(),P.\u0275\u0275text(29),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(30,"div",13),P.\u0275\u0275elementStart(31,"div",14),P.\u0275\u0275template(32,q,3,0,"button",15),P.\u0275\u0275template(33,Y,3,0,"button",16),P.\u0275\u0275template(34,J,3,0,"button",16),P.\u0275\u0275template(35,Q,3,0,"button",16),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(36,"br")),2&e&&(P.\u0275\u0275advance(3),P.\u0275\u0275textInterpolate3(" ",t.clocking.userNumber," - ",t.clocking.firstName," ",t.clocking.lastName,""),P.\u0275\u0275advance(2),P.\u0275\u0275property("ngIf",1===t.clocking.clockingType),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",2===t.clocking.clockingType),P.\u0275\u0275advance(2),P.\u0275\u0275property("ngIf",0===t.clocking.clockingState),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",1===t.clocking.clockingState),P.\u0275\u0275advance(7),P.\u0275\u0275textInterpolate1(" ",P.\u0275\u0275pipeBind2(17,15,t.clocking.clockingDate,"dd/MM/yyyy")," \xa0 "),P.\u0275\u0275advance(4),P.\u0275\u0275textInterpolate1(" ",P.\u0275\u0275pipeBind2(21,18,t.clocking.clockingDate,"HH:mm")," \xa0 "),P.\u0275\u0275advance(5),P.\u0275\u0275textInterpolate1(" ",t.clocking.clockingSiteDesc," \xa0 "),P.\u0275\u0275advance(4),P.\u0275\u0275textInterpolate1(" ",t.clocking.clockingAnomalieDesc," "),P.\u0275\u0275advance(3),P.\u0275\u0275property("ngIf",0===t.clocking.clockingState&&t.clocking.userId!==t.convertToInt(t.currentUser.userId)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",0===t.clocking.clockingState&&t.clocking.userId!==t.convertToInt(t.currentUser.userId)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",t.clocking.userId===t.convertToInt(t.currentUser.userId)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",t.clocking.userId===t.convertToInt(t.currentUser.userId)))},directives:[a.NgIf],pipes:[a.DatePipe],styles:[".thick[_ngcontent-%COMP%]{font-weight:900}.text[_ngcontent-%COMP%]{font-size:14px}.icon[_ngcontent-%COMP%]{font-size:15px}.card-header[_ngcontent-%COMP%]{padding:13px;border-bottom:1px solid rgba(0,0,0,.125)}.label-entry[_ngcontent-%COMP%]{background:#33cc99;font-size:12px;color:#fff;font-weight:bold}.label-exit[_ngcontent-%COMP%]{background:#dc143c;font-size:12px;color:#fff;font-weight:bold}.label-valid[_ngcontent-%COMP%]{background:#33cc99;font-size:12px;color:#fff;font-weight:bold}.label-new[_ngcontent-%COMP%]{background:#00bcd4;font-size:12px;color:#fff;font-weight:bold}.card-body[_ngcontent-%COMP%]{padding-bottom:5px}.card-footer[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0}.task-board[_ngcontent-%COMP%]{margin-top:0}"]}),e}(),Z=r(32789),X=r(85718),ee=r(67441),te=r(72458),ne=["clockingForm"];function ie(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-option",16),P.\u0275\u0275text(1),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;P.\u0275\u0275property("value",n.id),P.\u0275\u0275advance(1),P.\u0275\u0275textInterpolate1(" ",n.description," ")}}function re(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-option",16),P.\u0275\u0275text(1),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;P.\u0275\u0275property("value",n.id),P.\u0275\u0275advance(1),P.\u0275\u0275textInterpolate1(" ",n.description," ")}}function ae(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-option",16),P.\u0275\u0275text(1),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;P.\u0275\u0275property("value",n.id),P.\u0275\u0275advance(1),P.\u0275\u0275textInterpolate1(" ",n.description," ")}}var oe=function(){return{standalone:!0}},se=function(){var e=function(){function e(t,i,r,a,o){n(this,e),this.dialogRef=t,this.notificationService=i,this.attendanceService=r,this._router=a,this.clocking=new w,this.time={hour:14,minute:30},this.sites=[],this.clockingAnomaliesIdentifier=[],this.clockingTypesIdentifier=[{id:D.In,description:"Entry"},{id:D.Out,description:"Exit"}],this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.editClocking=o.editClocking}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.startTime=this.time,this.attendanceService.getAnomalies().subscribe(function(t){t.forEach(function(t){e.clockingAnomaliesIdentifier.push(Object.assign(new X.x,t))})}),this.getSites()}},{key:"getSites",value:function(){var e=this;this.attendanceService.getSites().subscribe(function(t){e.sites=t})}},{key:"close",value:function(){this.dialogRef.close()}},{key:"save",value:function(){var e=this;this.clocking.clockingId=0,this.clocking.userId=this.currentUser.userId,this.clockingForm.valid?(this.clocking.clockingDate=new Date(this.clocking.clockingDate),this.clocking.clockingDate.setHours(this.startTime.hour),this.clocking.clockingDate.setMinutes(this.startTime.minute),this.clocking.clockingState=0,this.clocking.userModif=this.currentUser.userId,this.attendanceService.InsertOrModifyClocking(this.clocking).subscribe(function(){e.notificationService.success("Clocking is saved successfully"),e._router.navigate(["/attendance/attendance"])})):this.notificationService.danger("Please fill all required fields")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(P.\u0275\u0275directiveInject(s.so),P.\u0275\u0275directiveInject(A.gq),P.\u0275\u0275directiveInject(N),P.\u0275\u0275directiveInject(d.F0),P.\u0275\u0275directiveInject(s.WI))},e.\u0275cmp=P.\u0275\u0275defineComponent({type:e,selectors:[["app-add-clocking"]],viewQuery:function(e,t){var n;(1&e&&P.\u0275\u0275viewQuery(ne,7),2&e)&&(P.\u0275\u0275queryRefresh(n=P.\u0275\u0275loadQuery())&&(t.clockingForm=n.first))},decls:40,vars:19,consts:[[1,"modal_header"],[1,"modal_title"],[1,"material-icons","modal-close",3,"click"],[1,"card-body"],["id","clockingForm"],["clockingForm","ngForm"],["required","","matInput","","placeholder","Clocking Date","name","clockingDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startView"],["clockingDate",""],[1,"col-sm-3"],[3,"ngModelOptions","ngModel","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Office","name","whereis","required","",3,"ngModelOptions","ngModel","ngModelChange"],["type","submit",1,"btn","btn-md","btn-primary","ripple","light","m-r-20","f-right",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"div",0),P.\u0275\u0275elementStart(1,"div",1),P.\u0275\u0275elementStart(2,"span"),P.\u0275\u0275text(3," Add Clocking "),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(4,"span"),P.\u0275\u0275elementStart(5,"em",2),P.\u0275\u0275listener("click",function(){return t.close()}),P.\u0275\u0275text(6,"close"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(7,"div",3),P.\u0275\u0275elementStart(8,"form",4,5),P.\u0275\u0275elementStart(10,"mat-form-field"),P.\u0275\u0275elementStart(11,"mat-label"),P.\u0275\u0275text(12,"Clocking date"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(13,"input",6),P.\u0275\u0275listener("ngModelChange",function(e){return t.clocking.clockingDate=e}),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(14,"mat-datepicker-toggle",7),P.\u0275\u0275element(15,"mat-datepicker",8,9),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(17,"br"),P.\u0275\u0275elementStart(18,"div",10),P.\u0275\u0275elementStart(19,"ngb-timepicker",11),P.\u0275\u0275listener("ngModelChange",function(e){return t.startTime=e}),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(20,"mat-form-field"),P.\u0275\u0275elementStart(21,"mat-label"),P.\u0275\u0275text(22,"Clocking Type"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(23,"mat-select",12),P.\u0275\u0275listener("ngModelChange",function(e){return t.clocking.clockingType=e}),P.\u0275\u0275template(24,ie,2,2,"mat-option",13),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(25,"br"),P.\u0275\u0275elementStart(26,"mat-form-field"),P.\u0275\u0275elementStart(27,"mat-label"),P.\u0275\u0275text(28,"Clocking Anomalie"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(29,"mat-select",12),P.\u0275\u0275listener("ngModelChange",function(e){return t.clocking.clockingAnomaly=e}),P.\u0275\u0275template(30,re,2,2,"mat-option",13),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(31,"br"),P.\u0275\u0275elementStart(32,"mat-form-field"),P.\u0275\u0275elementStart(33,"mat-label"),P.\u0275\u0275text(34,"Clocking Site"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(35,"mat-select",14),P.\u0275\u0275listener("ngModelChange",function(e){return t.clocking.clockingSite=e}),P.\u0275\u0275template(36,ae,2,2,"mat-option",13),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(37,"br"),P.\u0275\u0275elementStart(38,"button",15),P.\u0275\u0275listener("click",function(){return t.save()}),P.\u0275\u0275text(39,"Save "),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()),2&e){var n=P.\u0275\u0275reference(16);P.\u0275\u0275advance(13),P.\u0275\u0275property("matDatepicker",n)("ngModel",t.clocking.clockingDate),P.\u0275\u0275advance(1),P.\u0275\u0275property("for",n),P.\u0275\u0275advance(1),P.\u0275\u0275property("startView","month"),P.\u0275\u0275advance(4),P.\u0275\u0275property("ngModelOptions",P.\u0275\u0275pureFunction0(15,oe))("ngModel",t.startTime),P.\u0275\u0275advance(4),P.\u0275\u0275property("ngModel",t.clocking.clockingType)("ngModelOptions",P.\u0275\u0275pureFunction0(16,oe)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngForOf",t.clockingTypesIdentifier),P.\u0275\u0275advance(5),P.\u0275\u0275property("ngModel",t.clocking.clockingAnomaly)("ngModelOptions",P.\u0275\u0275pureFunction0(17,oe)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngForOf",t.clockingAnomaliesIdentifier),P.\u0275\u0275advance(5),P.\u0275\u0275property("ngModelOptions",P.\u0275\u0275pureFunction0(18,oe))("ngModel",t.clocking.clockingSite),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngForOf",t.sites)}},directives:[o.\u0275NgNoValidate,o.NgControlStatusGroup,o.NgForm,H.KE,H.hX,_.Nt,W.hl,o.DefaultValueAccessor,o.RequiredValidator,o.NgControlStatus,o.NgModel,W.nW,H.R9,W.Mq,V.Pm,ee.gD,a.NgForOf,te.ey],styles:["mat-option.mat-selected[_ngcontent-%COMP%]{background-color:#448aff}.card-header[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{float:right;cursor:pointer;font-size:24px}.modal_body[_ngcontent-%COMP%]{overflow:hidden}.modal_header[_ngcontent-%COMP%]{height:50px;background-color:#448aff;padding:18px 15px}.modal_header[_ngcontent-%COMP%]   .modal_title[_ngcontent-%COMP%]{color:#fff;line-height:1}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{float:right;cursor:pointer}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:red}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]{cursor:not-allowed;color:#dcdcdc}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]:hover{color:#dcdcdc}.span[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:15px;color:#4e4747;font-weight:bold}"]}),e}(),le=r(11494);function ce(e,t){1&e&&(P.\u0275\u0275elementStart(0,"mat-header-cell",18),P.\u0275\u0275text(1,"Number"),P.\u0275\u0275elementEnd())}function de(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-cell"),P.\u0275\u0275text(1),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;P.\u0275\u0275advance(1),P.\u0275\u0275textInterpolate1(" ",n.userNumber," ")}}function me(e,t){1&e&&(P.\u0275\u0275elementStart(0,"mat-header-cell",18),P.\u0275\u0275text(1,"Name"),P.\u0275\u0275elementEnd())}function ue(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-cell"),P.\u0275\u0275text(1),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;P.\u0275\u0275advance(1),P.\u0275\u0275textInterpolate2(" ",n.firstName," ",n.lastName," ")}}function ge(e,t){1&e&&(P.\u0275\u0275elementStart(0,"mat-header-cell",18),P.\u0275\u0275text(1,"Date"),P.\u0275\u0275elementEnd())}function pe(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-cell"),P.\u0275\u0275text(1),P.\u0275\u0275pipe(2,"date"),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;P.\u0275\u0275advance(1),P.\u0275\u0275textInterpolate1(" ",P.\u0275\u0275pipeBind2(2,1,n.clockingDate,"dd/MM/yyyy")," ")}}function he(e,t){1&e&&(P.\u0275\u0275elementStart(0,"mat-header-cell",18),P.\u0275\u0275text(1,"Time"),P.\u0275\u0275elementEnd())}function fe(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-cell"),P.\u0275\u0275text(1),P.\u0275\u0275pipe(2,"date"),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;P.\u0275\u0275advance(1),P.\u0275\u0275textInterpolate1(" ",P.\u0275\u0275pipeBind2(2,1,n.clockingDate,"HH:mm")," ")}}function ve(e,t){1&e&&(P.\u0275\u0275elementStart(0,"mat-header-cell",18),P.\u0275\u0275text(1,"Type"),P.\u0275\u0275elementEnd())}function ye(e,t){1&e&&(P.\u0275\u0275elementStart(0,"label",21),P.\u0275\u0275text(1,"Entry"),P.\u0275\u0275elementEnd())}function ke(e,t){1&e&&(P.\u0275\u0275elementStart(0,"label",22),P.\u0275\u0275text(1,"Exit"),P.\u0275\u0275elementEnd())}function Se(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-cell"),P.\u0275\u0275template(1,ye,2,0,"label",19),P.\u0275\u0275template(2,ke,2,0,"label",20),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",1===n.clockingType),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",2===n.clockingType)}}function be(e,t){1&e&&(P.\u0275\u0275elementStart(0,"mat-header-cell",18),P.\u0275\u0275text(1,"Anomaly"),P.\u0275\u0275elementEnd())}function Ce(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-cell"),P.\u0275\u0275text(1),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;P.\u0275\u0275advance(1),P.\u0275\u0275textInterpolate1(" ",n.clockingAnomalieDesc," ")}}function De(e,t){1&e&&(P.\u0275\u0275elementStart(0,"mat-header-cell",18),P.\u0275\u0275text(1,"Location"),P.\u0275\u0275elementEnd())}function xe(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-cell"),P.\u0275\u0275text(1),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;P.\u0275\u0275advance(1),P.\u0275\u0275textInterpolate1(" ",n.clockingSiteDesc," ")}}function we(e,t){1&e&&(P.\u0275\u0275elementStart(0,"mat-header-cell",18),P.\u0275\u0275text(1,"Status"),P.\u0275\u0275elementEnd())}function Ie(e,t){1&e&&(P.\u0275\u0275elementStart(0,"label",25),P.\u0275\u0275text(1,"New"),P.\u0275\u0275elementEnd())}function Te(e,t){1&e&&(P.\u0275\u0275elementStart(0,"label",26),P.\u0275\u0275text(1,"Valid"),P.\u0275\u0275elementEnd())}function Ee(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-cell"),P.\u0275\u0275template(1,Ie,2,0,"label",23),P.\u0275\u0275template(2,Te,2,0,"label",24),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",0===n.clockingState),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",1===n.clockingState)}}function Me(e,t){1&e&&P.\u0275\u0275element(0,"mat-header-cell")}function Pe(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"button",31),P.\u0275\u0275listener("click",function(){P.\u0275\u0275restoreView(n);var e=P.\u0275\u0275nextContext().$implicit;return P.\u0275\u0275nextContext(2).validateClocking(e)}),P.\u0275\u0275elementStart(1,"em",32),P.\u0275\u0275text(2,"done"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}}function Oe(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"button",33),P.\u0275\u0275listener("click",function(){P.\u0275\u0275restoreView(n);var e=P.\u0275\u0275nextContext().$implicit;return P.\u0275\u0275nextContext(2).refuseClocking(e.clockingId)}),P.\u0275\u0275elementStart(1,"em",32),P.\u0275\u0275text(2,"cancel"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}}function Ae(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"button",34),P.\u0275\u0275listener("click",function(){P.\u0275\u0275restoreView(n);var e=P.\u0275\u0275nextContext().$implicit;return P.\u0275\u0275nextContext(2).edit(e.permissionId)}),P.\u0275\u0275elementStart(1,"em",35),P.\u0275\u0275text(2,"create"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}}function Ne(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"button",36),P.\u0275\u0275listener("click",function(){P.\u0275\u0275restoreView(n);var e=P.\u0275\u0275nextContext().$implicit;return P.\u0275\u0275nextContext(2).deleteClocking(e.clockingId)}),P.\u0275\u0275elementStart(1,"em",32),P.\u0275\u0275text(2,"delete_forever"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}}function Fe(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"mat-cell"),P.\u0275\u0275template(1,Pe,3,0,"button",27),P.\u0275\u0275template(2,Oe,3,0,"button",28),P.\u0275\u0275template(3,Ae,3,0,"button",29),P.\u0275\u0275template(4,Ne,3,0,"button",30),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=P.\u0275\u0275nextContext(2);P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",0===n.clockingState&&n.userId!==i.convertToInt(i.currentUser.userId)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",0===n.clockingState&&n.userId!==i.convertToInt(i.currentUser.userId)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",0===i.convertToInt(n.clockingState)&&i.convertToInt(n.userId)===i.convertToInt(i.currentUser.userId)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",0===i.convertToInt(n.clockingState)&&i.convertToInt(n.userId)===i.convertToInt(i.currentUser.userId))}}function He(e,t){1&e&&P.\u0275\u0275element(0,"mat-header-row",37)}function _e(e,t){1&e&&P.\u0275\u0275element(0,"mat-row")}function We(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"div",1),P.\u0275\u0275elementStart(1,"mat-table",2,3),P.\u0275\u0275listener("matSortChange",function(e){return P.\u0275\u0275restoreView(n),P.\u0275\u0275nextContext().onSortData(e)}),P.\u0275\u0275elementContainerStart(3,4),P.\u0275\u0275template(4,ce,2,0,"mat-header-cell",5),P.\u0275\u0275template(5,de,2,1,"mat-cell",6),P.\u0275\u0275elementContainerEnd(),P.\u0275\u0275elementContainerStart(6,7),P.\u0275\u0275template(7,me,2,0,"mat-header-cell",5),P.\u0275\u0275template(8,ue,2,2,"mat-cell",6),P.\u0275\u0275elementContainerEnd(),P.\u0275\u0275elementContainerStart(9,8),P.\u0275\u0275template(10,ge,2,0,"mat-header-cell",5),P.\u0275\u0275template(11,pe,3,4,"mat-cell",6),P.\u0275\u0275elementContainerEnd(),P.\u0275\u0275elementContainerStart(12,9),P.\u0275\u0275template(13,he,2,0,"mat-header-cell",5),P.\u0275\u0275template(14,fe,3,4,"mat-cell",6),P.\u0275\u0275elementContainerEnd(),P.\u0275\u0275elementContainerStart(15,10),P.\u0275\u0275template(16,ve,2,0,"mat-header-cell",5),P.\u0275\u0275template(17,Se,3,2,"mat-cell",6),P.\u0275\u0275elementContainerEnd(),P.\u0275\u0275elementContainerStart(18,11),P.\u0275\u0275template(19,be,2,0,"mat-header-cell",5),P.\u0275\u0275template(20,Ce,2,1,"mat-cell",6),P.\u0275\u0275elementContainerEnd(),P.\u0275\u0275elementContainerStart(21,12),P.\u0275\u0275template(22,De,2,0,"mat-header-cell",5),P.\u0275\u0275template(23,xe,2,1,"mat-cell",6),P.\u0275\u0275elementContainerEnd(),P.\u0275\u0275elementContainerStart(24,13),P.\u0275\u0275template(25,we,2,0,"mat-header-cell",5),P.\u0275\u0275template(26,Ee,3,2,"mat-cell",6),P.\u0275\u0275elementContainerEnd(),P.\u0275\u0275elementContainerStart(27,14),P.\u0275\u0275template(28,Me,1,0,"mat-header-cell",15),P.\u0275\u0275template(29,Fe,5,4,"mat-cell",6),P.\u0275\u0275elementContainerEnd(),P.\u0275\u0275template(30,He,1,0,"mat-header-row",16),P.\u0275\u0275template(31,_e,1,0,"mat-row",17),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}if(2&e){var i=P.\u0275\u0275nextContext();P.\u0275\u0275advance(1),P.\u0275\u0275property("dataSource",i.dataSource),P.\u0275\u0275advance(29),P.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),P.\u0275\u0275advance(1),P.\u0275\u0275property("matRowDefColumns",i.displayedColumns)}}var Le=function(){var e=function(){function e(t,i,r,a){n(this,e),this.dialog=t,this.attendanceService=i,this.searchFilterService=r,this.notificationService=a,this.displayedColumns=["number","name","date","time","anomaly","location","type","status","buttons"],this.dataSource=new Z.by,this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.refreshList=new P.EventEmitter,this.editClocking=!0}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.dataSource=new Z.by(this.clockings),this.subscription=this.searchFilterService.resultChanged.subscribe(function(){e.dataSource=new Z.by(e.searchFilterService.showingDataLastFilter)}),this.user=JSON.parse(localStorage.getItem("currentUser")),this.permissionoNewState=R.nx.New}},{key:"convertToInt",value:function(e){return Number.parseInt(e,10)}},{key:"onSortData",value:function(e){this.attendanceService.sortClockings.next(e)}},{key:"validateClocking",value:function(e){var t=this;e.userModif=this.currentUser.userId,this.attendanceService.validateClocking(e).subscribe(function(){t.notificationService.success("This clocking is Validate")}),e.clockingState=1}},{key:"refuseClocking",value:function(e){var t=this;this.attendanceService.refuseClocking(e).subscribe(function(){t.notificationService.success("clocking is refused")})}},{key:"deleteClocking",value:function(e){var t=this;this.attendanceService.refuseClocking(e).subscribe(function(){t.notificationService.success("clocking deleted"),t.refreshList.emit()})}},{key:"openAddAttendanceDialog",value:function(){this.displayAddClockingDialogRef=this.dialog.open(se,{disableClose:!1,panelClass:"form_modal",width:"450px",height:"500px",hasBackdrop:!0,data:{editclocking:this.editClocking}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(P.\u0275\u0275directiveInject(s.uw),P.\u0275\u0275directiveInject(N),P.\u0275\u0275directiveInject(A.nJ),P.\u0275\u0275directiveInject(A.gq))},e.\u0275cmp=P.\u0275\u0275defineComponent({type:e,selectors:[["app-clockings-table"]],inputs:{clockings:"clockings"},outputs:{refreshList:"refreshList"},decls:1,vars:1,consts:[["class","example-container mat-elevation-z8",4,"ngIf"],[1,"example-container","mat-elevation-z8"],["matSort","","matSortDirection","asc","matSortDisableClear","",3,"dataSource","matSortChange"],["table",""],["matColumnDef","number"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","date"],["matColumnDef","time"],["matColumnDef","type"],["matColumnDef","anomaly"],["matColumnDef","location"],["matColumnDef","status"],["matColumnDef","buttons"],[4,"matHeaderCellDef"],["class"," table-primary table-*",4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["class","label label-entry",4,"ngIf"],["class","label label-exit",4,"ngIf"],[1,"label","label-entry"],[1,"label","label-exit"],["class","label label-new",4,"ngIf"],["class","label label-valid",4,"ngIf"],[1,"label","label-new"],[1,"label","label-valid"],["class","btn btn-mini btn-primary ripple m-r-10 light f-right","type","button",3,"click",4,"ngIf"],["class","btn btn-mini btn-primary ripple light f-left","type","button",3,"click",4,"ngIf"],["class","btn btn-mini btn-primary ripple m-r-10 light","type","button","style","width: 46px; height: 28px;",3,"click",4,"ngIf"],["class","btn btn-mini btn-primary ripple light ","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-mini","btn-primary","ripple","m-r-10","light","f-right",3,"click"],[1,"material-icons"],["type","button",1,"btn","btn-mini","btn-primary","ripple","light","f-left",3,"click"],["type","button",1,"btn","btn-mini","btn-primary","ripple","m-r-10","light",2,"width","46px","height","28px",3,"click"],[1,"material-icons",2,"font-size","medium"],["type","button",1,"btn","btn-mini","btn-primary","ripple","light",3,"click"],[1,"table-primary","table-*"]],template:function(e,t){1&e&&P.\u0275\u0275template(0,We,32,3,"div",0),2&e&&P.\u0275\u0275property("ngIf",void 0!==t.clockings&&0!==t.clockings.length)},directives:[a.NgIf,Z.BZ,le.YE,Z.w1,Z.fO,Z.Dz,Z.as,Z.nj,Z.ge,le.nU,Z.ev,Z.XQ,Z.Gk],pipes:[a.DatePipe],styles:[".mat-table[_ngcontent-%COMP%]{overflow:auto;border-radius:4px;max-height:calc(100vh - 392px)}.label-entry[_ngcontent-%COMP%]{background:#33cc99;font-size:12px;color:#fff;font-weight:bold}.label-exit[_ngcontent-%COMP%]{background:#dc143c;font-size:12px;color:#fff;font-weight:bold}.label-valid[_ngcontent-%COMP%]{background:#33cc99;font-size:12px;color:#fff;font-weight:bold}.label-new[_ngcontent-%COMP%]{background:#00bcd4;font-size:12px;color:#fff;font-weight:bold}.card-body[_ngcontent-%COMP%]{padding-bottom:5px}.mat-header-cell[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:600}.material-icons[_ngcontent-%COMP%]{font-size:15px}.mat-column-buttons[_ngcontent-%COMP%]{flex:0 0 110px}table[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}"]}),e}(),Ve=r(34239);function je(e,t){1&e&&(P.\u0275\u0275elementStart(0,"div"),P.\u0275\u0275elementStart(1,"h1"),P.\u0275\u0275text(2,"No Result Found"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd())}function Ue(e,t){1&e&&(P.\u0275\u0275elementStart(0,"div",36),P.\u0275\u0275elementStart(1,"div",37),P.\u0275\u0275elementStart(2,"div",38),P.\u0275\u0275elementStart(3,"div",1),P.\u0275\u0275elementStart(4,"div",39),P.\u0275\u0275element(5,"mat-spinner"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd())}function Re(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"div",42),P.\u0275\u0275elementStart(1,"app-clocking-card",43),P.\u0275\u0275listener("refreshCard",function(){return P.\u0275\u0275restoreView(n),P.\u0275\u0275nextContext(2).PermissionRefreshed()}),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;P.\u0275\u0275advance(1),P.\u0275\u0275property("clocking",i)}}function ze(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"div",40),P.\u0275\u0275template(1,Re,2,1,"div",41),P.\u0275\u0275pipe(2,"paginator"),P.\u0275\u0275elementEnd()),2&e){var n=P.\u0275\u0275nextContext();P.\u0275\u0275classProp("blurred",n.isLoading),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngForOf",P.\u0275\u0275pipeBind3(2,3,n.clockings,n.searchFilterService.pageIndex,n.searchFilterService.pageSize))}}function Be(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"div",44),P.\u0275\u0275elementStart(1,"app-clockings-table",45),P.\u0275\u0275listener("refreshList",function(){return P.\u0275\u0275restoreView(n),P.\u0275\u0275nextContext().PermissionRefreshed()}),P.\u0275\u0275pipe(2,"paginator"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}if(2&e){var i=P.\u0275\u0275nextContext();P.\u0275\u0275classProp("blurred",i.isLoading),P.\u0275\u0275advance(1),P.\u0275\u0275property("clockings",P.\u0275\u0275pipeBind3(2,3,i.clockings,i.searchFilterService.pageIndex,i.searchFilterService.pageSize))}}var $e=function(){var e=function(){function e(t,i,r,a){n(this,e),this.attendanceService=t,this.searchFilterService=i,this.sortService=r,this.excelService=a,this.selectedUser=[],this.statusesIdentifiers=[{id:x.New,description:"New"},{id:x.Valid,description:"Valid"}],this.selectedStatusesIdentifiers=[],this.typesIdentifiers=[{id:D.In,description:"Entry"},{id:D.Out,description:"Exit"}],this.selectedTypesIdentifiers=[],this.dropdownSettings={},this.paginatorPipe=new M.Ry(this.searchFilterService),this.listView=!1,this.clockings=[],this.subscription=new g.w0,this.destroyed=new g.xQ}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.searchFilterService.pageIndex=0,this.searchFilterService.pageSize=24,this.dropdownSettings={singleSelection:!1,idField:"id",textField:"description",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,enableCheckAll:!0,allowSearchFilter:!1,maxHeight:150,placeholder:"criteria",searchPlaceholderText:"Search..."},this.setSearchFilter(),this.subscription.add(this.attendanceService.sortClockings.subscribe(function(t){e.onSortData(t)})),this.subscription.add(this.attendanceService.previousState.pipe((0,p.R)(this.destroyed)).subscribe(function(t){t&&t.getPrevious&&(e.onSearch(),e.searchFilterService.pageSize=t.pageSize,e.searchFilterService.pageIndex=t.pageIndex,e.listView="card"!==t.type,e.destroyed.next(),e.attendanceService.previousState.next())}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe(),this.searchFilterService.showingDataLastFilter=[]}},{key:"setSearchFilter",value:function(){var e=JSON.parse(sessionStorage.getItem("clockingSearch"));if(e)e.periodFrom&&(this.periodFrom=e.periodFrom),e.periodTo&&(this.periodTo=e.periodTo),e.selectedStatusesIdentifiers&&(this.selectedStatusesIdentifiers=e.selectedStatusesIdentifiers),e.selectedTypesIdentifiers&&(this.selectedTypesIdentifiers=e.selectedTypesIdentifiers);else{var t=new Date;this.periodFrom=new Date(t.getFullYear(),t.getMonth()-1,1),this.periodTo=new Date(t.getFullYear(),t.getMonth()+2,0),this.usersIds=this.selectedUser.map(function(e){return e.userId}).join(","),this.selectedStatusesIdentifiers=[this.statusesIdentifiers[0]],this.selectedStatusesIds=this.selectedStatusesIdentifiers.map(function(e){return e.id}).join(","),this.selectedTypesIdentifiers=[],this.selectedTypesIds=""}}},{key:"onSearch",value:function(){var e=new f;e.name=this.usersIds,e.periodFrom=this.periodFrom,e.periodTo=this.periodTo,e.selectedStatusesIdentifiers=this.selectedStatusesIdentifiers,e.selectedTypesIdentifiers=this.selectedTypesIdentifiers,sessionStorage.setItem("clockingSearch",JSON.stringify(e)),this.usersIds=this.selectedUser.map(function(e){return e.userId}).join(","),this.selectedStatusesIds=0===this.selectedStatusesIdentifiers.length?this.statusesIdentifiers.map(function(e){return e.id}).join(","):this.selectedStatusesIdentifiers.map(function(e){return e.id}).join(","),this.selectedTypesIds=0===this.selectedTypesIdentifiers.length?this.typesIdentifiers.map(function(e){return e.id}).join(","):this.selectedTypesIdentifiers.map(function(e){return e.id}).join(","),this.getUsersClockings(this.usersIds,this.selectedStatusesIds,this.selectedTypesIds,this.periodFrom,this.periodTo)}},{key:"onResetAllFilters",value:function(){sessionStorage.removeItem("clockingSearch");var e=new Date;this.periodFrom=new Date(e.getFullYear(),e.getMonth()-1,1),this.periodTo=new Date(e.getFullYear(),e.getMonth()+2,0),this.selectedUser=[],this.selectedStatusesIdentifiers=[this.statusesIdentifiers[0]],this.selectedTypesIdentifiers=[]}},{key:"PermissionRefreshed",value:function(){this.getUsersClockings(this.usersIds,this.selectedStatusesIds,this.selectedTypesIds,this.periodFrom,this.periodTo)}},{key:"getUsersClockings",value:function(e,t,n,i,r){var a=this;this.isLoading=!0,this.attendanceService.getUsersClockings(e,t,n,i,r).subscribe(function(e){null!=e&&(a.clockings=[],e.forEach(function(e){a.clockings.push(Object.assign(new w,e))}),a.lengthClockings=a.clockings.length),a.isLoading=!1})}},{key:"onCardViewMode",value:function(){this.listView=!1}},{key:"onTableViewMode",value:function(){this.listView=!0}},{key:"onSortData",value:function(e){var t=this;e.active&&""!==e.direction&&void 0!==this.clockings&&this.clockings.sort(function(n,i){var r="asc"===e.direction;switch(e.active){case"number":return t.sortService.compare(n.userNumber,i.userNumber,r,!1);case"name":return t.sortService.compare(n.firstName+n.lastName,i.firstName+i.lastName,r,!1);case"date":case"time":return t.sortService.compare(n.clockingDate,i.clockingDate,r,!1);case"type":return t.sortService.compare(n.clockingType,i.clockingType,r,!1);case"anomaly":return t.sortService.compare(n.clockingAnomalieDesc,i.clockingAnomalieDesc,r,!1);case"location":return t.sortService.compare(n.clockingSiteDesc,i.clockingSiteDesc,r,!1);case"status":return t.sortService.compare(n.clockingState,i.clockingState,r,!1);default:return 0}}),this.paginatorPipe.transform(this.clockings,this.searchFilterService.pageIndex,this.searchFilterService.pageSize)}},{key:"exportToExcel",value:function(){if(void 0!==this.clockings&&0!==this.clockings.length){var e=[];this.clockings.forEach(function(t){var n=[];n.push(t.userNumber),n.push(t.firstName),n.push(t.lastName),n.push(t.clockingDate),n.push(t.clockingSite),n.push(t.clockingAnomaly),n.push(t.clockingState),e.push(n)}),this.excelService.generateExcel([{header:"Matricule",key:"userNumber"},{header:"First Name",key:"firstName"},{header:"Last Name",key:"lastName"},{header:"Date",key:"clockingDate"},{header:"Site",key:"clockingSite"},{header:"Anomaly",key:"clockingAnomaly"},{header:"State",key:"clockingState"}],e,[],[],"Clockings")}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(P.\u0275\u0275directiveInject(N),P.\u0275\u0275directiveInject(A.nJ),P.\u0275\u0275directiveInject(A.Kx),P.\u0275\u0275directiveInject(A.xB))},e.\u0275cmp=P.\u0275\u0275defineComponent({type:e,selectors:[["app-clockings"]],decls:63,vars:23,consts:[[1,"page-body"],[1,"row"],[1,"col-xl-12","col-lg-12","filter-bar"],[1,"card","m-b-10"],[1,"card-body","p-t-10"],[1,"col-xl-4","col-lg-12"],["mat-subheader","","col-sm-2",""],[1,"date-field","col-sm-5"],["matInput","","placeholder","From",3,"matDatepicker","max","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker11",""],["matInput","","placeholder","To",3,"matDatepicker","min","ngModel","ngModelChange"],["picker22",""],[1,"mat-subheader","col-sm-2"],[1,"col-xl-3","col-lg-12"],[1,"col-sm-10"],[1,"multi-search",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],[1,"col-xl-1","col-lg-12"],[1,"text-center"],[1,"btn","btn-md","btn-primary","ripple","m-t-5",3,"click"],[1,"btn","btn-md","btn-default","ripple","light","m-t-10",3,"click"],[1,"navbar","navbar-light","bg-faded","m-b-10","p-10"],[1,"nav-item","nav-grid","col-sm-4"],["type","button","data-toggle","tooltip","data-placement","top","title","Card View",1,"btn","btn-sm","btn-primary","waves-light","m-r-10","ripple",2,"font-size","inherit",3,"click"],[1,"icofont","icofont-listine-dots"],["type","button","data-toggle","tooltip","data-placement","top","title","Table View",1,"btn","btn-sm","btn-primary","m-r-10","ripple","light",2,"font-size","inherit",3,"click"],[1,"icofont","icofont-table"],["type","button",1,"btn","btn-sm","btn-primary","m-r-10","waves-light","ripple",2,"font-size","inherit",3,"click"],[1,"fa","fa-file-excel-o"],[1,"col-sm-8"],[3,"pageSize","pageIndex","length"],[4,"ngIf"],[1,"wrapper"],["class","overlay",4,"ngIf"],["class","row div-scrollable loaded-content",3,"blurred",4,"ngIf"],["class","loaded-content",3,"blurred",4,"ngIf"],[1,"overlay"],[1,"spinner-wrapper"],[1,"container"],["id","loader"],[1,"row","div-scrollable","loaded-content"],["class","col-sm-4 p-r-0",4,"ngFor","ngForOf"],[1,"col-sm-4","p-r-0"],[3,"clocking","refreshCard"],[1,"loaded-content"],[3,"clockings","refreshList"]],template:function(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"div",0),P.\u0275\u0275elementStart(1,"div",1),P.\u0275\u0275elementStart(2,"div",2),P.\u0275\u0275elementStart(3,"div",3),P.\u0275\u0275elementStart(4,"div",4),P.\u0275\u0275elementStart(5,"div",1),P.\u0275\u0275elementStart(6,"div",5),P.\u0275\u0275elementStart(7,"mat-list"),P.\u0275\u0275elementStart(8,"mat-list-item"),P.\u0275\u0275elementStart(9,"h3",6),P.\u0275\u0275text(10,"Period"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(11,"mat-form-field",7),P.\u0275\u0275elementStart(12,"input",8),P.\u0275\u0275listener("ngModelChange",function(e){return t.periodFrom=e}),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(13,"mat-datepicker-toggle",9),P.\u0275\u0275element(14,"mat-datepicker",null,10),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(16,"mat-form-field",7),P.\u0275\u0275elementStart(17,"input",11),P.\u0275\u0275listener("ngModelChange",function(e){return t.periodTo=e}),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(18,"mat-datepicker-toggle",9),P.\u0275\u0275element(19,"mat-datepicker",null,12),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(21,"mat-list-item"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(22,"div",5),P.\u0275\u0275elementStart(23,"mat-list"),P.\u0275\u0275elementStart(24,"mat-list-item"),P.\u0275\u0275elementStart(25,"h3",13),P.\u0275\u0275text(26,"Name"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(27,"mat-list-item"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(28,"div",14),P.\u0275\u0275elementStart(29,"mat-list"),P.\u0275\u0275elementStart(30,"mat-list-item"),P.\u0275\u0275elementStart(31,"h3",13),P.\u0275\u0275text(32,"Status"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(33,"div",15),P.\u0275\u0275elementStart(34,"ng-multiselect-dropdown",16),P.\u0275\u0275listener("ngModelChange",function(e){return t.selectedStatusesIdentifiers=e}),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(35,"mat-list-item"),P.\u0275\u0275elementStart(36,"h3",13),P.\u0275\u0275text(37,"Type"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(38,"div",15),P.\u0275\u0275elementStart(39,"ng-multiselect-dropdown",16),P.\u0275\u0275listener("ngModelChange",function(e){return t.selectedTypesIdentifiers=e}),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(40,"div",17),P.\u0275\u0275elementStart(41,"div",18),P.\u0275\u0275elementStart(42,"button",19),P.\u0275\u0275listener("click",function(){return t.onSearch()}),P.\u0275\u0275text(43,"Search"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(44,"div",18),P.\u0275\u0275elementStart(45,"button",20),P.\u0275\u0275listener("click",function(){return t.onResetAllFilters()}),P.\u0275\u0275text(46,"Reset"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(47,"nav",21),P.\u0275\u0275elementStart(48,"div",22),P.\u0275\u0275elementStart(49,"button",23),P.\u0275\u0275listener("click",function(){return t.onCardViewMode()}),P.\u0275\u0275element(50,"em",24),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(51,"button",25),P.\u0275\u0275listener("click",function(){return t.onTableViewMode()}),P.\u0275\u0275element(52,"em",26),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(53,"button",27),P.\u0275\u0275listener("click",function(){return t.exportToExcel()}),P.\u0275\u0275element(54,"em",28),P.\u0275\u0275text(55," Export "),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(56,"div",29),P.\u0275\u0275element(57,"app-paginator",30),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275template(58,je,3,0,"div",31),P.\u0275\u0275elementStart(59,"div",32),P.\u0275\u0275template(60,Ue,6,0,"div",33),P.\u0275\u0275template(61,ze,3,7,"div",34),P.\u0275\u0275template(62,Be,3,7,"div",35),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()),2&e){var n=P.\u0275\u0275reference(15),i=P.\u0275\u0275reference(20);P.\u0275\u0275advance(12),P.\u0275\u0275property("matDatepicker",n)("max",t.periodTo)("ngModel",t.periodFrom),P.\u0275\u0275advance(1),P.\u0275\u0275property("for",n),P.\u0275\u0275advance(4),P.\u0275\u0275property("matDatepicker",i)("min",t.periodFrom)("ngModel",t.periodTo),P.\u0275\u0275advance(1),P.\u0275\u0275property("for",i),P.\u0275\u0275advance(16),P.\u0275\u0275property("placeholder","Select...")("settings",t.dropdownSettings)("data",t.statusesIdentifiers)("ngModel",t.selectedStatusesIdentifiers),P.\u0275\u0275advance(5),P.\u0275\u0275property("placeholder","Select...")("settings",t.dropdownSettings)("data",t.typesIdentifiers)("ngModel",t.selectedTypesIdentifiers),P.\u0275\u0275advance(18),P.\u0275\u0275property("pageSize",t.searchFilterService.pageSize)("pageIndex",t.searchFilterService.pageIndex)("length",t.lengthClockings),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",0===t.lengthClockings),P.\u0275\u0275advance(2),P.\u0275\u0275property("ngIf",t.isLoading),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",!t.listView),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",t.listView)}},directives:[F.i$,F.Tg,F.gs,H.KE,_.Nt,W.hl,o.DefaultValueAccessor,o.NgControlStatus,o.NgModel,W.nW,H.R9,W.Mq,L.OP,V.M2,j.J,a.NgIf,U.$g,a.NgForOf,K,Le],pipes:[Ve.R],styles:[".multi-search{width:100%}.multiselect-dropdown{font-size:11px}.multiselect-dropdown .selected-item{font-size:11px;background:#448aff}.mat-list .mat-divider{margin-top:15px}.mat-list .mat-subheader{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.mat-list .mat-subheaderUser{height:80px;padding:0 5px;font-size:15px;font-weight:bolder}.mat-list-header{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.div-scrollable{overflow-y:auto;margin-right:0;max-height:calc(100vh - 392px)}.wrapper{width:100%;height:100%}.overlay{position:absolute;z-index:1002;background-color:#ffffff80;width:100%;height:100%}.spinner-wrapper{display:flex;justify-content:center;justify-items:center}#loader{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}.date-field{width:45%;font-size:14px}\n"],encapsulation:2}),e}(),Ge=r(16738),qe=r(38835),Ye=r(90703),Je=r(69229),Qe=r(62758),Ke=function(){var e=function(){function e(t,i){n(this,e),this.attendanceService=t,this.dtService=i,this.selectedDate=new Date,this.daysChange=new P.EventEmitter}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.getSelectedWeek(),this.currentWeekSubscription=this.attendanceService.selectCurrentWeek.subscribe(function(){e.selectedDate=e.dtService.today(),e.getSelectedWeek()})}},{key:"ngOnDestroy",value:function(){this.currentWeekSubscription.unsubscribe()}},{key:"getSelectedWeek",value:function(){this.startOfWeek=Ge(this.selectedDate).startOf("isoWeek"),this.endOfWeek=Ge(this.selectedDate).endOf("isoWeek"),this.getWeekDays()}},{key:"prevWeek",value:function(){this.startOfWeek=Ge(this.startOfWeek).subtract(1,"weeks").startOf("isoWeek"),this.endOfWeek=Ge(this.endOfWeek).subtract(1,"weeks").endOf("isoWeek"),this.getWeekDays()}},{key:"nextWeek",value:function(){this.startOfWeek=Ge(this.startOfWeek).add(1,"weeks").startOf("isoWeek"),this.endOfWeek=Ge(this.endOfWeek).add(1,"weeks").endOf("isoWeek"),this.getWeekDays()}},{key:"getWeekDays",value:function(){this.days=[];for(var e=this.startOfWeek;e<=this.endOfWeek;)this.days.push({date:e,dayName:this.dtService.getDayName(e),dayNumber:e.toDate().getDay(),clockingTotal:0}),e=e.clone().add(1,"d");this.attendanceService.stopClockingsGet.next(),this.selectedDate=this.startOfWeek.toDate(),this.daysChange.emit(this.days)}},{key:"changeDateEvent",value:function(){this.getSelectedWeek()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(P.\u0275\u0275directiveInject(N),P.\u0275\u0275directiveInject(A.Cv))},e.\u0275cmp=P.\u0275\u0275defineComponent({type:e,selectors:[["app-select-week"]],outputs:{daysChange:"daysChange"},decls:25,vars:8,consts:[[2,"padding","0px"],["scope","col"],[1,"td-arrow","pointer",3,"click"],[1,"material-icons"],[1,"td-date"],[1,"td-calendar","pointer",3,"click"],["matInput","",3,"matDatepicker","ngModel","ngModelChange","dateChange"],["picker",""]],template:function(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"table"),P.\u0275\u0275element(1,"caption",0),P.\u0275\u0275elementStart(2,"tr"),P.\u0275\u0275element(3,"th",1),P.\u0275\u0275elementStart(4,"td",2),P.\u0275\u0275listener("click",function(){return t.prevWeek()}),P.\u0275\u0275elementStart(5,"em",3),P.\u0275\u0275text(6,"keyboard_arrow_left"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(7,"td",4),P.\u0275\u0275elementStart(8,"span"),P.\u0275\u0275text(9),P.\u0275\u0275pipe(10,"shortDate"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(11,"td",5),P.\u0275\u0275listener("click",function(){return P.\u0275\u0275restoreView(n),P.\u0275\u0275reference(17).open()}),P.\u0275\u0275elementStart(12,"em",3),P.\u0275\u0275text(13,"date_range"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(14,"mat-form-field"),P.\u0275\u0275elementStart(15,"input",6),P.\u0275\u0275listener("ngModelChange",function(e){return t.selectedDate=e})("dateChange",function(){return t.changeDateEvent()}),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(16,"mat-datepicker",null,7),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(18,"td",4),P.\u0275\u0275elementStart(19,"span"),P.\u0275\u0275text(20),P.\u0275\u0275pipe(21,"shortDate"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(22,"td",2),P.\u0275\u0275listener("click",function(){return t.nextWeek()}),P.\u0275\u0275elementStart(23,"em",3),P.\u0275\u0275text(24,"keyboard_arrow_right"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()}if(2&e){var i=P.\u0275\u0275reference(17);P.\u0275\u0275advance(9),P.\u0275\u0275textInterpolate(P.\u0275\u0275pipeBind1(10,4,t.startOfWeek)),P.\u0275\u0275advance(6),P.\u0275\u0275property("matDatepicker",i)("ngModel",t.selectedDate),P.\u0275\u0275advance(5),P.\u0275\u0275textInterpolate(P.\u0275\u0275pipeBind1(21,6,t.endOfWeek))}},directives:[H.KE,_.Nt,W.hl,o.DefaultValueAccessor,o.NgControlStatus,o.NgModel,W.Mq],pipes:[Qe.M],styles:["table[_ngcontent-%COMP%]{width:80%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border:1px solid gainsboro}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;font-size:25px;cursor:pointer}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:4px}table[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:1px;left:3px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:0px;height:0px;visibility:hidden}"]}),e}(),Ze=r(96066),Xe=function(){var e=function(){function e(){n(this,e)}return t(e,[{key:"ngOnChanges",value:function(){null!=this.holiday&&(this.innerHTML=this.holiday.detail)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=P.\u0275\u0275defineDirective({type:e,selectors:[["","appTdHoliday",""]],hostVars:1,hostBindings:function(e,t){2&e&&P.\u0275\u0275hostProperty("innerHTML",t.innerHTML,P.\u0275\u0275sanitizeHtml)},inputs:{holiday:"holiday"},features:[P.\u0275\u0275NgOnChangesFeature]}),e}(),et=function(){var e=function(){function e(){n(this,e)}return t(e,[{key:"ngOnChanges",value:function(){null!=this.businessTrip&&(this.innerHTML=this.businessTrip.detail)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=P.\u0275\u0275defineDirective({type:e,selectors:[["","appTdBusinessTrip",""]],hostVars:1,hostBindings:function(e,t){2&e&&P.\u0275\u0275hostProperty("innerHTML",t.innerHTML,P.\u0275\u0275sanitizeHtml)},inputs:{businessTrip:"businessTrip"},features:[P.\u0275\u0275NgOnChangesFeature]}),e}(),tt=function(){var e=function(){function e(){n(this,e)}return t(e,[{key:"ngOnChanges",value:function(){null!=this.mission&&(this.innerHTML="Mission<br />",this.innerHTML=this.mission.detail)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=P.\u0275\u0275defineDirective({type:e,selectors:[["","appTdMission",""]],hostVars:1,hostBindings:function(e,t){2&e&&P.\u0275\u0275hostProperty("innerHTML",t.innerHTML,P.\u0275\u0275sanitizeHtml)},inputs:{mission:"mission"},features:[P.\u0275\u0275NgOnChangesFeature]}),e}(),nt=function(){var e=function(){function e(){n(this,e)}return t(e,[{key:"ngOnChanges",value:function(){if(null!=this.permission){this.innerHTML="Permission<br />";var e=60*this.permission.permissionHoursNbr,t=new Date(this.permission.permissionStartHour);t.setMinutes(t.getMinutes()+e),this.innerHTML+=this.permission.permissionStartHour.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})+"-"+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=P.\u0275\u0275defineDirective({type:e,selectors:[["","appTdPermission",""]],hostVars:1,hostBindings:function(e,t){2&e&&P.\u0275\u0275hostProperty("innerHTML",t.innerHTML,P.\u0275\u0275sanitizeHtml)},inputs:{permission:"permission"},features:[P.\u0275\u0275NgOnChangesFeature]}),e}(),it=function(){var e=function(){function e(){n(this,e)}return t(e,[{key:"ngOnChanges",value:function(){null!=this.leaveDay&&(this.innerHTML=this.leaveDay.detail)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=P.\u0275\u0275defineDirective({type:e,selectors:[["","appTdLeaveDay",""]],hostVars:1,hostBindings:function(e,t){2&e&&P.\u0275\u0275hostProperty("innerHTML",t.innerHTML,P.\u0275\u0275sanitizeHtml)},inputs:{leaveDay:"leaveDay"},features:[P.\u0275\u0275NgOnChangesFeature]}),e}(),rt=function(){var e=function(){function e(){n(this,e)}return t(e,[{key:"ngOnChanges",value:function(){null!=this.clocking&&(1===this.clocking.clockingType&&(this.innerHTML="P/E<br />",0===this.clocking.clockingAnomaly?(this.backgroundColor="#66CCFF",this.color="#000000"):(this.backgroundColor="#FF0000",this.color="#FFFFFF",this.fontWeight="bold")),2===this.clocking.clockingType&&(this.innerHTML="P/S<br />",0===this.clocking.clockingAnomaly?(this.backgroundColor="#FF8F20",this.color="#000000"):(this.backgroundColor="#FF0000",this.color="#FFFFFF",this.fontWeight="bold")),this.innerHTML+=this.clocking.clockingDate.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=P.\u0275\u0275defineDirective({type:e,selectors:[["","appTdClocking",""]],hostVars:7,hostBindings:function(e,t){2&e&&(P.\u0275\u0275hostProperty("innerHTML",t.innerHTML,P.\u0275\u0275sanitizeHtml),P.\u0275\u0275styleProp("background-color",t.backgroundColor)("color",t.color)("font-weight",t.fontWeight))},inputs:{date:"date",clocking:"clocking"},features:[P.\u0275\u0275NgOnChangesFeature]}),e}();function at(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"app-select-employee",30),P.\u0275\u0275listener("userChange",function(e){return P.\u0275\u0275restoreView(n),P.\u0275\u0275nextContext().userChange(e)}),P.\u0275\u0275elementEnd()}}function ot(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"td",39),P.\u0275\u0275listener("holidayChange",function(e){P.\u0275\u0275restoreView(n);var t=P.\u0275\u0275nextContext().$implicit;return P.\u0275\u0275nextContext().weekHolidays[t.dayNumber]=e}),P.\u0275\u0275elementEnd()}if(2&e){var i=P.\u0275\u0275nextContext().$implicit,r=P.\u0275\u0275nextContext();P.\u0275\u0275property("matTooltip",r.weekHolidays[i.dayNumber].name)("holiday",r.weekHolidays[i.dayNumber])}}function st(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"td",40),P.\u0275\u0275listener("businessTripChange",function(e){P.\u0275\u0275restoreView(n);var t=P.\u0275\u0275nextContext().$implicit;return P.\u0275\u0275nextContext().weekBusinessTrip[t.dayNumber]=e}),P.\u0275\u0275elementEnd()}if(2&e){var i=P.\u0275\u0275nextContext().$implicit,r=P.\u0275\u0275nextContext();P.\u0275\u0275property("matTooltip",r.weekBusinessTrip[i.dayNumber].departDest)("businessTrip",r.weekBusinessTrip[i.dayNumber])}}function lt(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"td",41),P.\u0275\u0275listener("missionChange",function(e){P.\u0275\u0275restoreView(n);var t=P.\u0275\u0275nextContext().$implicit;return P.\u0275\u0275nextContext().weekMissions[t.dayNumber]=e}),P.\u0275\u0275elementEnd()}if(2&e){var i=P.\u0275\u0275nextContext().$implicit,r=P.\u0275\u0275nextContext();P.\u0275\u0275property("mission",r.weekMissions[i.dayNumber])}}function ct(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"td",42),P.\u0275\u0275listener("permissionChange",function(e){P.\u0275\u0275restoreView(n);var t=P.\u0275\u0275nextContext().$implicit;return P.\u0275\u0275nextContext().finalWeekPermission[t.dayNumber]=e}),P.\u0275\u0275elementEnd()}if(2&e){var i=P.\u0275\u0275nextContext().$implicit,r=P.\u0275\u0275nextContext();P.\u0275\u0275property("permission",r.finalWeekPermission[i.dayNumber])}}function dt(e,t){if(1&e){var n=P.\u0275\u0275getCurrentView();P.\u0275\u0275elementStart(0,"td",43),P.\u0275\u0275listener("leaveDayChange",function(e){P.\u0275\u0275restoreView(n);var t=P.\u0275\u0275nextContext().$implicit;return P.\u0275\u0275nextContext().weekLeaveDays[t.dayNumber]=e}),P.\u0275\u0275elementEnd()}if(2&e){var i=P.\u0275\u0275nextContext().$implicit,r=P.\u0275\u0275nextContext();P.\u0275\u0275property("matTooltip",r.weekLeaveDays[i.dayNumber].motive)("leaveDay",r.weekLeaveDays[i.dayNumber])}}function mt(e,t){if(1&e&&P.\u0275\u0275element(0,"td",44),2&e){var n=t.$implicit,i=P.\u0275\u0275nextContext().$implicit;P.\u0275\u0275property("clocking",n)("date",i.date)}}function ut(e,t){if(1&e&&(P.\u0275\u0275elementStart(0,"tr"),P.\u0275\u0275elementStart(1,"th",31),P.\u0275\u0275text(2),P.\u0275\u0275pipe(3,"date"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(4,"td",32),P.\u0275\u0275text(5," Cumul"),P.\u0275\u0275element(6,"br"),P.\u0275\u0275text(7),P.\u0275\u0275pipe(8,"date"),P.\u0275\u0275elementEnd(),P.\u0275\u0275template(9,ot,1,2,"td",33),P.\u0275\u0275template(10,st,1,2,"td",34),P.\u0275\u0275template(11,lt,1,1,"td",35),P.\u0275\u0275template(12,ct,1,1,"td",36),P.\u0275\u0275template(13,dt,1,2,"td",37),P.\u0275\u0275template(14,mt,1,2,"td",38),P.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=P.\u0275\u0275nextContext();P.\u0275\u0275advance(2),P.\u0275\u0275textInterpolate1(" ",P.\u0275\u0275pipeBind2(3,8,null==n?null:n.date,"E dd/MM/y")," "),P.\u0275\u0275advance(5),P.\u0275\u0275textInterpolate1("",P.\u0275\u0275pipeBind2(8,11,i.clockingsAccumulation[n.dayNumber],"HH:mm")," "),P.\u0275\u0275advance(2),P.\u0275\u0275property("ngIf",i.isHoliday(n.dayNumber)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",i.isBusinessTrip(n.dayNumber)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",i.isMission(n.dayNumber)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",i.isPermission(n.dayNumber)&&!1===i.isLeave(n.dayNumber)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngIf",i.isLeave(n.dayNumber)),P.\u0275\u0275advance(1),P.\u0275\u0275property("ngForOf",i.clockings[n.dayNumber])}}var gt=function(){var e=function(){function e(t,i,r,a,o,s){n(this,e),this.dialog=t,this.attendanceService=i,this.notificationService=r,this.leaveService=a,this.dateTimeService=o,this.permissionService=s,this.leavesHour=0,this.permissionHour=0,this.workHour=0,this.notWorkedDays=0,this.workDays=0,this.workDayMorning=0,this.workDayAfternoon=0,this.dayTimeAccumulation=0,this.dinerTimeAccumulation=0,this.amplitude="",this.weekHolidays=[],this.editClocking=!1,this.startOfCurrentWeek=Ge().startOf("isoWeek"),this.endOfCurrentWeek=Ge().endOf("isoWeek"),this.teamDisplay=!1,this.clockings=[],this.finalWeekPermission=[],this.clockingsAccumulation=[],this.weekBusinessTrip=[],this.weekMissions=[],this.weekLeaves=[],this.weekPermissions=[],this.weekLeaveDays=[],this.totalAccumulation=""}return t(e,[{key:"ngOnInit",value:function(){this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.selectedUserId=this.currentUser.userId}},{key:"ngOnDestroy",value:function(){this.attendanceService.stopClockingsGet.next(),this.attendanceService.stopClockingsGet.complete()}},{key:"userChange",value:function(e){this.selectedUserId=e.id,null!=e&&this.getUserClockings()}},{key:"daysChange",value:function(e){this.days=e,null!=e&&this.getUserClockings()}},{key:"getPermissions",value:function(){var e=this,t=this.days[0].date.toDate(),n=this.days[this.days.length-1].date.toDate();this.finalWeekPermission=[],this.permissionService.getUsersPermissions(this.selectedUserId.toString(),"2",t,n).subscribe(function(t){e.weekPermissions=t,e.weekPermissions.forEach(function(t){t.permissionStartHour=new Date(t.permissionStartHour),e.finalWeekPermission[t.permissionStartHour.getDay()]=t,e.permissionHour+=t.permissionHoursNbr})})}},{key:"getPublicHolidays",value:function(){var e=this,t=this.days[0].date.toDate(),n=this.days[this.days.length-1].date.toDate();this.weekHolidays=[],this.attendanceService.getHolidaysInWeek(t,n).subscribe(function(i){i&&i.forEach(function(i){i.dateStart=new Date(i.dateStart),i.dateEnd=new Date(i.dateEnd);for(var r=new Date(i.dateStart),a=new Date(i.dateEnd),o=i.dateStart;o.getTime()!==i.dateEnd.getTime()+864e5;){if(6!==o.getDay()&&0!==o.getDay()&&o.getTime()>=t.getTime()&&o.getTime()<=n.getTime()){var s=new I;i.name=i.name.toLowerCase(),i.name=i.name.replace(i.name.charAt(0),i.name.charAt(0).toUpperCase()),s.name=i.name,s.detail="jour f\xe9ri\xe9".concat("<br/>",e.dateTimeService.getShortestFormat(r),"-",e.dateTimeService.getShortestFormat(a)),e.weekHolidays[o.getDay()]=s,e.notWorkedDays+=1}o.setDate(o.getDate()+1)}}),e.getLeaveDays()})}},{key:"getMissionsDay",value:function(){var e=this,t=this.days[0].date.toDate(),n=this.days[this.days.length-1].date.toDate();this.weekMissions=[],this.attendanceService.getMissionInWeek(this.selectedUserId,t,n).subscribe(function(i){i&&i.forEach(function(i){i.missionStartDate=new Date(i.missionStartDate),i.missionEndDate=new Date(i.missionEndDate);for(var r=new Date(i.missionStartDate.toDateString()),a=new Date(i.missionEndDate.toDateString()),o=r;o.getTime()!==a.getTime()+864e5;){if(6!==o.getDay()&&0!==o.getDay()&&o.getTime()>=t.getTime()&&o.getTime()<=n.getTime()){var s=new E;s.detail="Mission <br/>".concat(e.dateTimeService.getShortestFormat(i.missionStartDate),"-",e.dateTimeService.getShortestFormat(a)),e.weekMissions[o.getDay()]=s,e.notWorkedDays+=1}o.setDate(o.getDate()+1)}}),e.getBusinesstripDays()})}},{key:"getBusinesstripDays",value:function(){var e=this,t=this.days[0].date.toDate(),n=this.days[this.days.length-1].date.toDate();this.weekBusinessTrip=[],this.attendanceService.getBusinessTripInWeek(this.selectedUserId,t,n).subscribe(function(i){i&&i.forEach(function(i){i.businessTripWeekDateStart=new Date(i.businessTripWeekDateStart),i.businessTripWeekDateEnd=new Date(i.businessTripWeekDateEnd);for(var r=new Date(i.businessTripWeekDateStart.toDateString()),a=new Date(i.businessTripWeekDateEnd.toDateString()),o=r;o.getTime()!==a.getTime()+864e5;){if(6!==o.getDay()&&0!==o.getDay()&&o.getTime()>=t.getTime()&&o.getTime()<=n.getTime()){var s=new h;s.detail="D\xe9placement".concat("<br/>",e.dateTimeService.getShortestFormatWithTime(i.businessTripWeekDateStart),"-",e.dateTimeService.getShortestFormatWithTime(i.businessTripWeekDateEnd)),e.weekBusinessTrip[o.getDay()]=s,s.departDest=i.businessTripDeparture+" => "+i.businessTripDestination}o.setDate(o.getDate()+1)}}),e.computeTotalAccumulation()})}},{key:"getLeaveDays",value:function(){var e=this,t=this.days[0].date.toDate(),n=this.days[this.days.length-1].date.toDate();this.weekLeaveDays=[],this.leaveService.getUsersLeaves(this.selectedUserId.toString(),"2","1,2,3,4",t,n).subscribe(function(i){e.weekLeaves=i,e.weekLeaves.forEach(function(i){var r=qe.jt.Full,a=qe.jt.Full,o=new Date(i.leaveDateStart),s=new Date(i.leaveDateEnd);12===o.getHours()&&(r=qe.jt.Pm),12===s.getHours()&&(a=qe.jt.Am),o=new Date(o.toDateString()),s=new Date(s.toDateString());for(var l=new Date(o);l.getTime()!==s.getTime()+864e5;){if(6!==l.getDay()&&0!==l.getDay()&&l.getTime()>=t.getTime()&&l.getTime()<=n.getTime()&&!e.isHoliday(l.getDay())){var c=new T;c.dayNumber=l.getDay(),c.motive=i.motive,c=e.buildLeaveDayDetail(r,a,c,i,o,s,l),e.weekLeaveDays[l.getDay()]=c}l.setDate(l.getDate()+1)}}),e.getMissionsDay()})}},{key:"buildLeaveDayDetail",value:function(e,t,n,i,r,a,o){return e===qe.jt.Pm&&t===qe.jt.Am?this.buildLeaveDayPmAm(n,i,r,a,o):e===qe.jt.Pm&&t===qe.jt.Full?this.buildLeaveDayPmPm(n,i,r,a,o):e===qe.jt.Full&&t===qe.jt.Am?this.buildLeaveDayAmAm(n,i,r,a,o):this.buildLeaveDayAmPm(n,i,r,a)}},{key:"buildLeaveDayPmAm",value:function(e,t,n,i,r){return e.detail="Cong\xe9("+t.demandDay+" jour)<br/>".concat(this.dateTimeService.getShortestFormat(n)," PM-",this.dateTimeService.getShortestFormat(i)," AM"),r.getTime()===n.getTime()||r.getTime()===i.getTime()?(e.numDay=.5,this.leavesHour+=4,this.notWorkedDays=.5):(e.numDay=1,this.leavesHour+=8,this.notWorkedDays+=1),e}},{key:"buildLeaveDayPmPm",value:function(e,t,n,i,r){return e.detail="Cong\xe9("+t.demandDay+" jour)<br/>".concat(this.dateTimeService.getShortestFormat(n)," PM-",this.dateTimeService.getShortestFormat(i)," PM"),r.getTime()===n.getTime()?(e.numDay=.5,this.leavesHour+=4,this.notWorkedDays+=.5):(e.numDay=1,this.leavesHour+=8,this.notWorkedDays+=1),e}},{key:"buildLeaveDayAmAm",value:function(e,t,n,i,r){return e.detail="Cong\xe9 ("+t.demandDay+" jour)<br/>".concat(this.dateTimeService.getShortestFormat(n)," AM-",this.dateTimeService.getShortestFormat(i)," AM"),r.getTime()===i.getTime()?(e.numDay=.5,this.leavesHour+=4,this.notWorkedDays+=.5):(e.numDay=1,this.leavesHour+=8,this.notWorkedDays+=1),e}},{key:"buildLeaveDayAmPm",value:function(e,t,n,i){return e.detail="Cong\xe9 ("+t.demandDay+" jour) <br/>".concat(this.dateTimeService.getShortestFormat(n)," AM-",this.dateTimeService.getShortestFormat(i)," PM"),e.numDay=1,this.leavesHour+=8,this.notWorkedDays+=1,e}},{key:"getUserClockings",value:function(){var e=this,t=this.days[0].date.toDate(),n=this.days[this.days.length-1].date.toDate(),i=this.selectedUserId;this.resetClockings(),this.attendanceService.getUserClockings(i,t,n).pipe((0,p.R)(this.attendanceService.stopClockingsGet)).subscribe(function(t){var n,i=[];t.forEach(function(t){t.clockingDate=new Date(t.clockingDate),null!=n&&n!==t.clockingDate.getDay()&&(e.clockings[n]=i,i.length>0&&(e.clockingsAccumulation[n]+=e.computeClockingsDayTimeAccumulationAndAnomalies(i)),i=[]),i.push(Object.assign(new w,t)),n=t.clockingDate.getDay()}),null!=n&&(e.clockings[n]=i,i.length>0&&(e.clockingsAccumulation[n]+=e.computeClockingsDayTimeAccumulationAndAnomalies(i))),e.getPermissions(),e.getPublicHolidays()},function(t){e.notificationService.danger(t)})}},{key:"isPermission",value:function(e){return null!=this.finalWeekPermission[e]}},{key:"isLeave",value:function(e){return this.weekLeaveDays.some(function(t){return t.dayNumber===e})}},{key:"isBusinessTrip",value:function(e){return null!=this.weekBusinessTrip[e]}},{key:"isMission",value:function(e){return null!=this.weekMissions[e]}},{key:"isHoliday",value:function(e){return null!=this.weekHolidays[e]}},{key:"resetClockings",value:function(){var e=this;this.leavesHour=0,this.permissionHour=0,this.notWorkedDays=0,this.workDays=0,this.days.forEach(function(t){e.clockings[t.dayNumber]=[],e.clockingsAccumulation[t.dayNumber]=t.date.toDate().getTime()})}},{key:"computeClockingsDayTimeAccumulationAndAnomalies",value:function(e){var t=this,n=e[0].clockingDate.getFullYear(),i=e[0].clockingDate.getMonth(),r=e[0].clockingDate.getDate(),a=e[0].clockingDate.getDay(),o=new Date(n,i,r,12,30,0).getTime(),s=new Date(n,i,r,14,0,0).getTime(),l=0;return this.workDayAfternoon=0,this.workDayMorning=0,this.dayTimeAccumulation=0,this.dinerTimeAccumulation=0,e.forEach(function(n){l++,n.clockingAnomaly=t.getClockingAnomaly(t.previousClockingType,n.clockingType,l,e.length),t.computeClockingDay(n,o,s),t.previousClockingType=n.clockingType}),this.minimumAccumulationOfDay=126e5,0===e[0].clockingSingleSession&&(this.minimumAccumulationOfDay=162e5),this.dinerTimeAccumulation>18e5&&(this.dayTimeAccumulation=this.dayTimeAccumulation-this.dinerTimeAccumulation+18e5),this.workDays+=null==this.weekLeaveDays[a]&&this.dayTimeAccumulation<this.minimumAccumulationOfDay&&this.workDayMorning+this.workDayAfternoon===1?.5:this.workDayMorning+this.workDayAfternoon,this.dayTimeAccumulation}},{key:"computeClockingDay",value:function(e,t,n){e.clockingType===D.In?(this.clockingInCase(e),this.clockingInTime=e.clockingDate.getTime()):void 0!==this.clockingInTime&&(this.clockingOutTime=e.clockingDate.getTime(),this.clockingOutCase(e),this.previousClockingType===D.In&&(this.dayTimeAccumulation+=this.clockingOutTime-this.clockingInTime,0===e.clockingSingleSession&&(this.dinerTimeAccumulation+=this.computeLunchTimeAccumulation(this.clockingInTime,this.clockingOutTime,t,n))))}},{key:"clockingInCase",value:function(e){0===e.clockingSingleSession?e.clockingDate.getHours()<14?this.workDayMorning=.5:this.workDayAfternoon=.5:(this.workDayAfternoon=.5,this.workDayMorning=.5)}},{key:"clockingOutCase",value:function(e){0===e.clockingSingleSession?e.clockingDate.getHours()<14?0===this.workDayMorning&&(this.workDayMorning=.5):0===this.workDayAfternoon&&(this.workDayAfternoon=.5):(this.workDayAfternoon=.5,this.workDayMorning=.5)}},{key:"getClockingAnomaly",value:function(e,t,n,i){var r=0;return null!=e?(t===e||t===D.In&&i===n)&&(r=1):t===D.Out&&(r=1),r}},{key:"computeLunchTimeAccumulation",value:function(e,t,n,i){var r=0;return e<n?t>n&&(r=t<i?t-n:i-n):e<i&&(r=t<i?t-e:i-e),r}},{key:"computeTotalAccumulation",value:function(){var e=0,t=0;this.totalAccumulation="",this.clockingsAccumulation.forEach(function(n){var i=new Date(n);t+=i.getMinutes(),e+=Math.floor(t/60)+i.getHours(),t%=60}),this.totalAccumulation=this.formatingNumberToTimeString(e)+":"+this.formatingNumberToTimeString(t);var n=5-this.notWorkedDays;this.amplitude=0===n||0===e&&0===t?"00:00":Math.floor(e/n)+":"+this.formatingNumberToTimeString(Math.floor((e%n*60+t)/n))}},{key:"selectCurrentWeek",value:function(){this.attendanceService.selectCurrentWeek.next()}},{key:"isUsersListNotEmpty",value:function(){return this.currentUser.activityId===u.RS.Administration||this.currentUser.hasSubordinates}},{key:"openAddAttendanceDialog",value:function(){this.DisplayAddAttendancedialogRef=this.dialog.open(se,{disableClose:!1,panelClass:"form_modal",width:"450px",height:"500px",hasBackdrop:!0,data:{editClocking:this.editClocking}})}},{key:"formatingNumberToTimeString",value:function(e){return Math.floor(e/10)+""+e%10}}]),e}();return e.\u0275fac=function(t){return new(t||e)(P.\u0275\u0275directiveInject(s.uw),P.\u0275\u0275directiveInject(N),P.\u0275\u0275directiveInject(A.gq),P.\u0275\u0275directiveInject(Ye.e),P.\u0275\u0275directiveInject(A.Cv),P.\u0275\u0275directiveInject(Je.$))},e.\u0275cmp=P.\u0275\u0275defineComponent({type:e,selectors:[["app-attendances-component"]],decls:60,vars:13,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"col-sm-2"],[1,"col-sm-6"],[1,"select-current-week"],[3,"click"],[1,"btn","btn-primary","f-right",3,"click"],[1,"icofont","icofont-plus"],[1,"col-sm-12",2,"text-align","right"],[1,"row","m-t-15","m-b-15"],[1,"col-sm-3"],[3,"daysChange"],[1,"col-sm-4","f-right"],[3,"userChange",4,"ngIf"],[1,"col-md-2"],[1,"col-md-8"],[1,"table-fixed"],[4,"ngFor","ngForOf"],[1,"table","text-center"],[1,"th-summary-head"],["id","hc"],["id","hs"],["id","ht"],["id","jt"],["id","am"],[1,"tr-summary-totals"],[3,"userChange"],["id","day",1,"td-days"],[1,"td-totals"],["matTooltip","","colspan","2","class","td-holiday","appTdHoliday","",3,"matTooltip","holiday","holidayChange",4,"ngIf"],["matTooltip","","colspan","2","class","td-business-trip","appTdBusinessTrip","",3,"matTooltip","businessTrip","businessTripChange",4,"ngIf"],["colspan","2","class","td-mission","appTdMission","",3,"mission","missionChange",4,"ngIf"],["colspan","2","class","td-permissions","appTdPermission","",3,"permission","permissionChange",4,"ngIf"],["matTooltip","","colspan","2","class","td-leaves","appTdLeaveDay","",3,"matTooltip","leaveDay","leaveDayChange",4,"ngIf"],["class","td-clockings","appTdClocking","",3,"clocking","date",4,"ngFor","ngForOf"],["matTooltip","","colspan","2","appTdHoliday","",1,"td-holiday",3,"matTooltip","holiday","holidayChange"],["matTooltip","","colspan","2","appTdBusinessTrip","",1,"td-business-trip",3,"matTooltip","businessTrip","businessTripChange"],["colspan","2","appTdMission","",1,"td-mission",3,"mission","missionChange"],["colspan","2","appTdPermission","",1,"td-permissions",3,"permission","permissionChange"],["matTooltip","","colspan","2","appTdLeaveDay","",1,"td-leaves",3,"matTooltip","leaveDay","leaveDayChange"],["appTdClocking","",1,"td-clockings",3,"clocking","date"]],template:function(e,t){1&e&&(P.\u0275\u0275elementStart(0,"div",0),P.\u0275\u0275elementStart(1,"div",1),P.\u0275\u0275elementStart(2,"div",2),P.\u0275\u0275elementStart(3,"div",3),P.\u0275\u0275elementStart(4,"div",4),P.\u0275\u0275elementStart(5,"div",5),P.\u0275\u0275elementStart(6,"div",2),P.\u0275\u0275elementStart(7,"div",3),P.\u0275\u0275elementStart(8,"div",2),P.\u0275\u0275element(9,"div",6),P.\u0275\u0275elementStart(10,"div",7),P.\u0275\u0275elementStart(11,"div",8),P.\u0275\u0275elementStart(12,"a",9),P.\u0275\u0275listener("click",function(){return t.selectCurrentWeek()}),P.\u0275\u0275elementStart(13,"h5"),P.\u0275\u0275text(14),P.\u0275\u0275pipe(15,"shortDate"),P.\u0275\u0275pipe(16,"shortDate"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(17,"div",6),P.\u0275\u0275elementStart(18,"button",10),P.\u0275\u0275listener("click",function(){return t.openAddAttendanceDialog()}),P.\u0275\u0275element(19,"em",11),P.\u0275\u0275text(20," Add "),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(21,"div",12),P.\u0275\u0275elementStart(22,"div",13),P.\u0275\u0275element(23,"div",6),P.\u0275\u0275elementStart(24,"div",14),P.\u0275\u0275elementStart(25,"app-select-week",15),P.\u0275\u0275listener("daysChange",function(e){return t.daysChange(e)}),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(26,"div",16),P.\u0275\u0275template(27,at,1,0,"app-select-employee",17),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(28,"div",14),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(29,"div",2),P.\u0275\u0275element(30,"div",18),P.\u0275\u0275elementStart(31,"div",19),P.\u0275\u0275elementStart(32,"table",20),P.\u0275\u0275element(33,"caption"),P.\u0275\u0275template(34,ut,15,14,"tr",21),P.\u0275\u0275elementEnd(),P.\u0275\u0275element(35,"br"),P.\u0275\u0275elementStart(36,"table",22),P.\u0275\u0275element(37,"caption"),P.\u0275\u0275elementStart(38,"thead",23),P.\u0275\u0275elementStart(39,"th",24),P.\u0275\u0275text(40,"Heures Cong\xe9s"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(41,"th",25),P.\u0275\u0275text(42,"Heures Sorties"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(43,"th",26),P.\u0275\u0275text(44,"Heures Travaill\xe9es"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(45,"th",27),P.\u0275\u0275text(46,"Jours travaill\xe9s"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(47,"th",28),P.\u0275\u0275text(48,"Amplitude"),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(49,"tr",29),P.\u0275\u0275elementStart(50,"td"),P.\u0275\u0275text(51),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(52,"td"),P.\u0275\u0275text(53),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(54,"td"),P.\u0275\u0275text(55),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(56,"td"),P.\u0275\u0275text(57),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementStart(58,"td"),P.\u0275\u0275text(59),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd(),P.\u0275\u0275elementEnd()),2&e&&(P.\u0275\u0275advance(14),P.\u0275\u0275textInterpolate2("Current Week: ",P.\u0275\u0275pipeBind1(15,9,t.startOfCurrentWeek)," - ",P.\u0275\u0275pipeBind1(16,11,t.endOfCurrentWeek),""),P.\u0275\u0275advance(13),P.\u0275\u0275property("ngIf",t.isUsersListNotEmpty()),P.\u0275\u0275advance(7),P.\u0275\u0275property("ngForOf",t.days),P.\u0275\u0275advance(17),P.\u0275\u0275textInterpolate(t.leavesHour),P.\u0275\u0275advance(2),P.\u0275\u0275textInterpolate(t.permissionHour),P.\u0275\u0275advance(2),P.\u0275\u0275textInterpolate(t.totalAccumulation),P.\u0275\u0275advance(2),P.\u0275\u0275textInterpolate(t.workDays),P.\u0275\u0275advance(2),P.\u0275\u0275textInterpolate(t.amplitude))},directives:[Ke,a.NgIf,a.NgForOf,Ze.V,l.gM,Xe,et,tt,nt,it,rt],pipes:[Qe.M,a.DatePipe],styles:[".card-body[_ngcontent-%COMP%]{min-height:75vh;padding:25px}.table-fixed[_ngcontent-%COMP%]{table-layout:fixed}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px;padding:6px;border:1px solid white}.td-days[_ngcontent-%COMP%]{width:120px;text-align:left;background-color:#069;color:#fff}.td-totals[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:60px;max-width:60px;text-align:center;background-color:#c3df7d;color:#000}.td-permissions[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:120px;max-width:120px;text-align:center;background-color:#ff0;color:#000}.td-mission[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;max-width:120px;width:120px;text-align:center;background-color:#f2e783;color:#000}.td-business-trip[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;max-width:120px;width:120px;text-align:center;background-color:#f5bc37;color:#000}.td-holiday[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;width:120px;text-align:center;background-color:#f53766dc;color:#000;max-width:120px}.td-leaves[_ngcontent-%COMP%]{max-width:120px;width:120px;text-align:center;background-color:#6e81bd;color:#000}.td-clockings[_ngcontent-%COMP%]{max-width:60px;width:60px;text-align:center}.th-summary-head[_ngcontent-%COMP%]{font-weight:100;text-align:center;background-color:orange;color:#fff}.tr-summary-totals[_ngcontent-%COMP%]{font-weight:100;color:#000}.select-current-week[_ngcontent-%COMP%]{cursor:pointer;color:#448aff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] + tbody[_ngcontent-%COMP%]{border-top:0px}"]}),e}(),pt=[{path:"",data:{title:"Attendance",function:u.FI.Attendance,status:!1},canActivate:[m.a1],children:[{path:"attendances",component:gt,data:{title:"Attendances",function:u.FI.Attendance,status:!0},canActivate:[m.a1]},{path:"clockings",component:$e,data:{title:"Clockings",function:u.FI.Attendance,status:!0},canActivate:[m.a1]},{canActivate:[m.a1],path:"attendance/:clockingId",data:{title:"Edit Attendance",function:u.FI.Attendance,status:!0,edit:!0},component:gt}]}],ht=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=P.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=P.\u0275\u0275defineInjector({imports:[[d.Bz.forChild(pt)],d.Bz]}),e}(),ft=r(91841),vt=r(36063),yt={parse:{dateInput:"L"},display:{dateInput:"L",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}},kt=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=P.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=P.\u0275\u0275defineInjector({providers:[N,{provide:te.Ad,useValue:"en-EN"},{provide:te._A,useClass:vt.t7,deps:[te.Ad]},{provide:te.sG,useValue:yt}],imports:[[a.CommonModule,c.m,o.FormsModule,o.ReactiveFormsModule,c.q,s.Is,L.ZQ.forRoot(),ft.HttpClientModule,s.Is]]}),e}(),St=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=P.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=P.\u0275\u0275defineInjector({providers:[N,Ye.e,Ye.E,Je.$,A.gq,A.xB],imports:[[l.AV,a.CommonModule,c.m,o.FormsModule,o.ReactiveFormsModule,c.q,s.Is,ht,kt]]}),e}()},62758:function(e,i,r){r.d(i,{M:function(){return l}});var a,o=r(37716),s=r(10337),l=((a=function(){function e(t){n(this,e),this.dtService=t}return t(e,[{key:"transform",value:function(e,t){return null==e||"0001-01-01T00:00:00"===e?"":"day"===t?this.dtService.getShortFormatWithDay(e):this.dtService.getShortFormat(e)}}]),e}()).\u0275fac=function(e){return new(e||a)(o.\u0275\u0275directiveInject(s.Cv,16))},a.\u0275pipe=o.\u0275\u0275definePipe({name:"shortDate",type:a,pure:!0}),a)}}])}();