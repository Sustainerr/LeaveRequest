!function(){"use strict";function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunktelnetteam_app=self.webpackChunktelnetteam_app||[]).push([[252],{25252:function(t,n,o){o.r(n),o.d(n,{TimesheetModule:function(){return _n}});var a,s=o(74362),l=o(10337),c=o(38583),d=o(32403),m=o(3679),u=o(22238),p=o(37716),h=((a=function e(){r(this,e)}).\u0275fac=function(e){return new(e||a)},a.\u0275mod=p.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=p.\u0275\u0275defineInjector({providers:[s.r4,l.gq],imports:[[c.CommonModule,d.m,m.FormsModule,m.ReactiveFormsModule,d.q,u.Is]]}),a),f=o(88452),g=o(70833),v=o(46782),y=o(33873),S=o(85718),E=o(62028),I=o(98295),C=o(49983),b=o(7539),x=o(76627);function w(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275elementStart(1,"h4"),p.\u0275\u0275text(2,"No Result Found"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function k(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-icon",19),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext().index;return p.\u0275\u0275nextContext().expand(e)}),p.\u0275\u0275text(1,"chevron_right"),p.\u0275\u0275elementEnd()}}function M(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-icon",19),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext().index;return p.\u0275\u0275nextContext().collapse(e)}),p.\u0275\u0275text(1,"keyboard_arrow_up"),p.\u0275\u0275elementEnd()}}function P(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-checkbox",17),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().$implicit.selected=e})("change",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext().$implicit,t=p.\u0275\u0275nextContext(2).$implicit;return p.\u0275\u0275nextContext().selectActivity(e,t)}),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()}if(2&e){var i=p.\u0275\u0275nextContext().$implicit,r=p.\u0275\u0275nextContext(3);p.\u0275\u0275property("ngModel",i.selected)("indeterminate",r.disabledActivity(i))("disabled",r.disabledActivity(i)),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",i.activityName," ")}}function D(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"li"),p.\u0275\u0275template(1,P,2,4,"mat-checkbox",22),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext(2).index,i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",i.visibleActivities[n])}}function O(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"ul",20),p.\u0275\u0275template(1,D,2,1,"li",21),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",n.projectActivities)}}function T(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"li",15),p.\u0275\u0275template(1,k,2,0,"mat-icon",16),p.\u0275\u0275template(2,M,2,0,"mat-icon",16),p.\u0275\u0275elementStart(3,"mat-checkbox",17),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.allActivitiesSelected=e})("change",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().selectAllActivities(e)}),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(5,O,2,1,"ul",18),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=t.index,o=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!o.visibleActivities[r]),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",o.visibleActivities[r]),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngModel",i.allActivitiesSelected)("indeterminate",o.disabledProject(i))("disabled",o.disabledProject(i)),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate(i.projectName),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",i.projectActivities.length>0)}}var F=function(){var e=function(){function e(t,n,i){r(this,e),this.dialogRef=t,this.timesheetService=n,this.data=i,this.isSubmittedSelection=!1,this.emptyResult=!1}return i(e,[{key:"ngOnDestroy",value:function(){this.close()}},{key:"ngOnInit",value:function(){this.unfiltredUserProjects=this.data.userProjectList,this.userProjects=this.data.userProjectList,this.userId=this.data.userId,this.visibleActivities=Boolean[this.userProjects.length]=[];for(var e=0;e<this.userProjects.length;e++)this.visibleActivities[e]=!1}},{key:"close",value:function(){(!this.isSubmittedSelection||void 0!==this.userProjects)&&this.userProjects.forEach(function(e){e.allActivitiesSelected=void 0!==e.allActivitiesSaved&&e.allActivitiesSaved,e.projectActivities.forEach(function(e){e.selected=void 0!==e.saved&&!1!==e.saved&&e.saved})}),this.dialogRef.close()}},{key:"expand",value:function(e){this.visibleActivities[e]=!0}},{key:"collapse",value:function(e){this.visibleActivities[e]=!1}},{key:"getSelectedProjects",value:function(){var e=this;this.isSubmittedSelection=!0,this.selectedUserProjects=[],this.data.selectedUserProjects.forEach(function(t){t.projectStatusId===s.F7&&e.selectedUserProjects.push(t)}),this.userProjects.length<this.data.userProjectList.length&&this.data.selectedUserProjects.forEach(function(t){e.selectedUserProjects.push(t)}),this.buildSelectedProjects(),this.timesheetService.selectedProjects.next(this.selectedUserProjects),this.close()}},{key:"buildSelectedProjects",value:function(){var e=this;this.userProjects.forEach(function(t){t.allActivitiesSaved=t.allActivitiesSelected;var n=[];if(t.projectActivities.forEach(function(i){i.saved=i.selected,(i.selected||i.hasTimeEntry||i.pinnedActivity)&&(i.hasTimeEntry?e.data.selectedUserProjects.find(function(e){return e.projectId===t.projectId}).projectActivities.filter(function(e){return e.activityId===i.activityId}).forEach(function(e){e.saved=e.selected,n.push(e)}):(i.timeEntryAmountTotal=0,n.push(i)))}),n&&n.length>0){var i,r=new y.cK(t.projectId,t.projectName);r.projectGeneric=t.projectGeneric,(i=r.projectActivities).push.apply(i,n),void 0===e.selectedUserProjects.find(function(e){return e.projectId===r.projectId})&&e.selectedUserProjects.push(r)}})}},{key:"selectAllActivities",value:function(e){e.projectActivities.forEach(function(t){!t.pinnedActivity&&!t.hasTimeEntry&&(t.selected=e.allActivitiesSelected)})}},{key:"selectActivity",value:function(e,t){var n=t.projectActivities.filter(function(e){return e.selected}).length;n>0?n===t.projectActivities.length?(t.allActivitiesSelected=!0,t.indeterminateStatus=!1):(t.allActivitiesSelected=!0,t.indeterminateStatus=!0):(t.allActivitiesSelected=!1,t.indeterminateStatus=!1)}},{key:"disabledActivity",value:function(e){return e.hasTimeEntry||1===e.pinnedActivity}},{key:"disabledProject",value:function(e){for(var t=0,n=!1;t<e.projectActivities.length&&!1===n;)(e.projectActivities[t].hasTimeEntry||1===e.projectActivities[t].pinnedActivity)&&(n=!0),t+=1;return n}},{key:"filterProjects",value:function(){var e=this;this.userProjects=this.unfiltredUserProjects.filter(function(t){return-1!==t.projectName.toLocaleLowerCase().search(e.targetActivityName.toLocaleLowerCase())||t.projectActivities.some(function(t){return-1!==t.activityName.toLocaleLowerCase().search(e.targetActivityName.toLocaleLowerCase())})});var t=0;if(this.userProjects.forEach(function(n){n.projectActivities.some(function(t){return-1!==t.activityName.toLocaleLowerCase().search(e.targetActivityName.toLocaleLowerCase())})&&e.expand(t),t++}),0===this.targetActivityName.length)for(var n=0;n<this.unfiltredUserProjects.length;)this.collapse(n),n++;this.emptyResult=0===this.userProjects.length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(u.so),p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(u.WI))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-select-project"]],decls:22,vars:3,consts:[[1,"modal_header"],[1,"modal_title"],[1,"material-icons","modal-close",3,"click"],[1,"modal_body"],[1,"search-bar-container"],[1,"mat-popup-filter"],["placeholder","Search here...","matInput","","name","searchInput",1,"search-bar",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-md-12"],[4,"ngIf"],["class","project-name",4,"ngFor","ngForOf"],[1,"modal_footer"],[1,"pull-right"],["type","button",1,"btn","btn-outline-primary","m-r-5",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"project-name"],[3,"click",4,"ngIf"],[3,"ngModel","indeterminate","disabled","ngModelChange","change"],["class","collapsible activity-name",4,"ngIf"],[3,"click"],[1,"collapsible","activity-name"],[4,"ngFor","ngForOf"],[3,"ngModel","indeterminate","disabled","ngModelChange","change",4,"ngIf"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"span"),p.\u0275\u0275text(3," Select Project "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(4,"span"),p.\u0275\u0275elementStart(5,"em",2),p.\u0275\u0275listener("click",function(){return t.close()}),p.\u0275\u0275text(6,"close"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"div",3),p.\u0275\u0275elementStart(8,"div",4),p.\u0275\u0275elementStart(9,"mat-form-field",5),p.\u0275\u0275elementStart(10,"input",6),p.\u0275\u0275listener("ngModelChange",function(e){return t.targetActivityName=e})("ngModelChange",function(){return t.filterProjects()}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"div",7),p.\u0275\u0275elementStart(12,"div",8),p.\u0275\u0275template(13,w,3,0,"div",9),p.\u0275\u0275elementStart(14,"ul"),p.\u0275\u0275template(15,T,6,7,"li",10),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(16,"div",11),p.\u0275\u0275elementStart(17,"div",12),p.\u0275\u0275elementStart(18,"button",13),p.\u0275\u0275listener("click",function(){return t.close()}),p.\u0275\u0275text(19,"Cancel"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(20,"button",14),p.\u0275\u0275listener("click",function(){return t.getSelectedProjects()}),p.\u0275\u0275text(21,"OK"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275advance(10),p.\u0275\u0275property("ngModel",t.targetActivityName),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf",t.emptyResult),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",t.userProjects))},directives:[I.KE,C.Nt,m.DefaultValueAccessor,m.NgControlStatus,m.NgModel,c.NgIf,c.NgForOf,b.oG,x.Hw],styles:[".mat-checkbox .mat-checkbox-frame{border-color:#3f629d}  .mat-checkbox-checked .mat-checkbox-background{background-color:#3f629d}.project-name[_ngcontent-%COMP%]{margin-left:5px}.project-name[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;position:relative;top:4px;font-size:25px}.project-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:17px;font-weight:500;line-height:30px}.activity-name[_ngcontent-%COMP%]{margin-left:50px;line-height:30px}.expand-collapse-icon[_ngcontent-%COMP%]{cursor:pointer;position:relative;top:7px}.absenceDayOffRowStyle[_ngcontent-%COMP%]{background-color:#3f629d;color:#fff}.modal_body[_ngcontent-%COMP%]{height:425px;padding:25px;margin-top:25px;margin-bottom:25px;overflow-y:auto}.modal_footer[_ngcontent-%COMP%]{padding:10px}.table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:none}.td-activity-name[_ngcontent-%COMP%]{padding-left:40px;padding-bottom:0;text-align:left}.tr-project-name[_ngcontent-%COMP%]{color:#b8860b}.modal_header[_ngcontent-%COMP%]{height:50px;background-color:#3f629d;padding:18px 15px}.modal_header[_ngcontent-%COMP%]   .modal_title[_ngcontent-%COMP%]{color:#fff;line-height:1}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{float:right;cursor:pointer}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:red}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]{cursor:not-allowed;color:#dcdcdc}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]:hover{color:#dcdcdc}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:5px!important;padding:0!important;overflow:hidden}.popup-filter[_ngcontent-%COMP%]{font-size:large;margin-bottom:-.15em;margin-top:-1em}.mat-popup-filter[_ngcontent-%COMP%]{width:420px}.search-bar-container[_ngcontent-%COMP%]{margin-top:-1.8em}"]}),e}();function j(e){return function(t){return t.value<e?{minValue:{minValue:e}}:null}}var _=o(62758),N=function(){var e=function(){function e(){r(this,e)}return i(e,[{key:"transform",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=p.\u0275\u0275definePipe({name:"decodeHtmlString",type:e,pure:!0}),e}();function R(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",21),p.\u0275\u0275elementStart(1,"p"),p.\u0275\u0275text(2,"Invalid Value!"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}var A=function(){return{standalone:!0}};function U(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"th",15),p.\u0275\u0275text(2),p.\u0275\u0275pipe(3,"shortDate"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(4,"td"),p.\u0275\u0275elementStart(5,"textarea",16),p.\u0275\u0275listener("input",function(e){var t=p.\u0275\u0275restoreView(n).index;return p.\u0275\u0275nextContext().OnDescriptionChanged(e.target.value,t)}),p.\u0275\u0275pipe(6,"decodeHtmlString"),p.\u0275\u0275text(7,"                                "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(8,"td",17),p.\u0275\u0275elementStart(9,"div",18),p.\u0275\u0275elementStart(10,"input",19),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.progress=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(11,R,3,0,"span",20),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=t.index,o=p.\u0275\u0275nextContext();p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(3,12,i.timeEntryDate)),p.\u0275\u0275advance(3),p.\u0275\u0275propertyInterpolate1("id","description",r,""),p.\u0275\u0275propertyInterpolate1("name","description",r,""),p.\u0275\u0275property("disabled",o.disabledItemEdit(i))("ngModel",p.\u0275\u0275pipeBind1(6,14,i.description))("ngModelOptions",p.\u0275\u0275pureFunction0(16,A)),p.\u0275\u0275advance(5),p.\u0275\u0275propertyInterpolate1("id","progress",r,""),p.\u0275\u0275propertyInterpolate1("name","progress",r,""),p.\u0275\u0275propertyInterpolate("formControlName",r),p.\u0275\u0275property("ngModel",i.progress)("ngClass",o.timeEntryGroup.controls[r].invalid?"form-control is-invalid":"form-control"),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",o.timeEntryGroup.controls[r].invalid)}}var V=function(){var t=function(){function t(e,n,i,o,a,s){r(this,t),this.fb=e,this.dialogRef=n,this.timesheetService=i,this.dtService=o,this.notificationService=a,this.data=s,this.timeEntries=[]}return i(t,[{key:"ngOnInit",value:function(){this.dialogRef.updateSize("50%","85%"),this.buildForm(),this.userActivity=this.data.activity,this.userIdentifier=this.data.userIdentifier,this.days=this.data.days,this.initTimeEntry(),this.getTimeEntry()}},{key:"buildForm",value:function(){this.timeEntryGroup=this.fb.group({0:new m.FormControl("",[j(0),m.Validators.pattern("^(0|[1-9][0-9]*)$")]),1:new m.FormControl("",[j(0),m.Validators.pattern("^(0|[1-9][0-9]*)$")]),2:new m.FormControl("",[j(0),m.Validators.pattern("^(0|[1-9][0-9]*)$")]),3:new m.FormControl("",[j(0),m.Validators.pattern("^(0|[1-9][0-9]*)$")]),4:new m.FormControl("",[j(0),m.Validators.pattern("^(0|[1-9][0-9]*)$")]),5:new m.FormControl("",[j(0),m.Validators.pattern("^(0|[1-9][0-9]*)$")]),6:new m.FormControl("",[j(0),m.Validators.pattern("^(0|[1-9][0-9]*)$")])}),this.disableControls()}},{key:"disableControls",value:function(){var t=this;Object.entries(this.timeEntryGroup.controls).forEach(function(n){var i=e(n,1)[0];t.timeEntryGroup.controls[i].disable()})}},{key:"disabledItemEdit",value:function(e){return this.disabledEdit()||0===e.timeEntryId||0!==e.stateId}},{key:"disabledEdit",value:function(){return this.userActivity.projectStatusId===s.F7||this.userActivity.projectId===s.bf}},{key:"getTimeEntry",value:function(){var e=this;this.userActivity.timeEntries.forEach(function(t){var n=e.timeEntries.findIndex(function(n){return e.dtService.areEqual(n.timeEntryDate,t.timeEntryDate)});e.timeEntries[n]=t,!e.disabledItemEdit(t)&&null!=e.timeEntryGroup.controls[n]&&e.timeEntryGroup.controls[n].enable()})}},{key:"initTimeEntry",value:function(){var e=this;this.days.forEach(function(t){e.timeEntries.push({userId:0,timeEntryId:0,projectId:0,activityId:0,timeEntryDate:t.date.toDate(),amount:0,description:"",progress:"0",stateId:y.f3.Filled,categoryId:0})})}},{key:"close",value:function(){this.dialogRef.close()}},{key:"OnDescriptionChanged",value:function(e,t){this.timeEntries[t].description=e}},{key:"Save",value:function(){var e=this,t=this.timeEntries.filter(function(e){return 0!==e.timeEntryId&&e.stateId===y.f3.Filled});this.timesheetService.saveUserTimeEntryByActivity(t).subscribe(function(t){0!==t?(e.notificationService.success("Modification Saved with Success!"),e.close()):e.notificationService.warning("You can t update this timeSheet details!")},function(){e.notificationService.danger("You can t update this time entry details!"),e.getTimeEntry()})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.\u0275\u0275directiveInject(m.FormBuilder),p.\u0275\u0275directiveInject(u.so),p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(l.Cv),p.\u0275\u0275directiveInject(l.gq),p.\u0275\u0275directiveInject(u.WI))},t.\u0275cmp=p.\u0275\u0275defineComponent({type:t,selectors:[["app-edit-details"]],decls:24,vars:6,consts:[[1,"modal-content"],[1,"modal-header","alert-primary"],[1,"modal-body"],["id","timeEntryForm",3,"formGroup"],[1,"details-form"],[1,"table","table-hover"],[2,"padding","0px"],["scope","col",2,"width","12%"],["scope","col",2,"width","73%"],["scope","col",2,"width","15%"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"pull-right"],["form","timeEntryForm","type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-default",3,"click"],["scope","col",1,"align-middle"],["rows","3",1,"form-control",3,"disabled","id","name","ngModel","ngModelOptions","input"],[1,"align-middle"],[1,"form-group","position-relative","d-inline-block"],["autocomplete","off",1,"form-control",3,"id","name","ngModel","formControlName","ngClass","ngModelChange"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"h3"),p.\u0275\u0275text(3),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(4,"div",2),p.\u0275\u0275elementStart(5,"form",3),p.\u0275\u0275elementStart(6,"div",4),p.\u0275\u0275elementStart(7,"table",5),p.\u0275\u0275element(8,"caption",6),p.\u0275\u0275elementStart(9,"thead"),p.\u0275\u0275elementStart(10,"tr"),p.\u0275\u0275element(11,"th",7),p.\u0275\u0275elementStart(12,"th",8),p.\u0275\u0275text(13,"Description"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(14,"th",9),p.\u0275\u0275text(15,"Progress (%)"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(16,"tbody"),p.\u0275\u0275template(17,U,12,17,"tr",10),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(18,"div",11),p.\u0275\u0275elementStart(19,"div",12),p.\u0275\u0275elementStart(20,"button",13),p.\u0275\u0275listener("click",function(){return t.Save()}),p.\u0275\u0275text(21," Save "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"button",14),p.\u0275\u0275listener("click",function(){return t.close()}),p.\u0275\u0275text(23," Cancel"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate3(" ",t.userActivity.projectName," : ",t.userActivity.activityName," - [",t.userIdentifier.description,"] "),p.\u0275\u0275advance(2),p.\u0275\u0275property("formGroup",t.timeEntryGroup),p.\u0275\u0275advance(12),p.\u0275\u0275property("ngForOf",t.timeEntries),p.\u0275\u0275advance(3),p.\u0275\u0275property("disabled",!t.timeEntryGroup.valid||t.disabledEdit()))},directives:[m.\u0275NgNoValidate,m.NgControlStatusGroup,m.FormGroupDirective,c.NgForOf,m.DefaultValueAccessor,m.NgControlStatus,m.NgModel,m.FormControlName,c.NgClass,c.NgIf],pipes:[_.M,N],styles:["h3[_ngcontent-%COMP%]{font-size:18px;color:#fff}.modal-header[_ngcontent-%COMP%]{border-bottom:5px solid #eee;background-color:#116aff}.modal-content[_ngcontent-%COMP%]{height:100%;border-radius:0;position:relative}.modal-body[_ngcontent-%COMP%]{height:400px;padding:5px;overflow-y:auto}.modal-footer[_ngcontent-%COMP%]{border-radius:5px;bottom:0px;position:relative;width:100%;border-top:5px solid #F8F8FF;background-color:#eee}textarea[_ngcontent-%COMP%]{resize:none;padding-top:2px;padding-bottom:2px;margin:4px}input[_ngcontent-%COMP%]{margin-left:10px;width:70px}p[_ngcontent-%COMP%]{margin-top:5px;margin-left:10px}.table[_ngcontent-%COMP%]{margin:2px;padding:4px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:2px}.valid-feedback.feedback-icon[_ngcontent-%COMP%], .invalid-feedback.feedback-icon[_ngcontent-%COMP%]{position:absolute;width:10px;bottom:10px;right:15px;margin-top:0}[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.2}"]}),t}(),L=["form"],z=function(){var e=function(){function e(t,n,i){r(this,e),this.dialogRef=t,this.timesheetService=n,this.notificationService=i,this.reworkReason=""}return i(e,[{key:"ngOnDestroy",value:function(){this.close()}},{key:"rework",value:function(){""!==this.reworkReason?(this.timesheetService.timeEntryReworkReason.next(this.reworkReason),this.close()):this.notificationService.warning("Please fill Rework Reason.")}},{key:"close",value:function(){this.dialogRef.close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(u.so),p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(l.gq))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-rework-reason"]],viewQuery:function(e,t){var n;(1&e&&p.\u0275\u0275viewQuery(L,7),2&e)&&(p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.form=n.first))},decls:19,vars:1,consts:[[1,"form-container"],[1,"modal_header"],[1,"modal_title"],[1,"material-icons","modal-close",3,"click"],[1,"modal_body"],[1,"row"],[1,"col-md-12"],[1,"col-sm-12"],["matInput","","placeholder","Rework Reason","name","reworkReason","required","",3,"ngModel","ngModelChange"],[1,"modal_footer"],[1,"pull-right"],["type","button",1,"btn","btn-outline-primary","m-r-15",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"form",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"div",2),p.\u0275\u0275elementStart(3,"span"),p.\u0275\u0275text(4," Rework reason "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"span"),p.\u0275\u0275elementStart(6,"em",3),p.\u0275\u0275listener("click",function(){return t.close()}),p.\u0275\u0275text(7,"close"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(8,"div",4),p.\u0275\u0275elementStart(9,"div",5),p.\u0275\u0275elementStart(10,"div",6),p.\u0275\u0275elementStart(11,"mat-form-field",7),p.\u0275\u0275elementStart(12,"textarea",8),p.\u0275\u0275listener("ngModelChange",function(e){return t.reworkReason=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"div",9),p.\u0275\u0275elementStart(14,"div",10),p.\u0275\u0275elementStart(15,"button",11),p.\u0275\u0275listener("click",function(){return t.close()}),p.\u0275\u0275text(16,"Cancel"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(17,"button",12),p.\u0275\u0275listener("click",function(){return t.rework()}),p.\u0275\u0275text(18,"Rework"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275advance(12),p.\u0275\u0275property("ngModel",t.reworkReason))},directives:[m.\u0275NgNoValidate,m.NgControlStatusGroup,m.NgForm,I.KE,C.Nt,m.DefaultValueAccessor,m.RequiredValidator,m.NgControlStatus,m.NgModel],styles:[".modal_header[_ngcontent-%COMP%]{height:50px;background-color:#448aff;padding:18px 15px}.modal_header[_ngcontent-%COMP%]   .modal_title[_ngcontent-%COMP%]{color:#fff;line-height:1}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{float:right;cursor:pointer}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:red}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]{cursor:not-allowed;color:#dcdcdc}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]:hover{color:#dcdcdc}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:5px!important;padding:0!important;overflow:hidden}.modal_body[_ngcontent-%COMP%]{height:150px;width:600px;padding:25px;margin-top:25px;margin-bottom:25px;overflow-y:auto}.modal_footer[_ngcontent-%COMP%]{padding:40px;margin-bottom:40px}"]}),e}(),$=function(){var e=function(){function e(){r(this,e)}return i(e,[{key:"transform",value:function(e){return e.filter(function(e){return e.projectStatusId!==s.F7})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=p.\u0275\u0275definePipe({name:"filterProjects",type:e,pure:!0}),e}(),B=o(16738),H=o(88259),W=o.n(H),G=o(43220),Y=function(){var e=function(){function e(t,n){r(this,e),this.timesheetService=t,this.dtService=n,this.selectedDate=new Date,this.daysChange=new p.EventEmitter}return i(e,[{key:"ngOnInit",value:function(){var e=this;0!==this.daysForBoard.length&&(this.selectedDate=this.daysForBoard[0].date.toDate()),this.getSelectedWeek(),this.currentWeekSubscription=this.timesheetService.selectCurrentWeek.subscribe(function(t){e.selectedDate=e.dtService.today(),e.getSelectedWeek()})}},{key:"ngOnDestroy",value:function(){this.currentWeekSubscription.unsubscribe()}},{key:"getSelectedWeek",value:function(){this.startOfWeek=B(this.selectedDate).startOf("isoWeek"),this.endOfWeek=B(this.selectedDate).endOf("isoWeek"),this.getWeekDays()}},{key:"prevWeek",value:function(){this.startOfWeek=B(this.startOfWeek).subtract(1,"weeks").startOf("isoWeek"),this.endOfWeek=B(this.endOfWeek).subtract(1,"weeks").endOf("isoWeek"),this.getWeekDays()}},{key:"nextWeek",value:function(){this.startOfWeek=B(this.startOfWeek).add(1,"weeks").startOf("isoWeek"),this.endOfWeek=B(this.endOfWeek).add(1,"weeks").endOf("isoWeek"),this.getWeekDays()}},{key:"getWeekDays",value:function(){this.days=[];for(var e=this.startOfWeek;e<=this.endOfWeek;)this.days.push({date:e,dayName:this.dtService.getDayName(e)}),e=e.clone().add(1,"d");this.timesheetService.stopTimeEntriesGet.next(),this.selectedDate=this.startOfWeek.toDate(),this.daysChange.emit(this.days)}},{key:"changeDateEvent",value:function(){this.getSelectedWeek()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(l.Cv))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-select-week"]],inputs:{daysForBoard:"daysForBoard"},outputs:{daysChange:"daysChange"},decls:25,vars:8,consts:[[2,"padding","0px"],["scope","col"],[1,"td-arrow","pointer",3,"click"],[1,"material-icons"],[1,"td-date"],[1,"td-calendar","pointer",3,"click"],["matInput","",3,"matDatepicker","ngModel","ngModelChange","dateChange"],["picker",""]],template:function(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"table"),p.\u0275\u0275element(1,"caption",0),p.\u0275\u0275elementStart(2,"tr"),p.\u0275\u0275element(3,"th",1),p.\u0275\u0275elementStart(4,"td",2),p.\u0275\u0275listener("click",function(){return t.prevWeek()}),p.\u0275\u0275elementStart(5,"em",3),p.\u0275\u0275text(6,"keyboard_arrow_left"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"td",4),p.\u0275\u0275elementStart(8,"span"),p.\u0275\u0275text(9),p.\u0275\u0275pipe(10,"shortDate"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"td",5),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275reference(17).open()}),p.\u0275\u0275elementStart(12,"em",3),p.\u0275\u0275text(13,"date_range"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(14,"mat-form-field"),p.\u0275\u0275elementStart(15,"input",6),p.\u0275\u0275listener("ngModelChange",function(e){return t.selectedDate=e})("dateChange",function(){return t.changeDateEvent()}),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(16,"mat-datepicker",null,7),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(18,"td",4),p.\u0275\u0275elementStart(19,"span"),p.\u0275\u0275text(20),p.\u0275\u0275pipe(21,"shortDate"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"td",2),p.\u0275\u0275listener("click",function(){return t.nextWeek()}),p.\u0275\u0275elementStart(23,"em",3),p.\u0275\u0275text(24,"keyboard_arrow_right"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=p.\u0275\u0275reference(17);p.\u0275\u0275advance(9),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(10,4,t.startOfWeek)),p.\u0275\u0275advance(6),p.\u0275\u0275property("matDatepicker",i)("ngModel",t.selectedDate),p.\u0275\u0275advance(5),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(21,6,t.endOfWeek))}},directives:[I.KE,C.Nt,G.hl,m.DefaultValueAccessor,m.NgControlStatus,m.NgModel,G.Mq],pipes:[_.M],styles:["table[_ngcontent-%COMP%]{width:90%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border:1px solid gainsboro}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;font-size:25px;cursor:pointer}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:4px}table[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:1px;left:3px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:0px;height:0px;visibility:hidden}"]}),e}(),X=o(4885),J=o(15257),q=o(67441),Q=o(72458),K=o(52218),Z=["userSelect"];function ee(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"mat-option",15),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275property("value",n),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.description," ")}}function te(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",16),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().getMyTimeSheet()}),p.\u0275\u0275text(1,"Mine"),p.\u0275\u0275elementEnd()}}var ne=function(){var e=function(){function e(t,n,i){r(this,e),this.timesheetService=t,this.coreDataService=n,this.notificationService=i,this.userFilterCtrl=new m.FormControl,this.filteredUsersIdentifiers=new g.tq(1),this._onDestroy=new g.xQ,this.userChange=new p.EventEmitter,this.mine=!0}return i(e,[{key:"ngOnInit",value:function(){var e=this;0!==this.userIdentifier.id&&(this.mine=!1),this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.currentUserIdentifier=new S.x,this.currentUserIdentifier.id=+this.currentUser.userId,this.currentUserIdentifier.description=this.currentUser.lastName+" "+this.currentUser.firstName+" ("+this.currentUser.userNumber+")",this.selectedUserIdentifier=this.currentUserIdentifier,this.getUsers(),this.userFilterCtrl.valueChanges.pipe((0,v.R)(this._onDestroy)).subscribe(function(){e.filterUsers()}),this.selectedUserSubscription=this.timesheetService.selectUserRefresh.subscribe(function(t){e.periodFrom=t.startWeekDate,e.periodTo=t.endWeekDate,e.getUsers()})}},{key:"ngOnDestroy",value:function(){this._onDestroy.next(),this._onDestroy.complete(),this.selectedUserSubscription.unsubscribe()}},{key:"getUsers",value:function(){this.currentUser.groupId===E.Fl.SuperAdmin?this.onlyMySubordinates||0===this.userIdentifier.id?this.getReportersByPeriod():this.getActivitiesUsersByPeriod():this.getReportersByPeriod()}},{key:"getActivitiesUsersByPeriod",value:function(){var e=this;this.coreDataService.getActivitiesUsersByPeriod(this.activitiesId,this.periodFrom,this.periodTo).subscribe(function(t){if(null!=t){if(e.usersIdentifiers=t,e.usersIdentifiers&&e.usersIdentifiers.length>0)if(e.currentUserExit=void 0!==e.usersIdentifiers.find(function(t){return t.id===e.currentUser.userId}),e.mine)e.selectedUserIdentifier=e.currentUserIdentifier;else{var n=e.usersIdentifiers.find(function(t){return t.id===e.userIdentifier.id});n?e.selectedUserIdentifier=n:(e.selectedUserIdentifier=e.currentUserIdentifier,e.notificationService.danger("".concat(e.userIdentifier.description," does not yet working for the compagny in this week!")))}e.filteredUsersIdentifiers.next(e.usersIdentifiers.slice())}})}},{key:"getReportersByPeriod",value:function(){var e=this;this.coreDataService.getReportersByPeriod(this.currentUserIdentifier.id,this.periodFrom,this.periodTo).subscribe(function(t){if(e.usersIdentifiers=t,e.usersIdentifiers.unshift(e.currentUserIdentifier),e.usersIdentifiers.sort(function(e,t){return e.description.localeCompare(t.description)}),e.usersIdentifiers&&e.usersIdentifiers.length>0){if(e.currentUserExit=void 0!==e.usersIdentifiers.find(function(t){return t.id===e.currentUser.userId}),!e.mine){var n=e.usersIdentifiers.find(function(t){return t.id===e.userIdentifier.id});n||e.notificationService.danger("".concat(e.userIdentifier.description," does not yet working for the compagny in this week!")),e.selectedUserIdentifier=n}e.selectedUserIdentifier||(e.selectedUserIdentifier=e.currentUserIdentifier,e.mine=!0),e.userChange.emit(e.selectedUserIdentifier)}e.filteredUsersIdentifiers.next(e.usersIdentifiers.slice())})}},{key:"ngAfterViewInit",value:function(){this.setInitialValue()}},{key:"setInitialValue",value:function(){var e=this;this.filteredUsersIdentifiers.pipe((0,J.q)(1),(0,v.R)(this._onDestroy)).subscribe(function(){e.userSelect.compareWith=function(e,t){return e&&t&&e.id===t.id}})}},{key:"filterUsers",value:function(){if(this.usersIdentifiers){var e=this.userFilterCtrl.value;e?(e=e.toLowerCase(),this.filteredUsersIdentifiers.next(this.usersIdentifiers.filter(function(t){return t.description.toLowerCase().indexOf(e)>-1}))):this.filteredUsersIdentifiers.next(this.usersIdentifiers.slice())}}},{key:"onUserSelectEvent",value:function(){this.mine=this.selectedUserIdentifier===this.currentUserIdentifier,this.userChange.emit(this.selectedUserIdentifier)}},{key:"getPreviousUserTimeSheet",value:function(){if(void 0!==this.usersIdentifiers){var e=this.usersIdentifiers.indexOf(this.selectedUserIdentifier);this.selectedUserIdentifier=this.usersIdentifiers[0===e?this.usersIdentifiers.length-1:e-1],this.mine=this.selectedUserIdentifier===this.currentUserIdentifier,this.userChange.emit(this.selectedUserIdentifier)}}},{key:"getMyTimeSheet",value:function(){this.mine=!0,this.selectedUserIdentifier=this.currentUserIdentifier,this.userChange.emit(this.selectedUserIdentifier)}},{key:"getNextUserTimeSheet",value:function(){if(void 0!==this.usersIdentifiers){var e=this.usersIdentifiers.indexOf(this.selectedUserIdentifier);this.selectedUserIdentifier=this.usersIdentifiers[e===this.usersIdentifiers.length-1?0:e+1],this.mine=this.selectedUserIdentifier===this.currentUserIdentifier,this.userChange.emit(this.selectedUserIdentifier)}}},{key:"isMyTimeSheet",value:function(){return this.currentUserExit&&this.currentUser.userId!==this.selectedUserIdentifier.id}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(l.YY),p.\u0275\u0275directiveInject(l.gq))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-select-user"]],viewQuery:function(e,t){var n;(1&e&&p.\u0275\u0275viewQuery(Z,7),2&e)&&(p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.userSelect=n.first))},inputs:{userIdentifier:"userIdentifier",periodFrom:"periodFrom",periodTo:"periodTo",onlyMySubordinates:"onlyMySubordinates",activitiesId:"activitiesId"},outputs:{userChange:"userChange"},decls:24,vars:8,consts:[[1,"row"],[1,"col-sm-9","content-wrapper"],[2,"padding","0px"],["scope","col"],[1,"td-arrow","pointer",3,"click"],[1,"material-icons"],[1,"td-select-user","pointer"],["floatLabel","never",1,"select-user"],["placeholder","Select user",3,"ngModel","ngModelChange","selectionChange"],["userSelect",""],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["ngxMatSelectSearchClear",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-3"],["class","btn btn-primary",3,"click",4,"ngIf"],[3,"value"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"table"),p.\u0275\u0275element(3,"caption",2),p.\u0275\u0275elementStart(4,"tr"),p.\u0275\u0275element(5,"th",3),p.\u0275\u0275elementStart(6,"td",4),p.\u0275\u0275listener("click",function(){return t.getPreviousUserTimeSheet()}),p.\u0275\u0275elementStart(7,"em",5),p.\u0275\u0275text(8,"keyboard_arrow_left"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"td",6),p.\u0275\u0275elementStart(10,"mat-form-field",7),p.\u0275\u0275elementStart(11,"mat-select",8,9),p.\u0275\u0275listener("ngModelChange",function(e){return t.selectedUserIdentifier=e})("selectionChange",function(){return t.onUserSelectEvent()}),p.\u0275\u0275elementStart(13,"mat-option"),p.\u0275\u0275elementStart(14,"ngx-mat-select-search",10),p.\u0275\u0275elementStart(15,"mat-icon",11),p.\u0275\u0275text(16,"close"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(17,ee,2,2,"mat-option",12),p.\u0275\u0275pipe(18,"async"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(19,"td",4),p.\u0275\u0275listener("click",function(){return t.getNextUserTimeSheet()}),p.\u0275\u0275elementStart(20,"em",5),p.\u0275\u0275text(21,"keyboard_arrow_right"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"div",13),p.\u0275\u0275template(23,te,2,0,"button",14),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275advance(11),p.\u0275\u0275property("ngModel",t.selectedUserIdentifier),p.\u0275\u0275advance(3),p.\u0275\u0275property("formControl",t.userFilterCtrl)("placeholderLabel","Search")("noEntriesFoundLabel","No options found"),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngForOf",p.\u0275\u0275pipeBind1(18,6,t.filteredUsersIdentifiers)),p.\u0275\u0275advance(6),p.\u0275\u0275property("ngIf",t.isMyTimeSheet()))},directives:[I.KE,q.gD,m.NgControlStatus,m.NgModel,Q.ey,K.nu,m.FormControlDirective,x.Hw,K.w5,c.NgForOf,c.NgIf],pipes:[c.AsyncPipe],styles:["table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid gainsboro}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;font-size:25px;cursor:pointer}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]{text-align:center;width:35px}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:4px}table[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]   .td-select-user[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:1px;left:3px}table[_ngcontent-%COMP%]   .td-select-user[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{height:36px}.select-user[_ngcontent-%COMP%]{width:100%;padding-left:5px}.content-wrapper[_ngcontent-%COMP%]     mat-form-field.mat-form-field-appearance-legacy .mat-form-field-underline{display:none}.content-wrapper[_ngcontent-%COMP%]     mat-form-field.mat-form-field-appearance-legacy .mat-form-field-wrapper{padding-bottom:0}.content-wrapper[_ngcontent-%COMP%]     mat-form-field.mat-form-field-appearance-legacy .mat-form-field-infix{border-top:.24375em solid transparent}"]}),e}(),ie=o(38590),re=function(){var e=function(){function e(t,n,i){r(this,e),this.timesheetService=t,this.notificationService=n,this.element=i,this.refrechTimeSheet=new p.EventEmitter,this.canEdit=!0}return i(e,[{key:"ngOnInit",value:function(){if(this.tdId="td-"+this.activity.activityId.toString()+"-"+this.date.getDay().toString(),this.innerHTML="",null==this.timeEntry||(this.innerHTML=this.timeEntry.amount.toString()),(0===this.date.getDay()||6===this.date.getDay())&&(this.background="#ccc"),this.canEdit){switch(this.dayTimeEntriesState){case y.f3.Submitted:this.background="#fffd99",this.canEdit=!1;break;case y.f3.Validated:this.background="#4CAF50",this.canEdit=!1}this.activity.projectStatusId===s.F7&&(this.canEdit=!1)}this.editable=this.canEdit}},{key:"onClick",value:function(){!this.canEdit||this.setSelectedStyle()}},{key:"onKeyup",value:function(e){this.canEdit&&(this.isValidValue(e.target.textContent)?this.setSelectedStyle():this.setErrorStyle())}},{key:"onblur",value:function(){if(this.canEdit){var e=this.element.nativeElement.textContent;""!==e||null!=this.timeEntry?this.isValidValue(e)?(this.setDefaultStyle(),this.onTimeEntryBlur(e)):(this.resetValue(),this.setDefaultStyle()):this.setDefaultStyle()}else this.setDefaultStyle()}},{key:"onFocus",value:function(){sessionStorage.setItem("td-id",this.tdId)}},{key:"ngAfterViewInit",value:function(){this.tdId===sessionStorage.getItem("td-id")&&(this.element.nativeElement.focus(),this.element.nativeElement.style.border="2px solid #006699")}},{key:"resetValue",value:function(){this.element.nativeElement.innerHTML=null==this.timeEntry?"":this.timeEntry.amount.toString()}},{key:"setDefaultStyle",value:function(){this.element.nativeElement.style.border=""}},{key:"setSelectedStyle",value:function(){this.element.nativeElement.style.border="2px solid #006699"}},{key:"setErrorStyle",value:function(){this.element.nativeElement.style.border="2px solid #dc3545",this.element.nativeElement.focus()}},{key:"isValidValue",value:function(e){var t=0;void 0!==this.timeEntry&&(t=this.timeEntry.amount);var n=this.timeEntryAmountTotal+ +e-t;return null==e||""===e||!isNaN(+e)&&+e>=0&&+e<=24&&n<=24}},{key:"onTimeEntryBlur",value:function(e){""===e?this.deleteTimeEntry():null==this.timeEntry?(this.timeEntry=new y.$2,this.timeEntry.timeEntryId=0,this.timeEntry.projectId=this.projectId,this.timeEntry.activityId=this.activity.activityId,this.timeEntry.timeEntryDate=this.date,this.timeEntry.userId=this.userId,this.timeEntry.stateId=y.f3.Filled,this.timeEntry.amount=+e,this.timeEntry.description="",this.timeEntry.categoryId=null!==this.activity.categoryId||void 0!==this.activity.categoryId?this.activity.categoryId:0,this.insertOrUpdateTimeEntryAmount()):this.timeEntry.amount!==+e&&(this.timeEntry.amount=+e,this.insertOrUpdateTimeEntryAmount()),sessionStorage.removeItem("td-id")}},{key:"insertOrUpdateTimeEntryAmount",value:function(){var e=this;this.timesheetService.insertOrUpdateTimeEntryAmount(this.timeEntry).subscribe(function(t){0!==t?(e.timeEntry.timeEntryId=t,e.timesheetService.timeEntryChanged.next(e.timeEntry)):(e.notificationService.danger("Save to time entry failed."),e.refrechTimeSheet.emit())},function(){e.notificationService.danger("Save to time entry failed."),e.refrechTimeSheet.emit()})}},{key:"deleteTimeEntry",value:function(){var e=this;this.timesheetService.deleteTimeEntry(this.timeEntry.timeEntryId).subscribe(function(t){0!==t?e.timesheetService.timeEntryDeleted.next(e.timeEntry.timeEntryId):(e.notificationService.danger("Delete time Entry failed."),e.refrechTimeSheet.emit())},function(){e.notificationService.danger("Delete time Entry failed."),e.refrechTimeSheet.emit()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(l.gq),p.\u0275\u0275directiveInject(p.ElementRef))},e.\u0275dir=p.\u0275\u0275defineDirective({type:e,selectors:[["","appTdTimeEntry",""]],hostVars:5,hostBindings:function(e,t){1&e&&p.\u0275\u0275listener("click",function(){return t.onClick()})("keyup",function(e){return t.onKeyup(e)})("blur",function(e){return t.onblur(e)})("focus",function(){return t.onFocus()}),2&e&&(p.\u0275\u0275hostProperty("id",t.tdId)("innerHTML",t.innerHTML,p.\u0275\u0275sanitizeHtml),p.\u0275\u0275attribute("contenteditable",t.editable),p.\u0275\u0275styleProp("background-color",t.background))},inputs:{userId:"userId",activity:"activity",projectId:"projectId",date:"date",timeEntry:"timeEntry",dayTimeEntriesState:"dayTimeEntriesState",timeEntryAmountTotal:"timeEntryAmountTotal"},outputs:{refrechTimeSheet:"refrechTimeSheet"}}),e}();function oe(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",32),p.\u0275\u0275elementStart(1,"div",33),p.\u0275\u0275elementStart(2,"div",34),p.\u0275\u0275elementStart(3,"div",2),p.\u0275\u0275elementStart(4,"div",35),p.\u0275\u0275element(5,"mat-spinner"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function ae(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",36),p.\u0275\u0275elementStart(1,"h2",37),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(3,"br"),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(n.selectedUserIdentifier.description)}}function se(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",38),p.\u0275\u0275elementStart(1,"span"),p.\u0275\u0275elementStart(2,"em",39),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().close()}),p.\u0275\u0275text(3,"close"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}}function le(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"app-select-user",40),p.\u0275\u0275listener("userChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().userChange(e)}),p.\u0275\u0275elementEnd()}if(2&e){var i=p.\u0275\u0275nextContext();p.\u0275\u0275property("userIdentifier",i.selectedUserIdentifier)("periodFrom",i.periodFrom)("periodTo",i.periodTo)("onlyMySubordinates",i.onlyMySubordinates)("activitiesId",i.activitiesId)}}function ce(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",41),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().importFromExcel()}),p.\u0275\u0275element(1,"em",42),p.\u0275\u0275text(2," Import "),p.\u0275\u0275elementEnd()}}function de(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",41),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().submitTimeEntry()}),p.\u0275\u0275element(1,"em",43),p.\u0275\u0275text(2," Submit "),p.\u0275\u0275elementEnd()}}function me(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",41),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().openReworkReasonDialog()}),p.\u0275\u0275element(1,"em",44),p.\u0275\u0275text(2," Rework "),p.\u0275\u0275elementEnd()}}function ue(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",41),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().validateTimeEntry()}),p.\u0275\u0275element(1,"em",45),p.\u0275\u0275text(2," Validate "),p.\u0275\u0275elementEnd()}}function pe(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"th",46),p.\u0275\u0275text(1),p.\u0275\u0275pipe(2,"shortDate"),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(2,1,null==n?null:n.date))}}function he(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"th",46),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1("",null==n?null:n.timeEntryAmountTotal," h")}}function fe(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"label",50),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate(null==n?null:n.projectStatus)}}function ge(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"td",58),p.\u0275\u0275listener("refrechTimeSheet",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).refrechTimeSheet()}),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=p.\u0275\u0275nextContext().$implicit,o=p.\u0275\u0275nextContext(2);p.\u0275\u0275property("userId",o.selectedUserIdentifier.id)("activity",r)("projectId",r.projectId)("date",i.date.toDate())("timeEntry",o.getTimeEntry(r,i))("dayTimeEntriesState",o.getDayTimeEntriesState(i))("timeEntryAmountTotal",null==i?null:i.timeEntryAmountTotal)}}function ve(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td",51),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(3,ge,1,7,"td",52),p.\u0275\u0275elementStart(4,"td",53),p.\u0275\u0275text(5),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(6,"td",54),p.\u0275\u0275elementStart(7,"div",55),p.\u0275\u0275elementStart(8,"mat-icon",56),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext(2).openEditDialog(e)}),p.\u0275\u0275text(9,"speaker_notes"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(10,"td",54),p.\u0275\u0275elementStart(11,"div",55),p.\u0275\u0275elementStart(12,"mat-checkbox",57),p.\u0275\u0275listener("change",function(e){var t=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext(2).insertOrUpdatePinActivity(t,e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(1),p.\u0275\u0275property("matTooltip",i.activityName.length>45?i.activityName:null),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",i.activityName," "),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",r.weekDays),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("",null==i?null:i.timeEntryAmountTotal," h"),p.\u0275\u0275advance(7),p.\u0275\u0275property("checked",1===i.pinnedActivity)}}var ye=function(e,t){return{"non-generic":e,generic:t}};function Se(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tbody"),p.\u0275\u0275elementStart(1,"tr",47),p.\u0275\u0275elementStart(2,"td",48),p.\u0275\u0275elementStart(3,"span"),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(5,fe,2,1,"label",49),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(6,ve,13,5,"tr",31),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngClass",p.\u0275\u0275pureFunction2(5,ye,0===n.projectGeneric,0!==n.projectGeneric)),p.\u0275\u0275advance(1),p.\u0275\u0275property("colSpan",i.weekDays.length+5),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(null==n?null:n.projectName),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",3==n.projectStatusId),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",null==n?null:n.projectActivities)}}var Ee=function(e,t){return{"main-content":e,"md-dialog-container main-content":t}},Ie=function(){var e=function(){function e(t,n,i){r(this,e),this.dialogRef=n,this.data=i,this.selectedUserProjects=[],this.daysForBoard=[],this.isDisplayedUsers=!0,this.startOfCurrentWeek=B().startOf("isoWeek"),this.endOfCurrentWeek=B().endOf("isoWeek"),this.periodFrom=this.startOfCurrentWeek.toDate(),this.periodTo=this.endOfCurrentWeek.toDate(),this.teamDisplay=!1,this.filteredUsers=new g.tq(1),this.timeEntriesList=[],this.selectedUserIdentifier=new S.x,this.filterProjectPipe=new $,this.activitiesId="",this.onlyMySubordinates=!1,this.dialog=t.get(u.uw),this.timesheetService=t.get(s.r4),this.dtService=t.get(l.Cv),this.notificationService=t.get(l.gq),this.mailService=t.get(l.YT),this.activatedRoute=t.get(f.gz),this.router=t.get(f.F0)}return i(e,[{key:"ngOnInit",value:function(){var e,t=this;if(this.activatedRoute.queryParams.subscribe(function(n){e=null==n.time?0:n.time,t.userId=null==n.id?0:n.id,e=+e,t.userId=+t.userId,0===t.userId&&(t.userId=+t.activatedRoute.snapshot.paramMap.get("id"),e=+t.activatedRoute.snapshot.paramMap.get("time"))}),this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.userHasSubordinates=this.currentUser.hasSubordinates,this.userId>0){this.selectedUserIdentifier.id=this.userId;var n=new y.Hu;n.date=B(e),this.daysForBoard.push(n),this.periodFrom=n.date.toDate(),this.periodTo=n.date.endOf("isoWeek").toDate()}else if(0!==this.data.length){this.selectedUserIdentifier.id=+this.data.userId,this.selectedUserIdentifier.description=this.data.userName,this.userId=+this.data.userId,this.activitiesId=this.data.activitiesId,this.onlyMySubordinates=this.data.onlyMySubordinates,this.isDisplayedUsers=!1;var i=new y.Hu;i.date=B(this.data.weekTimeSheet.weekStartDate),this.daysForBoard.push(i),this.periodFrom=i.date.toDate(),this.periodTo=i.date.endOf("isoWeek").toDate()}else this.selectedUserIdentifier.id=+this.currentUser.userId,this.selectedUserIdentifier.description=this.currentUser.userName;this.checkDisplayMode(),this.projectsSubscription=this.timesheetService.selectedProjects.subscribe(function(e){t.selectedUserProjects=e}),sessionStorage.removeItem("td-id"),this.timeEntryChgSubscription=this.timesheetService.timeEntryChanged.subscribe(function(e){t.timeEntryChanged(e)}),this.timeEntryDltSubscription=this.timesheetService.timeEntryDeleted.subscribe(function(e){t.timeEntryDeleted(e)}),this.timeEntryReworkSubscription=this.timesheetService.timeEntryReworkReason.subscribe(function(e){t.reworkTimeEntry(e)})}},{key:"ngOnDestroy",value:function(){this.timesheetService.stopTimeEntriesGet.next(),this.timesheetService.stopTimeEntriesGet.complete(),this.projectsSubscription.unsubscribe(),this.timeEntryChgSubscription.unsubscribe(),this.timeEntryDltSubscription.unsubscribe(),this.timeEntryReworkSubscription.unsubscribe(),this.dialog.closeAll()}},{key:"userChange",value:function(e){this.selectedUserIdentifier=e,sessionStorage.removeItem("td-id"),this.userProjects=[],null!=e&&this.getUserTimeEntries()}},{key:"daysChange",value:function(e){if(sessionStorage.removeItem("td-id"),this.weekDays=e,null!=e){var t=this.weekDays[0].date.toDate(),n=this.weekDays[this.weekDays.length-1].date.toDate();this.timesheetService.selectUserRefresh.next({startWeekDate:t,endWeekDate:n}),this.getUserTimeEntries()}}},{key:"checkDisplayMode",value:function(){this.teamDisplay=null===this.activatedRoute.snapshot.routeConfig||"team"===this.activatedRoute.snapshot.routeConfig.path}},{key:"getUserTimeEntries",value:function(){var e=this,t=this.weekDays[0].date.toDate(),n=this.weekDays[this.weekDays.length-1].date.toDate(),i=this.selectedUserIdentifier.id.toString();this.timesheetService.getUserTimeEntries(i,t,n).pipe((0,v.R)(this.timesheetService.stopTimeEntriesGet)).subscribe(function(t){e.timeEntriesList=[],t.forEach(function(t){t.timeEntryDate=new Date(t.timeEntryDate),e.timeEntriesList.push(Object.assign(new y.$2,t))}),e.getUserActivities()})}},{key:"getUserActivities",value:function(){var e=this;this.isLoading=!0,this.timesheetService.getUserActivities(this.selectedUserIdentifier.id.toString()).subscribe(function(t){e.isLoading=!1;var n=[];t.forEach(function(e){n.push(Object.assign(new y.VB,e))}),e.userProjects=[],n.forEach(function(t){var n=e.userProjects.find(function(e){return e.projectId===t.projectId});void 0===n?((n=new y.cK(t.projectId,t.projectName)).projectGeneric=t.projectGeneric,n.projectStatus=t.projectStatus,n.projectStatusId=t.projectStatusId,n.projectActivities.push(t),e.userProjects.push(n)):n.projectActivities.push(t)}),e.getSelectedProjects()})}},{key:"getSelectedProjects",value:function(){var e=this;this.selectedUserProjects=[],this.userProjects&&this.userProjects.length>0&&this.userProjects.forEach(function(t){if(t.projectActivities&&t.projectActivities.length>0){var n=new y.cK(t.projectId,t.projectName);n.projectGeneric=t.projectGeneric,n.projectStatusId=t.projectStatusId,n.projectStatus=t.projectStatus,t.projectActivities.forEach(function(t){t.timeEntries=e.timeEntriesList.filter(function(e){return e.activityId===t.activityId}),t.hasTimeEntry=t.timeEntries.length>0,e.refreshSelectedProject(t,n),e.refreshSelectedProjectActivities(t,n)}),n.projectActivities.length>0&&e.selectedUserProjects.push(n)}}),this.updateAmountTotals()}},{key:"refreshSelectedProject",value:function(e,t){if(e.hasTimeEntry){var n=-1,i=0;e.timeEntries.forEach(function(r){var o=r.timeEntryDate.getDay(),a=t.projectActivities.filter(function(t){return t.activityId===e.activityId});if(o===n)if(i+=1,a.length<i){var s=Object.assign(new y.VB,e);s.timeEntries=new Array(r),t.projectActivities.push(s)}else a[i-1].timeEntries.push(r);else if(i=1,0===a.length){var l=Object.assign(new y.VB,e);l.timeEntries=new Array(r),t.projectActivities.push(l)}else a[0].timeEntries.push(r);n=o})}}},{key:"refreshSelectedProjectActivities",value:function(e,t){!e.hasTimeEntry&&(e.pinnedActivity||void 0!==e.selected&&e.selected)&&t.projectActivities.push(e)}},{key:"updateAmountTotals",value:function(){var e=this;this.resetAmountTotals(),this.selectedUserProjects&&this.selectedUserProjects.length>0&&this.selectedUserProjects.forEach(function(t){t.projectActivities.forEach(function(t){t.timeEntryAmountTotal=0,t.hasTimeEntry=!1,e.timeEntriesList.findIndex(function(e){return e.activityId===t.activityId})>-1&&e.weekDays.forEach(function(n){var i=e.getTimeEntry(t,n);i&&i.amount>=0&&(t.hasTimeEntry=!0,t.timeEntryAmountTotal=+(i.amount+t.timeEntryAmountTotal).toFixed(2),n.timeEntryAmountTotal=+(i.amount+n.timeEntryAmountTotal).toFixed(2),e.globalTimeEntryAmountTotal=+(i.amount+e.globalTimeEntryAmountTotal).toFixed(2))})})})}},{key:"resetAmountTotals",value:function(){this.weekDays.forEach(function(e){e.timeEntryAmountTotal=0}),this.globalTimeEntryAmountTotal=0}},{key:"getTimeEntry",value:function(e,t){var n=this;return e.timeEntries.find(function(e){return n.dtService.areEqual(e.timeEntryDate,t.date)})}},{key:"timeEntryChanged",value:function(e){-1===this.timeEntriesList.findIndex(function(t){return t.timeEntryId===e.timeEntryId})&&(this.timeEntriesList.push(e),this.timeEntriesList=this.sortTimeEntriesList()),this.getSelectedProjects()}},{key:"sortTimeEntriesList",value:function(){return this.timeEntriesList.sort(function(e,t){return e.timeEntryDate>t.timeEntryDate?1:e.timeEntryDate<t.timeEntryDate?-1:0})}},{key:"timeEntryDeleted",value:function(e){this.timeEntriesList=this.timeEntriesList.filter(function(t){return t.timeEntryId!==e}),this.getSelectedProjects()}},{key:"openEditDialog",value:function(e){this.displayEditdialogRef=this.dialog.open(V,{disableClose:!1,panelClass:"form_modal",hasBackdrop:!0,data:{userIdentifier:this.selectedUserIdentifier,days:this.weekDays,activity:e}})}},{key:"openProjectListDialog",value:function(){var e={disableClose:!1,panelClass:"form_modal",width:"500px",height:"600px",hasBackdrop:!0,data:{userProjectList:this.filterProjectPipe.transform(this.userProjects),selectedUserProjects:this.selectedUserProjects,userId:this.selectedUserIdentifier.id}};this.displayProjectListdialogRef=this.dialog.open(F,e)}},{key:"openReworkReasonDialog",value:function(){this.timeEntriesList.filter(function(e){return e.stateId===y.f3.Submitted||e.stateId===y.f3.Validated}).length>0?this.displayReworkReasonRef=this.dialog.open(z,{disableClose:!1,panelClass:"form_modal",hasBackdrop:!0,data:{}}):this.notificationService.info("There is no Time Entry to rework.")}},{key:"selectCurrentWeek",value:function(){this.timesheetService.selectCurrentWeek.next()}},{key:"insertOrUpdatePinActivity",value:function(e,t){var n=this,i=!0===t.checked?1:0;this.timesheetService.insertOrUpdatePinActivity(+this.selectedUserIdentifier.id,e.activityId,i).subscribe(function(t){0!==t?(e.pinnedActivity=i,0===i&&n.updateDisplayPinActivity(e)):n.notificationService.warning("You can t pin this task")})}},{key:"updateDisplayPinActivity",value:function(e){this.userProjects.forEach(function(t){t.projectId===e.projectId&&(t.allActivitiesSelected=!0,t.allActivitiesSaved=!0,t.projectActivities.forEach(function(t){t.activityId===e.activityId&&(t.selected=!0,t.saved=!0)}))})}},{key:"importFromExcel",value:function(){this.router.navigate(["/project-management/timesheet/import/"])}},{key:"submitTimeEntry",value:function(){var e=this;W().fire({text:"Do you want to submit your timesheet?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0,preConfirm:function(){var t=e.timeEntriesList.filter(function(e){return e.stateId===y.f3.Filled});t.length>0?e.isContinuouslyFilledTimeSheet()?e.timesheetService.updateTimeEntriesState(e.weekDays,t,y.f3.Submitted).subscribe(function(n){0!==n?(e.mailService.submitTimesheet(t),e.notificationService.success("This timesheet is submitted.")):e.notificationService.warning("This submit is failed."),e.getUserTimeEntries()},function(){e.notificationService.danger("This timesheet is not submitted.")}):e.notificationService.danger("Please fill all days continuously."):e.notificationService.info("Please set Time Entry before submitting.")}})}},{key:"validateTimeEntry",value:function(){var e=this,t=this.timeEntriesList.filter(function(e){return e.stateId===y.f3.Submitted});if(0===t.length){var n=this.timeEntriesList.filter(function(e){return e.stateId===y.f3.Filled});n.length>0?W().fire({text:"Are you sure to validate this timesheet?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0,preConfirm:function(){e.isContinuouslyFilledTimeSheet()?e.timesheetService.updateTimeEntriesState(e.weekDays,n,y.f3.Validated).subscribe(function(t){e.refrechValidatedTimeEntry(t)},function(){e.notificationService.danger("This timesheet is not validated.")}):e.notificationService.danger("Please fill all days continuously.")}}):this.notificationService.info("Please set Time Entry before validating.")}else this.timesheetService.updateTimeEntriesState(this.weekDays,t,y.f3.Validated).subscribe(function(t){e.refrechValidatedTimeEntry(t)},function(){e.notificationService.danger("This timesheet is not validated.")})}},{key:"refrechValidatedTimeEntry",value:function(e){0!==e?this.notificationService.success("This timesheet is validated."):this.notificationService.warning("This timesheet validation failed."),this.getUserTimeEntries()}},{key:"reworkTimeEntry",value:function(e){var t=this;this.timeEntriesList.filter(function(e){return e.stateId===y.f3.Submitted||e.stateId===y.f3.Validated}).length>0&&this.timesheetService.updateTimeEntriesState(this.weekDays,this.timeEntriesList,y.f3.Filled).subscribe(function(n){0!==n?(t.mailService.reworkTimesheet(e,t.timeEntriesList,t.selectedUserIdentifier.id),t.notificationService.success("Timesheet rework performed.")):t.notificationService.warning("Timesheet rework failed."),t.getUserTimeEntries()},function(){t.notificationService.danger("Timesheet rework failed.")})}},{key:"isContinuouslyFilledTimeSheet",value:function(){var e=!0,t=new Date(this.timeEntriesList[0].timeEntryDate);return(e=1===t.getDay())&&(t.setDate(t.getDate()+1),this.timeEntriesList.forEach(function(n){if(new Date(n.timeEntryDate)>t)return e=!1;(t=new Date(n.timeEntryDate)).setDate(t.getDate()+1)})),e}},{key:"getDayTimeEntriesState",value:function(e){var t=this,n=this.timeEntriesList.find(function(n){return t.dtService.areEqual(n.timeEntryDate,e.date)});return void 0!==n?n.stateId:y.f3.Filled}},{key:"isUsersNotEmpty",value:function(){return this.userHasSubordinates||0!==this.userId&&this.currentUser.groupId===E.Fl.SuperAdmin&&(!this.onlyMySubordinates||this.onlyMySubordinates&&this.userHasSubordinates)}},{key:"isMyTimeSheet",value:function(){return this.currentUser.userId!==this.selectedUserIdentifier.id}},{key:"close",value:function(){this.dialogRef.close()}},{key:"refrechTimeSheet",value:function(){this.getUserTimeEntries()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(p.Injector),p.\u0275\u0275directiveInject(u.so),p.\u0275\u0275directiveInject(u.WI))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-timeentry-component"]],decls:55,vars:25,consts:[[3,"ngClass"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"wrapper"],["class","overlay",4,"ngIf"],[1,"card-body","loaded-content"],["class","col-md-11",4,"ngIf"],["class","col-md-1",4,"ngIf"],[1,"row","m-b-20"],[1,"col-sm-2"],[1,"select-current-week"],[1,"f-w-600",3,"click"],[1,"col-sm-3"],[3,"daysForBoard","daysChange"],[1,"col-sm-4"],[3,"userIdentifier","periodFrom","periodTo","onlyMySubordinates","activitiesId","userChange",4,"ngIf"],[1,"col-sm-3",2,"text-align","right"],["class","btn btn-primary m-r-5","type","submit",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"icofont","icofont-plus"],[1,"table","text-center","m-b-10"],[2,"padding","0px"],[1,"th-days","thead"],["scope","col",2,"width","21%"],["style","width:7%","scope","col",4,"ngFor","ngForOf"],["scope","col",2,"width","8%"],[1,"th-totals","thead"],["scope","col",1,"text-right",2,"width","21%"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"overlay"],[1,"spinner-wrapper"],[1,"container"],["id","loader"],[1,"col-md-11"],[2,"color","#979695"],[1,"col-md-1"],[1,"material-icons","modal-close",3,"click"],[3,"userIdentifier","periodFrom","periodTo","onlyMySubordinates","activitiesId","userChange"],["type","submit",1,"btn","btn-primary","m-r-5",3,"click"],[1,"fa","fa-file-excel-o",2,"font-size","medium"],[1,"fa","fa-arrow-circle-right"],[1,"icofont","icofont-exchange"],[1,"icofont","icofont-checked"],["scope","col",2,"width","7%"],[1,"tr-project",3,"ngClass"],[3,"colSpan"],["class","label label-danger m-l-5",4,"ngIf"],[1,"label","label-danger","m-l-5"],[1,"text-left",2,"width","21%","text-overflow","ellipsis",3,"matTooltip"],["style","width: 7%;","appTdTimeEntry","",3,"userId","activity","projectId","date","timeEntry","dayTimeEntriesState","timeEntryAmountTotal","refrechTimeSheet",4,"ngFor","ngForOf"],[1,"td-total-activity",2,"width","8%"],[1,"td-notes-pin",2,"width","8%"],[2,"margin-bottom","-0.5em"],[3,"click"],[3,"checked","change"],["appTdTimeEntry","",2,"width","7%",3,"userId","activity","projectId","date","timeEntry","dayTimeEntriesState","timeEntryAmountTotal","refrechTimeSheet"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"div",2),p.\u0275\u0275elementStart(3,"div",3),p.\u0275\u0275elementStart(4,"div",4),p.\u0275\u0275elementStart(5,"div",5),p.\u0275\u0275template(6,oe,6,0,"div",6),p.\u0275\u0275elementStart(7,"div",7),p.\u0275\u0275elementStart(8,"div",2),p.\u0275\u0275template(9,ae,4,1,"div",8),p.\u0275\u0275template(10,se,4,0,"div",9),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"div",10),p.\u0275\u0275elementStart(12,"div",11),p.\u0275\u0275elementStart(13,"div",12),p.\u0275\u0275elementStart(14,"h5"),p.\u0275\u0275text(15," Current Week"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(16,"a",13),p.\u0275\u0275listener("click",function(){return t.selectCurrentWeek()}),p.\u0275\u0275text(17),p.\u0275\u0275pipe(18,"shortDate"),p.\u0275\u0275pipe(19,"shortDate"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(20,"div",14),p.\u0275\u0275elementStart(21,"app-select-week",15),p.\u0275\u0275listener("daysChange",function(e){return t.daysChange(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"div",16),p.\u0275\u0275template(23,le,1,5,"app-select-user",17),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(24,"div",18),p.\u0275\u0275template(25,ce,3,0,"button",19),p.\u0275\u0275template(26,de,3,0,"button",19),p.\u0275\u0275template(27,me,3,0,"button",19),p.\u0275\u0275template(28,ue,3,0,"button",19),p.\u0275\u0275elementStart(29,"button",20),p.\u0275\u0275listener("click",function(){return t.openProjectListDialog()}),p.\u0275\u0275element(30,"em",21),p.\u0275\u0275text(31," Task "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(32,"div",2),p.\u0275\u0275elementStart(33,"div",3),p.\u0275\u0275elementStart(34,"table",22),p.\u0275\u0275element(35,"caption",23),p.\u0275\u0275elementStart(36,"thead",24),p.\u0275\u0275element(37,"th",25),p.\u0275\u0275template(38,pe,3,3,"th",26),p.\u0275\u0275elementStart(39,"th",27),p.\u0275\u0275text(40,"Total"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(41,"th",27),p.\u0275\u0275text(42,"Notes"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(43,"th",27),p.\u0275\u0275text(44,"Pin"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(45,"thead",28),p.\u0275\u0275elementStart(46,"th",29),p.\u0275\u0275text(47,"Total"),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(48,he,2,1,"th",26),p.\u0275\u0275elementStart(49,"th",27),p.\u0275\u0275text(50),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(51,"th",27),p.\u0275\u0275element(52,"th",27),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(53,"span",30),p.\u0275\u0275template(54,Se,7,8,"tbody",31),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275property("ngClass",p.\u0275\u0275pureFunction2(22,Ee,t.isDisplayedUsers,!t.isDisplayedUsers)),p.\u0275\u0275advance(6),p.\u0275\u0275property("ngIf",t.isLoading),p.\u0275\u0275advance(1),p.\u0275\u0275classProp("blurred",t.isLoading),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",!t.isDisplayedUsers),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!t.isDisplayedUsers),p.\u0275\u0275advance(7),p.\u0275\u0275textInterpolate2("",p.\u0275\u0275pipeBind1(18,18,t.startOfCurrentWeek),"-",p.\u0275\u0275pipeBind1(19,20,t.endOfCurrentWeek)," "),p.\u0275\u0275advance(4),p.\u0275\u0275property("daysForBoard",t.daysForBoard),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",t.isUsersNotEmpty()),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",t.isDisplayedUsers&&!t.isMyTimeSheet()),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!t.isMyTimeSheet()),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.isUsersNotEmpty()&&t.isMyTimeSheet()),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.isUsersNotEmpty()&&t.isMyTimeSheet()),p.\u0275\u0275advance(10),p.\u0275\u0275property("ngForOf",t.weekDays),p.\u0275\u0275advance(10),p.\u0275\u0275property("ngForOf",t.weekDays),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("",t.globalTimeEntryAmountTotal," h"),p.\u0275\u0275advance(4),p.\u0275\u0275property("ngForOf",t.selectedUserProjects))},directives:[c.NgClass,c.NgIf,Y,c.NgForOf,X.$g,ne,ie.gM,x.Hw,b.oG,re],pipes:[_.M],styles:[".card-body[_ngcontent-%COMP%]{padding:25px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px;padding:6px;border-top:1px solid #bbbbbb;border-left:1px solid #bbbbbb;border-right:1px solid #bbbbbb}table[_ngcontent-%COMP%]{font-size:12px;padding:6px}.tbody[_ngcontent-%COMP%]{display:block;overflow:auto;overflow-y:scroll;max-height:calc(100vh - 380px);border-bottom:1px solid #bbbbbb}.thead[_ngcontent-%COMP%]{width:calc(100% - 1.5em)}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}td[_ngcontent-%COMP%]{overflow:hidden}.tr-project[_ngcontent-%COMP%]{text-align:left;color:#fff;font-weight:600}.generic[_ngcontent-%COMP%]{background-color:#8e0089}.non-generic[_ngcontent-%COMP%]{background-color:#5489a5}.th-days[_ngcontent-%COMP%]{background-color:#3f629d;color:#fff}.th-totals[_ngcontent-%COMP%]{background-color:#ccc;color:#000}.td-total-activity[_ngcontent-%COMP%]{font-weight:600;color:#000}.td-notes-pin[_ngcontent-%COMP%]{padding:0;vertical-align:middle}mat-icon[_ngcontent-%COMP%]{cursor:pointer}.select-current-week[_ngcontent-%COMP%]{color:#3f629d}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] + tbody[_ngcontent-%COMP%]{border-top:0px}.select-row[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:40px}.label[_ngcontent-%COMP%]{padding:5px}.f-w-600[_ngcontent-%COMP%]{cursor:pointer}.modal-close[_ngcontent-%COMP%]{float:right;cursor:pointer;margin:0}.modal-close[_ngcontent-%COMP%]:hover{color:red}.md-dialog-container[_ngcontent-%COMP%]{width:1500px;height:700px}.wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.overlay[_ngcontent-%COMP%]{position:absolute;z-index:1002;background-color:#ffffff80;width:100%;height:100%}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center}#loader[_ngcontent-%COMP%]{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}"]}),e}(),Ce=o(63753),be=o(71370),xe=o(60428),we=o(44995),ke=o(36063),Me=B,Pe={parse:{dateInput:"MM/YYYY"},display:{dateInput:"MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}},De=function(){var e=function(){function e(t,n){r(this,e),this.timesheetService=t,this.dtService=n,this.date=new m.FormControl(Me()),this.monthSelected=new Date,this.daysChange=new p.EventEmitter,this.firstDate=new Date(this.date.value)}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.date.setValue(this.date.value.startOf("month")),this.getMonthWeeksFirstDay(),this.currentMonthSubscription=this.timesheetService.selectCurrentMonth.subscribe(function(t){e.date.setValue(e.dtService.getCurrentMonth()),e.getMonthWeeksFirstDay()})}},{key:"chosenYearHandler",value:function(e){this.date.setValue(e),this.getMonthWeeksFirstDay()}},{key:"chosenMonthHandler",value:function(e,t){this.date.setValue(e),this.getMonthWeeksFirstDay(),t&&t.close()}},{key:"previousMonth",value:function(){this.date.setValue(Me(this.date.value.subtract(1,"months").startOf("month"))),this.getMonthWeeksFirstDay()}},{key:"nextMonth",value:function(){this.date.setValue(Me(this.date.value.add(1,"months").startOf("month"))),this.getMonthWeeksFirstDay()}},{key:"getMonthWeeksFirstDay",value:function(){this.weeksFirstDate=[];for(var e=new Date(this.date.value);e.getMonth()===new Date(this.date.value).getMonth();){for(this.weeksFirstDate.push(new Date(e));e.getUTCDay()<6;)e.setDate(e.getDate()+1);e.setDate(e.getDate()+1)}this.daysChange.emit(this.weeksFirstDate)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(l.Cv))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-select-month-board"]],outputs:{daysChange:"daysChange"},features:[p.\u0275\u0275ProvidersFeature([{provide:Q._A,useClass:ke.t7,deps:[Q.Ad]},{provide:Q.sG,useValue:Pe}])],decls:22,vars:7,consts:[[2,"padding","0px"],[1,"td-calendar"],["scope","col"],[1,"td-arrow","pointer",3,"click"],[1,"material-icons"],[1,"td-date"],[1,"td-calendar","pointer",3,"click"],["matInput","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["startView","multi-year","panelClass","example-month-picker",3,"yearSelected","monthSelected"],["picker",""]],template:function(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"table"),p.\u0275\u0275element(1,"caption",0),p.\u0275\u0275elementStart(2,"tr",1),p.\u0275\u0275element(3,"th",2),p.\u0275\u0275elementStart(4,"td",3),p.\u0275\u0275listener("click",function(){return t.previousMonth()}),p.\u0275\u0275elementStart(5,"em",4),p.\u0275\u0275text(6,"keyboard_arrow_left"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"td",5),p.\u0275\u0275elementStart(8,"span"),p.\u0275\u0275text(9),p.\u0275\u0275pipe(10,"date"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"td",6),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275reference(18).open()}),p.\u0275\u0275elementStart(12,"em",4),p.\u0275\u0275text(13,"date_range"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(14,"mat-form-field"),p.\u0275\u0275element(15,"input",7),p.\u0275\u0275element(16,"mat-datepicker-toggle",8),p.\u0275\u0275elementStart(17,"mat-datepicker",9,10),p.\u0275\u0275listener("yearSelected",function(e){return t.chosenYearHandler(e)})("monthSelected",function(e){p.\u0275\u0275restoreView(n);var i=p.\u0275\u0275reference(18);return t.chosenMonthHandler(e,i)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(19,"td",3),p.\u0275\u0275listener("click",function(){return t.nextMonth()}),p.\u0275\u0275elementStart(20,"em",4),p.\u0275\u0275text(21,"keyboard_arrow_right"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=p.\u0275\u0275reference(18);p.\u0275\u0275advance(9),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind2(10,4,t.date.value,"MM / yyyy")),p.\u0275\u0275advance(6),p.\u0275\u0275property("matDatepicker",i)("formControl",t.date),p.\u0275\u0275advance(1),p.\u0275\u0275property("for",i)}},directives:[I.KE,C.Nt,G.hl,m.DefaultValueAccessor,m.NgControlStatus,m.FormControlDirective,G.nW,I.R9,G.Mq],pipes:[c.DatePipe],styles:["table[_ngcontent-%COMP%]{width:80%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border:1px solid gainsboro}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;font-size:25px;cursor:pointer}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:4px}table[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:1px;left:3px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:0px;height:0px;visibility:hidden}"]}),e}(),Oe=o(67827),Te=function(){var e=function(){function e(t,n){r(this,e),this.element=t,this.dialog=n,this.refreshBoard=new p.EventEmitter}return i(e,[{key:"ngOnInit",value:function(){this.innerHTML=0!==this.weekTimeSheet.amount?this.weekTimeSheet.amount.toString()+" h":"",this.background=2===this.weekTimeSheet.state?"#4CAF50":1===this.weekTimeSheet.state?"#fffd99":"#FFFFFF"}},{key:"ngOnDestroy",value:function(){this.dialog.closeAll()}},{key:"onClick",value:function(e){var t=this;this.displayEditdialogRef=this.dialog.open(Ie,{disableClose:!1,hasBackdrop:!0,data:{userId:this.userId,userName:this.userName,onlyMySubordinates:this.onlyMySubordinates,activitiesId:this.activitiesId,weekTimeSheet:this.weekTimeSheet}}),this.displayEditdialogRef.updatePosition({left:"10%",right:"10%"}),this.displayEditdialogRef.afterClosed().subscribe(function(e){t.refreshBoard.emit(!0)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(p.ElementRef),p.\u0275\u0275directiveInject(u.uw))},e.\u0275dir=p.\u0275\u0275defineDirective({type:e,selectors:[["","appTdBoard",""]],hostVars:7,hostBindings:function(e,t){1&e&&p.\u0275\u0275listener("click",function(e){return t.onClick(e)}),2&e&&(p.\u0275\u0275hostProperty("innerHTML",t.innerHTML,p.\u0275\u0275sanitizeHtml),p.\u0275\u0275styleProp("border",t.border)("box-shadow",t.boShadow)("background-color",t.background))},inputs:{weekTimeSheet:"weekTimeSheet",userId:"userId",userName:"userName",activitiesId:"activitiesId",onlyMySubordinates:"onlyMySubordinates"},outputs:{refreshBoard:"refreshBoard"}}),e}();function Fe(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",32),p.\u0275\u0275elementStart(1,"div",33),p.\u0275\u0275elementStart(2,"div",34),p.\u0275\u0275elementStart(3,"div",2),p.\u0275\u0275elementStart(4,"div",35),p.\u0275\u0275element(5,"mat-spinner"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function je(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-checkbox",36),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().onlyMySubordinates=e})("change",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().onlyMySubordinatesChanged()}),p.\u0275\u0275text(1," My Subordinates "),p.\u0275\u0275elementEnd()}if(2&e){var i=p.\u0275\u0275nextContext();p.\u0275\u0275property("ngModel",i.onlyMySubordinates)}}function _e(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"ng-multiselect-dropdown",37),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().selectedActivitiesIdentifiers=e})("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().dropDownSelected=!0})("onDropDownClose",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().onDropDownClose()}),p.\u0275\u0275elementEnd()}if(2&e){var i=p.\u0275\u0275nextContext();p.\u0275\u0275property("placeholder","Select Activity...")("settings",i.dropDownSettings)("data",i.activitiesIdentifiers)("ngModel",i.selectedActivitiesIdentifiers)}}function Ne(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"th",38),p.\u0275\u0275text(1),p.\u0275\u0275pipe(2,"shortDate"),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(2,1,n))}}function Re(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td",44),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275property("colSpan",n.weekTimeSheets.length+3),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.activityName," ")}}function Ae(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td",45),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.userNumber," ")}}function Ue(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td",46),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.userName," ")}}function Ve(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"td",48),p.\u0275\u0275listener("refreshBoard",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).refreshBoard(e)}),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=p.\u0275\u0275nextContext(2).$implicit,o=p.\u0275\u0275nextContext();p.\u0275\u0275property("weekTimeSheet",i)("userId",r.userId)("userName",r.userName)("onlyMySubordinates",o.onlyMySubordinates)("activitiesId",o.selectedActivitiesIds)}}function Le(e,t){if(1&e&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275template(1,Ve,1,5,"td",47),p.\u0275\u0275elementContainerEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",n.weekTimeSheets)}}function ze(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td",49),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.totalAmount," h ")}}function $e(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275template(1,Re,2,2,"td",39),p.\u0275\u0275template(2,Ae,2,1,"td",40),p.\u0275\u0275template(3,Ue,2,1,"td",41),p.\u0275\u0275template(4,Le,2,1,"ng-container",42),p.\u0275\u0275template(5,ze,2,1,"td",43),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",0===n.userId),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",0!==n.userId),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",0!==n.userId),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",0!==n.userId),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",0!==n.userId)}}var Be=function(){var e=function(){function e(t,n,i,o,a,s){r(this,e),this.timesheetService=t,this.boardService=n,this.numberFormatter=i,this.projectService=o,this.excelService=a,this.router=s,this.currentMonth=B().startOf("month"),this.usersMonthTimeSheets=[],this.usersTimeEntries=[],this.isLoading=!0,this.onlyMySubordinates=!0,this.activitiesIdentifiers=[],this.selectedActivitiesIds="",this.selectedActivitiesIdentifiers=[],this.dropDownSettings={},this.dropDownSelected=!1}return i(e,[{key:"ngOnInit",value:function(){this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.isSuperAdmin()&&!1===this.currentUser.hasSubordinates&&(this.onlyMySubordinates=!1),this.dropDownSettings={singleSelection:!1,idField:"id",textField:"description",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,enableCheckAll:!0,allowSearchFilter:!0,maxHeight:150,placeholder:"criteria",searchPlaceholderText:"Search..."},this.getActivities()}},{key:"getActivities",value:function(){var e=this;this.projectService.getActivities().subscribe(function(t){null!=t&&(e.activitiesIdentifiers=t)})}},{key:"changedMonth",value:function(e){this.weeksStartdate=e,this.getSubordinatesTimesheet()}},{key:"getSubordinatesTimesheet",value:function(){var e,t=this;this.isLoading=!0,this.isSuperAdmin()&&!1===this.onlyMySubordinates?(e=214,this.selectedActivitiesIds=this.selectedActivitiesIdentifiers.map(function(e){return e.id}).join(",")):(e=this.currentUser.userId,this.selectedActivitiesIds=""),this.timesheetService.GetReportersTimesheet(e,this.selectedActivitiesIds,this.weeksStartdate[0],B(this.weeksStartdate[0]).endOf("month").toDate()).subscribe(function(e){t.isLoading=!1,t.usersTimeEntries=e,t.getUsersMonthTimeSheets(),t.weeksStartdateDisplayed=t.weeksStartdate},function(){t.isLoading=!1})}},{key:"getUsersMonthTimeSheets",value:function(){var e=this;this.usersMonthTimeSheets=[];var t="";this.usersTimeEntries.forEach(function(n){var i=e.usersMonthTimeSheets.find(function(e){return e.userId===n.userId});if(void 0===i){if(i=new y.qH,n.activityName!==t){var r=new y.qH;r.activityName=n.activityName,e.usersMonthTimeSheets.push(r),t=n.activityName}e.boardService.settingWeekTimeSheetWorkingDaysCount(i,e.weeksStartdate),i.activityName=n.activityName,i.userId=n.userId,i.userNumber=n.userNumber,i.userName=n.userName,e.usersMonthTimeSheets.push(i),e.setWeekTimeSheetAttributes(i,n)}else e.setWeekTimeSheetAttributes(i,n)})}},{key:"setWeekTimeSheetAttributes",value:function(e,t){if(null!=t.timeEntryDate){var n=e.weekTimeSheets[this.getIndexOfWeekTimeSheet(new Date(t.timeEntryDate))];if(void 0===n.timeEntryDates.find(function(e){return e.getTime()===new Date(t.timeEntryDate).getTime()}))this.setWeekTimeSheetState(n,e,t);else if(void 0!==t.stateId&&0===t.isLeave){var i=t.amount;n.amount=n.amount+i,e.totalAmount=e.totalAmount+i}}}},{key:"getIndexOfWeekTimeSheet",value:function(e){return e>=this.weeksStartdate[this.weeksStartdate.length-1]?this.weeksStartdate.length-1:this.weeksStartdate.findIndex(function(t){return e<t})-1}},{key:"selectCurrentMonth",value:function(){this.timesheetService.selectCurrentMonth.next()}},{key:"refreshBoard",value:function(){this.getSubordinatesTimesheet()}},{key:"setWeekTimeSheetState",value:function(e,t,n){if(e.timeEntryDates.push(new Date(n.timeEntryDate)),void 0!==n.stateId){if(0===n.isLeave){var i=n.amount;e.amount=this.numberFormatter.round(e.amount+i,2),t.totalAmount=this.numberFormatter.round(t.totalAmount+i,2)}n.stateId===y.f3.Validated?e.validatedWorkingDaysCount++:(n.stateId===y.f3.Filled||null===n.stateId)&&e.nonSubmittedWorkingDaysCount++}e.workingDaysCount<=e.timeEntryDates.length&&(e.workingDaysCount=e.timeEntryDates.length),e.state=e.validatedWorkingDaysCount===e.workingDaysCount?y.MA.Validated:e.nonSubmittedWorkingDaysCount===e.timeEntryDates.length?y.MA.NotSubmitted:y.MA.InProgress}},{key:"isSuperAdmin",value:function(){return this.currentUser.groupId===E.Fl.SuperAdmin}},{key:"onlyMySubordinatesChanged",value:function(){this.getSubordinatesTimesheet()}},{key:"onDropDownClose",value:function(){this.dropDownSelected&&(this.dropDownSelected=!1,this.getSubordinatesTimesheet())}},{key:"importFromExcel",value:function(){this.router.navigate(["/project-management/timesheet/import/"])}},{key:"exportToExcel",value:function(){if(void 0!==this.usersMonthTimeSheets&&0!==this.usersMonthTimeSheets.length){var e=this.usersMonthTimeSheets[1].weekTimeSheets.length,t=[];t.push({header:"Matricule",key:"userNumber",width:20}),t.push({header:"Ressource",key:"userName",width:30});for(var n=1;n<=e;n++)t.push({header:"Week"+n,key:"week"+n,width:15});t.push({header:"Total",key:"totalAmount",width:15});var i=[];this.usersMonthTimeSheets.forEach(function(e){var t=[];t.push(e.weekTimeSheets.length>=4?e.userNumber:e.activityName),t.push(e.userName),e.weekTimeSheets.forEach(function(e){t.push(e.amount)}),t.push(e.weekTimeSheets.length>=4?e.totalAmount:""),i.push(t)}),this.excelService.generateExcel(t,i,[],[],"board")}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(be.$),p.\u0275\u0275directiveInject(xe.e),p.\u0275\u0275directiveInject(we.Y4),p.\u0275\u0275directiveInject(l.xB),p.\u0275\u0275directiveInject(f.F0))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-board"]],decls:45,vars:11,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"wrapper"],["class","overlay",4,"ngIf"],[1,"card-body","loaded-content"],[1,"row","m-b-32"],[1,"col-md-2"],[1,"select-current-month"],[1,"current-month",3,"click"],[1,"col-sm-2"],[3,"daysChange"],[1,"row","col-sm-8","flex-container"],[1,"col-sm-3"],[1,"text-right","m-t-5"],[3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"col-sm-4"],["class","multi-search",3,"placeholder","settings","data","ngModel","ngModelChange","click","onDropDownClose",4,"ngIf"],[1,"col-sm-5"],["type","button",1,"export","btn","btn-sm","btn-primary","m-r-10",2,"font-size","inherit",3,"click"],[1,"fa","fa-file-excel-o",2,"font-size","medium"],[1,"table","text-center","m-b-10"],[2,"padding","0px"],[1,"th-header"],["scope","col",1,"th-user-number"],["scope","col",1,"th-user-name"],["scope","col",4,"ngFor","ngForOf"],["scope","col",1,"th-total"],[1,"tbody-scroll"],[4,"ngFor","ngForOf"],[1,"overlay"],[1,"spinner-wrapper"],[1,"container"],["id","loader"],[3,"ngModel","ngModelChange","change"],[1,"multi-search",3,"placeholder","settings","data","ngModel","ngModelChange","click","onDropDownClose"],["scope","col"],["class","td-activity",3,"colSpan",4,"ngIf"],["class","td-user-number",4,"ngIf"],["class","td-user-name",4,"ngIf"],[4,"ngIf"],["class","td-total",4,"ngIf"],[1,"td-activity",3,"colSpan"],[1,"td-user-number"],[1,"td-user-name"],["appTdBoard","","style","cursor : pointer;",3,"weekTimeSheet","userId","userName","onlyMySubordinates","activitiesId","refreshBoard",4,"ngFor","ngForOf"],["appTdBoard","",2,"cursor","pointer",3,"weekTimeSheet","userId","userName","onlyMySubordinates","activitiesId","refreshBoard"],[1,"td-total"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"div",2),p.\u0275\u0275elementStart(3,"div",3),p.\u0275\u0275elementStart(4,"div",4),p.\u0275\u0275elementStart(5,"div",5),p.\u0275\u0275template(6,Fe,6,0,"div",6),p.\u0275\u0275elementStart(7,"div",7),p.\u0275\u0275elementStart(8,"div",8),p.\u0275\u0275elementStart(9,"div",9),p.\u0275\u0275elementStart(10,"div",10),p.\u0275\u0275elementStart(11,"h5"),p.\u0275\u0275text(12," Current Month"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"a",11),p.\u0275\u0275listener("click",function(){return t.selectCurrentMonth()}),p.\u0275\u0275text(14),p.\u0275\u0275pipe(15,"date"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(16,"div",12),p.\u0275\u0275elementStart(17,"app-select-month-board",13),p.\u0275\u0275listener("daysChange",function(e){return t.changedMonth(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(18,"div",14),p.\u0275\u0275elementStart(19,"div",15),p.\u0275\u0275elementStart(20,"div",16),p.\u0275\u0275template(21,je,2,1,"mat-checkbox",17),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"div",18),p.\u0275\u0275template(23,_e,1,4,"ng-multiselect-dropdown",19),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(24,"div",20),p.\u0275\u0275elementStart(25,"button",21),p.\u0275\u0275listener("click",function(){return t.exportToExcel()}),p.\u0275\u0275element(26,"em",22),p.\u0275\u0275text(27," Export "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(28,"button",21),p.\u0275\u0275listener("click",function(){return t.importFromExcel()}),p.\u0275\u0275element(29,"em",22),p.\u0275\u0275text(30," Import "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(31,"div",2),p.\u0275\u0275elementStart(32,"div",3),p.\u0275\u0275elementStart(33,"table",23),p.\u0275\u0275element(34,"caption",24),p.\u0275\u0275elementStart(35,"thead",25),p.\u0275\u0275elementStart(36,"th",26),p.\u0275\u0275text(37,"Matricule"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(38,"th",27),p.\u0275\u0275text(39,"Resource"),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(40,Ne,3,3,"th",28),p.\u0275\u0275elementStart(41,"th",29),p.\u0275\u0275text(42,"Total"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(43,"tbody",30),p.\u0275\u0275template(44,$e,6,5,"tr",31),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275advance(6),p.\u0275\u0275property("ngIf",t.isLoading),p.\u0275\u0275advance(1),p.\u0275\u0275classProp("blurred",t.isLoading),p.\u0275\u0275advance(7),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind2(15,8,t.currentMonth,"MMMM yyyy")),p.\u0275\u0275advance(7),p.\u0275\u0275property("ngIf",t.isSuperAdmin()),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",t.isSuperAdmin()&&!t.onlyMySubordinates),p.\u0275\u0275advance(17),p.\u0275\u0275property("ngForOf",t.weeksStartdateDisplayed),p.\u0275\u0275advance(4),p.\u0275\u0275property("ngForOf",t.usersMonthTimeSheets))},directives:[c.NgIf,De,c.NgForOf,X.$g,b.oG,m.NgControlStatus,m.NgModel,Oe.OP,Te],pipes:[c.DatePipe,_.M],styles:[".card-body[_ngcontent-%COMP%]{padding:25px}.multi-search[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px;padding:6px;border-top:1px solid #bbbbbb;border-left:1px solid #bbbbbb;border-right:1px solid #bbbbbb}.td-activity[_ngcontent-%COMP%]{text-align:left;color:#fff;background-color:#8e0089;width:100%;font-weight:bold}.td-user-number[_ngcontent-%COMP%]{text-align:left;background-color:#e0dedd;width:10%;font-weight:bold}.td-user-name[_ngcontent-%COMP%]{text-align:left;background-color:#e0dedd;width:20%;font-weight:bold}.td-total[_ngcontent-%COMP%]{background-color:#e0dedd;width:10%}.th-header[_ngcontent-%COMP%]{background-color:#3f629d;color:#fff}.th-user-number[_ngcontent-%COMP%]{width:10%}.th-user-name[_ngcontent-%COMP%]{width:20%}.th-total[_ngcontent-%COMP%]{width:10%}.select-current-month[_ngcontent-%COMP%]{color:#3f629d}.select-row[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:40px}.current-month[_ngcontent-%COMP%]{cursor:pointer;margin-left:20px}tbody[_ngcontent-%COMP%]{display:block;overflow:auto;overflow-y:scroll;max-height:calc(100vh - 342px);border-bottom:1px solid #bbbbbb}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}thead[_ngcontent-%COMP%]{width:calc(100% - 1.2em)}.wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.overlay[_ngcontent-%COMP%]{position:absolute;z-index:1002;background-color:#ffffff80;width:100%;height:100%}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center}#loader[_ngcontent-%COMP%]{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}.m-b-32[_ngcontent-%COMP%]{margin-bottom:32px}.export[_ngcontent-%COMP%]{float:right}"]}),e}(),He=o(55750),We=o(56185);function Ge(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"mat-option",21),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275property("value",n.id),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.description," ")}}var Ye=function(){var e=function(){function e(t,n,i,o){r(this,e),this.timesheetService=t,this.datetimeService=n,this.notificationService=i,this.dialogRef=o,this.readyToLoad=!1,this.timeEntriesImport=[]}return i(e,[{key:"ngOnInit",value:function(){this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.getImportFormats()}},{key:"getImportFormats",value:function(){var e=this;this.timesheetService.getImportFormats().subscribe(function(t){e.importFormatsIdentifiers=t})}},{key:"fileLoad",value:function(e){switch(this.readyToLoad=!1,this.selectedImportFormatId){case 0:this.fileLoadTelnet(e);break;case 1:this.fileLoadIngenicoJiraTempo(e);break;case 2:this.fileLoadIngenicoHarvest(e);break;case 3:this.fileLoadIngenicoSciformaIndividual(e);break;case 99:this.fileLoadIngenicoSciforma(e)}}},{key:"fileLoadTelnet",value:function(e){var t=this,n=e.target;if(1!==n.files.length)throw new Error("Cannot use multiple files");this.fileName=n.files[0].name;var i=new FileReader;i.onload=function(){var e=new We.Workbook,n=[];e.xlsx.load(i.result).then(function(e){var i=e.worksheets[0],r=i.getRow(1).values.length;i.eachRow(function(e){for(var i=[],o=1;o<r;o++){var a=e.values[o];void 0===a&&(a=""),i.push(a)}n.push(i),t.processTelnetXlsFile(n)})})},i.readAsArrayBuffer(n.files[0])}},{key:"processTelnetXlsFile",value:function(e){if(this.isTelnetXlsFileHeader(e[0])){this.timeEntriesImportCount=0,this.timeEntriesImport=[];var t=this.buildTelnetXlsFileRows(e);0===t.length?this.notificationService.success("File format valid."):this.notificationService.warning("File contain invalid line(s): "+t.join(", ")+"."),0!==this.timeEntriesImportCount?this.readyToLoad=!0:this.notificationService.warning("There is no lines to load.")}else this.notificationService.danger("File format invalid.")}},{key:"isTelnetXlsFileHeader",value:function(e){this.daysHeaders=[];for(var t=3;t<e.length;t++){var n=+e[t];if(Number.isNaN(n))return!1;this.daysHeaders.push(this.excelDateToJSDate(n))}return void 0!==e&&e.length>=6&&"Matricule"===e[0]&&"Full name"===e[1]&&"Project Abreviation"===e[2]}},{key:"buildTelnetXlsFileRows",value:function(e){for(var t=[],n=1;n<e.length;n++){var i=e[n];i.length>=3&&void 0!==i[0]&&void 0!==i[1]&&void 0!==i[2]?this.buildTelnetXlsFileRow(i):i.length>0&&t.push((n+1).toString())}return t}},{key:"buildTelnetXlsFileRow",value:function(e){for(var t=e[0].toString(),n=e[1].toString(),i=e[2].toString(),r=3;r<e.length;r++){var o=this.daysHeaders[r-3],a=+e[r];if(!Number.isNaN(a)&&0!==a){var s=new y.XZ;this.timeEntriesImportCount++,s.timeEntryImportId=this.timeEntriesImportCount,s.formatId=this.selectedImportFormatId,s.userImportId=t,s.userImportName=n,s.projectImportId="",s.projectImportName="",s.projectName=i,s.timeEntryImportDate=o,s.timeEntryImportAmount=a,s.timeEntryImportComment="",this.timeEntriesImport.push(s)}}}},{key:"fileLoadIngenicoJiraTempo",value:function(e){var t=this,n=e.target;if(1!==n.files.length)throw new Error("Cannot use multiple files");this.fileName=n.files[0].name;var i=new FileReader;i.onload=function(){var e=new We.Workbook,n=[];e.xlsx.load(i.result).then(function(e){var i=e.worksheets[0],r=i.getRow(1).values.length;i.eachRow(function(e){for(var i=[],o=1;o<r;o++){var a=e.values[o];void 0===a&&(a=""),i.push(a)}n.push(i),t.processIngenicoJiraTempoXlsFile(n)})})},i.readAsArrayBuffer(n.files[0])}},{key:"processIngenicoJiraTempoXlsFile",value:function(e){if(this.isIngenicoJiraTempoXlsFileHeader(e[0])){this.timeEntriesImportCount=0,this.timeEntriesImport=[];var t=this.buildIngenicoJiraTempoXlsFileRows(e);0===t.length?this.notificationService.success("File format valid."):this.notificationService.warning("File contain invalid line(s): "+t.join(", ")+"."),0!==this.timeEntriesImportCount?this.readyToLoad=!0:this.notificationService.warning("There is no lines to load.")}else this.notificationService.danger("File format invalid.")}},{key:"isIngenicoJiraTempoXlsFileHeader",value:function(e){return void 0!==e&&e.length>=6&&"Issue Key"===e[0]&&"Issue summary"===e[1]&&"Hours"===e[2]&&"Work date"===e[3]&&"Username"===e[4]&&"Full name"===e[5]&&"Work Description"===e[22]}},{key:"buildIngenicoJiraTempoXlsFileRows",value:function(e){for(var t=[],n=1;n<e.length;n++){var i=e[n];if(i.length>=6&&void 0!==i[0]&&void 0!==i[2]&&void 0!==i[3]&&void 0!==i[4]&&void 0!==i[5]&&void 0!==i[22]){var r=+i[2];Number.isNaN(+i[3])||Number.isNaN(r)?t.push((n+1).toString()):this.buildIngenicoJiraTempoXlsFileRow(i)}else i.length>0&&t.push((n+1).toString())}return t}},{key:"buildIngenicoJiraTempoXlsFileRow",value:function(e){var t=this,n=e[0].toString().toUpperCase();if("TNP-1"!==n&&"TNP-2"!==n&&"TNP-3"!==n){var i=e[4].toString(),r=e[5].toString(),o=+e[3],a=+e[2],s=n+": "+e[22].toString(),l=this.excelDateToJSDate(o),c=this.timeEntriesImport.find(function(e){return e.userImportId===i&&e.userImportName===r&&t.datetimeService.areEqual(e.timeEntryImportDate,l)});void 0===c?(c=new y.XZ,this.timeEntriesImportCount++,c.timeEntryImportId=this.timeEntriesImportCount,c.userImportId=i,c.userImportName=r,c.projectImportId="",c.projectImportName="",c.timeEntryImportDate=l,c.timeEntryImportAmount=a,c.timeEntryImportComment="- "+s,c.formatId=this.selectedImportFormatId,this.timeEntriesImport.push(c)):(c.timeEntryImportAmount=c.timeEntryImportAmount+a,c.timeEntryImportComment=c.timeEntryImportComment+"\n- "+s,c.timeEntryImportComment=c.timeEntryImportComment.substr(0,500))}}},{key:"fileLoadIngenicoHarvest",value:function(e){var t=this,n=e.target;if(1!==n.files.length)throw new Error("Cannot use multiple files");this.fileName=n.files[0].name;var i=new FileReader;i.onload=function(){var e=new We.Workbook,n=[];e.xlsx.load(i.result).then(function(e){var i=e.worksheets[0],r=i.getRow(1).values.length;i.eachRow(function(e){for(var i=[],o=1;o<r;o++){var a=e.values[o];void 0===a&&(a=""),i.push(a)}n.push(i),t.processIngenicoHarvestXlsFile(n)})})},i.readAsArrayBuffer(n.files[0])}},{key:"processIngenicoHarvestXlsFile",value:function(e){if(this.isIngenicoHarvestXlsFileHeader(e[0])){this.timeEntriesImportCount=0,this.timeEntriesImport=[];var t=this.buildIngenicoHarvestXlsFileRows(e);0===t.length?this.notificationService.success("File format valid."):this.notificationService.warning("File contain invalid line(s): "+t.join(", ")+"."),0!==this.timeEntriesImportCount?this.readyToLoad=!0:this.notificationService.warning("There is no lines to load.")}else this.notificationService.danger("File format invalid.")}},{key:"isIngenicoHarvestXlsFileHeader",value:function(e){return void 0!==e&&e.length>=12&&"Date"===e[0]&&"Task"===e[4]&&"Hours"===e[6]&&"Approved?"===e[9]&&"First Name"===e[10]&&"Last Name"===e[11]}},{key:"buildIngenicoHarvestXlsFileRows",value:function(e){for(var t=[],n=1;n<e.length;n++){var i=e[n];if(i.length>=12&&void 0!==i[0]&&void 0!==i[4]&&void 0!==i[6]&&void 0!==i[9]&&void 0!==i[10]&&void 0!==i[11]){var r=+i[6];Number.isNaN(+i[0])||Number.isNaN(r)?t.push((n+1).toString()):this.buildIngenicoHarvestXlsFileRow(i)}else i.length>0&&t.push((n+1).toString())}return t}},{key:"buildIngenicoHarvestXlsFileRow",value:function(e){var t=this;if("YES"===e[9].toString().toUpperCase()){var n=e[10].toString()+"."+e[11].toString(),i=e[10].toString()+" "+e[11].toString(),r=+e[0],o=+e[6],a=e[4].toString(),s=this.excelDateToJSDate(r),l=this.timeEntriesImport.find(function(e){return e.userImportId===n&&e.userImportName===i&&t.datetimeService.areEqual(e.timeEntryImportDate,s)});void 0===l?(l=new y.XZ,this.timeEntriesImportCount++,l.timeEntryImportId=this.timeEntriesImportCount,l.userImportId=n,l.userImportName=i,l.projectImportId="",l.projectImportName="",l.timeEntryImportDate=s,l.timeEntryImportAmount=o,l.timeEntryImportComment="- "+a,l.formatId=this.selectedImportFormatId,this.timeEntriesImport.push(l)):(l.timeEntryImportAmount=l.timeEntryImportAmount+o,l.timeEntryImportComment=l.timeEntryImportComment+"\n- "+a,l.timeEntryImportComment=l.timeEntryImportComment.substr(0,500))}}},{key:"fileLoadIngenicoSciformaIndividual",value:function(e){var t=this,n=e.target;if(1!==n.files.length)throw new Error("Cannot use multiple files");this.fileName=n.files[0].name;var i=new FileReader;i.onload=function(){var e=new We.Workbook,n=[];e.xlsx.load(i.result).then(function(e){var i=e.worksheets[0],r=i.getRow(1).values.length;i.eachRow(function(e){for(var i=[],o=1;o<r;o++){var a=e.values[o];void 0===a&&(a=""),i.push(a)}n.push(i),t.processIngenicoSciformaIndividualXlsFile(n)})})},i.readAsArrayBuffer(n.files[0])}},{key:"processIngenicoSciformaIndividualXlsFile",value:function(e){if(this.isIngenicoSciformaIndividualXlsFileHeader(e[3],e[6])){this.timeEntriesImportCount=0,this.timeEntriesImport=[];var t=this.buildIngenicoSciformaIndividualXlsFileRows(e);0===t.length?this.notificationService.success("File format valid."):this.notificationService.warning("File contain invalid line(s): "+t.join(", ")+"."),0!==this.timeEntriesImportCount?this.readyToLoad=!0:this.notificationService.warning("There is no lines to load.")}else this.notificationService.danger("File format invalid.")}},{key:"isIngenicoSciformaIndividualXlsFileHeader",value:function(e,t){return void 0!==e&&void 0!==t&&5===e.length&&5===t.length&&"Source Type"===e[1]&&"Resource"===e[2]&&"DATE"===t[1]&&"SAP ID"===t[2]&&"Project name"===t[3]&&"Time"===t[4]}},{key:"buildIngenicoSciformaIndividualXlsFileRows",value:function(e){for(var t=[],n=e[4],i=7;i<e.length-6;i++){var r=e[i];5===r.length&&void 0!==r[1]&&void 0!==r[3]&&void 0!==r[4]?Number.isNaN(8*+r[4])?t.push((i+1).toString()):this.buildIngenicoSciformaIndividualXlsFileRow(n,r):r.length>0&&t.push((i+1).toString())}return t}},{key:"buildIngenicoSciformaIndividualXlsFileRow",value:function(e,t){var n=this,i=e[2].toString().replace(", ","."),r=e[2].toString().replace(",",""),o=B(t[1].toString(),"DD/MM/YYYY").toDate(),a=8*+t[4],s=t[3].toString(),l=this.timeEntriesImport.find(function(e){return e.userImportId===i&&e.userImportName===r&&n.datetimeService.areEqual(e.timeEntryImportDate,o)});void 0===l?(l=new y.XZ,this.timeEntriesImportCount++,l.timeEntryImportId=this.timeEntriesImportCount,l.userImportId=i,l.userImportName=r,l.projectImportId="",l.projectImportName="",l.timeEntryImportDate=o,l.timeEntryImportAmount=a,l.timeEntryImportComment="- "+s,l.formatId=this.selectedImportFormatId,this.timeEntriesImport.push(l)):(l.timeEntryImportAmount=l.timeEntryImportAmount+a,l.timeEntryImportComment=l.timeEntryImportComment+"\n- "+s,l.timeEntryImportComment=l.timeEntryImportComment.substr(0,500))}},{key:"fileLoadIngenicoSciforma",value:function(e){var t=this,n=e.target;if(1!==n.files.length)throw new Error("Cannot use multiple files");this.fileName=n.files[0].name;var i=new FileReader;i.onload=function(){var e=new We.Workbook,n=[];e.xlsx.load(i.result).then(function(e){var i=e.worksheets[0],r=i.getRow(1).values.length;i.eachRow(function(e){for(var i=[],o=1;o<r;o++){var a=e.values[o];void 0===a&&(a=""),i.push(a)}n.push(i),t.processIngenicoSciformaXlsFile(n)})})},i.readAsArrayBuffer(n.files[0])}},{key:"processIngenicoSciformaXlsFile",value:function(e){this.isIngenicoSciformaXlsFileHeader(e[0])?(this.timeEntriesImportCount=0,this.timeEntriesImport=[],this.buildIngenicoSciformaXlsFileValidatedRows(e),this.buildIngenicoSciformaXlsFileCapturedRows(e),this.readyToLoad=!0,this.notificationService.success("File format correct.")):this.notificationService.danger("File format incorrect.")}},{key:"isIngenicoSciformaXlsFileHeader",value:function(e){this.daysHeaders=[];for(var t=11;t<e.length;t++){var n=+e[t];if(Number.isNaN(n))return!1;this.daysHeaders.push(this.excelDateToJSDate(n))}var i=String.fromCharCode(13)+String.fromCharCode(10);return e[0]==="Source"+i+"Type"&&"Resource"===e[1]&&"Actual Effort"===e[2]&&"Actual Cost"===e[3]&&"Res ID"===e[4]&&"Monitored by"===e[5]&&e[6]==="Cost "+i+"Center"&&"Orga"===e[7]&&"Company"===e[8]&&e[9]==="Project's"+i+"SAP ID"&&e[10]==="Project's"+i+"Name"}},{key:"buildIngenicoSciformaXlsFileValidatedRows",value:function(e){for(var t=1;t<e.length;t++){var n=e[t];void 0!==n[8]&&void 0!==n[0].toString()&&"TELNET"===n[8].toString().toUpperCase()&&"VALIDATED ACTUAL"===n[0].toString().toUpperCase()&&this.buildIngenicoSciformaXlsFileRow(n)}}},{key:"buildIngenicoSciformaXlsFileCapturedRows",value:function(e){for(var t=this,n=function(n){var i=e[n];void 0!==i[8]&&void 0!==i[0].toString()&&"TELNET"===i[8].toString().toUpperCase()&&"CAPTURED (TS)"===i[0].toString().toUpperCase()&&0===t.timeEntriesImport.filter(function(e){return e.userImportId===i[4].toString()&&e.projectImportId===i[10].toString()}).length&&t.buildIngenicoSciformaXlsFileRow(i)},i=1;i<e.length;i++)n(i)}},{key:"buildIngenicoSciformaXlsFileRow",value:function(e){for(var t=11;t<e.length;t++)if(0!=+e[t]){var n=new y.XZ;this.timeEntriesImportCount++,n.timeEntryImportId=this.timeEntriesImportCount,n.formatId=this.selectedImportFormatId,n.userImportId=e[4].toString(),n.userImportName=e[1].toString(),n.projectImportId=e[10].toString(),n.projectImportName=e[10].toString(),n.timeEntryImportDate=this.daysHeaders[t-11],n.timeEntryImportAmount=Math.round(1e4*+e[t])/1e4,n.timeEntryImportComment="",this.timeEntriesImport.push(n)}}},{key:"excelDateToJSDate",value:function(e){var t=86400*Math.floor(e-25569),n=new Date(1e3*t);return new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0)}},{key:"saveTimeEntriesImport",value:function(){var e=this;void 0!==this.fileName&&void 0!==this.selectedImportFormatId?(this.timesheetService.savingTimeEntriesImport.next(),this.timesheetService.saveTimeEntriesImport(this.timeEntriesImport,this.currentUser.userId).subscribe(function(){e.timesheetService.reloadTimeEntriesImport.next(),e.notificationService.info("File load completed.<br>Please take note that only your subordinates will be loaded.")},function(){e.timesheetService.reloadTimeEntriesImport.next(),e.notificationService.danger("File load failed.")}),this.close()):this.notificationService.danger("Please fill all required fields")}},{key:"close",value:function(){this.dialogRef.close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(l.Cv),p.\u0275\u0275directiveInject(l.gq),p.\u0275\u0275directiveInject(u.so))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-load"]],decls:26,vars:4,consts:[[1,"form-container"],[1,"modal_header"],[1,"modal_title"],[1,"material-icons","modal-close",3,"click"],[1,"modal_body"],[1,"row"],[1,"col-sm-12"],["placeholder","Import Format","name","importFormat","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"row","m-t-20"],[1,"col-sm-10"],["placeholder","File Name *","matInput","","name","fileName","disabled","","required","",3,"ngModel","ngModelChange"],[1,"col-sm-2"],[1,"btn","btn-sm","btn-primary","waves-light","ripple","file-upload-button",2,"font-size","inherit"],["type","file","accept",".xlsx",3,"change"],["fileInput",""],[1,"icofont","icofont-folder-open",2,"font-size","medium"],[1,"modal_footer"],[1,"pull-right"],["type","button",1,"btn","btn-outline-primary","m-r-5",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"form",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"div",2),p.\u0275\u0275elementStart(3,"span"),p.\u0275\u0275text(4," Load "),p.\u0275\u0275elementStart(5,"em",3),p.\u0275\u0275listener("click",function(){return t.close()}),p.\u0275\u0275text(6,"close"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"div",4),p.\u0275\u0275elementStart(8,"div",5),p.\u0275\u0275elementStart(9,"mat-form-field",6),p.\u0275\u0275elementStart(10,"mat-select",7),p.\u0275\u0275listener("ngModelChange",function(e){return t.selectedImportFormatId=e}),p.\u0275\u0275template(11,Ge,2,2,"mat-option",8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(12,"div",9),p.\u0275\u0275elementStart(13,"mat-form-field",10),p.\u0275\u0275elementStart(14,"input",11),p.\u0275\u0275listener("ngModelChange",function(e){return t.fileName=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(15,"div",12),p.\u0275\u0275elementStart(16,"button",13),p.\u0275\u0275elementStart(17,"input",14,15),p.\u0275\u0275listener("change",function(e){return t.fileLoad(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(19,"em",16),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(20,"div",17),p.\u0275\u0275elementStart(21,"div",18),p.\u0275\u0275elementStart(22,"button",19),p.\u0275\u0275listener("click",function(){return t.close()}),p.\u0275\u0275text(23,"Cancel"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(24,"button",20),p.\u0275\u0275listener("click",function(){return t.saveTimeEntriesImport()}),p.\u0275\u0275text(25,"Load"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275advance(10),p.\u0275\u0275property("ngModel",t.selectedImportFormatId),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",t.importFormatsIdentifiers),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngModel",t.fileName),p.\u0275\u0275advance(10),p.\u0275\u0275property("disabled",!t.readyToLoad))},directives:[m.\u0275NgNoValidate,m.NgControlStatusGroup,m.NgForm,I.KE,q.gD,m.RequiredValidator,m.NgControlStatus,m.NgModel,c.NgForOf,C.Nt,m.DefaultValueAccessor,Q.ey],styles:['.modal_header[_ngcontent-%COMP%]{height:50px;background-color:#3f629d;padding:18px 15px}.modal_header[_ngcontent-%COMP%]   .modal_title[_ngcontent-%COMP%]{color:#fff;line-height:1}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{float:right;cursor:pointer}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:red}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]{cursor:not-allowed;color:#dcdcdc}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]:hover{color:#dcdcdc}.modal_body[_ngcontent-%COMP%]{height:190px;padding:25px;overflow-y:auto}.modal_footer[_ngcontent-%COMP%]{padding:25px}.file-upload-button[_ngcontent-%COMP%]{overflow:hidden;position:relative}.file-upload-button[_ngcontent-%COMP%]:after{content:"load";color:#fff;font-size:1.5rem;text-align:center}.file-upload-button[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{font-size:100px;left:0;opacity:0;position:absolute;top:0}']}),e}(),Xe=o(60657),Je=o(19992),qe=o(69517),Qe=o(39924),Ke=o(11494),Ze=o(32789);function et(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell",14),p.\u0275\u0275text(1,"Date"),p.\u0275\u0275elementEnd())}function tt(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"mat-cell"),p.\u0275\u0275elementStart(1,"span"),p.\u0275\u0275text(2),p.\u0275\u0275pipe(3,"shortDate"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("",p.\u0275\u0275pipeBind1(3,1,n.timeEntryImportDate)," ")}}function nt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell",14),p.\u0275\u0275text(1,"Hours"),p.\u0275\u0275elementEnd())}function it(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"mat-cell"),p.\u0275\u0275elementStart(1,"span"),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("",n.timeEntryImportAmount," ")}}function rt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell"),p.\u0275\u0275text(1,"Comment"),p.\u0275\u0275elementEnd())}function ot(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"mat-cell",15),p.\u0275\u0275elementStart(1,"span",16),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275propertyInterpolate("matTooltip",n.timeEntryImportComment),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("",n.timeEntryImportComment," ")}}function at(e,t){1&e&&p.\u0275\u0275element(0,"mat-header-row",17)}function st(e,t){1&e&&p.\u0275\u0275element(0,"mat-row")}function lt(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"mat-cell",18),p.\u0275\u0275elementStart(1,"strong",19),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(n.userImportName)}}function ct(e,t){1&e&&p.\u0275\u0275element(0,"mat-row")}var dt=function(){return["groupHeader"]},mt=function(){var e=function(){function e(t,n,i,o,a){r(this,e),this.timesheetService=t,this.sortService=n,this.groupsService=i,this.dialog=o,this.data=a,this.displayedColumns=["timeEntryImportDate","timeEntryImportAmount","timeEntryImportComment"],this.groupByColumns=["userImportName"],this.dataSource=new Ze.by}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.dataSource=new Ze.by(this.groupsService.addGroups(this.data,this.groupByColumns)),this.subscription=this.timesheetService.sortedTimeEntriesImport.subscribe(function(){e.dataSource=new Ze.by(e.groupsService.addGroups(e.data,e.groupByColumns))})}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"isGroup",value:function(e,t){return t.level}},{key:"onSortData",value:function(e){var t=this;e.active&&""!==e.direction&&void 0!==this.data&&(this.data.sort(function(n,i){var r="asc"===e.direction;switch(e.active){case"timeEntryImportDate":return t.sortService.compare(n.timeEntryImportDate,i.timeEntryImportDate,r,!1);case"timeEntryImportAmount":return t.sortService.compare(n.timeEntryImportAmount,i.timeEntryImportAmount,r,!0);default:return 0}}),this.timesheetService.sortedTimeEntriesImport.next())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(l.Kx),p.\u0275\u0275directiveInject(l.Jc),p.\u0275\u0275directiveInject(u.uw),p.\u0275\u0275directiveInject(u.WI))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-timeentries-import"]],viewQuery:function(e,t){var n;(1&e&&p.\u0275\u0275viewQuery(Ke.YE,7),2&e)&&(p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.sort=n.first))},decls:16,vars:7,consts:[["matSort","","matSortDirection","asc","matSortDisableClear","",3,"dataSource","matSortChange"],["table",""],["matColumnDef","timeEntryImportDate"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","timeEntryImportAmount"],["matColumnDef","timeEntryImportComment"],[4,"matHeaderCellDef"],[3,"matTooltip",4,"matCellDef"],["class"," table-primary table-*",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["matColumnDef","groupHeader"],["colspan","999",4,"matCellDef"],[4,"matRowDef","matRowDefColumns","matRowDefWhen"],["mat-sort-header",""],[3,"matTooltip"],[1,"span-ellipsis"],[1,"table-primary","table-*"],["colspan","999"],[1,"strong"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-table",0,1),p.\u0275\u0275listener("matSortChange",function(e){return t.onSortData(e)}),p.\u0275\u0275elementContainerStart(2,2),p.\u0275\u0275template(3,et,2,0,"mat-header-cell",3),p.\u0275\u0275template(4,tt,4,3,"mat-cell",4),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(5,5),p.\u0275\u0275template(6,nt,2,0,"mat-header-cell",3),p.\u0275\u0275template(7,it,3,1,"mat-cell",4),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(8,6),p.\u0275\u0275template(9,rt,2,0,"mat-header-cell",7),p.\u0275\u0275template(10,ot,3,2,"mat-cell",8),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275template(11,at,1,0,"mat-header-row",9),p.\u0275\u0275template(12,st,1,0,"mat-row",10),p.\u0275\u0275elementContainerStart(13,11),p.\u0275\u0275template(14,lt,3,1,"mat-cell",12),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275template(15,ct,1,0,"mat-row",13),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275property("dataSource",t.dataSource),p.\u0275\u0275advance(11),p.\u0275\u0275property("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),p.\u0275\u0275advance(1),p.\u0275\u0275property("matRowDefColumns",t.displayedColumns),p.\u0275\u0275advance(3),p.\u0275\u0275property("matRowDefColumns",p.\u0275\u0275pureFunction0(6,dt))("matRowDefWhen",t.isGroup))},directives:[Ze.BZ,Ke.YE,Ze.w1,Ze.fO,Ze.Dz,Ze.as,Ze.nj,Ze.ge,Ke.nU,Ze.ev,ie.gM,Ze.XQ,Ze.Gk],pipes:[_.M],styles:[".mat-table[_ngcontent-%COMP%]{overflow:auto;border-radius:4px;max-height:calc(100vh - 392px)}table[_ngcontent-%COMP%]{width:100%}.header-align[_ngcontent-%COMP%]{display:flex;justify-content:center}  .mat-sort-header-arrow{color:#fff}.strong[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#5a5a5a,black);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:bold}.span-ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mat-header-cell[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:600}.material-icons[_ngcontent-%COMP%]{font-size:15px}.mat-column-timeEntryImportDate[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%;text-align:center;justify-content:center}.mat-column-timeEntryImportAmount[_ngcontent-%COMP%]{flex:0 0 10%!important;width:10%;text-align:center;justify-content:center}.mat-column-groupHeader[_ngcontent-%COMP%]{color:#030303;background-color:#eceaea;font-weight:bolder;font-size:medium;font-family:Arial,Helvetica,sans-serif}.pdf-ico[_ngcontent-%COMP%]{font-size:35px;margin-bottom:25px}.input-date[_ngcontent-%COMP%]{width:55%}.disabled-color[_ngcontent-%COMP%]{color:#aaa}"]}),e}(),ut=["userSelect"];function pt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell",23),p.\u0275\u0275text(1,"User Import"),p.\u0275\u0275elementEnd())}function ht(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-cell",24),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().timeEntryImportPeriodDisplay(e)}),p.\u0275\u0275elementStart(1,"span",25),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;p.\u0275\u0275propertyInterpolate("matTooltip",i.userImportName),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(i.userImportName)}}function ft(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell",23),p.\u0275\u0275text(1,"User TelnetTeam"),p.\u0275\u0275elementEnd())}function gt(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"span",25),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.userName," ")}}function vt(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"mat-option",33),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275property("value",n.id),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.description," ")}}function yt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-select",28,29),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().$implicit.userId=e})("selectionChange",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext().$implicit;return p.\u0275\u0275nextContext().onUserSelect(e)}),p.\u0275\u0275elementStart(2,"mat-option"),p.\u0275\u0275elementStart(3,"ngx-mat-select-search",30),p.\u0275\u0275elementStart(4,"mat-icon",31),p.\u0275\u0275text(5,"close"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(6,vt,2,2,"mat-option",32),p.\u0275\u0275pipe(7,"async"),p.\u0275\u0275elementEnd()}if(2&e){var i=p.\u0275\u0275nextContext().$implicit,r=p.\u0275\u0275nextContext();p.\u0275\u0275property("ngModel",i.userId),p.\u0275\u0275advance(3),p.\u0275\u0275property("formControl",r.usersFilterCtrl)("placeholderLabel","Search")("noEntriesFoundLabel","No users found"),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngForOf",p.\u0275\u0275pipeBind1(7,5,r.filteredUsersIdentifiers))}}function St(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-cell",24),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().timeEntryImportPeriodDisplay(e)}),p.\u0275\u0275template(1,gt,2,1,"span",26),p.\u0275\u0275template(2,yt,8,7,"mat-select",27),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;p.\u0275\u0275propertyInterpolate("matTooltip",i.userName),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!i.edited),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",i.edited)}}function Et(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell",34),p.\u0275\u0275text(1,"Project Import"),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275property("hidden",n.hiddenPojectImport)}}function It(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-cell",35),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().timeEntryImportPeriodDisplay(e)}),p.\u0275\u0275elementStart(1,"span",25),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=p.\u0275\u0275nextContext();p.\u0275\u0275propertyInterpolate("matTooltip",i.projectImportName),p.\u0275\u0275property("hidden",r.hiddenPojectImport),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("",i.projectImportName," ")}}function Ct(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell",23),p.\u0275\u0275text(1,"Project TelnetTeam"),p.\u0275\u0275elementEnd())}function bt(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"span",25),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.projectName," ")}}function xt(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"mat-option",33),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275property("value",n.id),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.description," ")}}function wt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-select",37,29),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().$implicit.projectId=e})("selectionChange",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext().$implicit;return p.\u0275\u0275nextContext().onProjectSelect(e)}),p.\u0275\u0275elementStart(2,"mat-option"),p.\u0275\u0275elementStart(3,"ngx-mat-select-search",30),p.\u0275\u0275elementStart(4,"mat-icon",31),p.\u0275\u0275text(5,"close"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(6,xt,2,2,"mat-option",32),p.\u0275\u0275pipe(7,"async"),p.\u0275\u0275elementEnd()}if(2&e){var i=p.\u0275\u0275nextContext().$implicit,r=p.\u0275\u0275nextContext();p.\u0275\u0275property("ngModel",i.projectId),p.\u0275\u0275advance(3),p.\u0275\u0275property("formControl",r.projectsFilterCtrl)("placeholderLabel","Search")("noEntriesFoundLabel","No projects found"),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngForOf",p.\u0275\u0275pipeBind1(7,5,r.filteredProjectsIdentifiers))}}function kt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-cell",24),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().timeEntryImportPeriodDisplay(e)}),p.\u0275\u0275template(1,bt,2,1,"span",26),p.\u0275\u0275template(2,wt,8,7,"mat-select",36),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;p.\u0275\u0275propertyInterpolate("matTooltip",i.projectName),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!(i.edited&&null!==i.userId)),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",i.edited&&null!==i.userId)}}function Mt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell",23),p.\u0275\u0275text(1,"From"),p.\u0275\u0275elementEnd())}function Pt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-cell",38),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().timeEntryImportPeriodDisplay(e)}),p.\u0275\u0275elementStart(1,"span"),p.\u0275\u0275text(2),p.\u0275\u0275pipe(3,"shortDate"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("",p.\u0275\u0275pipeBind1(3,1,i.fromDate)," ")}}function Dt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell",23),p.\u0275\u0275text(1,"To"),p.\u0275\u0275elementEnd())}function Ot(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-cell",38),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().timeEntryImportPeriodDisplay(e)}),p.\u0275\u0275elementStart(1,"span"),p.\u0275\u0275text(2),p.\u0275\u0275pipe(3,"shortDate"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("",p.\u0275\u0275pipeBind1(3,1,i.toDate)," ")}}function Tt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell",23),p.\u0275\u0275text(1,"MDays"),p.\u0275\u0275elementEnd())}function Ft(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-cell",38),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().timeEntryImportPeriodDisplay(e)}),p.\u0275\u0275elementStart(1,"span"),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("",i.manDays," ")}}function jt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell",23),p.\u0275\u0275text(1,"Hours"),p.\u0275\u0275elementEnd())}function _t(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-cell",38),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().timeEntryImportPeriodDisplay(e)}),p.\u0275\u0275elementStart(1,"span"),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("",i.total," ")}}function Nt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell"),p.\u0275\u0275text(1,"Ok"),p.\u0275\u0275elementEnd())}function Rt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-cell"),p.\u0275\u0275elementStart(1,"mat-checkbox",39),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.confirmed=e})("change",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().onConfirmedChange(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275property("ngModel",i.confirmed)("disabled",!0)}}function At(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"mat-header-cell",40),p.\u0275\u0275text(1,"Edit"),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275property("hidden",n.hideEdit)}}function Ut(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"mat-cell",40),p.\u0275\u0275elementStart(1,"mat-checkbox",41),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.edited=e})("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().timeEntryImportPeriodEdit(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=p.\u0275\u0275nextContext();p.\u0275\u0275property("hidden",r.hideEdit),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngModel",i.edited)}}function Vt(e,t){1&e&&p.\u0275\u0275element(0,"mat-header-row",42)}function Lt(e,t){1&e&&p.\u0275\u0275element(0,"mat-row")}var zt=function(){var e=function(){function e(t,n,i,o,a){r(this,e),this.timesheetService=t,this.coreDataService=n,this.dialog=i,this.searchFilterService=o,this.dateTimeService=a,this.displayedColumns=["userImportName","userId","projectImportName","projectId","fromDate","toDate","manDays","total","confirmed","edited"],this.dataSource=new Ze.by,this.usersIdentifiers=[],this.filteredUsersIdentifiers=new g.tq(1),this.usersFilterCtrl=new m.FormControl,this.projectsIdentifiers=[],this.filteredProjectsIdentifiers=new g.tq(1),this.projectsFilterCtrl=new m.FormControl,this.hiddenPojectImport=!0,this.hideEdit=!0,this._onDestroy=new g.xQ,this.checked=!0}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.timeEntriesImportPeriod.forEach(function(t){e.hiddenPojectImport=e.hiddenPojectImport&&null===t.projectImportId,e.hideEdit=e.hideEdit&&0===t.formatId}),this.dataSource=new Ze.by(this.timeEntriesImportPeriod),this.searchFilterService.resultChanged.subscribe(function(){e.dataSource=new Ze.by(e.searchFilterService.showingDataLastFilter)}),this.getSubordinates(),this.usersFilterCtrl.valueChanges.pipe((0,v.R)(this._onDestroy)).subscribe(function(){e.filterUsers()}),this.getProjects(),this.projectsFilterCtrl.valueChanges.pipe((0,v.R)(this._onDestroy)).subscribe(function(){e.filterProjects()})}},{key:"ngOnDestroy",value:function(){this._onDestroy.next(),this._onDestroy.complete()}},{key:"getSubordinates",value:function(){var e=this;this.coreDataService.getSubordinates(this.currentUser.userId).subscribe(function(t){e.currentUser=JSON.parse(localStorage.getItem("currentUser"));var n=new S.x;n.id=+e.currentUser.userId,n.description=e.currentUser.lastName+" "+e.currentUser.firstName+" ("+e.currentUser.userNumber+")",e.usersIdentifiers=t,e.usersIdentifiers.unshift(n),e.filteredUsersIdentifiers.next(e.usersIdentifiers.slice())})}},{key:"filterUsers",value:function(){if(this.usersIdentifiers){var e=this.usersFilterCtrl.value;e?(e=e.toLowerCase(),this.filteredUsersIdentifiers.next(this.usersIdentifiers.filter(function(t){return t.description.toLowerCase().indexOf(e)>-1}))):this.filteredUsersIdentifiers.next(this.usersIdentifiers.slice())}}},{key:"onUserSelect",value:function(e){var t=this;this.timesheetService.updateImportUser(e,this.currentUser.userId).subscribe(function(){t.filteredUsersIdentifiers.next(t.usersIdentifiers.slice()),t.timesheetService.reloadTimeEntriesImport.next()})}},{key:"getProjects",value:function(){var e=this;this.timesheetService.getUserActiveProjects(this.currentUser.userId).subscribe(function(t){e.projectsIdentifiers=t,e.filteredProjectsIdentifiers.next(e.projectsIdentifiers.slice())})}},{key:"filterProjects",value:function(){if(this.projectsIdentifiers){var e=this.projectsFilterCtrl.value;e?(e=e.toLowerCase(),this.filteredProjectsIdentifiers.next(this.projectsIdentifiers.filter(function(t){return t.description.toLowerCase().indexOf(e)>-1}))):this.filteredProjectsIdentifiers.next(this.projectsIdentifiers.slice())}}},{key:"onProjectSelect",value:function(e){var t=this;this.timesheetService.updateImportProject(e,this.currentUser.userId).subscribe(function(){t.filteredProjectsIdentifiers.next(t.projectsIdentifiers.slice()),t.timesheetService.reloadTimeEntriesImport.next()})}},{key:"onConfirmedChange",value:function(e){var t=this;this.timesheetService.updateImportConfirmed(e,this.currentUser.userId).subscribe(function(){t.timesheetService.reloadTimeEntriesImport.next()},function(){t.timesheetService.reloadTimeEntriesImport.next()})}},{key:"onSortData",value:function(){this.timesheetService.sortTimeEntriesImportPeriod.next(this.sort)}},{key:"dateOnly",value:function(e){return this.dateTimeService.dateOnly(e)}},{key:"timeEntryImportPeriodEdit",value:function(e){this.timesheetService.editTimeEntryImportPeriod.next(e)}},{key:"timeEntryImportPeriodDisplay",value:function(e){var t=this;!1===e.edited&&this.timesheetService.getTimeEntriesImport(e.formatId,e.userImportId,e.userImportName,e.projectId,this.currentUser.userId).subscribe(function(e){t.displayEditdialogRef=t.dialog.open(mt,{disableClose:!1,hasBackdrop:!0,width:"800px",data:e})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(l.YY),p.\u0275\u0275directiveInject(u.uw),p.\u0275\u0275directiveInject(l.nJ),p.\u0275\u0275directiveInject(l.Cv))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-timeentries-import-period"]],viewQuery:function(e,t){var n;(1&e&&(p.\u0275\u0275viewQuery(ut,7),p.\u0275\u0275viewQuery(Ke.YE,7)),2&e)&&(p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.userSelect=n.first),p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.sort=n.first))},inputs:{timeEntriesImportPeriod:"timeEntriesImportPeriod"},decls:34,vars:4,consts:[["matSort","","matSortDirection","asc","matSortDisableClear","",3,"dataSource","matSortChange"],["table",""],["matColumnDef","userImportName"],["mat-sort-header","",4,"matHeaderCellDef"],[3,"matTooltip","click",4,"matCellDef"],["matColumnDef","userId"],["matColumnDef","projectImportName"],["mat-sort-header","",3,"hidden",4,"matHeaderCellDef"],[3,"hidden","matTooltip","click",4,"matCellDef"],["matColumnDef","projectId"],["matColumnDef","fromDate"],[3,"click",4,"matCellDef"],["matColumnDef","toDate"],["matColumnDef","manDays"],["matColumnDef","total"],["matColumnDef","confirmed"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","edited"],[3,"hidden",4,"matHeaderCellDef"],[3,"hidden",4,"matCellDef"],["class"," table-primary table-*",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[3,"matTooltip","click"],[1,"span-ellipsis"],["class","span-ellipsis",4,"ngIf"],["placeholder","Select user",3,"ngModel","ngModelChange","selectionChange",4,"ngIf"],["placeholder","Select user",3,"ngModel","ngModelChange","selectionChange"],["userSelect",""],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["ngxMatSelectSearchClear",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-sort-header","",3,"hidden"],[3,"hidden","matTooltip","click"],["placeholder","Select project",3,"ngModel","ngModelChange","selectionChange",4,"ngIf"],["placeholder","Select project",3,"ngModel","ngModelChange","selectionChange"],[3,"click"],[2,"height","20px",3,"ngModel","disabled","ngModelChange","change"],[3,"hidden"],[2,"height","20px",3,"ngModel","ngModelChange","click"],[1,"table-primary","table-*"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"mat-table",0,1),p.\u0275\u0275listener("matSortChange",function(){return t.onSortData()}),p.\u0275\u0275elementContainerStart(2,2),p.\u0275\u0275template(3,pt,2,0,"mat-header-cell",3),p.\u0275\u0275template(4,ht,3,2,"mat-cell",4),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(5,5),p.\u0275\u0275template(6,ft,2,0,"mat-header-cell",3),p.\u0275\u0275template(7,St,3,3,"mat-cell",4),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(8,6),p.\u0275\u0275template(9,Et,2,1,"mat-header-cell",7),p.\u0275\u0275template(10,It,3,3,"mat-cell",8),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(11,9),p.\u0275\u0275template(12,Ct,2,0,"mat-header-cell",3),p.\u0275\u0275template(13,kt,3,3,"mat-cell",4),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(14,10),p.\u0275\u0275template(15,Mt,2,0,"mat-header-cell",3),p.\u0275\u0275template(16,Pt,4,3,"mat-cell",11),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(17,12),p.\u0275\u0275template(18,Dt,2,0,"mat-header-cell",3),p.\u0275\u0275template(19,Ot,4,3,"mat-cell",11),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(20,13),p.\u0275\u0275template(21,Tt,2,0,"mat-header-cell",3),p.\u0275\u0275template(22,Ft,3,1,"mat-cell",11),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(23,14),p.\u0275\u0275template(24,jt,2,0,"mat-header-cell",3),p.\u0275\u0275template(25,_t,3,1,"mat-cell",11),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(26,15),p.\u0275\u0275template(27,Nt,2,0,"mat-header-cell",16),p.\u0275\u0275template(28,Rt,2,2,"mat-cell",17),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(29,18),p.\u0275\u0275template(30,At,2,1,"mat-header-cell",19),p.\u0275\u0275template(31,Ut,2,2,"mat-cell",20),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275template(32,Vt,1,0,"mat-header-row",21),p.\u0275\u0275template(33,Lt,1,0,"mat-row",22),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275property("dataSource",t.dataSource),p.\u0275\u0275advance(32),p.\u0275\u0275property("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),p.\u0275\u0275advance(1),p.\u0275\u0275property("matRowDefColumns",t.displayedColumns))},directives:[Ze.BZ,Ke.YE,Ze.w1,Ze.fO,Ze.Dz,Ze.as,Ze.nj,Ze.ge,Ke.nU,Ze.ev,ie.gM,c.NgIf,q.gD,m.NgControlStatus,m.NgModel,Q.ey,K.nu,m.FormControlDirective,x.Hw,K.w5,c.NgForOf,b.oG,Ze.XQ,Ze.Gk],pipes:[c.AsyncPipe,_.M],styles:[".mat-table[_ngcontent-%COMP%]{overflow:auto;border-radius:4px;max-height:calc(100vh - 392px)}table[_ngcontent-%COMP%]{width:100%}.header-align[_ngcontent-%COMP%]{display:flex;justify-content:center}  .mat-sort-header-arrow{color:#fff}.strong[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#5a5a5a,black);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:bold}.span-ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mat-header-cell[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:600}.material-icons[_ngcontent-%COMP%]{font-size:15px}.mat-column-fromDate[_ngcontent-%COMP%]{flex:0 0 5%!important;width:5%;text-align:center;justify-content:center}.mat-column-toDate[_ngcontent-%COMP%]{flex:0 0 5%!important;width:5%;text-align:center;justify-content:center}.mat-column-manDays[_ngcontent-%COMP%]{flex:0 0 4%!important;width:4%;text-align:center;justify-content:center}.mat-column-total[_ngcontent-%COMP%]{flex:0 0 4%!important;width:4%;text-align:center;justify-content:center}.mat-column-confirmed[_ngcontent-%COMP%]{flex:0 0 4%!important;width:4%;text-align:center;justify-content:center}.mat-column-edited[_ngcontent-%COMP%]{flex:0 0 4%!important;width:4%;text-align:center;justify-content:center}.pdf-ico[_ngcontent-%COMP%]{font-size:35px;margin-bottom:25px}.input-date[_ngcontent-%COMP%]{width:55%}.disabled-color[_ngcontent-%COMP%]{color:#aaa}"]}),e}(),$t=o(34239);function Bt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",33),p.\u0275\u0275elementStart(1,"div",34),p.\u0275\u0275elementStart(2,"div",35),p.\u0275\u0275elementStart(3,"div",1),p.\u0275\u0275elementStart(4,"div",36),p.\u0275\u0275element(5,"mat-spinner"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function Ht(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",37),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().openUploadDialog()}),p.\u0275\u0275element(1,"em",38),p.\u0275\u0275text(2," Load "),p.\u0275\u0275elementEnd()}}function Wt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",39),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().deleteTimeEntriesImport()}),p.\u0275\u0275element(1,"em",40),p.\u0275\u0275text(2," Delete "),p.\u0275\u0275elementEnd()}}function Gt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",39),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().importTimeEntries()}),p.\u0275\u0275element(1,"em",41),p.\u0275\u0275text(2," Import "),p.\u0275\u0275elementEnd()}}function Yt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275elementStart(1,"h1"),p.\u0275\u0275text(2,"No Result Found"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function Xt(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",42),p.\u0275\u0275element(1,"app-timeentries-import-period",43),p.\u0275\u0275pipe(2,"paginator"),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("timeEntriesImportPeriod",p.\u0275\u0275pipeBind3(2,1,n.timeEntriesImportPeriod,n.searchFilterService.pageIndex,n.searchFilterService.pageSize))}}var Jt=o(49457),qt=function(){var e=function(){function e(t,n,i,o,a,s){r(this,e),this.dialog=t,this.timesheetService=n,this.sortService=i,this.searchFilterService=o,this.notificationService=a,this.dateTimeService=s,this.isLoading=!0,this.importSearch=new y.o5,this.statuses=[{id:0,description:"Not Ok"},{id:1,description:"Ok"}],this.timeEntriesImportPeriodConfirmed=!1,this.emptyResult=!1,this.dropdownSettingsStatus={},this.paginatorPipe=new He.Ry(this.searchFilterService)}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.timesheetService.sortTimeEntriesImportPeriod.subscribe(function(t){e.onSortData(t)}),this.timesheetService.editTimeEntryImportPeriod.subscribe(function(t){e.editTimeEntryImportPeriod(t)}),this.dropdownSettingsStatus={singleSelection:!1,idField:"id",textField:"description",itemsShowLimit:1,enableCheckAll:!0,allowSearchFilter:!1,maxHeight:150,placeholder:"criteria",searchPlaceholderText:"Search..."},this.searchFilterService.pageIndex=0,this.searchFilterService.pageSize=24,this.searchFilterService.resultChanged.subscribe(function(){setTimeout(function(){e.emptyResult=0===e.searchFilterService.showingDataLastFilter.length})}),this.listView=!1;var t=JSON.parse(sessionStorage.getItem("importSearch"));null!==t&&(this.importSearch=Object.assign(t,y.o5)),this.getTimeEntriesImportPeriod(),this.timesheetService.savingTimeEntriesImport.subscribe(function(){e.isLoading=!0}),this.timesheetService.reloadTimeEntriesImport.subscribe(function(){e.getTimeEntriesImportPeriod()})}},{key:"ngOnDestroy",value:function(){this.searchFilterService.showingDataLastFilter=[],this.searchFilterService.periodFrom=null,this.searchFilterService.periodTo=null,this.dialog.closeAll()}},{key:"openUploadDialog",value:function(){this.uploadDialogRef=this.dialog.open(Ye,{disableClose:!1,panelClass:"form_modal",width:"450px",height:"320px",hasBackdrop:!0,data:{}})}},{key:"downloadImportTimesheetTelnetFormatTemplate",value:function(){Jt.saveAs("./assets/docs/ImportTimesheetTelnetFormatTemplate.xlsx","Import Timesheet Telnet Format Template")}},{key:"searchTimeEntriesImport",value:function(){this.updateSessionStorage(),this.getTimeEntriesImportPeriod()}},{key:"updateSessionStorage",value:function(){sessionStorage.setItem("importSearch",JSON.stringify(this.importSearch))}},{key:"isImportSearchEmpty",value:function(){return void 0===this.importSearch.userName&&void 0===this.importSearch.projectName&&void 0===this.importSearch.selectedStatusesIdentifiers&&void 0===this.importSearch.periodFrom&&void 0===this.importSearch.periodTo}},{key:"getTimeEntriesImportPeriod",value:function(){var e=this;this.searchFilterService.pageIndex=0,this.timesheetService.getTimeEntriesImportPeriod(this.importSearch,this.currentUser.userId).subscribe(function(t){e.timeEntriesImportPeriod=[];var n=0;t.forEach(function(t){e.timeEntriesImportPeriod.push(Object.assign(new y.Jn,t)),1===t.confirmed&&n++}),e.timeEntriesImportPeriodLength=e.timeEntriesImportPeriod.length,e.timeEntriesImportPeriodConfirmed=0!==e.timeEntriesImportPeriod.length&&e.timeEntriesImportPeriodLength===n,e.importSearchEmpty=e.isImportSearchEmpty(),e.emptyResult=!1,e.listView=!0,e.isLoading=!1})}},{key:"deleteTimeEntriesImport",value:function(){var e=this;this.timesheetService.deleteTimeEntriesImport(this.currentUser.userId).subscribe(function(){e.importSearch=new y.o5,sessionStorage.removeItem("importSearch"),e.getTimeEntriesImportPeriod(),e.notificationService.success("Delete successful.")},function(){e.notificationService.danger("Delete failed.")})}},{key:"importTimeEntries",value:function(){var e=this,t=this.timeEntriesImportPeriod.filter(function(e,t,n){return n.findIndex(function(t){return t.userId===e.userId})===t}),n=0,i=0,r=[];t.forEach(function(o){e.timesheetService.importUserTimeEntries(o.userId,e.currentUser.userId).subscribe(function(a){0!==a?n+=1:(i+=1,r.push(o.userName)),n+i===t.length&&(e.getTimeEntriesImportPeriod(),0!==i?e.notificationService.warning("Import failed, may be some users are not imported:<br>- "+r.join(",<br>- ")+"."):e.notificationService.success("Import successful."))},function(){i+=1,r.push(o.userName),n+i===t.length&&(e.getTimeEntriesImportPeriod(),e.notificationService.warning("Import failed, may be some users are not imported:<br>- "+r.join(",<br>- ")+"."))})})}},{key:"dateFormat",value:function(e){return null==e||"0001-01-01T00:00:00"===e?"":this.dateTimeService.getShortFormat(e)}},{key:"dateOnly",value:function(e){return this.dateTimeService.dateOnly(e)}},{key:"onClickingEnter",value:function(e){"Enter"===e.key&&this.searchTimeEntriesImport()}},{key:"onResetAllFilters",value:function(){this.importSearch=new y.o5,sessionStorage.removeItem("importSearch"),this.getTimeEntriesImportPeriod()}},{key:"onSortData",value:function(e){var t=this;e.active&&""!==e.direction&&void 0!==this.timeEntriesImportPeriod&&this.timeEntriesImportPeriod.sort(function(n,i){var r="asc"===e.direction;switch(e.active){case"userImportId":return t.sortService.compare(n.userImportId,i.userImportId,r,!1);case"userImportName":return t.sortService.compare(n.userImportName,i.userImportName,r,!1);case"userId":return t.sortService.compare(n.userName,i.userName,r,!1);case"projectImportId":return t.sortService.compare(n.projectImportId,i.projectImportId,r,!1);case"projectImportName":return t.sortService.compare(n.projectImportName,i.projectImportName,r,!1);case"projectId":return t.sortService.compare(n.projectName,i.projectName,r,!1);case"fromDate":return t.sortService.compare(n.fromDate,i.fromDate,r,!1);case"toDate":return t.sortService.compare(n.toDate,i.toDate,r,!1);case"manDays":return t.sortService.compare(n.manDays,i.manDays,r,!0);case"total":return t.sortService.compare(n.total,i.total,r,!0);default:return 0}}),this.paginatorPipe.transform(this.timeEntriesImportPeriod,this.searchFilterService.pageIndex,this.searchFilterService.pageSize)}},{key:"editTimeEntryImportPeriod",value:function(e){this.timeEntriesImportPeriod.filter(function(e){return!0===e.edited}).forEach(function(t){(t.userImportId!==e.userImportId||t.projectImportId!==e.projectImportId)&&(t.edited=!1)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(u.uw),p.\u0275\u0275directiveInject(s.r4),p.\u0275\u0275directiveInject(Xe.K),p.\u0275\u0275directiveInject(l.nJ),p.\u0275\u0275directiveInject(l.gq),p.\u0275\u0275directiveInject(l.Cv))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-import"]],decls:61,vars:26,consts:[[1,"page-body"],[1,"row"],["class","overlay",4,"ngIf"],[1,"col-xl-12","col-lg-12","filter-bar"],[1,"card","m-b-10"],[1,"card-body","p-t-10"],[1,"col-xl-4","col-lg-12"],[1,"mat-subheader","col-sm-2"],[1,"search-input","col-sm-10"],["placeholder","Search here...","matInput","","name","searchInput",3,"ngModel","keydown","ngModelChange"],[1,"date-field","col-sm-5"],["matInput","","placeholder","From",3,"matDatepicker","max","ngModel","keypress","ngModelChange"],["matSuffix","",3,"for"],["picker11",""],["matInput","","placeholder","To",3,"matDatepicker","min","ngModel","keypress","ngModelChange"],["picker22",""],[1,"col-xl-3","col-lg-12"],[1,"col-sm-10"],[1,"multi-search",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],[1,"col-xl-1","col-lg-12"],[1,"text-center"],[1,"btn","btn-md","btn-primary","ripple","m-t-5",3,"click"],[1,"btn","btn-md","btn-default","ripple","light","m-t-10",3,"click"],[1,"navbar","navbar-light","bg-faded","m-b-10","p-10"],[1,"nav-item","nav-grid","col-sm-4"],["type","button","matTooltip","Telnet Format Template",1,"btn","btn-sm","btn-primary","m-r-10",2,"font-size","inherit",3,"click"],[1,"icofont","icofont-upload-alt",2,"font-size","medium"],["type","button","class","btn btn-sm btn-primary m-r-10","style","font-size:inherit;",3,"click",4,"ngIf"],["type","submit","class","btn btn-sm btn-primary m-r-10","style","font-size:inherit;",3,"click",4,"ngIf"],[1,"col-sm-8"],[3,"pageSize","pageIndex","length"],[4,"ngIf"],["class","example-container mat-elevation-z8",4,"ngIf"],[1,"overlay"],[1,"spinner-wrapper"],[1,"container"],["id","loader"],["type","button",1,"btn","btn-sm","btn-primary","m-r-10",2,"font-size","inherit",3,"click"],[1,"fa","fa-file-excel-o",2,"font-size","medium"],["type","submit",1,"btn","btn-sm","btn-primary","m-r-10",2,"font-size","inherit",3,"click"],[1,"fa","fa-trash",2,"font-size","medium"],[1,"fa","fa-arrow-circle-right",2,"font-size","medium"],[1,"example-container","mat-elevation-z8"],[3,"timeEntriesImportPeriod"]],template:function(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275template(2,Bt,6,0,"div",2),p.\u0275\u0275elementStart(3,"div",3),p.\u0275\u0275elementStart(4,"div",4),p.\u0275\u0275elementStart(5,"div",5),p.\u0275\u0275elementStart(6,"div",1),p.\u0275\u0275elementStart(7,"div",6),p.\u0275\u0275elementStart(8,"mat-list"),p.\u0275\u0275elementStart(9,"mat-list-item"),p.\u0275\u0275elementStart(10,"h3",7),p.\u0275\u0275text(11,"User"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(12,"mat-form-field",8),p.\u0275\u0275elementStart(13,"input",9),p.\u0275\u0275listener("keydown",function(e){return t.onClickingEnter(e)})("ngModelChange",function(e){return t.importSearch.userName=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(14,"mat-list-item"),p.\u0275\u0275elementStart(15,"h3",7),p.\u0275\u0275text(16,"Period"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(17,"mat-form-field",10),p.\u0275\u0275elementStart(18,"input",11),p.\u0275\u0275listener("keypress",function(e){return t.dateOnly(e)})("ngModelChange",function(e){return t.importSearch.periodFrom=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(19,"mat-datepicker-toggle",12),p.\u0275\u0275element(20,"mat-datepicker",null,13),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"mat-form-field",10),p.\u0275\u0275elementStart(23,"input",14),p.\u0275\u0275listener("keypress",function(e){return t.dateOnly(e)})("ngModelChange",function(e){return t.importSearch.periodTo=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(24,"mat-datepicker-toggle",12),p.\u0275\u0275element(25,"mat-datepicker",null,15),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(27,"div",6),p.\u0275\u0275elementStart(28,"mat-list"),p.\u0275\u0275elementStart(29,"mat-list-item"),p.\u0275\u0275elementStart(30,"h3",7),p.\u0275\u0275text(31,"Project"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(32,"mat-form-field",8),p.\u0275\u0275elementStart(33,"input",9),p.\u0275\u0275listener("keydown",function(e){return t.onClickingEnter(e)})("ngModelChange",function(e){return t.importSearch.projectName=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(34,"div",16),p.\u0275\u0275elementStart(35,"mat-list"),p.\u0275\u0275elementStart(36,"mat-list-item"),p.\u0275\u0275elementStart(37,"h3",7),p.\u0275\u0275text(38,"Status"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(39,"div",17),p.\u0275\u0275elementStart(40,"ng-multiselect-dropdown",18),p.\u0275\u0275listener("ngModelChange",function(e){return t.importSearch.selectedStatusesIdentifiers=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(41,"div",19),p.\u0275\u0275elementStart(42,"div",20),p.\u0275\u0275elementStart(43,"button",21),p.\u0275\u0275listener("click",function(){return t.searchTimeEntriesImport()}),p.\u0275\u0275text(44,"Search"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(45,"div",20),p.\u0275\u0275elementStart(46,"button",22),p.\u0275\u0275listener("click",function(){return t.onResetAllFilters()}),p.\u0275\u0275text(47,"Reset"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(48,"nav",23),p.\u0275\u0275elementStart(49,"div",24),p.\u0275\u0275elementStart(50,"button",25),p.\u0275\u0275listener("click",function(){return t.downloadImportTimesheetTelnetFormatTemplate()}),p.\u0275\u0275element(51,"em",26),p.\u0275\u0275text(52," Template "),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(53,Ht,3,0,"button",27),p.\u0275\u0275template(54,Wt,3,0,"button",28),p.\u0275\u0275template(55,Gt,3,0,"button",28),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(56,"div",29),p.\u0275\u0275element(57,"app-paginator",30),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(58,Yt,3,0,"div",31),p.\u0275\u0275elementStart(59,"div"),p.\u0275\u0275template(60,Xt,3,5,"div",32),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275reference(21),i=p.\u0275\u0275reference(26);p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",t.isLoading),p.\u0275\u0275advance(1),p.\u0275\u0275classProp("blurred",t.isLoading),p.\u0275\u0275advance(10),p.\u0275\u0275property("ngModel",t.importSearch.userName),p.\u0275\u0275advance(5),p.\u0275\u0275property("matDatepicker",n)("max",t.importSearch.periodTo)("ngModel",t.importSearch.periodFrom),p.\u0275\u0275advance(1),p.\u0275\u0275property("for",n),p.\u0275\u0275advance(4),p.\u0275\u0275property("matDatepicker",i)("min",t.importSearch.periodFrom)("ngModel",t.importSearch.periodTo),p.\u0275\u0275advance(1),p.\u0275\u0275property("for",i),p.\u0275\u0275advance(9),p.\u0275\u0275property("ngModel",t.importSearch.projectName),p.\u0275\u0275advance(7),p.\u0275\u0275property("placeholder","Select...")("settings",t.dropdownSettingsStatus)("data",t.statuses)("ngModel",t.importSearch.selectedStatusesIdentifiers)("settings",t.dropdownSettingsStatus),p.\u0275\u0275advance(13),p.\u0275\u0275property("ngIf",t.importSearchEmpty&&void 0!==t.timeEntriesImportPeriodLength&&0===t.timeEntriesImportPeriodLength),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",void 0!==t.timeEntriesImportPeriodLength&&0!==t.timeEntriesImportPeriodLength),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.importSearchEmpty&&t.timeEntriesImportPeriodConfirmed),p.\u0275\u0275advance(2),p.\u0275\u0275property("pageSize",t.searchFilterService.pageSize)("pageIndex",t.searchFilterService.pageIndex)("length",t.timeEntriesImportPeriodLength),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.emptyResult&&t.listView),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",t.listView&&!t.emptyResult)}},directives:[c.NgIf,Je.i$,Je.Tg,I.KE,C.Nt,m.DefaultValueAccessor,m.NgControlStatus,m.NgModel,G.hl,G.nW,I.R9,G.Mq,Oe.OP,qe.M2,ie.gM,Qe.J,X.$g,zt],pipes:[$t.R],styles:[".filter-button{text-align:center;width:100%;margin:2%}.search-input{font-size:14px}.pointer{cursor:pointer}.reset-all-btn{cursor:pointer;font-size:20px}.reset-all-btn:hover{color:red}.arrow-icon{font-size:10px}.close-icon{float:right;font-size:22px}.multi-search{width:100%}.date-field{font-size:14px}.mat-list .mat-subheader{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.mat-list-header{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.material-icons{font-size:25px}.overlay{position:absolute;z-index:1002;background-color:#ffffff80;width:100%;height:100%}.spinner-wrapper{display:flex;justify-content:center;justify-items:center}#loader{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}\n"],encapsulation:2}),e}(),Qt=o(60040);function Kt(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"th",10),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=t.index,i=p.\u0275\u0275nextContext();p.\u0275\u0275attribute("colspan",i.displayedSubColumnsNamesCount),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",i.getColumnHeader(n)," ")}}function Zt(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"th",11),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=t.index,i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",i.displayedSubColumns[n]," ")}}function en(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td",19),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=t.index,i=p.\u0275\u0275nextContext(2).$implicit,r=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",r.getTotalSubColumnValue(n,i)," ")}}function tn(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tr",15),p.\u0275\u0275elementStart(1,"td",16),p.\u0275\u0275elementStart(2,"span",17),p.\u0275\u0275text(3),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(4,"td",16),p.\u0275\u0275template(5,en,2,1,"td",18),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit,i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate1(" ",n.activityName," "),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",i.displayedSubColumns)}}function nn(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275text(1," - "),p.\u0275\u0275elementEnd())}function rn(e,t){if(1&e&&p.\u0275\u0275text(0),2&e){var n=p.\u0275\u0275nextContext(2).$implicit;p.\u0275\u0275textInterpolate1(" ",n.userIdentifier," ")}}function on(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275text(1," - "),p.\u0275\u0275elementEnd())}function an(e,t){if(1&e&&p.\u0275\u0275text(0),2&e){var n=p.\u0275\u0275nextContext().index,i=p.\u0275\u0275nextContext(2).$implicit,r=p.\u0275\u0275nextContext();p.\u0275\u0275textInterpolate1(" ",r.getTotalSubColumnValue(n,i),"")}}function sn(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td",19),p.\u0275\u0275template(1,on,2,0,"div",22),p.\u0275\u0275template(2,an,1,1,"ng-template",null,23,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementEnd()),2&e){var n=t.index,i=p.\u0275\u0275reference(3),r=p.\u0275\u0275nextContext(2).$implicit,o=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",-1==o.getTotalSubColumnValue(n,r))("ngIfElse",i)}}function ln(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tr",20),p.\u0275\u0275elementStart(1,"td",21),p.\u0275\u0275template(2,nn,2,0,"div",22),p.\u0275\u0275template(3,rn,1,1,"ng-template",null,23,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(5,"td"),p.\u0275\u0275template(6,sn,4,2,"td",18),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275reference(4),i=p.\u0275\u0275nextContext().$implicit,r=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275propertyInterpolate1("matTooltip"," ",i.projectName,""),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",-1==r.getTotalSubColumnValue(r.i,i))("ngIfElse",n),p.\u0275\u0275advance(4),p.\u0275\u0275property("ngForOf",r.displayedSubColumns)}}function cn(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275text(1," - "),p.\u0275\u0275elementEnd())}function dn(e,t){if(1&e&&p.\u0275\u0275text(0),2&e){var n=p.\u0275\u0275nextContext().index,i=p.\u0275\u0275nextContext(2).$implicit,r=p.\u0275\u0275nextContext();p.\u0275\u0275textInterpolate(r.getSubColumnValue(n,i))}}function mn(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td",19),p.\u0275\u0275template(1,cn,2,0,"div",22),p.\u0275\u0275template(2,dn,1,1,"ng-template",null,23,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementEnd()),2&e){var n=t.index,i=p.\u0275\u0275reference(3),r=p.\u0275\u0275nextContext(2).$implicit,o=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",-1==o.getSubColumnValue(n,r))("ngIfElse",i)}}function un(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td",24),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(3,"td"),p.\u0275\u0275template(4,mn,4,2,"td",18),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit,i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275propertyInterpolate1("matTooltip"," ",n.projectName,""),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.projectName," "),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",i.displayedSubColumns)}}function pn(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275text(1," - "),p.\u0275\u0275elementEnd())}function hn(e,t){if(1&e&&p.\u0275\u0275text(0),2&e){var n=p.\u0275\u0275nextContext().index,i=p.\u0275\u0275nextContext(2).$implicit,r=p.\u0275\u0275nextContext();p.\u0275\u0275textInterpolate(r.getSubColumnValue(n,i))}}function fn(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td",19),p.\u0275\u0275template(1,pn,2,0,"div",22),p.\u0275\u0275template(2,hn,1,1,"ng-template",null,23,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementEnd()),2&e){var n=t.index,i=p.\u0275\u0275reference(3),r=p.\u0275\u0275nextContext(2).$implicit,o=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",-1==o.getSubColumnValue(n,r))("ngIfElse",i)}}function gn(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td",25),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(3,"td"),p.\u0275\u0275template(4,fn,4,2,"td",18),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit,i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275propertyInterpolate1("matTooltip"," ",n.projectName,""),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.projectName," "),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",i.displayedSubColumns)}}function vn(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275text(1," - "),p.\u0275\u0275elementEnd())}function yn(e,t){if(1&e&&p.\u0275\u0275text(0),2&e){var n=p.\u0275\u0275nextContext().index,i=p.\u0275\u0275nextContext(2).$implicit,r=p.\u0275\u0275nextContext();p.\u0275\u0275textInterpolate(r.getSubColumnValue(n,i))}}function Sn(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td",19),p.\u0275\u0275template(1,vn,2,0,"div",22),p.\u0275\u0275template(2,yn,1,1,"ng-template",null,23,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementEnd()),2&e){var n=t.index,i=p.\u0275\u0275reference(3),r=p.\u0275\u0275nextContext(2).$implicit,o=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",-1==o.getSubColumnValue(n,r))("ngIfElse",i)}}function En(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td",26),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"td",27),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(5,Sn,4,2,"td",18),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit,i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275propertyInterpolate1("matTooltip"," ",n.projectName,""),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.projectName," "),p.\u0275\u0275advance(1),p.\u0275\u0275propertyInterpolate1("matTooltip"," ",n.customerName,""),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.customerName," "),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",i.displayedSubColumns)}}function In(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tbody"),p.\u0275\u0275template(1,tn,6,2,"tr",12),p.\u0275\u0275template(2,ln,7,4,"tr",13),p.\u0275\u0275template(3,un,5,3,"tr",14),p.\u0275\u0275template(4,gn,5,3,"tr",14),p.\u0275\u0275template(5,En,6,5,"tr",14),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",1==n.level),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",2==n.level),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",null==n.level&&0===n.projectActivityId),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",null==n.level&&0!==n.projectActivityId&&n.projectActivityId!==n.activityId),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",null==n.level&&0!==n.projectActivityId&&n.projectActivityId===n.activityId)}}var Cn=function(){var e=function(){function e(t,n,i,o){r(this,e),this.dialog=t,this.timeEntryResourceGroupService=n,this.dateTimeService=i,this.numberFormatter=o,this.displayedColumns=["userIdentifier"],this.displayedSubColumns=[],this.displayedSubColumnsNames=["Load MD"],this.displayedSubColumnsNamesCount=this.displayedSubColumnsNames.length,this.monthNames=["Jan ","Feb ","Mar ","Apr ","May ","Jun ","Jul ","Aug ","Sep ","Oct ","Nov ","Dec "],this.monthColumnsHeaders=[],this.timeEntryResourcesGrouped=[]}return i(e,[{key:"ngOnInit",value:function(){this.user=JSON.parse(localStorage.getItem("currentUser")),this.buildColmnsHeader(),this.listView=!0}},{key:"ngOnChanges",value:function(){(null!==this.timeEntryResources||void 0!==this.timeEntryResources)&&(this.timeEntryResourcesGrouped=this.timeEntryResourceGroupService.getTimeEntryResourcesGrouped(this.timeEntryResources,this.timeEntryResourcesFiltred,this.monthsCount))}},{key:"buildColmnsHeader",value:function(){if((null!==this.timeEntryResources||void 0!==this.timeEntryResources)&&this.timeEntryResources.length>0)for(var e=this.timeEntryResources[0].monthsTimeEntryResource.length,t=0;t<e;t++){this.displayedColumns.push("M"+t);var n=this.timeEntryResources[0].monthsTimeEntryResource[this.getMonthIndex(t)].month-1,i=this.timeEntryResources[0].monthsTimeEntryResource[this.getMonthIndex(t)].year;isNaN(n)?this.monthColumnsHeaders.push("Total"):this.monthColumnsHeaders.push(this.monthNames[n]+i),this.displayedSubColumns=this.displayedSubColumns.concat(this.displayedSubColumnsNames)}}},{key:"getMonthIndex",value:function(e){return Math.floor(e)}},{key:"getMonthDetailsIndex",value:function(e){return Math.floor(e/this.displayedSubColumnsNamesCount)}},{key:"getColumnHeader",value:function(e){return this.monthColumnsHeaders[e]}},{key:"getSubColumnValue",value:function(e,t){var n=e%this.displayedSubColumnsNamesCount,i=Math.floor(e/this.displayedSubColumnsNamesCount);if(void 0!==t.monthsTimeEntryResource[i])switch(n){case 0:return this.numberFormatter.round(t.monthsTimeEntryResource[i].monthLoad,1)}}},{key:"getTotalSubColumnValue",value:function(e,t){var n=e%this.displayedSubColumnsNamesCount,i=Math.floor(e/this.displayedSubColumnsNamesCount);if(void 0!==t.monthsTimeEntryResource[i])switch(n){case 0:return this.numberFormatter.round(t.monthsTimeEntryResource[i].monthLoad,1)}}},{key:"dateOnly",value:function(e){return this.dateTimeService.dateOnly(e)}},{key:"datePipe",value:function(e){return"0001-01-01T00:00:00"===e?"":e}},{key:"format",value:function(e){return 0===e?"":e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(u.uw),p.\u0275\u0275directiveInject(s.ml),p.\u0275\u0275directiveInject(l.Cv),p.\u0275\u0275directiveInject(xe.e))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-resource"]],viewQuery:function(e,t){var n;(1&e&&p.\u0275\u0275viewQuery(Ke.YE,7),2&e)&&(p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.sort=n.first))},inputs:{timeEntryResources:"timeEntryResources",timeEntryResourcesFiltred:"timeEntryResourcesFiltred",monthsCount:"monthsCount"},features:[p.\u0275\u0275NgOnChangesFeature],decls:12,vars:3,consts:[[1,"table","table-bordered"],[2,"padding","0px"],[1,"th"],[1,"th-first"],["rowspan","2","scope","col",1,"th-third"],["rowspan","2","scope","col"],["id","monthHeader",4,"ngFor","ngForOf"],[1,"th-second"],["id","subColumns",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["id","monthHeader"],["id","subColumns"],["style","background-color: lightgoldenrodyellow;",4,"ngIf"],["style","background-color: rgb(178, 240, 248);",4,"ngIf"],[4,"ngIf"],[2,"background-color","lightgoldenrodyellow"],[1,"td-first"],[1,"span-ellipsis"],["style","text-align: center;",4,"ngFor","ngForOf"],[2,"text-align","center"],[2,"background-color","rgb(178, 240, 248)"],[1,"td-second",3,"matTooltip"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"td-third",2,"width","15%","color","rgb(0, 184, 83)",3,"matTooltip"],[1,"td-third",2,"width","15%","color","rgb(255, 81, 0)",3,"matTooltip"],[1,"td-third",2,"width","15%",3,"matTooltip"],[1,"td-third",2,"width","10%",3,"matTooltip"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"table",0),p.\u0275\u0275element(1,"caption",1),p.\u0275\u0275elementStart(2,"thead",2),p.\u0275\u0275elementStart(3,"tr",3),p.\u0275\u0275elementStart(4,"th",4),p.\u0275\u0275text(5,"Activity / Resource / Project"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(6,"th",5),p.\u0275\u0275text(7,"Customer"),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(8,Kt,2,2,"th",6),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"tr",7),p.\u0275\u0275template(10,Zt,2,1,"th",8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(11,In,6,5,"tbody",9),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275advance(8),p.\u0275\u0275property("ngForOf",t.monthColumnsHeaders),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",t.displayedSubColumns),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngForOf",t.timeEntryResourcesGrouped))},directives:[c.NgForOf,c.NgIf,ie.gM],styles:["thead[_ngcontent-%COMP%]   tr.th-first[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;background:#3f629d;z-index:2}thead[_ngcontent-%COMP%]   tr.th-second[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:43px;background:#3f629d;z-index:2}thead[_ngcontent-%COMP%]   th.th-third[_ngcontent-%COMP%]{width:17%;left:0;background:#3f629d;z-index:3!important}tbody[_ngcontent-%COMP%]   td.td-first[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;left:0;background:lightgoldenrodyellow;z-index:1}tbody[_ngcontent-%COMP%]   td.td-second[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;left:0;background:#b2f0f8;z-index:1}tbody[_ngcontent-%COMP%]   td.td-third[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;left:0;background:white;z-index:1}.th[_ngcontent-%COMP%]{background-color:#3f629d;color:#fff;border-top:0px solid #dee2e6;border-bottom:0px solid #dee2e6;font-size:.9em}#subColumns[_ngcontent-%COMP%]{margin-bottom:-10px;width:calc(100% - 1.2em);background-color:#3f629d;color:#fff;border-top:1px solid #dee2e6;border-bottom:none;font-weight:normal;font-size:.85em;text-align:center}#monthHeader[_ngcontent-%COMP%]{text-align:center}td[_ngcontent-%COMP%]{font-size:.85em;overflow:hidden;text-overflow:ellipsis;max-width:80px;border-top:0px solid #dee2e6;border-bottom:0px solid #dee2e6}.tr[_ngcontent-%COMP%]{text-align:center}"]}),e}();function bn(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275elementStart(1,"h1"),p.\u0275\u0275text(2,"No Result Found"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function xn(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",29),p.\u0275\u0275elementStart(1,"div",30),p.\u0275\u0275elementStart(2,"div",31),p.\u0275\u0275elementStart(3,"div",1),p.\u0275\u0275elementStart(4,"div",32),p.\u0275\u0275element(5,"mat-spinner"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function wn(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",33),p.\u0275\u0275element(1,"app-resource",34),p.\u0275\u0275pipe(2,"paginator"),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275classProp("blurred",n.isLoading),p.\u0275\u0275advance(1),p.\u0275\u0275property("timeEntryResources",p.\u0275\u0275pipeBind3(2,5,n.timeEntryResources,n.searchFilterService.pageIndex,n.searchFilterService.pageSize))("timeEntryResourcesFiltred",n.timeEntryResources)("monthsCount",n.monthsCount)}}var kn=[{path:"",data:{title:"TimeSheet",function:E.FI.Timesheet,status:!1},canActivate:[Ce.a1],children:[{path:"timeentry",component:Ie,data:{title:"Time Entry",icon:"icon-home",caption:"",function:E.FI.TimeEntry,status:!0},canActivate:[Ce.a1]},{path:"board",component:Be,data:{title:"Board",icon:"icon-home",caption:"",function:E.FI.Board,status:!0},canActivate:[Ce.a1]},{path:"import",component:qt,data:{title:"Import",icon:"icon-home",caption:"",function:E.FI.TimeEntry,status:!0},canActivate:[Ce.a1]},{path:"resource-report",component:function(){var e=function(){function e(t){r(this,e),this.emptyResult=!1,this.timeEntryResourcesGrouped=[],this.listView=!1,this.isSuperAdmin=!1,this.activitiesIdentifiers=[],this.selectedActivitiesIdentifiers=[],this.customersIdentifiers=[],this.selectedCustomersIdentifiers=[],this.dropdownSettings={},this.dropDownSelected=!1,this.searchFilterService=new l.nJ,this.paginatorPipe=new He.Ry(this.searchFilterService),this.subscription=new g.w0,this.monthNames=["January ","February ","March ","April ","May ","June ","July ","August ","September ","October ","November ","December "],this.subColumnsNames=["Load MD"],this.dialog=t.get(u.uw),this.sortService=t.get(l.Kx),this.searchFilterService=t.get(l.nJ),this.excelService=t.get(l.xB),this.timesheetService=t.get(s.r4),this.timeEntryResourceGroupService=t.get(s.ml),this.projectService=t.get(we.Y4),this.dateTimeService=t.get(l.Cv),this.numberFormatter=t.get(xe.e),this.notificationService=t.get(l.gq)}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.isSuperAdmin=this.currentUser.groupId===E.Fl.SuperAdmin,this.getActivities(),this.searchFilterService.pageIndex=0,this.searchFilterService.pageSize=24,this.dropdownSettings={singleSelection:!0,idField:"id",textField:"description",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,enableCheckAll:!1,allowSearchFilter:!0,maxHeight:150,placeholder:"criteria",searchPlaceholderText:"Search..."},this.subscription.add(this.timesheetService.reloadTimeEntryResource.subscribe(function(){var t=JSON.parse(sessionStorage.getItem("timeEntryResourceSearch")),n=t.selectedActivitiesIdentifiers.map(function(e){return e.id}).join(",");e.getTimeEntryResource(n,"",t.timeEntryResourceStartDate,t.timeEntryResourceEndDate)})),this.timeEntryResourcesLength=0,this.getActivities(),this.subscription.add(this.searchFilterService.resultChanged.subscribe(function(){setTimeout(function(){e.emptyResult=0===e.searchFilterService.showingDataLastFilter.length})}))}},{key:"onDropDownClose",value:function(){this.dropDownSelected&&(this.dropDownSelected=!1,this.selectedActivitiesIds="",this.selectedActivitiesIdentifiers.length!==this.activitiesIdentifiers.length&&(this.selectedActivitiesIds=this.selectedActivitiesIdentifiers.map(function(e){return e.id}).join(",")),this.getActivityCustomers(Number(this.selectedActivitiesIds)))}},{key:"onActivityDeSelect",value:function(e){this.selectedActivitiesIdentifiers=this.activitiesIdentifiers.filter(function(t){return t.id===e.id})}},{key:"getActivityCustomers",value:function(e){var t=this;this.timesheetService.getActivityCustomers(e).subscribe(function(e){t.customersIdentifiers=[],t.selectedCustomersIdentifiers=[],t.selectedCustomersIds="",null!=e&&(t.customersIdentifiers=e)})}},{key:"onCustomerDeSelect",value:function(e){this.selectedCustomersIdentifiers=this.customersIdentifiers.filter(function(t){return t.id===e.id})}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onResetActivity",value:function(){this.selectedActivitiesIdentifiers=[]}},{key:"getActivities",value:function(){var e=this;this.projectService.getActivities().subscribe(function(t){null!=t&&(e.activitiesIdentifiers=t,e.selectedActivitiesIdentifiers=e.activitiesIdentifiers.filter(function(t){return t.id===e.currentUser.activityId}),e.selectedActivitiesIds=e.selectedActivitiesIdentifiers.map(function(e){return e.id}).join(","),e.setSearchFilter(),e.getActivityCustomers(Number(e.selectedActivitiesIds)))})}},{key:"setSearchFilter",value:function(){var e=this,t=JSON.parse(sessionStorage.getItem("timeEntryResourceSearch"));if(t)t.selectedActivitiesIdentifiers&&t.selectedActivitiesIdentifiers.length>0&&(this.selectedActivitiesIdentifiers=t.selectedActivitiesIdentifiers),this.selectedActivitiesIds=this.selectedActivitiesIdentifiers.map(function(e){return e.id}).join(","),null!=t.timeEntryResourceStartDate&&(this.timeEntryResourceStartDate=new Date(t.timeEntryResourceStartDate),this.minDate=this.timeEntryResourceStartDate),null!=t.timeEntryResourceEndDate&&(this.timeEntryResourceEndDate=new Date(t.timeEntryResourceEndDate),this.maxDate=this.timeEntryResourceEndDate);else{this.selectedActivitiesIdentifiers=this.activitiesIdentifiers.filter(function(t){return t.id===e.currentUser.activityId});var n=this.dateTimeService.today();this.timeEntryResourceStartDate=B([n.getFullYear(),n.getMonth()]).toDate(),this.timeEntryResourceEndDate=B(n).endOf("month").toDate(),this.minDate=this.timeEntryResourceStartDate,this.maxDate=this.timeEntryResourceEndDate}}},{key:"searchTimeEntryResource",value:function(){if(this.selectedCustomersIdentifiers&&this.selectedCustomersIdentifiers.length>0){this.searchFilterService.pageIndex=0,this.timeEntryResources=[],this.timeEntryResourcesLength=0,this.selectedActivitiesIds=this.selectedActivitiesIdentifiers.map(function(e){return e.id}).join(","),this.selectedCustomersIds=this.selectedCustomersIdentifiers.map(function(e){return e.id}).join(","),this.emptyResult=!0,this.listView=!1;var e=new y.AQ;e.selectedActivitiesIdentifiers=this.selectedActivitiesIdentifiers,e.selectedCustomersIdentifiers=this.selectedCustomersIdentifiers,e.timeEntryResourceStartDate=this.timeEntryResourceStartDate,e.timeEntryResourceEndDate=this.timeEntryResourceEndDate,sessionStorage.setItem("timeEntryResourceSearch",JSON.stringify(e)),this.computeStartMonthandYear(),this.getTimeEntryResource(this.selectedActivitiesIds,this.selectedCustomersIds,this.timeEntryResourceStartDate,this.timeEntryResourceEndDate)}else this.notificationService.danger("You should select a customer")}},{key:"getTimeEntryResource",value:function(e,t,n,i){var r=this;this.isLoading=!0,this.timesheetService.getTimeEntryResource(e,t,n,i).subscribe(function(e){if(null!=e)if(r.isLoading=!1,r.prepareTimeEntryResources(e),r.timeEntryResourcesLength=r.timeEntryResources.length,r.emptyResult=!1,r.listView=!0,0===r.timeEntryResources.length)r.emptyResult=!0;else{var t=r.timeEntryResourceGroupService.getTimeEntryResourcesGrouped(r.timeEntryResources,r.timeEntryResources,r.monthsCount);r.timeEntryResourcesGrouped=JSON.parse(JSON.stringify(t)),r.emptyResult=!1}},function(){r.isLoading=!1,r.notificationService.danger("TimeEntry resource not loaded.")})}},{key:"prepareTimeEntryResources",value:function(e){var t=this;e.forEach(function(e){var n=t.timeEntryResources.findIndex(function(t){return t.activityId===e.activityId&&t.projectId===e.projectId&&t.userId===e.userId});if(-1!==n)t.timeEntryResources[n]=t.prepareTimeEntryResource(t.timeEntryResources[n],e);else{var i=t.createTimeEntryResource(t.startMonth,t.startYear,t.monthsCount);t.timeEntryResources.push(t.prepareTimeEntryResource(i,e))}})}},{key:"computeStartMonthandYear",value:function(){this.startMonth=this.timeEntryResourceStartDate.getMonth(),this.startYear=this.timeEntryResourceStartDate.getFullYear(),this.computeMonthsCount()}},{key:"computeMonthsCount",value:function(){this.monthsCount=12*(this.timeEntryResourceEndDate.getFullYear()-this.timeEntryResourceStartDate.getFullYear()),this.monthsCount-=this.timeEntryResourceStartDate.getMonth(),this.monthsCount+=this.timeEntryResourceEndDate.getMonth()+1}},{key:"prepareTimeEntryResource",value:function(e,t){e.activityId=t.activityId,e.activityName=t.activityName,e.customerId=t.customerId,e.customerName=t.customerName,e.projectId=t.projectId,e.projectName=t.projectName,e.projectActivityId=t.projectActivityId,e.userId=t.userId,e.userIdentifier=t.userIdentifier,e.userNumber=t.userNumber,e.fullName=t.fullName;var n=e.monthsTimeEntryResource.findIndex(function(e){return e.month===t.month&&e.year===t.year});return-1!==n&&(e.monthsTimeEntryResource[n].monthLoad=this.numberFormatter.round(t.monthLoad,1)),e}},{key:"createTimeEntryResource",value:function(e,t,n){for(var i=new y.lr(n),r=0;r<n;r++)e+r<12?(i.monthsTimeEntryResource[r].month=e+r+1,i.monthsTimeEntryResource[r].year=t):(i.monthsTimeEntryResource[r].month=e+r+1-12,i.monthsTimeEntryResource[r].year=t+1);return i}},{key:"exportToExcel",value:function(){var e=this;if(void 0!==this.timeEntryResources&&0!==this.timeEntryResources.length){var t=[],n=[],i=this.subColumnsNames.length,r=[],o=[];t.push({header:"",key:"A",width:25}),t.push({header:"",key:"B",width:8}),t.push({header:"",key:"C",width:25}),t.push({header:"",key:"D",width:30}),t.push({header:"",key:"E",width:25});var a=["Activity","Matricule","Resource","Project","Customer"];o.push({cell:"A2",font:{bold:!0}},{cell:"B2",font:{bold:!0}},{cell:"C2",font:{bold:!0}},{cell:"D2",font:{bold:!0}},{cell:"E2",font:{bold:!0}}),this.timeEntryResourcesGrouped[0].monthsTimeEntryResource.forEach(function(n){e.subColumnsNames.forEach(function(i){t.push({header:void 0!==n.month?e.monthNames[n.month-1].toString()+" "+n.year.toString():"Total",key:i+n.monthIndex,width:20}),a.push(i)}),r.push(e.getExcelColumn(6+i*n.monthIndex)+"1:"+e.getExcelColumn(5+i*(n.monthIndex+1))+"1"),o.push({cell:e.getExcelColumn(6+i*n.monthIndex)+"1",font:{bold:!0},alignment:{vertical:"middle",horizontal:"center"}});var s=0;e.subColumnsNames.forEach(function(){o.push({cell:e.getExcelColumn(6+i*n.monthIndex+s)+"2",font:{bold:!0},alignment:{vertical:"middle",horizontal:"center"}}),s++})}),n.push(a),this.timeEntryResourcesGrouped.forEach(function(t){(a=[]).push(t.activityName),a.push(t.userNumber),a.push(t.fullName),a.push(t.projectName),a.push(t.customerName),t.monthsTimeEntryResource.forEach(function(t){a.push(e.formatNullOrEmptyValue(t.monthLoad))}),n.push(a)}),this.excelService.generateExcel(t,n,r,o,"TimeEntry_Resource")}}},{key:"formatNullOrEmptyValue",value:function(e){return""===e||null===e?0:e}},{key:"getExcelColumn",value:function(e){var t=26,n=e%t==0?Math.floor(e/t)-1:Math.floor(e/t),i=e%t==0?t:e%t;return e<=t?String.fromCharCode(i+64):String.fromCharCode(n+64)+String.fromCharCode(i+64)}},{key:"dateFormat",value:function(e){return null==e||"0001-01-01T00:00:00"===e?"":this.dateTimeService.getShortFormat(e)}},{key:"dateOnly",value:function(e){return this.dateTimeService.dateOnly(e)}},{key:"daysChangePeriodFrom",value:function(e){var t=new Date(e);this.timeEntryResourceStartDate=B([t.getFullYear(),t.getMonth()]).toDate(),this.minDate=this.timeEntryResourceStartDate,this.computeMonthsCount(),this.monthsCount>12&&(this.timeEntryResourceEndDate=B([t.getFullYear(),t.getMonth()]).add(11,"months").endOf("month").toDate(),this.maxDate=this.timeEntryResourceEndDate,this.notificationService.warning("Period can not be more then 12 months!"))}},{key:"daysChangePeriodTo",value:function(e){var t=new Date(e);this.timeEntryResourceEndDate=B(t).endOf("month").toDate(),this.maxDate=this.timeEntryResourceEndDate,this.computeMonthsCount(),this.monthsCount>12&&(this.timeEntryResourceStartDate=B([t.getFullYear(),t.getMonth()]).add(-11,"months").endOf("month").toDate(),this.minDate=this.timeEntryResourceStartDate,this.notificationService.warning("Period can not be more then 12 months!"))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(p.Injector))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-time-entry-resource"]],decls:45,vars:19,consts:[[1,"page-body"],[1,"row"],[1,"col-xl-12","col-lg-12","filter-bar"],[1,"card","m-b-10"],[1,"card-body","p-t-10"],[1,"col-xl-4","col-lg-12"],[1,"mat-subheader","col-sm-2"],[1,"search-input","col-sm-5"],[3,"selectedDate","maxDate","daysChange"],[3,"selectedDate","minDate","daysChange"],[1,"col-sm-10"],[1,"multi-search",2,"width","120%",3,"placeholder","data","ngModel","settings","disabled","onDeSelect","ngModelChange","click","onDropDownClose"],[1,"col-xl-3","col-lg-12"],[1,"mat-subheader","col-sm-3"],[1,"multi-search",2,"width","120%",3,"placeholder","data","ngModel","settings","onDeSelect","ngModelChange"],[1,"col-xl-1","col-lg-12"],[1,"text-center"],[1,"btn","btn-md","btn-primary","ripple","m-t-5",3,"click"],[1,"navbar","navbar-light","bg-faded","m-b-10","p-10"],[1,"nav-item","nav-grid","col-sm-4"],["type","button",1,"btn","btn-sm","btn-primary","m-r-10",2,"font-size","inherit",3,"click"],[1,"fa","fa-file-excel-o",2,"font-size","medium"],[1,"col-sm-8"],[3,"pageSize","pageIndex","length"],[4,"ngIf"],[1,"wrapper"],[1,"div-scrollable"],["class","overlay",4,"ngIf"],["class","loaded-content",3,"blurred",4,"ngIf"],[1,"overlay"],[1,"spinner-wrapper"],[1,"container"],["id","loader"],[1,"loaded-content"],[3,"timeEntryResources","timeEntryResourcesFiltred","monthsCount"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"div",2),p.\u0275\u0275elementStart(3,"div",3),p.\u0275\u0275elementStart(4,"div",4),p.\u0275\u0275elementStart(5,"div",1),p.\u0275\u0275elementStart(6,"div",5),p.\u0275\u0275elementStart(7,"mat-list"),p.\u0275\u0275elementStart(8,"mat-list-item"),p.\u0275\u0275elementStart(9,"h3",6),p.\u0275\u0275text(10,"Period"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"div",7),p.\u0275\u0275elementStart(12,"app-select-month",8),p.\u0275\u0275listener("daysChange",function(e){return t.daysChangePeriodFrom(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"div",7),p.\u0275\u0275elementStart(14,"app-select-month",9),p.\u0275\u0275listener("daysChange",function(e){return t.daysChangePeriodTo(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(15,"div",5),p.\u0275\u0275elementStart(16,"mat-list"),p.\u0275\u0275elementStart(17,"mat-list-item"),p.\u0275\u0275elementStart(18,"h3",6),p.\u0275\u0275text(19,"Activity"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(20,"div",10),p.\u0275\u0275elementStart(21,"ng-multiselect-dropdown",11),p.\u0275\u0275listener("onDeSelect",function(e){return t.onActivityDeSelect(e)})("ngModelChange",function(e){return t.selectedActivitiesIdentifiers=e})("click",function(){return t.dropDownSelected=!0})("onDropDownClose",function(){return t.onDropDownClose()}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"div",12),p.\u0275\u0275elementStart(23,"mat-list"),p.\u0275\u0275elementStart(24,"mat-list-item"),p.\u0275\u0275elementStart(25,"h3",13),p.\u0275\u0275text(26,"Customer"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(27,"div",10),p.\u0275\u0275elementStart(28,"ng-multiselect-dropdown",14),p.\u0275\u0275listener("onDeSelect",function(e){return t.onCustomerDeSelect(e)})("ngModelChange",function(e){return t.selectedCustomersIdentifiers=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(29,"div",15),p.\u0275\u0275elementStart(30,"div",16),p.\u0275\u0275elementStart(31,"button",17),p.\u0275\u0275listener("click",function(){return t.searchTimeEntryResource()}),p.\u0275\u0275text(32,"Search"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(33,"nav",18),p.\u0275\u0275elementStart(34,"div",19),p.\u0275\u0275elementStart(35,"button",20),p.\u0275\u0275listener("click",function(){return t.exportToExcel()}),p.\u0275\u0275element(36,"em",21),p.\u0275\u0275text(37," Export "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(38,"div",22),p.\u0275\u0275element(39,"app-paginator",23),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(40,bn,3,0,"div",24),p.\u0275\u0275elementStart(41,"div",25),p.\u0275\u0275elementStart(42,"div",26),p.\u0275\u0275template(43,xn,6,0,"div",27),p.\u0275\u0275template(44,wn,3,9,"div",28),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275advance(12),p.\u0275\u0275property("selectedDate",t.timeEntryResourceStartDate)("maxDate",t.maxDate),p.\u0275\u0275advance(2),p.\u0275\u0275property("selectedDate",t.timeEntryResourceEndDate)("minDate",t.minDate),p.\u0275\u0275advance(7),p.\u0275\u0275property("placeholder","Select...")("data",t.activitiesIdentifiers)("ngModel",t.selectedActivitiesIdentifiers)("settings",t.dropdownSettings)("disabled",!t.isSuperAdmin),p.\u0275\u0275advance(7),p.\u0275\u0275property("placeholder","Select...")("data",t.customersIdentifiers)("ngModel",t.selectedCustomersIdentifiers)("settings",t.dropdownSettings),p.\u0275\u0275advance(11),p.\u0275\u0275property("pageSize",t.searchFilterService.pageSize)("pageIndex",t.searchFilterService.pageIndex)("length",t.timeEntryResourcesLength),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.emptyResult&&t.listView),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf",t.isLoading),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.listView&&!t.emptyResult))},directives:[Je.i$,Je.Tg,Qt.j,Oe.OP,m.NgControlStatus,m.NgModel,qe.M2,Qe.J,c.NgIf,X.$g,Cn],pipes:[$t.R],styles:[".search-input[_ngcontent-%COMP%]{font-size:14px}.multi-search[_ngcontent-%COMP%]{width:100%}.mat-list[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.div-scrollable[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto;min-height:217px;max-height:calc(100vh - 342px)}.wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.overlay[_ngcontent-%COMP%]{position:absolute;z-index:1002;background-color:#ffffff80;width:100%;height:100%}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center}#loader[_ngcontent-%COMP%]{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}"]}),e}(),data:{title:"Resource Report",icon:"icon-home",caption:"",function:E.FI.TimeEntryReport,status:!0},canActivate:[Ce.a1]}]}],Mn=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=p.\u0275\u0275defineInjector({imports:[[f.Bz.forChild(kn)],f.Bz]}),e}(),Pn=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=p.\u0275\u0275defineInjector({imports:[[c.CommonModule,d.m,m.FormsModule,m.ReactiveFormsModule,d.q,Oe.ZQ.forRoot()]]}),e}(),Dn=o(91841),On=o(36332),Tn=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=p.\u0275\u0275defineInjector({imports:[[c.CommonModule]]}),e}(),Fn=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=p.\u0275\u0275defineInjector({providers:[l.nJ],imports:[[c.CommonModule,d.m,m.FormsModule,m.ReactiveFormsModule,d.q,u.Is,Oe.ZQ.forRoot(),Dn.HttpClientModule,On.o,Tn]]}),e}(),jn=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=p.\u0275\u0275defineInjector({providers:[s.ml],imports:[[c.CommonModule,d.m,m.FormsModule,m.ReactiveFormsModule,d.q,u.Is,Oe.ZQ.forRoot(),Dn.HttpClientModule]]}),e}(),_n=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=p.\u0275\u0275defineInjector({providers:[s.r4,l.gq],imports:[[c.CommonModule,d.m,Oe.ZQ.forRoot(),Fn,Pn,h,jn,Mn]]}),e}()},85718:function(e,t,n){n.d(t,{x:function(){return i}});var i=function e(){r(this,e)}},55750:function(e,t,n){n.d(t,{Ry:function(){return i.R}});var i=n(34239);n(62758)},34239:function(e,t,n){n.d(t,{R:function(){return l}});var o,a=n(37716),s=n(10337),l=((o=function(){function e(t){r(this,e),this.searchFilterService=t}return i(e,[{key:"transform",value:function(e,t,n){if(this.startIndex=t*(n*this.searchFilterService.rowSpan)+1,this.endIndex=n*this.searchFilterService.rowSpan*(t+1),null!=e)return this.searchFilterService.showingDataLastFilter=e.slice(this.startIndex-1,this.endIndex),this.searchFilterService.resultChanged.next(),e.slice(this.startIndex-1,this.endIndex)}}]),e}()).\u0275fac=function(e){return new(e||o)(a.\u0275\u0275directiveInject(s.nJ,16))},o.\u0275pipe=a.\u0275\u0275definePipe({name:"paginator",type:o,pure:!0}),o)},39924:function(e,t,n){n.d(t,{J:function(){return g}});var o=n(37716),a=n(99692),s=n(10337),l=n(98295),c=n(67441),d=n(3679),m=n(38583),u=n(72458);function p(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",6),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;o.\u0275\u0275property("value",n),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(n)}}var h,f=function(){return[6,12,24,60,120]},g=((h=function(){function e(t){r(this,e),this.searchFilterService=t,this.disabled=!1,this.hidePageSize=!1,this.showFirstLastButtons=!1,this.page=new o.EventEmitter}return i(e,[{key:"pageIndexChanged",set:function(e){this.pageIndex=e,this.updateGoto()}},{key:"lengthChanged",set:function(e){this.length=e,this.updateGoto()}},{key:"pageSizeChanged",set:function(e){this.pageSize=e,this.updateGoto()}},{key:"ngOnInit",value:function(){this.updateGoto()}},{key:"onPaginateChange",value:function(e){this.searchFilterService.pageIndex=e.pageIndex,this.searchFilterService.pageSize=e.pageSize,this.length=e.length,this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.updateGoto(),this.emitPageEvent(e)}},{key:"updateGoto",value:function(){this.goTo=(this.pageIndex||0)+1,this.pageNumbers=[];for(var e=Math.ceil(this.length/this.pageSize),t=1;t<=e;t++)this.pageNumbers.push(t)}},{key:"goToChange",value:function(){this.paginator.pageIndex=this.goTo-1,this.searchFilterService.pageIndex=this.paginator.pageIndex,this.searchFilterService.pageSize=this.paginator.pageSize,this.emitPageEvent({length:this.paginator.length,pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize})}},{key:"emitPageEvent",value:function(e){this.page.next(e)}}]),e}()).\u0275fac=function(e){return new(e||h)(o.\u0275\u0275directiveInject(s.nJ))},h.\u0275cmp=o.\u0275\u0275defineComponent({type:h,selectors:[["app-paginator"]],viewQuery:function(e,t){var n;1&e&&o.\u0275\u0275viewQuery(a.NW,7),2&e&&o.\u0275\u0275queryRefresh(n=o.\u0275\u0275loadQuery())&&(t.paginator=n.first)},inputs:{length:"length",pageIndex:"pageIndex",pageSize:"pageSize",disabled:"disabled",hidePageSize:"hidePageSize",pageSizeOptions:"pageSizeOptions",showFirstLastButtons:"showFirstLastButtons",pageIndexChanged:["pageIndex","pageIndexChanged"],lengthChanged:["length","lengthChanged"],pageSizeChanged:["pageSize","pageSizeChanged"]},outputs:{page:"page"},decls:8,vars:8,consts:[[1,"d-flex"],[3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-paginator",1),o.\u0275\u0275listener("page",function(e){return t.onPaginateChange(e)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(2,"div",2),o.\u0275\u0275elementStart(3,"div",3),o.\u0275\u0275text(4,"Go To: "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-form-field"),o.\u0275\u0275elementStart(6,"mat-select",4),o.\u0275\u0275listener("ngModelChange",function(e){return t.goTo=e})("selectionChange",function(){return t.goToChange()}),o.\u0275\u0275template(7,p,2,2,"mat-option",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("length",t.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",o.\u0275\u0275pureFunction0(7,f))("showFirstLastButtons",!0),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngModel",t.goTo),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.pageNumbers))},directives:[a.NW,l.KE,c.gD,d.NgControlStatus,d.NgModel,m.NgForOf,u.ey],styles:['.mat-paginator[_ngcontent-%COMP%]{width:100%;float:right}.d-flex[_ngcontent-%COMP%]{display:flex}  .mat-select-trigger{font-size:12px}  .mat-option{font-size:12px}.go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}.go-to-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:56px;margin:6px 4px 0;font-size:12px;font-family:Roboto,"Helvetica Neue",sans-serif}.go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{width:36px;margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,"Helvetica Neue",sans-serif}']}),h)}}])}();