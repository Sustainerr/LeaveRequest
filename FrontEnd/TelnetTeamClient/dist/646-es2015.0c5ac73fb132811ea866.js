"use strict";(self.webpackChunktelnetteam_app=self.webpackChunktelnetteam_app||[]).push([[646],{81040:function(e,t,n){n.d(t,{U:function(){return p}});var i=n(38583),r=n(32403),a=n(3679),o=n(22238),c=n(11494),s=n(10337),l=n(96523),m=n(36332),d=n(37716);let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=d.\u0275\u0275defineInjector({providers:[s.gq,l.X],imports:[[i.CommonModule,r.m,a.FormsModule,a.ReactiveFormsModule,r.q,o.Is,o.Is,m.o,c.JX],c.JX]}),e})()},88136:function(e,t,n){n.d(t,{c:function(){return w}});var i=n(37716),r=n(90046),a=n(92340),o=n(44995),c=n(10337),s=n(96523),l=n(88452),m=n(38583),d=n(3679),p=n(98295),u=n(49983),h=n(43220),v=n(36144),f=n(72172),g=n(67441),y=n(72458);const I=["estimateDetailsForm"];function S(e,t){1&e&&(i.\u0275\u0275elementStart(0,"h5",37),i.\u0275\u0275text(1," Add Quotation "),i.\u0275\u0275elementEnd())}function P(e,t){1&e&&(i.\u0275\u0275elementStart(0,"h5",37),i.\u0275\u0275text(1," Edit Quotation "),i.\u0275\u0275elementEnd())}function E(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",9),i.\u0275\u0275elementStart(1,"div",38),i.\u0275\u0275elementStart(2,"h5"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(e.estimate.projectName)}}function N(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-option",39),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275property("value",e.description),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.description," ")}}function D(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-option",39),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275property("value",e.id),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.description," ")}}function C(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-option",39),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275property("value",e.id),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.description," ")}}function b(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",28),i.\u0275\u0275elementStart(1,"button",40),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().previewFile()}),i.\u0275\u0275element(2,"em",41),i.\u0275\u0275text(3,"Preview"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("disabled",e.fileChange||null===e.estimate.estimateFileName)}}let w=(()=>{class e{constructor(e,t,n,r,a,o){this.projectService=e,this.notificationService=t,this.invoicingService=n,this.dateTimeService=r,this._avRoute=a,this.fileService=o,this.isSavedEstimate=new i.EventEmitter,this.mutliClickDisable=!1,this.servicesDisabled=!1,this.activitiesIdentifiers=[],this.clientServicesIdentifiers=[],this.fileChange=!1,this.statuses=[{description:"Emis"},{description:"Lanc\xe9"},{description:"Factur\xe9"},{description:"Clos"},{description:"Suspendu"},{description:"Arr\xeat\xe9"}]}ngOnInit(){this.user=JSON.parse(localStorage.getItem("currentUser"));const e=+this._avRoute.snapshot.paramMap.get("estimateId");this.isEditEstimate&&void 0===this.selectedEstimate&&this.invoicingService.getEstimate(e).subscribe(e=>{this.estimate=Object.assign(new r.B0,e[0])}),this.getActivities(),this.project?(this.estimate=Object.assign(new r.B0,this.selectedEstimate),this.getListClientServices(this.estimate.clientId)):this.getListClientServices(this.selectedEstimate.clientId),this.isEditEstimate?(this.estimate=Object.assign(new r.B0,this.selectedEstimate),this.invoicingService.getEstimateFile(this.estimate.estimateId).subscribe(e=>{0!==e.length&&(this.estimate.estimateFileData=e[0].estimateFileData,this.estimate.estimateFileName=e[0].estimateFileName,this.estimate.estimateFileType=e[0].estimateFileType)}),this.getListClientServices(this.estimate.clientId)):(this.estimate=new r.B0,this.estimate.clientName=this.project.customerName,this.estimate.activityId=this.project.activityId)}getActivities(){this.projectService.getActivities().subscribe(e=>{null!=e&&(this.activitiesIdentifiers=e)})}getListClientServices(e){this.projectService.getClientServices(e).subscribe(e=>{this.clientServicesIdentifiers=e,0===e.length&&(this.servicesDisabled=!0)})}onFileChange(e){const t=new FileReader;if(e.target.files&&e.target.files.length>0){const n=e.target.files[0];n.size<1024*a.N.maxEstimateFileSize?(this.fileChange=!0,t.readAsDataURL(n),t.onload=()=>{this.estimate.estimateFileName=n.name,this.estimate.estimateFileType=n.type,this.estimate.estimateFileData=this.fileService.FromFileToDbFormat(t.result.toString().split(",")[1]),this.estimate.estimateFileChanged=1}):(this.estimate.estimateFileData=null,this.notificationService.warning(`File must be lower the size of ${a.N.maxEstimateFileSize} Kilobytes`))}}previewFile(){const e=this.fileService.FromDbToFileFormat(this.estimate.estimateFileData,this.estimate.estimateFileType),t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=this.estimate.estimateFileName,n.click(),window.URL.revokeObjectURL(t)}save(){this.mutliClickDisable=!0,setTimeout(()=>{this.mutliClickDisable=!1},1e3),this.project&&(this.estimate.projectId=this.project.projectId,this.estimate.clientId=this.project.customerId),this.detailsForm.valid?null!==this.estimate.estimateFileName?(this.estimate.estimateAmount=this.estimate.estimateAmount.toString().replace(",","."),this.invoicingService.saveEstimateDetails(this.estimate).subscribe(e=>{0!==e?(this.notificationService.success("Quotation saved successfully"),this.isSavedEstimate.emit(!0)):this.notificationService.danger("Reference already exists!")})):this.notificationService.danger("Please select document"):this.notificationService.danger("Please fill all required fields")}onChangeActivity(e){this.selectedActivityIdentifier=this.activitiesIdentifiers.find(t=>t.id===e)}onCancel(){this.isSavedEstimate.emit(!0)}isDespliyedTitle(){return null==this.project}dateOnly(e){return this.dateTimeService.dateOnly(e)}allowsSaveEstimate(){return null==this.isvisibleEditProject||this.isvisibleEditProject}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(o.Y4),i.\u0275\u0275directiveInject(c.gq),i.\u0275\u0275directiveInject(s.X),i.\u0275\u0275directiveInject(c.Cv),i.\u0275\u0275directiveInject(l.gz),i.\u0275\u0275directiveInject(c.Ip))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-edit-estimate"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(I,7),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.detailsForm=e.first)}},inputs:{project:"project",isNewEstimate:"isNewEstimate",isEditEstimate:"isEditEstimate",selectedEstimate:"selectedEstimate",isvisibleEditProject:"isvisibleEditProject"},outputs:{isSavedEstimate:"isSavedEstimate"},decls:56,vars:25,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],["_ngcontent-c17","",1,"main-color","card-header","ng-tns-c17-6","ng-star-inserted"],["_ngcontent-c17","","class","card-header-text","style","color: #ffffff;",4,"ngIf"],[1,"card-body"],["id","estimateDetailsForm"],["estimateDetailsForm","ngForm"],["class","row m-b-15",4,"ngIf"],[1,"row","m-b-15"],[1,"col-sm-3"],["placeholder","Reference","matInput","","name","Reference","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Estimate Date","name","estimateDate","required","",3,"matDatepicker","ngModel","ngModelChange","keypress"],["matSuffix","",3,"for"],[3,"startView"],["PickerStartDay",""],[1,"col-sm-2"],["placeholder","Edition","matInput","","name","Edition","required","","appTextValidator","","maxlength","20",3,"ngModel","ngModelChange"],["placeholder","Amount","matInput","","name","Amount","appNumberValidator","","required","",3,"ngModel","inputValue","ngModelChange"],["placeholder","Status","name","stateProject","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Activity","name","activityName","required","",3,"ngModel","disabled","ngModelChange","selectionChange"],["matInput","","placeholder","Customer","name","Client","disabled","",3,"ngModel","ngModelChange"],["placeholder","Service","name","clientService",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","Description","name","description","maxlength","255","required","",3,"ngModel","ngModelChange"],["placeholder","Path","matInput","","name","Link","disabled","",3,"ngModel","ngModelChange"],[1,"col-sm-10"],["required","","placeholder","File Name","matInput","","name","File","disabled","",3,"ngModel","ngModelChange"],[1,"col-sm-1"],[1,"btn","btn-sm","btn-primary","waves-light","m-r-10","ripple","file-upload-button",2,"font-size","inherit"],["type","file","id","av","accept","application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document",3,"click","change"],["fileInput",""],[1,"icofont","icofont-upload-alt","mr-0","mr-md-2"],["class","col-sm-1",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-md","btn-primary","ripple","light","m-r-20",3,"disabled","click"],[1,"btn","btn-md","btn-default","ripple",3,"click"],["_ngcontent-c17","",1,"card-header-text",2,"color","#ffffff"],[1,"card-header"],[3,"value"],["type","button",1,"btn","btn-sm","btn-primary","waves-light","m-r-10","ripple",2,"font-size","inherit",3,"disabled","click"],[1,"icofont","icofont-eye-alt","mr-0","mr-md-2"]],template:function(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275template(4,S,2,0,"h5",4),i.\u0275\u0275template(5,P,2,0,"h5",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",5),i.\u0275\u0275elementStart(7,"form",6,7),i.\u0275\u0275template(9,E,4,1,"div",8),i.\u0275\u0275elementStart(10,"div",9),i.\u0275\u0275elementStart(11,"mat-form-field",10),i.\u0275\u0275elementStart(12,"input",11),i.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateReference=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"mat-form-field",10),i.\u0275\u0275elementStart(14,"input",12),i.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateDate=e})("keypress",function(e){return t.dateOnly(e)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(15,"mat-datepicker-toggle",13),i.\u0275\u0275element(16,"mat-datepicker",14,15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(18,"mat-form-field",16),i.\u0275\u0275elementStart(19,"input",17),i.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateEdit=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"mat-form-field",16),i.\u0275\u0275elementStart(21,"input",18),i.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateAmount=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(22,"mat-form-field",16),i.\u0275\u0275elementStart(23,"mat-select",19),i.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateState=e}),i.\u0275\u0275template(24,N,2,2,"mat-option",20),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(25,"div",9),i.\u0275\u0275elementStart(26,"mat-form-field",10),i.\u0275\u0275elementStart(27,"mat-select",21),i.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.activityId=e})("selectionChange",function(e){return t.onChangeActivity(e.value)}),i.\u0275\u0275template(28,D,2,2,"mat-option",20),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(29,"mat-form-field",10),i.\u0275\u0275elementStart(30,"input",22),i.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.clientName=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(31,"mat-form-field",16),i.\u0275\u0275elementStart(32,"mat-select",23),i.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.clientServiceId=e}),i.\u0275\u0275template(33,C,2,2,"mat-option",20),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(34,"div",9),i.\u0275\u0275elementStart(35,"mat-form-field",1),i.\u0275\u0275elementStart(36,"textarea",24),i.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateDesc=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(37,"div",9),i.\u0275\u0275elementStart(38,"mat-form-field",1),i.\u0275\u0275elementStart(39,"input",25),i.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateLien=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(40,"div",9),i.\u0275\u0275elementStart(41,"mat-form-field",26),i.\u0275\u0275elementStart(42,"input",27),i.\u0275\u0275listener("ngModelChange",function(e){return t.estimate.estimateFileName=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(43,"div",28),i.\u0275\u0275elementStart(44,"button",29),i.\u0275\u0275elementStart(45,"input",30,31),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275reference(46).value=null})("change",function(e){return t.onFileChange(e)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(47,"span"),i.\u0275\u0275element(48,"em",32),i.\u0275\u0275text(49,"Select"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(50,b,4,1,"div",33),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(51,"div",34),i.\u0275\u0275elementStart(52,"button",35),i.\u0275\u0275listener("click",function(){return t.save()}),i.\u0275\u0275text(53,"Save"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(54,"button",36),i.\u0275\u0275listener("click",function(){return t.onCancel()}),i.\u0275\u0275text(55,"Cancel"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275reference(17);i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",!t.isEditEstimate),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isEditEstimate),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.isDespliyedTitle()),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",t.estimate.estimateReference),i.\u0275\u0275advance(2),i.\u0275\u0275property("matDatepicker",e)("ngModel",t.estimate.estimateDate),i.\u0275\u0275advance(1),i.\u0275\u0275property("for",e),i.\u0275\u0275advance(1),i.\u0275\u0275property("startView","month"),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",t.estimate.estimateEdit),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",t.estimate.estimateAmount)("inputValue",t.estimate.estimateAmount),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",t.estimate.estimateState),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.statuses),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",t.estimate.activityId)("disabled",null!==t.estimate.activityName),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.activitiesIdentifiers),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",t.estimate.clientName),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",!0===t.servicesDisabled)("ngModel",t.estimate.clientServiceId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.clientServicesIdentifiers),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",t.estimate.estimateDesc),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",t.estimate.estimateLien),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",t.estimate.estimateFileName),i.\u0275\u0275advance(8),i.\u0275\u0275property("ngIf",t.isEditEstimate),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",!t.allowsSaveEstimate()||t.mutliClickDisable)}},directives:[m.NgIf,d.\u0275NgNoValidate,d.NgControlStatusGroup,d.NgForm,p.KE,u.Nt,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,h.hl,h.nW,p.R9,h.Mq,v.s,d.MaxLengthValidator,f.z,g.gD,m.NgForOf,y.ey],styles:['form[_ngcontent-%COMP%]{padding:10px 20px}.file-upload-button[_ngcontent-%COMP%]{overflow:hidden;position:relative}.file-upload-button[_ngcontent-%COMP%]:after{content:"Upload";color:#fff;font-size:1.5rem;text-align:center}.file-upload-button[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{font-size:100px;left:0;opacity:0;position:absolute;top:0}.file-info[_ngcontent-%COMP%]{color:#999;font-family:Arial,Helvetica,sans-serif;margin-left:.3rem}.main-color[_ngcontent-%COMP%]{background:#3f629d}']}),e})()},82480:function(e,t,n){n.d(t,{w:function(){return p}});var i=n(38583),r=n(32403),a=n(3679),o=n(22238),c=n(11494),s=n(10337),l=n(88136),m=n(36332),d=n(37716);let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=d.\u0275\u0275defineInjector({providers:[s.gq,l.c],imports:[[i.CommonModule,r.m,a.FormsModule,a.ReactiveFormsModule,r.q,o.Is,o.Is,m.o,c.JX],c.JX]}),e})()},42352:function(e,t,n){n.d(t,{N:function(){return q}});var i=n(37716),r=n(11494),a=n(32789),o=n(88259),c=n.n(o),s=n(96523),l=n(10337),m=n(22238),d=n(88452),p=n(38583),u=n(38590),h=n(62758),v=n(17224);function f(e,t){1&e&&(i.\u0275\u0275elementStart(0,"mat-header-cell",17),i.\u0275\u0275text(1,"Reference"),i.\u0275\u0275elementEnd())}function g(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-cell",18),i.\u0275\u0275elementStart(1,"span",19),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275propertyInterpolate("matTooltip",e.estimateReference),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(e.estimateReference)}}function y(e,t){1&e&&(i.\u0275\u0275elementStart(0,"mat-header-cell",17),i.\u0275\u0275text(1,"Description"),i.\u0275\u0275elementEnd())}function I(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-cell",18),i.\u0275\u0275elementStart(1,"span",19),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275propertyInterpolate("matTooltip",e.estimateDesc),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(e.estimateDesc)}}function S(e,t){1&e&&(i.\u0275\u0275elementStart(0,"mat-header-cell",17),i.\u0275\u0275text(1,"Edition"),i.\u0275\u0275elementEnd())}function P(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-cell"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.estimateEdit," ")}}function E(e,t){1&e&&(i.\u0275\u0275elementStart(0,"mat-header-cell",17),i.\u0275\u0275text(1,"Date"),i.\u0275\u0275elementEnd())}function N(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-cell"),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"shortDate"),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,1,e.estimateDate)," ")}}function D(e,t){1&e&&(i.\u0275\u0275elementStart(0,"mat-header-cell",17),i.\u0275\u0275text(1,"Customer"),i.\u0275\u0275elementEnd())}function C(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-cell",18),i.\u0275\u0275elementStart(1,"span",19),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275propertyInterpolate("matTooltip",e.clientName),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",e.clientName," ")}}function b(e,t){1&e&&(i.\u0275\u0275elementStart(0,"mat-header-cell",17),i.\u0275\u0275text(1,"Status"),i.\u0275\u0275elementEnd())}function w(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-cell"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.estimateState," ")}}function A(e,t){1&e&&(i.\u0275\u0275elementStart(0,"mat-header-cell",17),i.\u0275\u0275text(1,"Order"),i.\u0275\u0275elementEnd())}function x(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-cell"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.contractReference," ")}}function T(e,t){1&e&&(i.\u0275\u0275elementStart(0,"mat-header-cell",17),i.\u0275\u0275text(1,"Order Date"),i.\u0275\u0275elementEnd())}function M(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-cell"),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"shortDate"),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,1,e.orderDate)," ")}}function R(e,t){1&e&&(i.\u0275\u0275elementStart(0,"mat-header-cell",17),i.\u0275\u0275text(1,"Batch"),i.\u0275\u0275elementEnd())}function j(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-cell",24),i.\u0275\u0275listener("click",function(){const t=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext(2).goToBatchesDetail(t.pifId,t.projectId,t.batchId)}),i.\u0275\u0275elementStart(1,"span",19),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;i.\u0275\u0275propertyInterpolate("matTooltip",e.batchRefference),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",e.batchRefference," ")}}function O(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementContainerStart(1,20),i.\u0275\u0275template(2,A,2,0,"mat-header-cell",3),i.\u0275\u0275template(3,x,2,1,"mat-cell",7),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementContainerStart(4,21),i.\u0275\u0275template(5,T,2,0,"mat-header-cell",3),i.\u0275\u0275template(6,M,3,3,"mat-cell",7),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementContainerStart(7,22),i.\u0275\u0275template(8,R,2,0,"mat-header-cell",3),i.\u0275\u0275template(9,j,3,2,"mat-cell",23),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementContainerEnd())}function F(e,t){1&e&&(i.\u0275\u0275elementStart(0,"mat-header-cell",17),i.\u0275\u0275text(1,"Amount"),i.\u0275\u0275elementEnd())}function B(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-cell"),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"numberForm"),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,1,e.estimateAmount)," ")}}function G(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0,25),i.\u0275\u0275template(1,F,2,0,"mat-header-cell",3),i.\u0275\u0275template(2,B,3,3,"mat-cell",7),i.\u0275\u0275elementContainerEnd())}function V(e,t){1&e&&i.\u0275\u0275element(0,"mat-header-cell")}function k(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-cell"),i.\u0275\u0275elementStart(1,"button",26),i.\u0275\u0275listener("click",function(){const t=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext().toggleEditDetails(t)}),i.\u0275\u0275elementStart(2,"em",27),i.\u0275\u0275text(3,"edit"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(4," \xa0\xa0 "),i.\u0275\u0275elementStart(5,"button",28),i.\u0275\u0275listener("click",function(){const t=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext().deleteEstimate(t.estimateId)}),i.\u0275\u0275elementStart(6,"em",27),i.\u0275\u0275text(7,"delete"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(5),i.\u0275\u0275property("disabled",!e.allowsDeleteEstimate())}}function z(e,t){1&e&&i.\u0275\u0275element(0,"mat-header-row",29)}function _(e,t){1&e&&i.\u0275\u0275element(0,"mat-row")}let q=(()=>{class e{constructor(e,t,n,r,o,c){this.invoicingService=e,this.notificationService=t,this.dialog=n,this.searchFilterService=r,this.router=o,this.activeRoute=c,this.displayedColumns=["estimateReference","estimateDesc","estimateEdit","estimateDate","clientName","estimateState","contractReference","orderDate","batchRefference","buttons"],this.dataSource=new a.by,this.estimateState=new i.EventEmitter}ngOnInit(){this.user=JSON.parse(localStorage.getItem("currentUser")),this.contractDetails||(this.displayedColumns=["estimateReference","estimateDesc","estimateEdit","estimateDate","clientName","estimateState","amount","buttons"]),this.isEditEstimate=!1,this.listView=!0,this.dataSource=new a.by(this.estimates),this.subscription=this.searchFilterService.resultChanged.subscribe(()=>{this.dataSource=new a.by(this.searchFilterService.showingDataLastFilter)})}ngOnDestroy(){this.subscription.unsubscribe()}ngAfterViewInit(){this.dataSource.sort=this.sort}toggleEditDetails(e){this.isEditEstimate=!0,this.estimateState.emit(e)}deleteEstimate(e){this.invoicingService.getEstimateContracts(e).subscribe(t=>{0===t[0].contractsCount?c().fire({text:"Are you sure to delete this Quotation ?",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",showLoaderOnConfirm:!0,preConfirm:()=>{this.invoicingService.deleteEstimate(e).subscribe(()=>{this.notificationService.success("This Quotation is deleted"),this.invoicingService.reloadEstimates.next()},()=>{this.notificationService.danger("Delete quotation failed")})}}):this.notificationService.danger("Delete quotation failed,this estimate has an order")})}onSortData(e){this.invoicingService.sortEstimates.next(e)}goToBatchesDetail(e,t,n){this.router.navigate(["/project-management/project/edit/"+e.toString()+"/"+t.toString(),{title:"batches",batchId:n}],{relativeTo:this.activeRoute})}allowsDeleteEstimate(){return null==this.isvisibleEditProject||this.isvisibleEditProject}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(s.X),i.\u0275\u0275directiveInject(l.gq),i.\u0275\u0275directiveInject(m.uw),i.\u0275\u0275directiveInject(l.nJ),i.\u0275\u0275directiveInject(d.F0),i.\u0275\u0275directiveInject(d.gz))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-estimates"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(r.YE,7),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.sort=e.first)}},inputs:{contractDetails:"contractDetails",project:"project",estimates:"estimates",estimateEditable:"estimateEditable",isvisibleEditProject:"isvisibleEditProject"},outputs:{estimateState:"estimateState"},decls:27,vars:6,consts:[["matSort","","matSortDirection","asc","matSortDisableClear","",3,"dataSource","matSortChange"],["table",""],["matColumnDef","estimateReference"],["mat-sort-header","",4,"matHeaderCellDef"],[3,"matTooltip",4,"matCellDef"],["matColumnDef","estimateDesc"],["matColumnDef","estimateEdit"],[4,"matCellDef"],["matColumnDef","estimateDate"],["matColumnDef","clientName"],["matColumnDef","estimateState"],[4,"ngIf"],["matColumnDef","amount",4,"ngIf"],["matColumnDef","buttons"],[4,"matHeaderCellDef"],["class"," table-primary table-*",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[3,"matTooltip"],[1,"span-ellipsis"],["matColumnDef","contractReference"],["matColumnDef","orderDate"],["matColumnDef","batchRefference"],["class","reference",3,"matTooltip","click",4,"matCellDef"],[1,"reference",3,"matTooltip","click"],["matColumnDef","amount"],["type","button","matTooltip","Edit estimate",1,"btn","btn-mini","btn-primary","ripple","f-center","light",3,"click"],[1,"material-icons"],["type","button","matTooltip","Delete estimate",1,"btn","btn-mini","btn-danger","ripple","f-center","light",3,"disabled","click"],[1,"table-primary","table-*"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"mat-table",0,1),i.\u0275\u0275listener("matSortChange",function(e){return t.onSortData(e)}),i.\u0275\u0275elementContainerStart(2,2),i.\u0275\u0275template(3,f,2,0,"mat-header-cell",3),i.\u0275\u0275template(4,g,3,2,"mat-cell",4),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementContainerStart(5,5),i.\u0275\u0275template(6,y,2,0,"mat-header-cell",3),i.\u0275\u0275template(7,I,3,2,"mat-cell",4),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementContainerStart(8,6),i.\u0275\u0275template(9,S,2,0,"mat-header-cell",3),i.\u0275\u0275template(10,P,2,1,"mat-cell",7),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementContainerStart(11,8),i.\u0275\u0275template(12,E,2,0,"mat-header-cell",3),i.\u0275\u0275template(13,N,3,3,"mat-cell",7),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementContainerStart(14,9),i.\u0275\u0275template(15,D,2,0,"mat-header-cell",3),i.\u0275\u0275template(16,C,3,2,"mat-cell",4),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementContainerStart(17,10),i.\u0275\u0275template(18,b,2,0,"mat-header-cell",3),i.\u0275\u0275template(19,w,2,1,"mat-cell",7),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275template(20,O,10,0,"ng-container",11),i.\u0275\u0275template(21,G,3,0,"ng-container",12),i.\u0275\u0275elementContainerStart(22,13),i.\u0275\u0275template(23,V,1,0,"mat-header-cell",14),i.\u0275\u0275template(24,k,8,1,"mat-cell",7),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275template(25,z,1,0,"mat-header-row",15),i.\u0275\u0275template(26,_,1,0,"mat-row",16),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("dataSource",t.dataSource),i.\u0275\u0275advance(20),i.\u0275\u0275property("ngIf",t.contractDetails),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.contractDetails),i.\u0275\u0275advance(4),i.\u0275\u0275property("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),i.\u0275\u0275advance(1),i.\u0275\u0275property("matRowDefColumns",t.displayedColumns))},directives:[a.BZ,r.YE,a.w1,a.fO,a.Dz,p.NgIf,a.as,a.nj,a.ge,r.nU,a.ev,u.gM,a.XQ,a.Gk],pipes:[h.M,v.$],styles:[".mat-table[_ngcontent-%COMP%]{overflow:auto;border-radius:4px;max-height:calc(100vh - 392px)}table[_ngcontent-%COMP%]{width:100%}.span-ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mat-header-cell[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:600}.material-icons[_ngcontent-%COMP%]{font-size:15px}.mat-column-estimateReference[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}.mat-column-estimateEdit[_ngcontent-%COMP%]{flex:0 0 6%!important;width:6%!important;justify-content:center}.mat-column-estimateDate[_ngcontent-%COMP%]{flex:0 0 10%!important;width:10%!important;justify-content:center}.mat-column-clientName[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}.mat-column-estimateState[_ngcontent-%COMP%]{flex:0 0 6%!important;width:6%!important;justify-content:center}.mat-column-contractReference[_ngcontent-%COMP%]{width:11%!important}.mat-column-contractDate[_ngcontent-%COMP%]{width:8%!important;justify-content:center}.mat-column-batchRefference[_ngcontent-%COMP%]{width:16%!important}.mat-column-amount[_ngcontent-%COMP%]{flex:0 0 8%!important;width:8%!important;text-align:right;justify-content:flex-end;margin-right:1%}.mat-column-buttons[_ngcontent-%COMP%]{flex:0 0 8%!important;width:8%!important;justify-content:center}.pdf-ico[_ngcontent-%COMP%]{font-size:35px;margin-bottom:25px}  .mat-sort-header-arrow{color:#fff}.reference[_ngcontent-%COMP%]{color:#00f;cursor:pointer}"]}),e})()},27205:function(e,t,n){n.d(t,{b:function(){return O}});var i=n(37716),r=n(3679),a=n(70833),o=n(46782),c=n(90046),s=n(10337),l=n(96523),m=n(88452),d=n(6518),p=n(38583),u=n(98295),h=n(49983),v=n(36144),f=n(72172),g=n(67441),y=n(43220),I=n(72458),S=n(52218),P=n(76627);const E=["InvoiceDetailsForm"],N=["BatchSelect"];function D(e,t){1&e&&(i.\u0275\u0275elementStart(0,"h5",32),i.\u0275\u0275text(1," Add Invoice "),i.\u0275\u0275elementEnd())}function C(e,t){1&e&&(i.\u0275\u0275elementStart(0,"h5",32),i.\u0275\u0275text(1," Edit Invoice "),i.\u0275\u0275elementEnd())}const b=function(e,t){return{"label-success":e,"label-danger":t}};function w(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"label",33),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction2(2,b,1===e.invoice.invoiceDeposit,1!==e.invoice.invoiceDeposit)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(e.getValidationState(e.invoice.invoiceDeposit))}}function A(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",10),i.\u0275\u0275elementStart(1,"div",34),i.\u0275\u0275elementStart(2,"h5"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(e.invoice.projectName)}}function x(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-option",39),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275property("value",e.batchId),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.batchReference," ")}}function T(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-form-field",11),i.\u0275\u0275elementStart(1,"mat-select",35,36),i.\u0275\u0275listener("selectionChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onChangeBatch(t.value)})("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().batch.batchId=t}),i.\u0275\u0275elementStart(3,"mat-option"),i.\u0275\u0275elementStart(4,"ngx-mat-select-search",37),i.\u0275\u0275elementStart(5,"mat-icon",38),i.\u0275\u0275text(6,"close"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,x,2,2,"mat-option",20),i.\u0275\u0275pipe(8,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",e.batch.batchId),i.\u0275\u0275advance(3),i.\u0275\u0275property("formControl",e.batchFilterCtrl)("placeholderLabel","Search")("noEntriesFoundLabel","No options found"),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(8,5,e.filteredBatches))}}function M(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"mat-form-field",11),i.\u0275\u0275elementStart(1,"input",40),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().batch.batchReference=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",e.batch.batchReference)}}function R(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-option",39),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275property("value",e.id),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.description," ")}}const j=function(){return{standalone:!0}};let O=(()=>{class e{constructor(e,t,n,o,s){this.notificationService=e,this.invoicingService=t,this.dateTimeService=n,this._avRoute=o,this.mailService=s,this.isSavedInvoice=new i.EventEmitter,this.batch=new c.El,this.initialInvoice=new c.mw,this.invoice=new c.mw,this.batchFilterCtrl=new r.FormControl,this._onDestroy=new a.xQ,this.filteredBatches=new a.tq(1),this.mutliClickDisable=!1}ngOnInit(){if(this.user=JSON.parse(localStorage.getItem("currentUser")),this.batch.batchId=null,null!==this.project||void 0!==this.project){const e=+this._avRoute.snapshot.paramMap.get("invoiceId");this.getInvoice(e),this.getBatchNotInvoiced()}this.getListCurrency(),this.batchFilterCtrl.valueChanges.pipe((0,o.R)(this._onDestroy)).subscribe(()=>{this.filterBatches()})}getInvoice(e){this.isEditInvoice&&void 0===this.selectedInvoice&&this.invoicingService.getInvoice(e).subscribe(e=>{this.invoice=Object.assign(new c.mw,e[0]),this.invoice.invoiceAmount=this.invoice.invoiceAmount.toString().replace(",","."),this.invoice.invoiceNetToBePayed=this.invoice.invoiceNetToBePayed.toString().replace(",","."),this.initialInvoice=Object.assign(new c.mw,e[0]),this.initialInvoice.invoiceAmount=this.initialInvoice.invoiceAmount.toString().replace(",","."),this.initialInvoice.invoiceNetToBePayed=this.initialInvoice.invoiceNetToBePayed.toString().replace(",","."),this.getBatchesByProject(this.project.projectId)}),this.isEditInvoice&&0===e||void 0!==this.selectedInvoice?(this.invoice=Object.assign(new c.mw,this.selectedInvoice),this.initialInvoice=Object.assign(new c.mw,this.selectedInvoice),this.getBatchesByProject(this.project.projectId)):(this.invoice=new c.mw,this.invoice.currencyId=c.F.Euro)}getBatchNotInvoiced(){void 0===this.selectedInvoice&&(this.selectedInvoice=new c.mw,this.selectedInvoice.projectId=this.project.projectId,this.invoicingService.getBatchNotInvoiced(this.project.projectId).subscribe(e=>{this.batches=e,this.filteredBatches.next(this.batches.slice()),null!=this.batchId?(this.batch.batchId=this.batchId,this.onChangeBatch(this.batch.batchId)):1===e.length&&(this.batch.batchId=e[0].batchId,this.onChangeBatch(this.batch.batchId))}))}ngOnDestroy(){this.invoicingService.invoiceBatch.next()}getBatchesByProject(e){this.invoicingService.getBatchesByProject(e).subscribe(e=>{this.projectBatches=e,this.projectBatches.forEach(e=>{e.invoiceId===this.invoice.invoiceId&&(this.batch=e)})})}getListCurrency(){this.invoicingService.getCurrencies().subscribe(e=>{this.currenciesIdentifiers=e})}onChangeBatch(e){this.selectedBatch=this.batches.find(t=>t.batchId===e),this.invoicingService.getBatchesByProject(this.selectedInvoice.projectId).subscribe(t=>{t.forEach(t=>{t.batchId===e&&(this.batch=t,this.invoice.currencyId=this.batch.currencyId,this.invoice.invoiceAmount=this.batch.batchAmount,this.invoice.invoiceAdressedTo=this.batch.batchAdressedTo)})})}save(){if(this.mutliClickDisable=!0,setTimeout(()=>{this.mutliClickDisable=!1},1e3),this.detailsForm.valid){if(this.invoice.batchReference=this.batch.batchReference,this.invoice.batchId=this.batch.batchId,this.invoice.projectName=this.project.name,null===this.invoice.invoiceSaariReference){const e=Object.assign(new c.mw,this.invoice);this.invoicingService.saveInvoiceDetails(e).subscribe(()=>{if(this.notificationService.success("Invoice is saved successfully"),this.isSavedInvoice.emit(!0),!0!==this.isEditInvoice)this.mailService.invoiceAdded(this.invoice);else{const e=this.prepareModification(this.initialInvoice,this.invoice);0!==e.length&&this.mailService.invoiceModified(this.invoice,e)}},e=>{this.notificationService.danger("Save invoice failed")})}}else this.notificationService.danger("Please fill all required fields")}onCancel(){this.isSavedInvoice.emit(!0)}isDespliyedTitle(){return null==this.project}dateOnly(e){return this.dateTimeService.dateOnly(e)}getValidationState(e){return 1===e?"validated":"pending"}filterBatches(){if(!this.batches)return;let e=this.batchFilterCtrl.value;e?(e=e.toLowerCase(),this.filteredBatches.next(this.batches.filter(t=>t.batchReference.toLowerCase().indexOf(e)>-1))):this.filteredBatches.next(this.batches.slice())}modifInfoBuilder(e,t,n){return'<p><span style="color: #0000ff;">'+e+': <span style="color: #000000;"><strong>'+(t=null==t?"":t.toString())+"</strong> =&gt; <strong>"+(n=null==n?"":n.toString())+"</strong></span></span></p> "}prepareModification(e,t){let n="";return t.invoiceDeliveryDate!==e.invoiceDeliveryDate&&(n=n.concat(this.modifInfoBuilder("Delivery Date",this.dateTimeService.getShortFormat(e.invoiceDeliveryDate),this.dateTimeService.getShortFormat(t.invoiceDeliveryDate)))),e.invoiceNetToBePayed!==t.invoiceNetToBePayed&&(n=n.concat(this.modifInfoBuilder("Net to pay",e.invoiceNetToBePayed,t.invoiceNetToBePayed))),e.invoiceReference!==t.invoiceReference&&(n=n.concat(this.modifInfoBuilder("Reference",e.invoiceReference,t.invoiceReference))),e.invoiceCashedOn!==t.invoiceCashedOn&&(n=n.concat(this.modifInfoBuilder("Cashed On",this.dateTimeService.getShortFormat(e.invoiceCashedOn),this.dateTimeService.getShortFormat(t.invoiceCashedOn)))),e.invoiceSaariReference!==t.invoiceSaariReference&&(n=n.concat(this.modifInfoBuilder("Saari Reference",e.invoiceSaariReference,t.invoiceSaariReference))),e.invoiceAdressedTo!==t.invoiceAdressedTo&&(n=n.concat(this.modifInfoBuilder("Adressed To",e.invoiceAdressedTo,t.invoiceAdressedTo))),e.currencyId!==t.currencyId&&(n=n.concat(this.modifInfoBuilder("Currency",e.currency,this.currenciesIdentifiers.find(e=>e.id===t.currencyId).description))),n}invoicePipe(e){return"0001-01-01T00:00:00"===e?"":e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(s.gq),i.\u0275\u0275directiveInject(l.X),i.\u0275\u0275directiveInject(s.Cv),i.\u0275\u0275directiveInject(m.gz),i.\u0275\u0275directiveInject(d.Y))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-edit-invoice"]],viewQuery:function(e,t){if(1&e&&(i.\u0275\u0275viewQuery(E,7),i.\u0275\u0275viewQuery(N,7)),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.detailsForm=e.first),i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.BatchSelect=e.first)}},inputs:{project:"project",isNewInvoice:"isNewInvoice",batchId:"batchId",selectedInvoice:"selectedInvoice",isEditInvoice:"isEditInvoice",selectedInvoiceId:"selectedInvoiceId",isvisibleEditProject:"isvisibleEditProject"},outputs:{isSavedInvoice:"isSavedInvoice"},decls:45,vars:27,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],["_ngcontent-c17","",1,"main-color","card-header","ng-tns-c17-6","ng-star-inserted"],["_ngcontent-c17","","class","card-header-text","style","color: #ffffff;",4,"ngIf"],["class","label",3,"ngClass",4,"ngIf"],[1,"card-body"],["id","InvoiceDetailsForm"],["InvoiceDetailsForm","ngForm"],["class","row m-b-15",4,"ngIf"],[1,"row","m-b-15"],[1,"col-sm-3"],["placeholder","Invoice Reference","matInput","","name","invoiceReference","required","",3,"ngModel","ngModelChange"],["class","col-sm-3",4,"ngIf"],["placeholder","Addressed To","matInput","","name","addressedTo","appTextValidator","","maxlength","50",3,"ngModel","ngModelChange"],["placeholder","Order Reference","matInput","","name","orderReference","disabled","",3,"ngModel","ngModelChange"],[1,"col-sm-2"],["placeholder","Amount","matInput","","name","Amount","appNumberValidator","","required","",3,"ngModel","inputValue","ngModelChange"],[1,"col-sm-1"],["placeholder","Currency","name","currency","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Net to pay","matInput","","name","netToBePayed","appNumberValidator","","required","",3,"ngModel","inputValue","ngModelChange"],["matInput","","placeholder","Delivery Date","name","invoiceDeliveryDate","required","",3,"matDatepicker","ngModel","ngModelChange","keypress"],["matSuffix","",3,"for"],[3,"startView"],["PickerStartDay",""],["matInput","","placeholder","Cashed On","name","invoiceCashedOn","disabled","",3,"matDatepicker","ngModel","ngModelOptions","ngModelChange","keypress"],["picker11",""],["placeholder","Saari Reference","matInput","","name","saariReference","disabled","",3,"ngModel","ngModelChange"],[1,"text-center"],["type","submit",1,"btn","btn-md","btn-primary","ripple","light","m-r-20",3,"disabled","click"],[1,"btn","btn-md","btn-default","ripple",3,"click"],["_ngcontent-c17","",1,"card-header-text",2,"color","#ffffff"],[1,"label",3,"ngClass"],[1,"card-header"],["placeholder","Batch Reference","name","BatchReference","required","",3,"ngModel","selectionChange","ngModelChange"],["BatchSelect",""],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["ngxMatSelectSearchClear",""],[3,"value"],["placeholder","Batch Reference","matInput","","name","BatchReference","disabled","",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275template(4,D,2,0,"h5",4),i.\u0275\u0275template(5,C,2,0,"h5",4),i.\u0275\u0275template(6,w,2,5,"label",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",6),i.\u0275\u0275elementStart(8,"form",7,8),i.\u0275\u0275template(10,A,4,1,"div",9),i.\u0275\u0275elementStart(11,"div",10),i.\u0275\u0275elementStart(12,"mat-form-field",11),i.\u0275\u0275elementStart(13,"input",12),i.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceReference=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(14,T,9,7,"mat-form-field",13),i.\u0275\u0275template(15,M,2,1,"mat-form-field",13),i.\u0275\u0275elementStart(16,"mat-form-field",11),i.\u0275\u0275elementStart(17,"input",14),i.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceAdressedTo=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(18,"mat-form-field",11),i.\u0275\u0275elementStart(19,"input",15),i.\u0275\u0275listener("ngModelChange",function(e){return t.batch.contractReference=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"div",10),i.\u0275\u0275elementStart(21,"mat-form-field",16),i.\u0275\u0275elementStart(22,"input",17),i.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceAmount=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(23,"mat-form-field",18),i.\u0275\u0275elementStart(24,"mat-select",19),i.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.currencyId=e}),i.\u0275\u0275template(25,R,2,2,"mat-option",20),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(26,"mat-form-field",16),i.\u0275\u0275elementStart(27,"input",21),i.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceNetToBePayed=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(28,"mat-form-field",16),i.\u0275\u0275elementStart(29,"input",22),i.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceDeliveryDate=e})("keypress",function(e){return t.dateOnly(e)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(30,"mat-datepicker-toggle",23),i.\u0275\u0275element(31,"mat-datepicker",24,25),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(33,"mat-form-field",16),i.\u0275\u0275elementStart(34,"input",26),i.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceCashedOn=e})("keypress",function(e){return t.dateOnly(e)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(35,"mat-datepicker-toggle",23),i.\u0275\u0275element(36,"mat-datepicker",24,27),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(38,"mat-form-field",11),i.\u0275\u0275elementStart(39,"input",28),i.\u0275\u0275listener("ngModelChange",function(e){return t.invoice.invoiceSaariReference=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(40,"div",29),i.\u0275\u0275elementStart(41,"button",30),i.\u0275\u0275listener("click",function(){return t.save()}),i.\u0275\u0275text(42,"Save"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(43,"button",31),i.\u0275\u0275listener("click",function(){return t.onCancel()}),i.\u0275\u0275text(44,"Cancel"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275reference(32),n=i.\u0275\u0275reference(37);i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",!t.isEditInvoice),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isEditInvoice),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isEditInvoice),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.isDespliyedTitle()),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",t.invoice.invoiceReference),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.isEditInvoice),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isEditInvoice),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",t.invoice.invoiceAdressedTo),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",t.batch.contractReference),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",t.invoice.invoiceAmount)("inputValue",t.invoice.invoiceAmount),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",t.invoice.currencyId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.currenciesIdentifiers),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",t.invoice.invoiceNetToBePayed)("inputValue",t.invoice.invoiceNetToBePayed),i.\u0275\u0275advance(2),i.\u0275\u0275property("matDatepicker",e)("ngModel",t.invoicePipe(t.invoice.invoiceDeliveryDate)),i.\u0275\u0275advance(1),i.\u0275\u0275property("for",e),i.\u0275\u0275advance(1),i.\u0275\u0275property("startView","month"),i.\u0275\u0275advance(3),i.\u0275\u0275property("matDatepicker",n)("ngModel",t.invoicePipe(t.invoice.invoiceCashedOn))("ngModelOptions",i.\u0275\u0275pureFunction0(26,j)),i.\u0275\u0275advance(1),i.\u0275\u0275property("for",n),i.\u0275\u0275advance(1),i.\u0275\u0275property("startView","month"),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",t.invoice.invoiceSaariReference),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",null!==t.invoice.invoiceSaariReference||!t.isvisibleEditProject||t.mutliClickDisable)}},directives:[p.NgIf,r.\u0275NgNoValidate,r.NgControlStatusGroup,r.NgForm,u.KE,h.Nt,r.DefaultValueAccessor,r.RequiredValidator,r.NgControlStatus,r.NgModel,v.s,r.MaxLengthValidator,f.z,g.gD,p.NgForOf,y.hl,y.nW,u.R9,y.Mq,p.NgClass,I.ey,S.nu,r.FormControlDirective,P.Hw,S.w5],pipes:[p.AsyncPipe],styles:[".main-color[_ngcontent-%COMP%]{background:#3f629d}"]}),e})()},88720:function(e,t,n){n.d(t,{b:function(){return p}});var i=n(38583),r=n(3679),a=n(22238),o=n(11494),c=n(96523),s=n(32403),l=n(10337),m=n(36332),d=n(37716);let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=d.\u0275\u0275defineInjector({providers:[l.gq,c.X],imports:[[i.CommonModule,s.m,r.FormsModule,r.ReactiveFormsModule,s.q,a.Is,a.Is,m.o,o.JX],o.JX]}),e})()},38458:function(e,t,n){n.d(t,{l:function(){return d}});var i=n(38583),r=n(32403),a=n(3679),o=n(22238),c=n(11494),s=n(67827),l=n(91841),m=n(37716);let d=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=m.\u0275\u0275defineInjector({providers:[],imports:[[i.CommonModule,r.m,a.FormsModule,a.ReactiveFormsModule,r.q,o.Is,s.ZQ.forRoot(),l.HttpClientModule,c.JX],c.JX]}),e})()},72172:function(e,t,n){n.d(t,{z:function(){return r}});var i=n(37716);let r=(()=>{class e{constructor(){}blockPaste(e){const t=e.clipboardData.getData("text");let n=0,i=!1;for(;n<t.length&&!0!==i;)this.isNotNumber(t[n].charCodeAt())?(i=!0,e.preventDefault()):n++}onKeydownHandler(e){const t=e.key;void 0!==t&&(this.isNotNumber(t.charCodeAt())&&"Backspace"!==t&&"Delete"!==t&&"ArrowLeft"!==t&&"ArrowRight"!==t&&"Tab"!==t&&e.preventDefault(),null!=this.inputValue&&(-1!==this.inputValue.toString().indexOf(".")||-1!==this.inputValue.toString().indexOf(","))&&(46===t.charCodeAt()||44===t.charCodeAt())&&e.preventDefault())}isNotNumber(e){return e<44||e>57||45===e||47===e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","appNumberValidator",""]],hostBindings:function(e,t){1&e&&i.\u0275\u0275listener("paste",function(e){return t.blockPaste(e)})("keydown",function(e){return t.onKeydownHandler(e)})},inputs:{inputValue:"inputValue"}}),e})()},36144:function(e,t,n){n.d(t,{s:function(){return r}});var i=n(37716);let r=(()=>{class e{constructor(){}blockPaste(e){const t=e.clipboardData.getData("text");let n=0,i=!1;for(;n<t.length&&!0!==i;)this.isSpecialCharacter(t[n].charCodeAt())?(i=!0,e.preventDefault()):n++}onKeydownHandler(e){const t=e.key;void 0!==t&&this.isSpecialCharacter(t.charCodeAt())&&e.preventDefault()}isSpecialCharacter(e){return e<32||e>32&&e<38||61===e||63===e||64===e||e>90&&e<95||123===e||124===e||125===e||126===e||127===e||e>154&&224!==e&&231!==e&&232!==e&&233!==e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","appTextValidator",""]],hostBindings:function(e,t){1&e&&i.\u0275\u0275listener("paste",function(e){return t.blockPaste(e)})("keydown",function(e){return t.onKeydownHandler(e)})}}),e})()},90046:function(e,t,n){n.d(t,{tR:function(){return i},El:function(){return m},F:function(){return l},B0:function(){return v},ag:function(){return f},mw:function(){return P},z0:function(){return E},$l:function(){return N},KM:function(){return A},tA:function(){return j}});class i{}var r=n(82636),a=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};function o(e){return Reflect.metadata("type",e)}function c(e){return Reflect.metadata("dir",e)}function s(e){return Reflect.metadata("persisted",e)}var l=(()=>{return(e=l||(l={}))[e.Euro=5]="Euro",l;var e})();class m{constructor(){this.batchId=0,this.projectId=0,this.invoiceId=0,this.batchAmount=null,this.estimateId=null,this.contractId=null,this.batchTypeId=null,this.BatchChecked=!1,this.invoiceSaariReference=null}}a([o(r.sP.Decimal),c(r.Nm.Input),s(!0)],m.prototype,"batchId",void 0),a([o(r.sP.Decimal),c(r.Nm.Input),s(!0)],m.prototype,"projectId",void 0),a([s(!1)],m.prototype,"projectName",void 0),a([o(r.sP.Decimal),c(r.Nm.Input),s(!0)],m.prototype,"invoiceId",void 0),a([o(r.sP.Decimal),c(r.Nm.Input),s(!0)],m.prototype,"currencyId",void 0),a([o(r.sP.NVarchar2),c(r.Nm.Input),s(!0)],m.prototype,"batchReference",void 0),a([o(r.sP.NVarchar2),c(r.Nm.Input),s(!0)],m.prototype,"batchDescription",void 0),a([o(r.sP.Date),c(r.Nm.Input),s(!0)],m.prototype,"batchDeliveryDate",void 0),a([o(r.sP.Decimal),c(r.Nm.Input),s(!0)],m.prototype,"batchAmount",void 0),a([o(r.sP.NVarchar2),c(r.Nm.Input),s(!0)],m.prototype,"batchAdressedTo",void 0),a([o(r.sP.Decimal),c(r.Nm.Input),s(!0)],m.prototype,"estimateId",void 0),a([o(r.sP.Decimal),c(r.Nm.Input),s(!0)],m.prototype,"contractId",void 0),a([s(!1)],m.prototype,"contractReference",void 0),a([o(r.sP.Decimal),c(r.Nm.Input),s(!0)],m.prototype,"batchTypeId",void 0),a([s(!1)],m.prototype,"BatchChecked",void 0),a([s(!1)],m.prototype,"invoiceDeliveryDate",void 0),a([s(!1)],m.prototype,"invoiceNetToBePayed",void 0),a([s(!1)],m.prototype,"invoiceSaariReference",void 0),a([s(!1)],m.prototype,"currency",void 0),a([s(!1)],m.prototype,"estimateReference",void 0),a([s(!1)],m.prototype,"customer",void 0),a([s(!1)],m.prototype,"activityName",void 0);var d=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};function p(e){return Reflect.metadata("type",e)}function u(e){return Reflect.metadata("dir",e)}function h(e){return Reflect.metadata("persisted",e)}class v{constructor(){this.estimateId=0,this.estimateDesc=null,this.estimateLien="",this.projectId=0,this.clientId=0,this.activityId=0,this.clientServiceId=0,this.estimateAmount=null,this.estimateFileName=null,this.estimateFileType=null,this.estimateFileData=null,this.estimateFileChanged=0}}d([p(r.sP.Decimal),u(r.Nm.InputOutput),h(!0)],v.prototype,"estimateId",void 0),d([p(r.sP.NVarchar2),u(r.Nm.Input),h(!0)],v.prototype,"estimateReference",void 0),d([p(r.sP.Date),u(r.Nm.Input),h(!0)],v.prototype,"estimateDate",void 0),d([p(r.sP.NVarchar2),u(r.Nm.Input),h(!0)],v.prototype,"estimateDesc",void 0),d([p(r.sP.NVarchar2),u(r.Nm.Input),h(!0)],v.prototype,"estimateEdit",void 0),d([p(r.sP.NVarchar2),u(r.Nm.Input),h(!0)],v.prototype,"estimateState",void 0),d([p(r.sP.NVarchar2),u(r.Nm.Input),h(!0)],v.prototype,"estimateLien",void 0),d([p(r.sP.Decimal),u(r.Nm.Input),h(!0)],v.prototype,"projectId",void 0),d([p(r.sP.Decimal),u(r.Nm.Input),h(!0)],v.prototype,"clientId",void 0),d([p(r.sP.Decimal),u(r.Nm.Input),h(!0)],v.prototype,"activityId",void 0),d([p(r.sP.Decimal),u(r.Nm.Input),h(!0)],v.prototype,"clientServiceId",void 0),d([p(r.sP.Decimal),u(r.Nm.InputOutput),h(!0)],v.prototype,"estimateAmount",void 0),d([p(r.sP.Varchar2),u(r.Nm.Input),h(!0)],v.prototype,"estimateFileName",void 0),d([p(r.sP.Varchar2),u(r.Nm.Input),h(!0)],v.prototype,"estimateFileType",void 0),d([p(r.sP.Blob),u(r.Nm.Input),h(!0)],v.prototype,"estimateFileData",void 0),d([p(r.sP.Decimal),u(r.Nm.Input),h(!0)],v.prototype,"estimateFileChanged",void 0),d([h(!1)],v.prototype,"clientName",void 0),d([h(!1)],v.prototype,"activityName",void 0),d([h(!1)],v.prototype,"contractReference",void 0),d([h(!1)],v.prototype,"contractDate",void 0),d([h(!1)],v.prototype,"batchReference",void 0),d([h(!1)],v.prototype,"projectName",void 0);class f{}var g=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};function y(e){return Reflect.metadata("type",e)}function I(e){return Reflect.metadata("dir",e)}function S(e){return Reflect.metadata("persisted",e)}class P{constructor(){this.invoiceId=0,this.invoiceReference="N/A",this.invoiceAdressedTo="",this.invoiceAmount="",this.invoiceDeposit=0,this.invoiceNetToBePayed="",this.invoiceDeliveryDate=null,this.invoiceCashedOn=null,this.invoiceSaariReference=null,this.batchId=0,this.projectId=0,this.invoiceChecked=!1}}g([y(r.sP.Decimal),I(r.Nm.InputOutput),S(!0)],P.prototype,"invoiceId",void 0),g([y(r.sP.Decimal),I(r.Nm.Input),S(!0)],P.prototype,"currencyId",void 0),g([y(r.sP.NVarchar2),I(r.Nm.Input),S(!0)],P.prototype,"invoiceReference",void 0),g([y(r.sP.NVarchar2),I(r.Nm.Input),S(!0)],P.prototype,"invoiceAdressedTo",void 0),g([y(r.sP.NVarchar2),I(r.Nm.Input),S(!0)],P.prototype,"invoiceAmount",void 0),g([y(r.sP.Decimal),I(r.Nm.Input),S(!0)],P.prototype,"invoiceDeposit",void 0),g([y(r.sP.NVarchar2),I(r.Nm.Input),S(!0)],P.prototype,"invoiceNetToBePayed",void 0),g([y(r.sP.Date),I(r.Nm.Input),S(!0)],P.prototype,"invoiceDeliveryDate",void 0),g([y(r.sP.Date),I(r.Nm.Input),S(!1)],P.prototype,"invoiceCashedOn",void 0),g([y(r.sP.NVarchar2),I(r.Nm.Input),S(!1)],P.prototype,"invoiceSaariReference",void 0),g([y(r.sP.Decimal),I(r.Nm.Input),S(!0)],P.prototype,"batchId",void 0),g([S(!1)],P.prototype,"projectId",void 0),g([S(!1)],P.prototype,"projectName",void 0),g([S(!1)],P.prototype,"batchReference",void 0),g([S(!1)],P.prototype,"contractReference",void 0),g([S(!1)],P.prototype,"invoiceChecked",void 0),g([S(!1)],P.prototype,"currency",void 0),g([S(!1)],P.prototype,"customer",void 0),g([S(!1)],P.prototype,"activityId",void 0),g([S(!1)],P.prototype,"activityTotal",void 0),g([S(!1)],P.prototype,"activityName",void 0);class E{}class N{}var D=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};function C(e){return Reflect.metadata("type",e)}function b(e){return Reflect.metadata("dir",e)}function w(e){return Reflect.metadata("persisted",e)}class A{constructor(){this.contractId=0,this.contractTypeId=0,this.contractAmount=null,this.estimateId=null,this.contractLink="",this.contractFileType=null,this.contractFileName=null,this.contractFileData=null,this.contractFileChanged=0,this.projectId=0,this.offreConfId=null,this.commentaire=""}}D([C(r.sP.Decimal),b(r.Nm.Input),w(!0)],A.prototype,"contractId",void 0),D([C(r.sP.Decimal),b(r.Nm.Input),w(!0)],A.prototype,"contractTypeId",void 0),D([C(r.sP.Date),b(r.Nm.Input),w(!0)],A.prototype,"contractDate",void 0),D([C(r.sP.NVarchar2),b(r.Nm.Input),w(!0)],A.prototype,"contractName",void 0),D([w(!1)],A.prototype,"contractTypeName",void 0),D([C(r.sP.NVarchar2),b(r.Nm.Input),w(!0)],A.prototype,"contractReference",void 0),D([C(r.sP.NVarchar2),b(r.Nm.Input),w(!0)],A.prototype,"contractClientRef",void 0),D([C(r.sP.Decimal),b(r.Nm.Input),w(!0)],A.prototype,"contractAmount",void 0),D([C(r.sP.Decimal),b(r.Nm.Input),w(!0)],A.prototype,"estimateId",void 0),D([w(!1)],A.prototype,"estimateRef",void 0),D([C(r.sP.NVarchar2),b(r.Nm.Input),w(!0)],A.prototype,"contractLink",void 0),D([C(r.sP.NVarchar2),b(r.Nm.Input),w(!0)],A.prototype,"contractDesc",void 0),D([C(r.sP.NVarchar2),b(r.Nm.Input),w(!0)],A.prototype,"contractFileType",void 0),D([C(r.sP.NVarchar2),b(r.Nm.Input),w(!0)],A.prototype,"contractFileName",void 0),D([C(r.sP.Blob),b(r.Nm.Input),w(!0)],A.prototype,"contractFileData",void 0),D([C(r.sP.Decimal),b(r.Nm.Input),w(!0)],A.prototype,"contractFileChanged",void 0),D([C(r.sP.Decimal),b(r.Nm.Input),w(!0)],A.prototype,"projectId",void 0),D([C(r.sP.Decimal),b(r.Nm.Input),w(!0)],A.prototype,"offreConfId",void 0),D([C(r.sP.NVarchar2),b(r.Nm.Input),w(!0)],A.prototype,"commentaire",void 0),D([w(!1)],A.prototype,"offreConfDesc",void 0);var x=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};function T(e){return Reflect.metadata("type",e)}function M(e){return Reflect.metadata("dir",e)}function R(e){return Reflect.metadata("persisted",e)}class j{constructor(){this.priceId=0,this.currencyId=5,this.currencySymbol="\u20ac"}}x([T(r.sP.Decimal),M(r.Nm.InputOutput),R(!0)],j.prototype,"priceId",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"projectId",void 0),x([T(r.sP.Varchar2),M(r.Nm.Input),R(!0)],j.prototype,"userId",void 0),x([R(!1)],j.prototype,"userName",void 0),x([R(!1)],j.prototype,"userQualification",void 0),x([R(!1)],j.prototype,"userRole",void 0),x([R(!1)],j.prototype,"userQuit",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"currencyId",void 0),x([R(!1)],j.prototype,"currencySymbol",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"year",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month1",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month2",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month3",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month4",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month5",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month6",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month7",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month8",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month9",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month10",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month11",void 0),x([T(r.sP.Decimal),M(r.Nm.Input),R(!0)],j.prototype,"month12",void 0)},55750:function(e,t,n){n.d(t,{Ry:function(){return i.R}});var i=n(34239);n(62758)},17224:function(e,t,n){n.d(t,{$:function(){return r}});var i=n(37716);let r=(()=>{class e{constructor(){}transform(e){if(e)return+e.toString().replace(",",".")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.\u0275\u0275definePipe({name:"numberForm",type:e,pure:!0}),e})()},34239:function(e,t,n){n.d(t,{R:function(){return a}});var i=n(37716),r=n(10337);let a=(()=>{class e{constructor(e){this.searchFilterService=e}transform(e,t,n){if(this.startIndex=t*(n*this.searchFilterService.rowSpan)+1,this.endIndex=n*this.searchFilterService.rowSpan*(t+1),null!=e)return this.searchFilterService.showingDataLastFilter=e.slice(this.startIndex-1,this.endIndex),this.searchFilterService.resultChanged.next(),e.slice(this.startIndex-1,this.endIndex)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(r.nJ,16))},e.\u0275pipe=i.\u0275\u0275definePipe({name:"paginator",type:e,pure:!0}),e})()},96523:function(e,t,n){n.d(t,{a:function(){return d},X:function(){return s}});var i=n(70833),r=n(82636),a=n(51586),o=n(37716),c=n(10337);let s=(()=>{class e{constructor(e,t){this.genericService=e,this.entityParameterService=t,this.reloadPrices=new i.xQ,this.reloadEstimates=new i.xQ,this.reloadOrders=new i.xQ,this.reloadBatches=new i.xQ,this.reloadInvoices=new i.xQ,this.sortAllInvoices=new i.xQ,this.sortPrices=new i.xQ,this.sortEstimates=new i.xQ,this.sortInvoices=new i.xQ,this.sortBatches=new i.xQ,this.sortOrders=new i.xQ,this.insertInvoicingBatch=new i.xQ,this.getinvoicingBatches=new i.xQ,this.isSavedBatch=new i.tq,this.invoiceBatch=new i.xQ,this.isSavedInvoice=new i.tq,this.goToOrder=new i.xQ}getPricesByProject(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetPricesByProject",n.entitiesParameters=new Array(t),n.cursorName="Curs",this.genericService.createService("/Data/Get",n)}getEstimateListByProject(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetEstimateByProject",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}getRefEstimateByProject(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetRefEstimateByProject",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}getBatchesByProject(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetBatchesByProject",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}getContractsByProject(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetContractsByProject",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}getInvoice(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"invoiceId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetInvoice",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}getBatch(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"batchId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetBatch",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}getInvoiceByProject(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetInvoiceByProject",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}deleteInvoice(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"invoiceId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.DeleteInvoice",n.entitiesParameters=new Array(t),n.outputIdParameterName="invoiceId",this.genericService.createService("/Data/Delete",n)}deleteBatch(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"batchId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.DeleteBatch",n.entitiesParameters=new Array(t),n.outputIdParameterName="batchId",this.genericService.createService("/Data/Delete",n)}deleteEstimate(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"estimateId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.DeleteEstimate",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Delete",n)}deleteUserPrices(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"priceId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.DeleteUserPrices",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Delete",n)}deleteConract(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"contractId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.DeleteContract",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Delete",n)}saveUsersPrices(e){const t=new Array;this.entityParameterService.AddEntityParameters(t,e);const n=new a.u;return n.storedProcedureName="GPTT.InsertOrUpdateUsersPrices",n.entitiesParameters=new Array(t),n.outputIdParameterName="priceId",this.genericService.createService("/Data/Save",n)}saveEstimateDetails(e){const t=new Array;this.entityParameterService.AddEntityParameters(t,e);const n=new a.u;return n.storedProcedureName="GPTT.InsertOrUpdateEstimate",n.entitiesParameters=new Array(t),n.outputIdParameterName="estimateId",this.genericService.createService("/Data/Save",n)}insertOrUpdateContract(e){const t=new Array;this.entityParameterService.AddEntityParameters(t,e);const n=new a.u;return n.storedProcedureName="GPTT.InsertOrUpdateContract",n.entitiesParameters=new Array(t),n.outputIdParameterName="contractId",this.genericService.createService("/Data/Save",n)}getContractsType(){const e=new a.u;return e.storedProcedureName="GPTT.GetContractsType",e.cursorName="PARAM",this.genericService.createService("/Data/Get",e)}getCurrencies(){const e=new a.u;return e.storedProcedureName="GPTT.GetCurrencies",e.cursorName="PARAM1",this.genericService.createService("/Data/Get",e)}getBatchesType(){const e=new a.u;return e.storedProcedureName="GPTT.GetBatchesType",e.cursorName="PARAM1",this.genericService.createService("/Data/Get",e)}getLaunchInvoices(e,t,n){const i=new Array;this.entityParameterService.AddEntityParameter(i,"activities",e,r.sP.Varchar2,r.Nm.Input),this.entityParameterService.AddEntityParameter(i,"deliveryStartDate",t,r.sP.Date,r.Nm.Input),this.entityParameterService.AddEntityParameter(i,"deliveryEndDate",n,r.sP.Date,r.Nm.Input);const o=new a.u;return o.storedProcedureName="GPTT.GetLaunchInvoices",o.entitiesParameters=new Array(i),o.cursorName="curs",this.genericService.createService("/Data/Get",o)}saveBatchDetails(e){const t=new Array;this.entityParameterService.AddEntityParameters(t,e);const n=new a.u;return n.storedProcedureName="GPTT.InsertOrUpdateBatch",n.entitiesParameters=new Array(t),n.outputIdParameterName="batchId",this.genericService.createService("/Data/Save",n)}getContracts(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetContracts",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}saveInvoiceDetails(e){const t=new Array;null!=e.invoiceNetToBePayed&&(e.invoiceNetToBePayed=e.invoiceNetToBePayed.toString().replace(".",",")),null!==e.invoiceAmount&&(e.invoiceAmount=e.invoiceAmount.toString().replace(".",",")),this.entityParameterService.AddEntityParameters(t,e);const n=new a.u;return n.storedProcedureName="GPTT.InsertOrUpdateProjectInvoice",n.entitiesParameters=new Array(t),n.outputIdParameterName="invoiceId",this.genericService.createService("/Data/Save",n)}saveInvoicesLaunch(e){const t=new Array;e.forEach(e=>{const n=new Array;this.entityParameterService.AddEntityParameter(n,"invoiceId",e.invoiceId,r.sP.Decimal,r.Nm.Input),this.entityParameterService.AddEntityParameter(n,"currencyId",e.currencyId,r.sP.Decimal,r.Nm.Input),this.entityParameterService.AddEntityParameter(n,"invoiceReference",e.invoiceReference,r.sP.Varchar2,r.Nm.Input),this.entityParameterService.AddEntityParameter(n,"invoiceAdressedTo",e.invoiceAdressedTo,r.sP.Varchar2,r.Nm.Input),this.entityParameterService.AddEntityParameter(n,"invoiceAmount",e.invoiceAmount,r.sP.Decimal,r.Nm.Input),this.entityParameterService.AddEntityParameter(n,"invoiceDeposit",e.invoiceDeposit,r.sP.Decimal,r.Nm.Input),e.invoiceNetToBePayed&&(e.invoiceNetToBePayed=e.invoiceNetToBePayed.toString().replace(".",",")),this.entityParameterService.AddEntityParameter(n,"invoiceNetToBePayed",e.invoiceNetToBePayed,r.sP.Varchar2,r.Nm.Input),this.entityParameterService.AddEntityParameter(n,"invoiceDeliveryDate",e.invoiceDeliveryDate,r.sP.Date,r.Nm.Input),this.entityParameterService.AddEntityParameter(n,"invoiceCashedOn",e.invoiceCashedOn,r.sP.Date,r.Nm.Input),this.entityParameterService.AddEntityParameter(n,"invoiceSaariReference",e.invoiceSaariReference,r.sP.Varchar2,r.Nm.Input),this.entityParameterService.AddEntityParameter(n,"batchId",e.batchId,r.sP.Decimal,r.Nm.Input),t.push(n)});const n=new a.u;return n.storedProcedureName="GPTT.InsertOrUpdateInvoice",n.entitiesParameters=t,n.outputIdParameterName="invoiceId",this.genericService.createService("/Data/Save",n)}saveInvoiceCashedOn(e,t){const n=new Array;this.entityParameterService.AddEntityParameter(n,"invoiceId",e,r.sP.Decimal,r.Nm.InputOutput),this.entityParameterService.AddEntityParameter(n,"invoiceCashedOn",t,r.sP.Date,r.Nm.Input);const i=new a.u;return i.storedProcedureName="GPTT.UpdateInvoiceCashedOn",i.entitiesParameters=new Array(n),i.outputIdParameterName="invoiceId",this.genericService.createService("/Data/Save",i)}saveInvoiceSaariRef(e,t){const n=new Array;this.entityParameterService.AddEntityParameter(n,"invoiceId",e,r.sP.Decimal,r.Nm.InputOutput),this.entityParameterService.AddEntityParameter(n,"invoiceSaariReference",t,r.sP.Varchar2,r.Nm.Input);const i=new a.u;return i.storedProcedureName="GPTT.UpdateInvoiceSaariRef",i.entitiesParameters=new Array(n),i.outputIdParameterName="invoiceId",this.genericService.createService("/Data/Save",i)}getBatchNotInvoiced(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"projectId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetBatchNotInvoiced",n.entitiesParameters=new Array(t),n.cursorName="PARAM1",this.genericService.createService("/Data/Get",n)}getInvoices(e,t,n){const i=new Array;this.entityParameterService.AddEntityParameter(i,"activities",e,r.sP.Varchar2,r.Nm.Input),this.entityParameterService.AddEntityParameter(i,"deliveryStartDate",t,r.sP.Date,r.Nm.Input),this.entityParameterService.AddEntityParameter(i,"deliveryEndDate",n,r.sP.Date,r.Nm.Input);const o=new a.u;return o.storedProcedureName="GPTT.GetInvoices",o.entitiesParameters=new Array(i),o.cursorName="curs",this.genericService.createService("/Data/Get",o)}getEstimates(e,t,n,i,o,c){const s=new Array;this.entityParameterService.AddEntityParameter(s,"estimateReference",e,r.sP.Varchar2,r.Nm.Input),this.entityParameterService.AddEntityParameter(s,"customers",t,r.sP.Varchar2,r.Nm.Input),this.entityParameterService.AddEntityParameter(s,"activities",n,r.sP.Varchar2,r.Nm.Input),this.entityParameterService.AddEntityParameter(s,"estimateState",i,r.sP.Varchar2,r.Nm.Input),this.entityParameterService.AddEntityParameter(s,"estimateStartDate",o,r.sP.Date,r.Nm.Input),this.entityParameterService.AddEntityParameter(s,"estimateEndDate",c,r.sP.Date,r.Nm.Input);const l=new a.u;return l.storedProcedureName="GPTT.GetEstimates",l.entitiesParameters=new Array(s),l.cursorName="curs",this.genericService.createService("/Data/Get",l)}getEstimateFile(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"estimateId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetEstimateFile",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}getContractFile(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"contractId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetContractFile",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}getEstimateContracts(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"estimateId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetEstimateContracts",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}getContractBatches(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"contractId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetContractBatches",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}getContract(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"contractId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetContract",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}getEstimate(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"estimateId",e,r.sP.Decimal,r.Nm.Input);const n=new a.u;return n.storedProcedureName="GPTT.GetEstimate",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(c.MY),o.\u0275\u0275inject(c.RZ))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var l=n(90046),m=n(72480);let d=(()=>{class e{constructor(){}addGroupWithTotal(e,t,n){const i=new m.Z;return i.expanded=!0,this.getSublevelWithTotal(e,0,t,i,n)}getSublevel(e,t,n,i){if(t>=n.length)return e;const r=this.uniqueBy(e.map(e=>{const r=new m.Z;r.level=t+1,r.parent=i;for(let i=0;i<=t;i++)r[n[i]]=e[n[i]];return r}),JSON.stringify),a=n[t];let o=[];return r.forEach(i=>{const r=e.filter(e=>i[a]===e[a]);i.totalCounts=r.length;const c=this.getSublevel(r,t+1,n,i);c.unshift(i),o=o.concat(c)}),this._allGroup=o,o}getSublevelWithTotal(e,t,n,i,r){if(t>=n.length)return e;const a=this.uniqueBy(e.map(e=>{const r=new m.Z;r.level=t+1,r.parent=i;for(let i=0;i<=t;i++)r[n[i]]=e[n[i]];return r}),JSON.stringify),o=n[t];let c=[];return a.forEach(i=>{const a=e.filter(e=>i[o]===e[o]);i.totalCounts=a.length;const s=[];r.forEach(e=>{if(i[o]===e[o]&&void 0===s.find(t=>t.currencyId===e.currencyId)){const t=new l.tR;t.activityTotal=e.activityTotal,t.currency=e.currency,t.currencyId=e.currencyId,s.push(t)}}),s.sort((e,t)=>e.currencyId-t.currencyId),i.activitiesTotal=s;const m=this.getSublevel(a,t+1,n,i);m.unshift(i),c=c.concat(m)}),this._allGroup=c,c}isGroup(e){return e.level}uniqueBy(e,t){const n={};return e.filter(e=>{const i=t(e);return!n.hasOwnProperty(i)&&(n[i]=!0)})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})()},39924:function(e,t,n){n.d(t,{J:function(){return u}});var i=n(37716),r=n(99692),a=n(10337),o=n(98295),c=n(67441),s=n(3679),l=n(38583),m=n(72458);function d(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"mat-option",6),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275property("value",e),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(e)}}const p=function(){return[6,12,24,60,120]};let u=(()=>{class e{constructor(e){this.searchFilterService=e,this.disabled=!1,this.hidePageSize=!1,this.showFirstLastButtons=!1,this.page=new i.EventEmitter}set pageIndexChanged(e){this.pageIndex=e,this.updateGoto()}set lengthChanged(e){this.length=e,this.updateGoto()}set pageSizeChanged(e){this.pageSize=e,this.updateGoto()}ngOnInit(){this.updateGoto()}onPaginateChange(e){this.searchFilterService.pageIndex=e.pageIndex,this.searchFilterService.pageSize=e.pageSize,this.length=e.length,this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.updateGoto(),this.emitPageEvent(e)}updateGoto(){this.goTo=(this.pageIndex||0)+1,this.pageNumbers=[];const e=Math.ceil(this.length/this.pageSize);for(let t=1;t<=e;t++)this.pageNumbers.push(t)}goToChange(){this.paginator.pageIndex=this.goTo-1,this.searchFilterService.pageIndex=this.paginator.pageIndex,this.searchFilterService.pageSize=this.paginator.pageSize,this.emitPageEvent({length:this.paginator.length,pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize})}emitPageEvent(e){this.page.next(e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.nJ))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-paginator"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(r.NW,7),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.paginator=e.first)}},inputs:{length:"length",pageIndex:"pageIndex",pageSize:"pageSize",disabled:"disabled",hidePageSize:"hidePageSize",pageSizeOptions:"pageSizeOptions",showFirstLastButtons:"showFirstLastButtons",pageIndexChanged:["pageIndex","pageIndexChanged"],lengthChanged:["length","lengthChanged"],pageSizeChanged:["pageSize","pageSizeChanged"]},outputs:{page:"page"},decls:8,vars:8,consts:[[1,"d-flex"],[3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"mat-paginator",1),i.\u0275\u0275listener("page",function(e){return t.onPaginateChange(e)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275text(4,"Go To: "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"mat-form-field"),i.\u0275\u0275elementStart(6,"mat-select",4),i.\u0275\u0275listener("ngModelChange",function(e){return t.goTo=e})("selectionChange",function(){return t.goToChange()}),i.\u0275\u0275template(7,d,2,2,"mat-option",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("length",t.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",i.\u0275\u0275pureFunction0(7,p))("showFirstLastButtons",!0),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngModel",t.goTo),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.pageNumbers))},directives:[r.NW,o.KE,c.gD,s.NgControlStatus,s.NgModel,l.NgForOf,m.ey],styles:['.mat-paginator[_ngcontent-%COMP%]{width:100%;float:right}.d-flex[_ngcontent-%COMP%]{display:flex}  .mat-select-trigger{font-size:12px}  .mat-option{font-size:12px}.go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}.go-to-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:56px;margin:6px 4px 0;font-size:12px;font-family:Roboto,"Helvetica Neue",sans-serif}.go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{width:36px;margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,"Helvetica Neue",sans-serif}']}),e})()}}]);