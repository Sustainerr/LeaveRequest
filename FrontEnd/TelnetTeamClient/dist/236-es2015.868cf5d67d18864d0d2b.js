"use strict";(self.webpackChunktelnetteam_app=self.webpackChunktelnetteam_app||[]).push([[236],{15236:function(e,t,n){n.r(t),n.d(t,{CUSTOM_DT_FORMATS:function(){return Ue},CostingModule:function(){return qe}});var r=n(38583),i=n(32403),o=n(10337),s=n(3679),a=n(72458),l=n(22238),c=n(36063),d=n(88452),m=n(63753),u=n(62028),h=n(70833),p=n(82636),g=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};function f(e){return Reflect.metadata("type",e)}function S(e){return Reflect.metadata("dir",e)}function v(e){return Reflect.metadata("persisted",e)}class C{constructor(){this.userCostId=0,this.currencyId=5,this.currencySymbol="\u20ac"}}g([f(p.sP.Decimal),S(p.Nm.InputOutput),v(!0)],C.prototype,"userCostId",void 0),g([f(p.sP.Varchar2),S(p.Nm.Input),v(!0)],C.prototype,"userId",void 0),g([v(!1)],C.prototype,"userNumber",void 0),g([v(!1)],C.prototype,"userName",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"currencyId",void 0),g([v(!1)],C.prototype,"currencySymbol",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"year",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month1",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month2",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month3",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month4",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month5",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month6",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month7",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month8",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month9",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month10",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month11",void 0),g([f(p.sP.Decimal),S(p.Nm.Input),v(!0)],C.prototype,"month12",void 0);class y{}var b=n(46782),x=n(37716),I=n(51586);let w=(()=>{class e{constructor(e,t){this.genericService=e,this.entityParameterService=t,this.sortCosts=new h.xQ,this.reloadCosts=new h.tq(1)}getResourcesCosts(e,t,n){const r=new Array;this.entityParameterService.AddEntityParameter(r,"resourcesId",e,p.sP.Varchar2,p.Nm.Input),this.entityParameterService.AddEntityParameter(r,"startYear",t,p.sP.Decimal,p.Nm.Input),this.entityParameterService.AddEntityParameter(r,"endYear",n,p.sP.Decimal,p.Nm.Input);const i=new I.u;return i.storedProcedureName="GPTT.GetResourcesCosts",i.entitiesParameters=new Array(r),i.cursorName="curs",this.genericService.createService("/Data/Get",i)}getResourceCosts(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"userCostId",e,p.sP.Decimal,p.Nm.Input);const n=new I.u;return n.storedProcedureName="GPTT.GetResourceCosts",n.entitiesParameters=new Array(t),n.cursorName="curs",this.genericService.createService("/Data/Get",n)}saveResourcesCosts(e,t){const n=new Array;e.forEach(e=>{const r=new Array;this.entityParameterService.AddEntityParameters(r,e),this.entityParameterService.AddEntityParameter(r,"currentUserId",t,p.sP.Decimal,p.Nm.Input),n.push(r)});const r=new I.u;return r.storedProcedureName="GPTT.InsertOrUpdateResourceCosts",r.entitiesParameters=n,r.outputIdParameterName="userCostId",this.genericService.createService("/Data/Save",r)}deleteResourceCosts(e,t){const n=new Array;this.entityParameterService.AddEntityParameter(n,"userCostId",e,p.sP.Decimal,p.Nm.Input),this.entityParameterService.AddEntityParameter(n,"currentUserId",t,p.sP.Decimal,p.Nm.Input);const r=new I.u;return r.storedProcedureName="GPTT.DeleteResourceCosts",r.entitiesParameters=new Array(n),this.genericService.createService("/Data/Delete",r)}deleteAllCosts(e,t){const n=new Array;e.forEach(e=>{const r=new Array;this.entityParameterService.AddEntityParameter(r,"userCostId",e.userCostId,p.sP.Decimal,p.Nm.Input),this.entityParameterService.AddEntityParameter(r,"currentUserId",t,p.sP.Decimal,p.Nm.Input),n.push(r)});const r=new I.u;return r.storedProcedureName="GPTT.DeleteResourceCosts",r.entitiesParameters=n,this.genericService.createService("/Data/Delete",r)}}return e.\u0275fac=function(t){return new(t||e)(x.\u0275\u0275inject(o.MY),x.\u0275\u0275inject(o.RZ))},e.\u0275prov=x.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var D=n(98295),E=n(67441),P=n(52218),M=n(76627),R=n(64576),F=n(49983),O=n(72172);const N=["resourceCostDetailsForm"];function _(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-option",18),x.\u0275\u0275text(1),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275property("value",e),x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate1(" ",e.description," ")}}function k(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-option",18),x.\u0275\u0275text(1),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275property("value",e.id),x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate1(" ",e.description," ")}}function z(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-option",18),x.\u0275\u0275text(1),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275property("value",e.id),x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate1(" ",e.description," ")}}let A=(()=>{class e{constructor(e,t,n,r,i){this.coreDataService=e,this.costingService=t,this.notificationService=n,this._avRoute=r,this.router=i,this.resourceFilterCtrl=new s.FormControl,this.filteredResources=new h.tq(1),this._onDestroy=new h.xQ,this.previousState={getPrevious:!1,pageIndex:null,pageSize:null},this.subscription=new h.w0,this.mutliClickDisable=!1,this.isNewResourceCost=!0,this.resourceCost=new C,this.Resources=[],this.months=[{id:1,description:"January"},{id:2,description:"February"},{id:3,description:"Mars"},{id:4,description:"April"},{id:5,description:"May"},{id:6,description:"June"},{id:7,description:"July"},{id:8,description:"August"},{id:9,description:"September"},{id:10,description:"October"},{id:11,description:"November"},{id:12,description:"December"}],this.fromMonth={id:1,description:"January"},this.toMonth={id:12,description:"December"}}ngOnInit(){this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.yearMin=(new Date).getFullYear()-10,this.yearMax=(new Date).getFullYear()+10,this.year=(new Date).getFullYear(),this.getResources(),this.resourceFilterCtrl.valueChanges.pipe((0,b.R)(this._onDestroy)).subscribe(()=>{this.filterResources()}),this.subscription.add(this.costingService.reloadCosts.subscribe(e=>{e&&(this.previousState=e)}))}ngOnDestroy(){this.subscription.unsubscribe()}getResources(){this.coreDataService.getUsers().subscribe(e=>{null!=e&&(this.Resources=e,this.Resources=this.Resources.filter(e=>-1===e.description.indexOf(" (PFE")&&-1===e.description.indexOf(" (STA")),this.filteredResources.next(this.Resources.slice()),this.getResourceCosts())})}getResourceCosts(){this._avRoute.params.subscribe(e=>{null!=e.userCostId&&(this.isNewResourceCost=!1,this.detailsForm.controls.selectedResource.disable(),this.costingService.getResourceCosts(+e.userCostId).subscribe(e=>{this.resourceCost=Object.assign(new C,e[0]),this.selectedResource=this.Resources.find(e=>e.id===this.resourceCost.userId),this.year=this.resourceCost.year,this.monthResourceCost=this.resourceCost.month1}))})}filterResources(){if(!this.Resources)return;let e=this.resourceFilterCtrl.value;e?(e=e.toLowerCase(),this.filteredResources.next(this.Resources.filter(t=>t.description.toLowerCase().indexOf(e)>-1))):this.filteredResources.next(this.Resources.slice())}save(){this.mutliClickDisable=!0,setTimeout(()=>{this.mutliClickDisable=!1},1e3),this.validCosts()&&this.costingService.saveResourcesCosts(this.buildResourceCosts(),this.currentUser.userId).subscribe(e=>{0!==e?(this.notificationService.success("Costs saved successfully"),null!=this.previousState.pageIndex&&(this.previousState.getPrevious=!0,this.costingService.reloadCosts.next(this.previousState)),this.router.navigate(["/project-management/costing/resource-cost"])):this.notificationService.danger("Costs not saved. Costs may already exists!")},()=>{this.notificationService.danger("Costs not saved!")})}validCosts(){if(this.detailsForm.valid)if(this.fromMonth.id<=this.toMonth.id){if(this.year>=this.yearMin&&this.year<=this.yearMax)return!0;this.notificationService.danger(`Year must be between ${this.yearMin} and ${this.yearMax}!`)}else this.notificationService.danger("To Month must be greater than From Month!");else this.notificationService.danger("Please fill all required fields!");return!1}buildResourceCosts(){const e=[],t=new C;t.userCostId=this.resourceCost.userCostId,t.userId=this.selectedResource.id,t.year=this.year;const n=0!==this.resourceCost.userCostId?-1:0;return t.month1=this.getMonthCost(1,n),t.month2=this.getMonthCost(2,n),t.month3=this.getMonthCost(3,n),t.month4=this.getMonthCost(4,n),t.month5=this.getMonthCost(5,n),t.month6=this.getMonthCost(6,n),t.month7=this.getMonthCost(7,n),t.month8=this.getMonthCost(8,n),t.month9=this.getMonthCost(9,n),t.month10=this.getMonthCost(10,n),t.month11=this.getMonthCost(11,n),t.month12=this.getMonthCost(12,n),e.push(t),e}getMonthCost(e,t){return this.fromMonth.id<=e&&this.toMonth.id>=e?this.monthResourceCost:t}yearChanged(e){this.year=new Date(e).getFullYear()}numberOnly(e){const t=e.which?e.which:e.keyCode;return!(t>31&&(t<44||t>57)||45===t||47===t)}onCancel(){null!=this.previousState.pageIndex&&(this.previousState.getPrevious=!0,this.costingService.reloadCosts.next(this.previousState)),this.router.navigate(["/project-management/costing/resource-cost"])}}return e.\u0275fac=function(t){return new(t||e)(x.\u0275\u0275directiveInject(o.YY),x.\u0275\u0275directiveInject(w),x.\u0275\u0275directiveInject(o.gq),x.\u0275\u0275directiveInject(d.gz),x.\u0275\u0275directiveInject(d.F0))},e.\u0275cmp=x.\u0275\u0275defineComponent({type:e,selectors:[["app-edit-resource-cost"]],viewQuery:function(e,t){if(1&e&&x.\u0275\u0275viewQuery(N,7),2&e){let e;x.\u0275\u0275queryRefresh(e=x.\u0275\u0275loadQuery())&&(t.detailsForm=e.first)}},decls:31,vars:17,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["id","resourceCostDetailsForm"],["resourceCostDetailsForm","ngForm"],["placeholder","Resource","name","selectedResource","required","",3,"ngModel","ngModelChange"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["ngxMatSelectSearchClear",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-3"],[3,"enabled","year","displayPlaceHolder","yearChange"],["placeholder","From Month","name","fromMonth","required","",3,"ngModel","ngModelChange"],["placeholder","To Month","name","toMonth","required","",3,"ngModel","ngModelChange"],["placeholder","Cost","matInput","","appNumberValidator","","name","monthResourceCost","required","",3,"ngModel","inputValue","ngModelChange","keypress"],[1,"text-center"],["type","submit",1,"btn","btn-md","btn-primary","ripple","light","m-r-20",3,"disabled","click"],[1,"btn","btn-md","btn-default","ripple",3,"click"],[3,"value"]],template:function(e,t){1&e&&(x.\u0275\u0275elementStart(0,"div",0),x.\u0275\u0275elementStart(1,"div",1),x.\u0275\u0275elementStart(2,"div",2),x.\u0275\u0275elementStart(3,"div",3),x.\u0275\u0275elementStart(4,"form",4,5),x.\u0275\u0275elementStart(6,"div",0),x.\u0275\u0275elementStart(7,"mat-form-field",1),x.\u0275\u0275elementStart(8,"mat-select",6),x.\u0275\u0275listener("ngModelChange",function(e){return t.selectedResource=e}),x.\u0275\u0275elementStart(9,"mat-option"),x.\u0275\u0275elementStart(10,"ngx-mat-select-search",7),x.\u0275\u0275elementStart(11,"mat-icon",8),x.\u0275\u0275text(12,"close"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275template(13,_,2,2,"mat-option",9),x.\u0275\u0275pipe(14,"async"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(15,"div",0),x.\u0275\u0275elementStart(16,"div",10),x.\u0275\u0275elementStart(17,"app-input-year",11),x.\u0275\u0275listener("yearChange",function(e){return t.yearChanged(e)}),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(18,"mat-form-field",10),x.\u0275\u0275elementStart(19,"mat-select",12),x.\u0275\u0275listener("ngModelChange",function(e){return t.fromMonth.id=e}),x.\u0275\u0275template(20,k,2,2,"mat-option",9),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(21,"mat-form-field",10),x.\u0275\u0275elementStart(22,"mat-select",13),x.\u0275\u0275listener("ngModelChange",function(e){return t.toMonth.id=e}),x.\u0275\u0275template(23,z,2,2,"mat-option",9),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(24,"mat-form-field",10),x.\u0275\u0275elementStart(25,"input",14),x.\u0275\u0275listener("ngModelChange",function(e){return t.monthResourceCost=e})("keypress",function(e){return t.numberOnly(e)}),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(26,"div",15),x.\u0275\u0275elementStart(27,"button",16),x.\u0275\u0275listener("click",function(){return t.save()}),x.\u0275\u0275text(28,"Save"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(29,"button",17),x.\u0275\u0275listener("click",function(){return t.onCancel()}),x.\u0275\u0275text(30,"Cancel"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd()),2&e&&(x.\u0275\u0275advance(8),x.\u0275\u0275property("ngModel",t.selectedResource),x.\u0275\u0275advance(2),x.\u0275\u0275property("formControl",t.resourceFilterCtrl)("placeholderLabel","Search")("noEntriesFoundLabel","No options found"),x.\u0275\u0275advance(3),x.\u0275\u0275property("ngForOf",x.\u0275\u0275pipeBind1(14,15,t.filteredResources)),x.\u0275\u0275advance(4),x.\u0275\u0275property("enabled",t.isNewResourceCost)("year",t.year)("displayPlaceHolder",!0),x.\u0275\u0275advance(2),x.\u0275\u0275property("ngModel",t.fromMonth.id),x.\u0275\u0275advance(1),x.\u0275\u0275property("ngForOf",t.months),x.\u0275\u0275advance(2),x.\u0275\u0275property("ngModel",t.toMonth.id),x.\u0275\u0275advance(1),x.\u0275\u0275property("ngForOf",t.months),x.\u0275\u0275advance(2),x.\u0275\u0275property("ngModel",t.monthResourceCost)("inputValue",t.monthResourceCost),x.\u0275\u0275advance(2),x.\u0275\u0275property("disabled",t.mutliClickDisable))},directives:[s.\u0275NgNoValidate,s.NgControlStatusGroup,s.NgForm,D.KE,E.gD,s.RequiredValidator,s.NgControlStatus,s.NgModel,a.ey,P.nu,s.FormControlDirective,M.Hw,P.w5,r.NgForOf,R.G,F.Nt,s.DefaultValueAccessor,O.z],pipes:[r.AsyncPipe],styles:["form[_ngcontent-%COMP%]{padding:10px 20px}.main-color[_ngcontent-%COMP%]{background:#3f629d}"]}),e})();var Y=n(55750),T=n(56185);let j=(()=>{class e{constructor(e,t,n,r){this.coreDataService=e,this.costingService=t,this.notificationService=n,this.dialogRef=r,this.readyToImport=!1,this.mutliClickDisable=!1,this.previousState={getPrevious:!1,pageIndex:null,pageSize:null},this.subscription=new h.w0,this.resourcesCosts=[],this.resourcesIdentifiers=[]}ngOnInit(){this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.year=(new Date).getFullYear(),this.yearMin=this.year-10,this.yearMax=this.year+10,this.getResources(),this.subscription.add(this.costingService.reloadCosts.subscribe(e=>{e&&(this.previousState=e)}))}getResources(){this.coreDataService.getUsers().subscribe(e=>{null!=e&&(this.resourcesIdentifiers=e,this.resourcesIdentifiers=this.resourcesIdentifiers.filter(e=>-1===e.description.indexOf(" (PFE")&&-1===e.description.indexOf(" (STA")))})}yearChanged(e){this.year=new Date(e).getFullYear(),0!==this.resourcesCosts.length&&this.resourcesCosts.forEach(e=>{e.year=this.year})}fileImport(e){const t=e.target;if(1!==t.files.length)throw new Error("Cannot use multiple files");this.fileName=t.files[0].name;const n=new FileReader;n.onload=()=>{const e=new T.Workbook,t=[];e.xlsx.load(n.result).then(e=>{const n=e.getWorksheet(1),r=n.getRow(1).values.length;n.eachRow(e=>{const n=[];for(let t=1;t<r;t++){let r=e.values[t];void 0===r&&(r=""),n.push(r)}t.push(n),this.processXlsFile(t)})})},n.readAsArrayBuffer(t.files[0])}processXlsFile(e){if(this.isXlsFileHeader(e[0])){this.resourcesCostsCount=0,this.resourcesCosts=[];const t=this.buildXlsFileRows(e);0===t.length?this.notificationService.success("File format valid."):this.notificationService.warning("File contain invalid line(s):<br>"+t.join("<br>")+"."),0!==this.resourcesCostsCount?this.readyToImport=!0:this.notificationService.warning("There is no lines to load.")}else this.notificationService.danger("File format invalid.")}isXlsFileHeader(e){return void 0!==e&&2===e.length&&"Matricule"===e[0]&&"Resource Cost"===e[1]}buildXlsFileRows(e){const t=[];for(let n=1;n<e.length;n++){const r=e[n];if(r.length>=2&&void 0!==r[0]&&void 0!==r[1]){const e="("+r[0].replace(/\s/g,"").toString()+")",i=this.resourcesIdentifiers.find(t=>t.description.endsWith(e));if(void 0!==i){const e=i.id,o=+Number(r[1].toString().replace(/\s/g,""));Number.isNaN(o)?t.push(`Line ${n+1}: Invalid Cost (${r[1]})`):this.buildXlsFileRow(e,o)}else t.push(`Line ${n+1}: Invalid Matricule (${r[0]})`)}else t.push(`Line ${n+1}: Invalid Line (${r})`)}return t}buildXlsFileRow(e,t){if(0!==t){const n=new C;n.userId=e,n.year=this.year,n.month1=t,n.month2=t,n.month3=t,n.month4=t,n.month5=t,n.month6=t,n.month7=t,n.month8=t,n.month9=t,n.month10=t,n.month11=t,n.month12=t,this.resourcesCostsCount++,this.resourcesCosts.push(n)}}importResourcesCosts(){this.mutliClickDisable=!0,setTimeout(()=>{this.mutliClickDisable=!1},1e3),this.year>=this.yearMin&&this.year<=this.yearMax?this.costingService.saveResourcesCosts(this.resourcesCosts,this.currentUser.userId).subscribe(e=>{0!==e?(this.notificationService.success("Costs saved successfully"),null!=this.previousState.pageIndex&&(this.previousState.getPrevious=!0,this.costingService.reloadCosts.next(this.previousState)),this.close()):this.notificationService.danger("Costs not saved. Some costs may already exists!")},()=>{this.notificationService.danger("Costs not saved!")}):this.notificationService.danger(`Year must be between ${this.yearMin} and ${this.yearMax}!`)}close(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(x.\u0275\u0275directiveInject(o.YY),x.\u0275\u0275directiveInject(w),x.\u0275\u0275directiveInject(o.gq),x.\u0275\u0275directiveInject(l.so))},e.\u0275cmp=x.\u0275\u0275defineComponent({type:e,selectors:[["app-import-resources-costs"]],decls:24,vars:5,consts:[[1,"form-container"],[1,"modal_header"],[1,"modal_title"],[1,"material-icons","modal-close",3,"click"],[1,"modal_body"],[1,"row"],[1,"col-sm-3"],[3,"enabled","year","displayPlaceHolder","yearChange"],[1,"col-sm-7"],["placeholder","File Name *","matInput","","name","fileName","disabled","","required","",3,"ngModel","ngModelChange"],[1,"col-sm-2"],[1,"btn","btn-sm","btn-primary","waves-light","ripple","file-upload-button",2,"font-size","inherit"],["type","file","accept",".xlsx",3,"change"],["fileInput",""],[1,"icofont","icofont-folder-open",2,"font-size","medium"],[1,"modal_footer"],[1,"pull-right"],["type","button",1,"btn","btn-outline-primary","m-r-5",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(x.\u0275\u0275elementStart(0,"form",0),x.\u0275\u0275elementStart(1,"div",1),x.\u0275\u0275elementStart(2,"div",2),x.\u0275\u0275elementStart(3,"span"),x.\u0275\u0275text(4," Import "),x.\u0275\u0275elementStart(5,"em",3),x.\u0275\u0275listener("click",function(){return t.close()}),x.\u0275\u0275text(6,"close"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(7,"div",4),x.\u0275\u0275elementStart(8,"div",5),x.\u0275\u0275elementStart(9,"div",6),x.\u0275\u0275elementStart(10,"app-input-year",7),x.\u0275\u0275listener("yearChange",function(e){return t.yearChanged(e)}),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(11,"mat-form-field",8),x.\u0275\u0275elementStart(12,"input",9),x.\u0275\u0275listener("ngModelChange",function(e){return t.fileName=e}),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(13,"div",10),x.\u0275\u0275elementStart(14,"button",11),x.\u0275\u0275elementStart(15,"input",12,13),x.\u0275\u0275listener("change",function(e){return t.fileImport(e)}),x.\u0275\u0275elementEnd(),x.\u0275\u0275element(17,"em",14),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(18,"div",15),x.\u0275\u0275elementStart(19,"div",16),x.\u0275\u0275elementStart(20,"button",17),x.\u0275\u0275listener("click",function(){return t.close()}),x.\u0275\u0275text(21,"Cancel"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(22,"button",18),x.\u0275\u0275listener("click",function(){return t.importResourcesCosts()}),x.\u0275\u0275text(23,"Import"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd()),2&e&&(x.\u0275\u0275advance(10),x.\u0275\u0275property("enabled",!0)("year",t.year)("displayPlaceHolder",!0),x.\u0275\u0275advance(2),x.\u0275\u0275property("ngModel",t.fileName),x.\u0275\u0275advance(10),x.\u0275\u0275property("disabled",!t.readyToImport&&!t.mutliClickDisable))},directives:[s.\u0275NgNoValidate,s.NgControlStatusGroup,s.NgForm,R.G,D.KE,F.Nt,s.DefaultValueAccessor,s.RequiredValidator,s.NgControlStatus,s.NgModel],styles:['.modal_header[_ngcontent-%COMP%]{height:50px;background-color:#3f629d;padding:18px 15px}.modal_header[_ngcontent-%COMP%]   .modal_title[_ngcontent-%COMP%]{color:#fff;line-height:1}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{float:right;cursor:pointer}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:red}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]{cursor:not-allowed;color:#dcdcdc}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]:hover{color:#dcdcdc}.modal_body[_ngcontent-%COMP%]{height:110px;padding:25px;overflow-y:auto}.modal_footer[_ngcontent-%COMP%]{padding:25px}.file-upload-button[_ngcontent-%COMP%]{overflow:hidden;position:relative}.file-upload-button[_ngcontent-%COMP%]:after{content:"load";color:#fff;font-size:1.5rem;text-align:center}.file-upload-button[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{font-size:100px;left:0;opacity:0;position:absolute;top:0}']}),e})();var L=n(16738),B=n(88259),V=n.n(B),$=n(19992),G=n(43220);const J=L,H={parse:{dateInput:"YYYY"},display:{dateInput:"YYYY",yearLabel:"YYYY",dateA11yLabel:"LL",yearA11yLabel:"YYYY"}};let U=(()=>{class e{constructor(){this.date=new s.FormControl(J()),this.daysChange=new x.EventEmitter}ngOnInit(){this.selectedDate&&(this.selectedDate=new Date(this.selectedDate),this.date.setValue(J([this.selectedDate.getFullYear()])))}chosenYearHandler(e,t){(null==this.minDate||e>=J(this.minDate))&&(null==this.maxDate||e<=J(this.maxDate))&&(this.date.setValue(e),this.daysChange.emit(this.date.value)),t&&t.close()}previousYear(e){if(void 0!==this.minDate&&this.date.value<=this.minDate)return e.stopPropagation(),e.preventDefault(),!1;this.date.setValue(J(this.date.value.subtract(1,"years").startOf("year"))),this.daysChange.emit(this.date.value)}nextYear(e){if(void 0!==this.maxDate&&J(this.date.value).endOf("year").toDate()>=this.maxDate)return e.stopPropagation(),e.preventDefault(),!1;this.date.setValue(J(this.date.value.add(1,"years").startOf("year"))),this.daysChange.emit(this.date.value)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=x.\u0275\u0275defineComponent({type:e,selectors:[["app-select-year"]],inputs:{maxDate:"maxDate",minDate:"minDate",selectedDate:"selectedDate"},outputs:{daysChange:"daysChange"},features:[x.\u0275\u0275ProvidersFeature([{provide:a._A,useClass:c.t7,deps:[a.Ad,c.o8]},{provide:a.sG,useValue:H}])],decls:22,vars:9,consts:[[2,"padding","0px"],[1,"td-calendar"],["scope","col"],[1,"td-arrow","pointer",3,"click"],[1,"material-icons"],[1,"td-date"],[1,"td-calendar","pointer",3,"click"],["matInput","",3,"matDatepicker","formControl","min","max"],["matSuffix","",3,"for"],["startView","multi-year","panelClass","example-month-picker",3,"yearSelected"],["picker",""]],template:function(e,t){if(1&e){const e=x.\u0275\u0275getCurrentView();x.\u0275\u0275elementStart(0,"table"),x.\u0275\u0275element(1,"caption",0),x.\u0275\u0275elementStart(2,"tr",1),x.\u0275\u0275element(3,"th",2),x.\u0275\u0275elementStart(4,"td",3),x.\u0275\u0275listener("click",function(e){return t.previousYear(e)}),x.\u0275\u0275elementStart(5,"em",4),x.\u0275\u0275text(6,"keyboard_arrow_left"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(7,"td",5),x.\u0275\u0275elementStart(8,"span"),x.\u0275\u0275text(9),x.\u0275\u0275pipe(10,"date"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(11,"td",6),x.\u0275\u0275listener("click",function(){return x.\u0275\u0275restoreView(e),x.\u0275\u0275reference(18).open()}),x.\u0275\u0275elementStart(12,"em",4),x.\u0275\u0275text(13,"date_range"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(14,"mat-form-field"),x.\u0275\u0275element(15,"input",7),x.\u0275\u0275element(16,"mat-datepicker-toggle",8),x.\u0275\u0275elementStart(17,"mat-datepicker",9,10),x.\u0275\u0275listener("yearSelected",function(n){x.\u0275\u0275restoreView(e);const r=x.\u0275\u0275reference(18);return t.chosenYearHandler(n,r)}),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(19,"td",3),x.\u0275\u0275listener("click",function(e){return t.nextYear(e)}),x.\u0275\u0275elementStart(20,"em",4),x.\u0275\u0275text(21,"keyboard_arrow_right"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd()}if(2&e){const e=x.\u0275\u0275reference(18);x.\u0275\u0275advance(9),x.\u0275\u0275textInterpolate(x.\u0275\u0275pipeBind2(10,6,t.date.value,"yyyy")),x.\u0275\u0275advance(6),x.\u0275\u0275property("matDatepicker",e)("formControl",t.date)("min",t.minDate)("max",t.maxDate),x.\u0275\u0275advance(1),x.\u0275\u0275property("for",e)}},directives:[D.KE,F.Nt,G.hl,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlDirective,G.nW,D.R9,G.Mq],pipes:[r.DatePipe],styles:["table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border:1px solid gainsboro}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;font-size:25px;cursor:pointer}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:4px}table[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:1px;left:3px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:0px;height:0px;visibility:hidden}"]}),e})();var q=n(67827),Q=n(69517),K=n(39924),X=n(4885),W=n(11494),Z=n(32789),ee=n(38590);function te(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Matricule"),x.\u0275\u0275elementEnd())}function ne(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate1(" ",e.userNumber," ")}}function re(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Resource"),x.\u0275\u0275elementEnd())}function ie(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell",25),x.\u0275\u0275elementStart(1,"span",26),x.\u0275\u0275text(2),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275propertyInterpolate("matTooltip",e.userName),x.\u0275\u0275advance(2),x.\u0275\u0275textInterpolate(e.userName)}}function oe(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Year"),x.\u0275\u0275elementEnd())}function se(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate1(" ",e.year," ")}}function ae(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Jan"),x.\u0275\u0275elementEnd())}function le(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month1,"1.0-1")," ",e.currencySymbol," ")}}function ce(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Feb"),x.\u0275\u0275elementEnd())}function de(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month2,"1.0-1")," ",e.currencySymbol," ")}}function me(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Mar"),x.\u0275\u0275elementEnd())}function ue(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month3,"1.0-1")," ",e.currencySymbol," ")}}function he(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Apr"),x.\u0275\u0275elementEnd())}function pe(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month4,"1.0-1")," ",e.currencySymbol," ")}}function ge(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"May"),x.\u0275\u0275elementEnd())}function fe(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month5,"1.0-1")," ",e.currencySymbol," ")}}function Se(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Jun"),x.\u0275\u0275elementEnd())}function ve(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month6,"1.0-1")," ",e.currencySymbol," ")}}function Ce(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Jul"),x.\u0275\u0275elementEnd())}function ye(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month7,"1.0-1")," ",e.currencySymbol," ")}}function be(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Aug"),x.\u0275\u0275elementEnd())}function xe(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month8,"1.0-1")," ",e.currencySymbol," ")}}function Ie(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Sep"),x.\u0275\u0275elementEnd())}function we(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month9,"1.0-1")," ",e.currencySymbol," ")}}function De(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Oct"),x.\u0275\u0275elementEnd())}function Ee(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month10,"1.0-1")," ",e.currencySymbol," ")}}function Pe(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Nov"),x.\u0275\u0275elementEnd())}function Me(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month11,"1.0-1")," ",e.currencySymbol," ")}}function Re(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-header-cell",24),x.\u0275\u0275text(1,"Dec"),x.\u0275\u0275elementEnd())}function Fe(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275text(1),x.\u0275\u0275pipe(2,"number"),x.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;x.\u0275\u0275advance(1),x.\u0275\u0275textInterpolate2(" ",x.\u0275\u0275pipeBind2(2,2,e.month12,"1.0-1")," ",e.currencySymbol," ")}}function Oe(e,t){1&e&&x.\u0275\u0275element(0,"mat-header-cell")}function Ne(e,t){if(1&e){const e=x.\u0275\u0275getCurrentView();x.\u0275\u0275elementStart(0,"mat-cell"),x.\u0275\u0275elementStart(1,"button",27),x.\u0275\u0275listener("click",function(){const t=x.\u0275\u0275restoreView(e).$implicit;return x.\u0275\u0275nextContext().editResourceCosts(t)}),x.\u0275\u0275elementStart(2,"em",28),x.\u0275\u0275text(3,"edit"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275text(4," \xa0\xa0 "),x.\u0275\u0275elementStart(5,"button",29),x.\u0275\u0275listener("click",function(){const t=x.\u0275\u0275restoreView(e).$implicit;return x.\u0275\u0275nextContext().deleteResourceCosts(t)}),x.\u0275\u0275elementStart(6,"em",28),x.\u0275\u0275text(7,"delete"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd()}}function _e(e,t){1&e&&x.\u0275\u0275element(0,"mat-header-row",30)}function ke(e,t){1&e&&x.\u0275\u0275element(0,"mat-row")}let ze=(()=>{class e{constructor(e,t,n,r,i){this.costingService=e,this.notificationService=t,this.dialog=n,this.searchFilterService=r,this.router=i,this.dataSource=new Z.by,this.displayedColumns=["userNumber","userName","year","month1","month2","month3","month4","month5","month6","month7","month8","month9","month10","month11","month12","buttons"]}ngOnInit(){this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.dataSource=new Z.by(this.resourcesCosts),this.subscription=this.searchFilterService.resultChanged.subscribe(()=>{this.dataSource=new Z.by(this.searchFilterService.showingDataLastFilter)})}ngOnDestroy(){this.subscription.unsubscribe()}ngAfterViewInit(){this.dataSource.sort=this.sort}editResourceCosts(e){this.router.navigate(["/project-management/costing/edit-resource-cost/"+e.userCostId.toString()]),this.costingService.reloadCosts.next({getPrevious:!1,pageIndex:this.searchFilterService.pageIndex,pageSize:this.searchFilterService.pageSize})}deleteResourceCosts(e){V().fire({text:"Are you sure to delete this cost?",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",showLoaderOnConfirm:!0,preConfirm:()=>{this.costingService.deleteResourceCosts(e.userCostId,this.currentUser.userId).subscribe(()=>{this.notificationService.success("User costs deleted"),this.costingService.reloadCosts.next({getPrevious:!0,pageIndex:this.searchFilterService.pageIndex,pageSize:this.searchFilterService.pageSize})},()=>{this.notificationService.danger("Delete costs failed")})}})}onSortData(e){this.costingService.sortCosts.next(e)}}return e.\u0275fac=function(t){return new(t||e)(x.\u0275\u0275directiveInject(w),x.\u0275\u0275directiveInject(o.gq),x.\u0275\u0275directiveInject(l.uw),x.\u0275\u0275directiveInject(o.nJ),x.\u0275\u0275directiveInject(d.F0))},e.\u0275cmp=x.\u0275\u0275defineComponent({type:e,selectors:[["app-resources-costs"]],viewQuery:function(e,t){if(1&e&&x.\u0275\u0275viewQuery(W.YE,7),2&e){let e;x.\u0275\u0275queryRefresh(e=x.\u0275\u0275loadQuery())&&(t.sort=e.first)}},inputs:{resourcesCosts:"resourcesCosts"},decls:52,vars:4,consts:[["matSort","","matSortDirection","asc","matSortDisableClear","",3,"dataSource","matSortChange"],["table",""],["matColumnDef","userNumber"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","userName"],[3,"matTooltip",4,"matCellDef"],["matColumnDef","year"],["matColumnDef","month1"],["matColumnDef","month2"],["matColumnDef","month3"],["matColumnDef","month4"],["matColumnDef","month5"],["matColumnDef","month6"],["matColumnDef","month7"],["matColumnDef","month8"],["matColumnDef","month9"],["matColumnDef","month10"],["matColumnDef","month11"],["matColumnDef","month12"],["matColumnDef","buttons"],[4,"matHeaderCellDef"],["class"," table-primary table-*",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[3,"matTooltip"],[1,"span-ellipsis"],["type","button","matTooltip","Edit cost",1,"btn","btn-mini","btn-primary","ripple","f-center","light",3,"click"],[1,"material-icons"],["type","button","matTooltip","Delete cost",1,"btn","btn-mini","btn-danger","ripple","f-center","light",3,"click"],[1,"table-primary","table-*"]],template:function(e,t){1&e&&(x.\u0275\u0275elementStart(0,"mat-table",0,1),x.\u0275\u0275listener("matSortChange",function(e){return t.onSortData(e)}),x.\u0275\u0275elementContainerStart(2,2),x.\u0275\u0275template(3,te,2,0,"mat-header-cell",3),x.\u0275\u0275template(4,ne,2,1,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(5,5),x.\u0275\u0275template(6,re,2,0,"mat-header-cell",3),x.\u0275\u0275template(7,ie,3,2,"mat-cell",6),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(8,7),x.\u0275\u0275template(9,oe,2,0,"mat-header-cell",3),x.\u0275\u0275template(10,se,2,1,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(11,8),x.\u0275\u0275template(12,ae,2,0,"mat-header-cell",3),x.\u0275\u0275template(13,le,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(14,9),x.\u0275\u0275template(15,ce,2,0,"mat-header-cell",3),x.\u0275\u0275template(16,de,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(17,10),x.\u0275\u0275template(18,me,2,0,"mat-header-cell",3),x.\u0275\u0275template(19,ue,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(20,11),x.\u0275\u0275template(21,he,2,0,"mat-header-cell",3),x.\u0275\u0275template(22,pe,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(23,12),x.\u0275\u0275template(24,ge,2,0,"mat-header-cell",3),x.\u0275\u0275template(25,fe,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(26,13),x.\u0275\u0275template(27,Se,2,0,"mat-header-cell",3),x.\u0275\u0275template(28,ve,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(29,14),x.\u0275\u0275template(30,Ce,2,0,"mat-header-cell",3),x.\u0275\u0275template(31,ye,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(32,15),x.\u0275\u0275template(33,be,2,0,"mat-header-cell",3),x.\u0275\u0275template(34,xe,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(35,16),x.\u0275\u0275template(36,Ie,2,0,"mat-header-cell",3),x.\u0275\u0275template(37,we,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(38,17),x.\u0275\u0275template(39,De,2,0,"mat-header-cell",3),x.\u0275\u0275template(40,Ee,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(41,18),x.\u0275\u0275template(42,Pe,2,0,"mat-header-cell",3),x.\u0275\u0275template(43,Me,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(44,19),x.\u0275\u0275template(45,Re,2,0,"mat-header-cell",3),x.\u0275\u0275template(46,Fe,3,5,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(47,20),x.\u0275\u0275template(48,Oe,1,0,"mat-header-cell",21),x.\u0275\u0275template(49,Ne,8,0,"mat-cell",4),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275template(50,_e,1,0,"mat-header-row",22),x.\u0275\u0275template(51,ke,1,0,"mat-row",23),x.\u0275\u0275elementEnd()),2&e&&(x.\u0275\u0275property("dataSource",t.dataSource),x.\u0275\u0275advance(50),x.\u0275\u0275property("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),x.\u0275\u0275advance(1),x.\u0275\u0275property("matRowDefColumns",t.displayedColumns))},directives:[Z.BZ,W.YE,Z.w1,Z.fO,Z.Dz,Z.as,Z.nj,Z.ge,W.nU,Z.ev,ee.gM,Z.XQ,Z.Gk],pipes:[r.DecimalPipe],styles:[".mat-table[_ngcontent-%COMP%]{overflow:auto;border-radius:4px;max-height:calc(100vh - 342px)}table[_ngcontent-%COMP%]{width:100%}.span-ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mat-header-cell[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:600}.material-icons[_ngcontent-%COMP%]{font-size:15px}.mat-column-userNumber[_ngcontent-%COMP%]{flex:0 0 8%!important;width:8%!important}.mat-column-userName[_ngcontent-%COMP%]{flex:0 0 14%!important;width:14%!important}.mat-column-year[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month1[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month2[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month3[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month4[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month5[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month6[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month7[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month8[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month9[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month10[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month11[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-month12[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-buttons[_ngcontent-%COMP%]{flex:0 0 8%!important;width:8%!important;justify-content:center}  .mat-sort-header-arrow{color:#fff}"]}),e})();var Ae=n(34239);function Ye(e,t){1&e&&(x.\u0275\u0275elementStart(0,"div"),x.\u0275\u0275elementStart(1,"h1"),x.\u0275\u0275text(2,"No Result Found"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd())}function Te(e,t){1&e&&(x.\u0275\u0275elementStart(0,"div",30),x.\u0275\u0275elementStart(1,"div",31),x.\u0275\u0275elementStart(2,"div",32),x.\u0275\u0275elementStart(3,"div",1),x.\u0275\u0275elementStart(4,"div",33),x.\u0275\u0275element(5,"mat-spinner"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd())}function je(e,t){if(1&e&&(x.\u0275\u0275elementStart(0,"div",34),x.\u0275\u0275element(1,"app-resources-costs",35),x.\u0275\u0275pipe(2,"paginator"),x.\u0275\u0275elementEnd()),2&e){const e=x.\u0275\u0275nextContext();x.\u0275\u0275classProp("blurred",e.isLoading),x.\u0275\u0275advance(1),x.\u0275\u0275property("resourcesCosts",x.\u0275\u0275pipeBind3(2,3,e.resourcesCosts,e.searchFilterService.pageIndex,e.searchFilterService.pageSize))}}const Le=n(49457),Be=[{path:"",data:{title:"Costing",function:u.FI.Costing,status:!1},canActivate:[m.a1],children:[{path:"resource-cost",component:(()=>{class e{constructor(e){this.emptyResult=!1,this.listView=!1,this.resourcesCosts=[],this.resourcesIdentifiers=[],this.selectedResourcesIdentifiers=[],this.dropdownSettings={},this.subscription=new h.w0,this.destroyed=new h.xQ,this.dialog=e.get(l.uw),this.searchFilterService=e.get(o.nJ),this.notificationService=e.get(o.gq),this.excelService=e.get(o.xB),this.coreDataService=e.get(o.YY),this.costingService=e.get(w),this.dateTimeService=e.get(o.Cv),this.sortService=e.get(o.Kx),this.router=e.get(d.F0),this.paginatorPipe=new Y.Ry(this.searchFilterService)}ngOnInit(){const e=this.dateTimeService.today();this.startDate=L([e.getFullYear(),e.getMonth()]).toDate(),this.endDate=L(e).endOf("month").toDate(),this.minDate=this.startDate,this.maxDate=this.endDate,this.subscription.add(this.costingService.sortCosts.subscribe(e=>{this.onSortData(e)})),this.searchFilterService.pageIndex=0,this.searchFilterService.pageSize=24,this.dropdownSettings={singleSelection:!0,idField:"id",textField:"description",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,enableCheckAll:!0,allowSearchFilter:!0,maxHeight:150,placeholder:"criteria",searchPlaceholderText:"Search..."},this.user=JSON.parse(localStorage.getItem("currentUser")),this.subscription.add(this.searchFilterService.resultChanged.subscribe(()=>{setTimeout(()=>{this.emptyResult=0===this.searchFilterService.showingDataLastFilter.length})}));const t=JSON.parse(sessionStorage.getItem("ResourceCostSearch"));null!==t&&(null!=t.startDate&&(this.startDate=new Date(t.startDate),this.minDate=this.startDate),null!=t.endDate&&(this.endDate=new Date(t.endDate),this.maxDate=this.endDate),this.selectedResourcesIdentifiers=t.selectedResourcesIdentifiers,this.selectedResourcesIds=this.selectedResourcesIdentifiers.map(e=>e.id).join(",")),this.getResources(),this.subscription.add(this.costingService.reloadCosts.subscribe(e=>{e&&!0===e.getPrevious&&(this.searchResourcesCosts(),this.searchFilterService.pageSize=e.pageSize,this.searchFilterService.pageIndex=e.pageIndex,this.costingService.reloadCosts.next())}))}ngOnDestroy(){this.subscription.unsubscribe(),this.searchFilterService.showingDataLastFilter=[]}getResources(){this.coreDataService.getUsers().subscribe(e=>{null!=e&&(this.resourcesIdentifiers=e,this.resourcesIdentifiers=this.resourcesIdentifiers.filter(e=>-1===e.description.indexOf(" (PFE")&&-1===e.description.indexOf(" (STA")))})}searchResourcesCosts(){this.searchFilterService.pageIndex=0,this.selectedResourcesIds=this.selectedResourcesIdentifiers.map(e=>e.id).join(",");const e=new y;e.startDate=this.startDate,e.endDate=this.endDate,e.selectedResourcesIdentifiers=this.selectedResourcesIdentifiers,sessionStorage.setItem("ResourceCostSearch",JSON.stringify(e)),this.isLoading=!0,this.costingService.getResourcesCosts(this.selectedResourcesIds,this.startDate.getFullYear(),this.endDate.getFullYear()).subscribe(e=>{this.isLoading=!1,this.resourcesCosts=e,this.resourcesCostsLength=this.resourcesCosts.length,this.listView=!0,this.emptyResult=!1})}dateFormat(e){return null==e||"0001-01-01T00:00:00"===e?"":this.dateTimeService.getShortFormat(e)}dateOnly(e){return this.dateTimeService.dateOnly(e)}onSortData(e){e.active&&""!==e.direction&&this.resourcesCosts.sort((t,n)=>{const r="asc"===e.direction;switch(e.active){case"userNumber":return this.sortService.compare(t.userNumber,n.userNumber,r,!1);case"userName":return this.sortService.compare(t.userName,n.userName,r,!1);case"year":return this.sortService.compare(t.year,n.year,r,!1);case"month1":return this.sortService.compare(t.month1,n.month1,r,!0);case"month2":return this.sortService.compare(t.month2,n.month2,r,!0);case"month3":return this.sortService.compare(t.month3,n.month3,r,!0);case"month4":return this.sortService.compare(t.month4,n.month4,r,!0);case"month5":return this.sortService.compare(t.month5,n.month5,r,!0);case"month6":return this.sortService.compare(t.month6,n.month6,r,!0);case"month7":return this.sortService.compare(t.month7,n.month7,r,!0);case"month8":return this.sortService.compare(t.month8,n.month8,r,!0);case"month9":return this.sortService.compare(t.month9,n.month9,r,!0);case"month10":return this.sortService.compare(t.month10,n.month10,r,!0);case"month11":return this.sortService.compare(t.month11,n.month11,r,!0);case"month12":return this.sortService.compare(t.month12,n.month12,r,!0);default:return 0}}),this.paginatorPipe.transform(this.resourcesCosts,this.searchFilterService.pageIndex,this.searchFilterService.pageSize)}daysChangePeriodFrom(e){const t=new Date(e);this.startDate=L([t.getFullYear()]).toDate(),this.minDate=this.startDate}daysChangePeriodTo(e){const t=new Date(e);this.endDate=L(t).endOf("year").toDate(),this.maxDate=this.endDate}addResourceCosts(){this.router.navigate(["/project-management/costing/add-resource-cost"]),void 0!==this.resourcesCostsLength&&this.costingService.reloadCosts.next({getPrevious:!1,pageIndex:this.searchFilterService.pageIndex,pageSize:this.searchFilterService.pageSize})}DeleteAllCosts(){const e=JSON.parse(sessionStorage.getItem("ResourceCostSearch"));let t="Are you sur to delete all the costs for the period from ";e&&(e.startDate&&(t+=new Date(e.startDate).getFullYear()),e.endDate&&(t+=" to "+new Date(e.endDate).getFullYear()),e.selectedResourcesIdentifiers&&e.selectedResourcesIdentifiers[0]&&(t+=" and for ressource "+e.selectedResourcesIdentifiers[0].description),t+=" ?"),V().fire({text:t,icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",showLoaderOnConfirm:!0,preConfirm:()=>{this.costingService.deleteAllCosts(this.resourcesCosts,this.user.userId).subscribe(()=>{this.notificationService.success("User costs deleted"),this.costingService.reloadCosts.next({getPrevious:!0,pageIndex:this.searchFilterService.pageIndex,pageSize:this.searchFilterService.pageSize})},()=>{this.notificationService.danger("Delete costs failed")})}})}downloadTemplate(){Le.saveAs("./assets/docs/ImportResourcesCostsTemplate.xlsx","Import Resources Costs Template")}importFromExcel(){this.uploadDialogRef=this.dialog.open(j,{disableClose:!1,panelClass:"form_modal",width:"600",height:"260px",hasBackdrop:!0,data:{}}),this.costingService.reloadCosts.next({getPrevious:!1,pageIndex:this.searchFilterService.pageIndex,pageSize:this.searchFilterService.pageSize})}exportToExcel(){if(void 0!==this.resourcesCosts&&0!==this.resourcesCosts.length){const e=[{header:"Matricule",key:"userNumber",width:10},{header:"Ressource",key:"userName",width:30},{header:"Year",key:"year",width:10},{header:"January",key:"month1",width:15},{header:"February",key:"month2",width:15},{header:"March",key:"month3",width:15},{header:"April",key:"month4",width:15},{header:"May",key:"month5",width:15},{header:"June",key:"month6",width:15},{header:"July",key:"month7",width:15},{header:"August",key:"month8",width:15},{header:"September",key:"month9",width:15},{header:"October",key:"month10",width:15},{header:"November",key:"month11",width:15},{header:"December",key:"month12",width:15}],t=[],n=[],r=[];r.push({cell:"A1",font:{bold:!0}},{cell:"B1",font:{bold:!0}},{cell:"C1",font:{bold:!0}},{cell:"D1",font:{bold:!0}},{cell:"E1",font:{bold:!0}},{cell:"F1",font:{bold:!0}},{cell:"G1",font:{bold:!0}},{cell:"H1",font:{bold:!0}},{cell:"I1",font:{bold:!0}},{cell:"J1",font:{bold:!0}},{cell:"K1",font:{bold:!0}},{cell:"L1",font:{bold:!0}},{cell:"M1",font:{bold:!0}},{cell:"N1",font:{bold:!0}},{cell:"O1",font:{bold:!0}}),this.resourcesCosts.forEach(e=>{const n=[];n.push(e.userNumber),n.push(e.userName),n.push(e.year),n.push(e.month1),n.push(e.month2),n.push(e.month3),n.push(e.month4),n.push(e.month5),n.push(e.month6),n.push(e.month7),n.push(e.month8),n.push(e.month9),n.push(e.month10),n.push(e.month11),n.push(e.month12),t.push(n)}),this.excelService.generateExcel(e,t,n,r,"Resource_Cost")}}}return e.\u0275fac=function(t){return new(t||e)(x.\u0275\u0275directiveInject(x.Injector))},e.\u0275cmp=x.\u0275\u0275defineComponent({type:e,selectors:[["app-resource-cost"]],decls:51,vars:14,consts:[[1,"page-body"],[1,"row"],[1,"col-xl-12","col-lg-12","filter-bar"],[1,"card","m-b-10"],[1,"card-body","p-t-10"],[1,"col-xl-4","col-lg-12"],[1,"mat-subheader","col-sm-2"],[1,"search-input","col-sm-5"],[3,"selectedDate","maxDate","daysChange"],[3,"selectedDate","minDate","daysChange"],[1,"col-sm-10"],[1,"multi-search",2,"width","120%",3,"placeholder","data","ngModel","settings","ngModelChange"],[1,"col-xl-3","col-lg-12"],[1,"col-xl-1","col-lg-12"],[1,"text-center"],[1,"btn","btn-md","btn-primary","ripple","m-t-5",3,"click"],[1,"navbar","navbar-light","bg-faded","m-b-10","p-10"],[1,"nav-item","nav-grid","col-sm-5"],["type","button",1,"btn","btn-sm","btn-primary","m-r-10",2,"font-size","inherit",3,"click"],[1,"icofont","icofont-plus"],[1,"icofont","icofont-ui-delete","icon-pointer",2,"font-size","medium"],[1,"icofont","icofont-upload-alt",2,"font-size","medium"],[1,"fa","fa-file-excel-o",2,"font-size","medium"],[1,"col-sm-7"],[3,"pageSize","pageIndex","length"],[4,"ngIf"],[1,"wrapper"],[1,"div-scrollable"],["class","overlay",4,"ngIf"],["class","loaded-content",3,"blurred",4,"ngIf"],[1,"overlay"],[1,"spinner-wrapper"],[1,"container"],["id","loader"],[1,"loaded-content"],[3,"resourcesCosts"]],template:function(e,t){1&e&&(x.\u0275\u0275elementStart(0,"div",0),x.\u0275\u0275elementStart(1,"div",1),x.\u0275\u0275elementStart(2,"div",2),x.\u0275\u0275elementStart(3,"div",3),x.\u0275\u0275elementStart(4,"div",4),x.\u0275\u0275elementStart(5,"div",1),x.\u0275\u0275elementStart(6,"div",5),x.\u0275\u0275elementStart(7,"mat-list"),x.\u0275\u0275elementStart(8,"mat-list-item"),x.\u0275\u0275elementStart(9,"h3",6),x.\u0275\u0275text(10,"Period"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(11,"div",7),x.\u0275\u0275elementStart(12,"app-select-year",8),x.\u0275\u0275listener("daysChange",function(e){return t.daysChangePeriodFrom(e)}),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(13,"div",7),x.\u0275\u0275elementStart(14,"app-select-year",9),x.\u0275\u0275listener("daysChange",function(e){return t.daysChangePeriodTo(e)}),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(15,"div",5),x.\u0275\u0275elementStart(16,"mat-list"),x.\u0275\u0275elementStart(17,"mat-list-item"),x.\u0275\u0275elementStart(18,"h3",6),x.\u0275\u0275text(19,"Resource"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(20,"div",10),x.\u0275\u0275elementStart(21,"ng-multiselect-dropdown",11),x.\u0275\u0275listener("ngModelChange",function(e){return t.selectedResourcesIdentifiers=e}),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275element(22,"div",12),x.\u0275\u0275elementStart(23,"div",13),x.\u0275\u0275elementStart(24,"div",14),x.\u0275\u0275elementStart(25,"button",15),x.\u0275\u0275listener("click",function(){return t.searchResourcesCosts()}),x.\u0275\u0275text(26,"Search"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(27,"nav",16),x.\u0275\u0275elementStart(28,"div",17),x.\u0275\u0275elementStart(29,"button",18),x.\u0275\u0275listener("click",function(){return t.addResourceCosts()}),x.\u0275\u0275element(30,"em",19),x.\u0275\u0275text(31," Costs "),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(32,"button",18),x.\u0275\u0275listener("click",function(){return t.DeleteAllCosts()}),x.\u0275\u0275element(33,"em",20),x.\u0275\u0275text(34," Delete all "),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(35,"button",18),x.\u0275\u0275listener("click",function(){return t.downloadTemplate()}),x.\u0275\u0275element(36,"em",21),x.\u0275\u0275text(37," Template "),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(38,"button",18),x.\u0275\u0275listener("click",function(){return t.importFromExcel()}),x.\u0275\u0275element(39,"em",22),x.\u0275\u0275text(40," Import "),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(41,"button",18),x.\u0275\u0275listener("click",function(){return t.exportToExcel()}),x.\u0275\u0275element(42,"em",22),x.\u0275\u0275text(43," Export "),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(44,"div",23),x.\u0275\u0275element(45,"app-paginator",24),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275template(46,Ye,3,0,"div",25),x.\u0275\u0275elementStart(47,"div",26),x.\u0275\u0275elementStart(48,"div",27),x.\u0275\u0275template(49,Te,6,0,"div",28),x.\u0275\u0275template(50,je,3,7,"div",29),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementEnd()),2&e&&(x.\u0275\u0275advance(12),x.\u0275\u0275property("selectedDate",t.startDate)("maxDate",t.maxDate),x.\u0275\u0275advance(2),x.\u0275\u0275property("selectedDate",t.endDate)("minDate",t.minDate),x.\u0275\u0275advance(7),x.\u0275\u0275property("placeholder","Select...")("data",t.resourcesIdentifiers)("ngModel",t.selectedResourcesIdentifiers)("settings",t.dropdownSettings),x.\u0275\u0275advance(24),x.\u0275\u0275property("pageSize",t.searchFilterService.pageSize)("pageIndex",t.searchFilterService.pageIndex)("length",t.resourcesCostsLength),x.\u0275\u0275advance(1),x.\u0275\u0275property("ngIf",t.emptyResult&&t.listView),x.\u0275\u0275advance(3),x.\u0275\u0275property("ngIf",t.isLoading),x.\u0275\u0275advance(1),x.\u0275\u0275property("ngIf",t.listView&&!t.emptyResult))},directives:[$.i$,$.Tg,U,q.OP,s.NgControlStatus,s.NgModel,Q.M2,K.J,r.NgIf,X.$g,ze],pipes:[Ae.R],styles:[".filter-button{text-align:center;width:100%;margin:2%}.search-input{font-size:14px}.pointer{cursor:pointer}.reset-all-btn{cursor:pointer;font-size:20px}.reset-all-btn:hover{color:red}.arrow-icon{font-size:10px}.close-icon{float:right;font-size:22px}.multi-search{width:100%}.mat-list .mat-subheader{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.mat-list-header{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.material-icons{font-size:25px}.wrapper{width:100%;height:100%}.overlay{position:absolute;z-index:1002;background-color:#ffffff80;width:100%;height:100%}.spinner-wrapper{display:flex;justify-content:center;justify-items:center}#loader{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}\n"],encapsulation:2}),e})(),data:{title:"Resource Cost",icon:"icon-home",caption:"",function:u.FI.ResourceCost,status:!0},canActivate:[m.a1]},{path:"add-resource-cost",component:A,data:{title:"Add Resource Cost",icon:"icon-home",function:u.FI.ResourceCost,status:!0},canActivate:[m.a1]},{path:"edit-resource-cost/:userCostId",component:A,data:{title:"Edit Resource Cost",icon:"icon-home",function:u.FI.ResourceCost,status:!0},canActivate:[m.a1]}]}];let Ve=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=x.\u0275\u0275defineInjector({imports:[[d.Bz.forChild(Be)],d.Bz]}),e})();var $e=n(91841),Ge=n(36332);let Je=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=x.\u0275\u0275defineInjector({providers:[],imports:[[r.CommonModule,i.m,s.FormsModule,s.ReactiveFormsModule,i.q,l.Is,Ge.o,q.ZQ.forRoot(),$e.HttpClientModule]]}),e})();var He=n(44995);const Ue={parse:{dateInput:"L"},display:{dateInput:"L",yearLabel:"YYYY",dateA11yLabel:"LL",yearA11yLabel:"YYYY"}};let qe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=x.\u0275\u0275defineInjector({providers:[He.Y4,w,o.n4,o.Kx,{provide:a.Ad,useValue:"fr-FR"},{provide:a._A,useClass:c.t7,deps:[a.Ad]},{provide:a.sG,useValue:Ue}],imports:[[r.CommonModule,Ve,i.m,s.FormsModule,s.ReactiveFormsModule,i.q,l.Is,Je]]}),e})()},72172:function(e,t,n){n.d(t,{z:function(){return i}});var r=n(37716);let i=(()=>{class e{constructor(){}blockPaste(e){const t=e.clipboardData.getData("text");let n=0,r=!1;for(;n<t.length&&!0!==r;)this.isNotNumber(t[n].charCodeAt())?(r=!0,e.preventDefault()):n++}onKeydownHandler(e){const t=e.key;void 0!==t&&(this.isNotNumber(t.charCodeAt())&&"Backspace"!==t&&"Delete"!==t&&"ArrowLeft"!==t&&"ArrowRight"!==t&&"Tab"!==t&&e.preventDefault(),null!=this.inputValue&&(-1!==this.inputValue.toString().indexOf(".")||-1!==this.inputValue.toString().indexOf(","))&&(46===t.charCodeAt()||44===t.charCodeAt())&&e.preventDefault())}isNotNumber(e){return e<44||e>57||45===e||47===e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["","appNumberValidator",""]],hostBindings:function(e,t){1&e&&r.\u0275\u0275listener("paste",function(e){return t.blockPaste(e)})("keydown",function(e){return t.onKeydownHandler(e)})},inputs:{inputValue:"inputValue"}}),e})()},55750:function(e,t,n){n.d(t,{Ry:function(){return r.R}});var r=n(34239);n(62758)},34239:function(e,t,n){n.d(t,{R:function(){return o}});var r=n(37716),i=n(10337);let o=(()=>{class e{constructor(e){this.searchFilterService=e}transform(e,t,n){if(this.startIndex=t*(n*this.searchFilterService.rowSpan)+1,this.endIndex=n*this.searchFilterService.rowSpan*(t+1),null!=e)return this.searchFilterService.showingDataLastFilter=e.slice(this.startIndex-1,this.endIndex),this.searchFilterService.resultChanged.next(),e.slice(this.startIndex-1,this.endIndex)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(i.nJ,16))},e.\u0275pipe=r.\u0275\u0275definePipe({name:"paginator",type:e,pure:!0}),e})()},39924:function(e,t,n){n.d(t,{J:function(){return h}});var r=n(37716),i=n(99692),o=n(10337),s=n(98295),a=n(67441),l=n(3679),c=n(38583),d=n(72458);function m(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"mat-option",6),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;r.\u0275\u0275property("value",e),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e)}}const u=function(){return[6,12,24,60,120]};let h=(()=>{class e{constructor(e){this.searchFilterService=e,this.disabled=!1,this.hidePageSize=!1,this.showFirstLastButtons=!1,this.page=new r.EventEmitter}set pageIndexChanged(e){this.pageIndex=e,this.updateGoto()}set lengthChanged(e){this.length=e,this.updateGoto()}set pageSizeChanged(e){this.pageSize=e,this.updateGoto()}ngOnInit(){this.updateGoto()}onPaginateChange(e){this.searchFilterService.pageIndex=e.pageIndex,this.searchFilterService.pageSize=e.pageSize,this.length=e.length,this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.updateGoto(),this.emitPageEvent(e)}updateGoto(){this.goTo=(this.pageIndex||0)+1,this.pageNumbers=[];const e=Math.ceil(this.length/this.pageSize);for(let t=1;t<=e;t++)this.pageNumbers.push(t)}goToChange(){this.paginator.pageIndex=this.goTo-1,this.searchFilterService.pageIndex=this.paginator.pageIndex,this.searchFilterService.pageSize=this.paginator.pageSize,this.emitPageEvent({length:this.paginator.length,pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize})}emitPageEvent(e){this.page.next(e)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(o.nJ))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-paginator"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(i.NW,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.paginator=e.first)}},inputs:{length:"length",pageIndex:"pageIndex",pageSize:"pageSize",disabled:"disabled",hidePageSize:"hidePageSize",pageSizeOptions:"pageSizeOptions",showFirstLastButtons:"showFirstLastButtons",pageIndexChanged:["pageIndex","pageIndexChanged"],lengthChanged:["length","lengthChanged"],pageSizeChanged:["pageSize","pageSizeChanged"]},outputs:{page:"page"},decls:8,vars:8,consts:[[1,"d-flex"],[3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementStart(1,"mat-paginator",1),r.\u0275\u0275listener("page",function(e){return t.onPaginateChange(e)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",2),r.\u0275\u0275elementStart(3,"div",3),r.\u0275\u0275text(4,"Go To: "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"mat-form-field"),r.\u0275\u0275elementStart(6,"mat-select",4),r.\u0275\u0275listener("ngModelChange",function(e){return t.goTo=e})("selectionChange",function(){return t.goToChange()}),r.\u0275\u0275template(7,m,2,2,"mat-option",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("length",t.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",r.\u0275\u0275pureFunction0(7,u))("showFirstLastButtons",!0),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngModel",t.goTo),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.pageNumbers))},directives:[i.NW,s.KE,a.gD,l.NgControlStatus,l.NgModel,c.NgForOf,d.ey],styles:['.mat-paginator[_ngcontent-%COMP%]{width:100%;float:right}.d-flex[_ngcontent-%COMP%]{display:flex}  .mat-select-trigger{font-size:12px}  .mat-option{font-size:12px}.go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}.go-to-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:56px;margin:6px 4px 0;font-size:12px;font-family:Roboto,"Helvetica Neue",sans-serif}.go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{width:36px;margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,"Helvetica Neue",sans-serif}']}),e})()}}]);