"use strict";(self.webpackChunktelnetteam_app=self.webpackChunktelnetteam_app||[]).push([[258],{60258:function(e,t,n){n.r(t),n.d(t,{AttendanceModule:function(){return yt}});var i=n(38583),r=n(3679),a=n(22238),s=n(38590),o=n(32403),l=n(88452),c=n(63753),d=n(62028),m=n(70833),g=n(46782);class p{}class u{}var h=n(82636),f=function(e,t,n,i){var r,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,n,s):r(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s};function y(e){return Reflect.metadata("type",e)}function k(e){return Reflect.metadata("dir",e)}function S(e){return Reflect.metadata("persisted",e)}var v=(()=>{return(e=v||(v={}))[e.In=1]="In",e[e.Out=2]="Out",v;var e})(),b=(()=>{return(e=b||(b={}))[e.New=0]="New",e[e.Valid=1]="Valid",b;var e})();class C{}f([S(!0),y(h.sP.Decimal),k(h.Nm.Input)],C.prototype,"clockingId",void 0),f([S(!0),y(h.sP.Decimal),k(h.Nm.Input)],C.prototype,"clockingType",void 0),f([S(!0),y(h.sP.Decimal),k(h.Nm.Input)],C.prototype,"clockingSite",void 0),f([S(!0),y(h.sP.Date),k(h.Nm.Input)],C.prototype,"clockingDate",void 0),f([S(!0),y(h.sP.Decimal),k(h.Nm.Input)],C.prototype,"clockingAnomaly",void 0),f([S(!0),y(h.sP.Decimal),k(h.Nm.Input)],C.prototype,"userId",void 0),f([S(!1)],C.prototype,"clockingSingleSession",void 0),f([S(!1),y(h.sP.Decimal),k(h.Nm.Input)],C.prototype,"clockingState",void 0),f([S(!0),y(h.sP.Decimal),k(h.Nm.Input)],C.prototype,"userModif",void 0),f([S(!1)],C.prototype,"firstName",void 0),f([S(!1)],C.prototype,"lastName",void 0),f([S(!1)],C.prototype,"userNumber",void 0),f([S(!1)],C.prototype,"clockingAnomalieDesc",void 0),f([S(!1)],C.prototype,"clockingSiteDesc",void 0);class D{}class x{}class w{}var I=n(55750),T=n(37716),E=n(51586),M=n(10337);let P=(()=>{class e{constructor(e,t){this.genericService=e,this.entityParameterService=t,this.previousState=new m.tq(1),this.sortClockings=new m.xQ,this.selectCurrentWeek=new m.xQ,this.selectedUser=new m.xQ,this.stopClockingsGet=new m.xQ}getUserClockings(e,t,n){const i=new Array;this.entityParameterService.AddEntityParameter(i,"userId",e.toString(),h.sP.Decimal,h.Nm.Input),this.entityParameterService.AddEntityParameter(i,"fromDate",t.toString(),h.sP.Date,h.Nm.Input),this.entityParameterService.AddEntityParameter(i,"toDate",n.toString(),h.sP.Date,h.Nm.Input);const r=new E.u;return r.storedProcedureName="RHTT.GetUserClockings",r.entitiesParameters=new Array(i),r.cursorName="curs",this.genericService.createService("/Data/Get",r)}deleteClocking(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"pointageId",e.toString(),h.sP.Decimal,h.Nm.InputOutput);const n=new E.u;return n.storedProcedureName="RHTT.DeletePointage",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Delete",n)}InsertOrModifyClocking(e){const t=new Array;this.entityParameterService.AddEntityParameters(t,e);const n=new E.u;return n.storedProcedureName="RHTT.InsertOrModifyClocking",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Save",n)}getUsersClockings(e,t,n,i,r){const a=new Array;this.entityParameterService.AddEntityParameter(a,"usersId",e,h.sP.Varchar2,h.Nm.Input),this.entityParameterService.AddEntityParameter(a,"statesId",t,h.sP.Varchar2,h.Nm.Input),this.entityParameterService.AddEntityParameter(a,"typesId",n,h.sP.Varchar2,h.Nm.Input),this.entityParameterService.AddEntityParameter(a,"fromDate",null!=i?i.toString():"",h.sP.Date,h.Nm.Input),this.entityParameterService.AddEntityParameter(a,"toDate",null!=r?r.toString():"",h.sP.Date,h.Nm.Input);const s=new E.u;return s.storedProcedureName="RHTT.GetUsersClockings",s.entitiesParameters=new Array(a),s.cursorName="curs",this.genericService.createService("/Data/Get",s)}getSites(){const e=new E.u;return e.storedProcedureName="RHTT.GetSites",e.cursorName="curs",this.genericService.createService("/Data/Get",e)}validateClocking(e){const t=new Array;this.entityParameterService.AddEntityParameters(t,e);const n=new E.u;return n.storedProcedureName="RHTT.ValidateClocking",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Save",n)}refuseClocking(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"clockingId",e.toString(),h.sP.Decimal,h.Nm.InputOutput);const n=new E.u;return n.storedProcedureName="RHTT.RefuseClocking",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Save",n)}deleteNewClocking(e){const t=new Array;this.entityParameterService.AddEntityParameter(t,"clockingId",e.toString(),h.sP.Decimal,h.Nm.InputOutput);const n=new E.u;return n.storedProcedureName="RHTT.DeleteNewClocking",n.entitiesParameters=new Array(t),this.genericService.createService("/Data/Save",n)}getAnomalies(){const e=new E.u;return e.storedProcedureName="RHTT.GetAnomalies",e.cursorName="curs",this.genericService.createService("/Data/Get",e)}getMissionInWeek(e,t,n){const i=new Array;this.entityParameterService.AddEntityParameter(i,"userId",e.toString(),h.sP.Decimal,h.Nm.Input),this.entityParameterService.AddEntityParameter(i,"fromDate",t.toString(),h.sP.Date,h.Nm.Input),this.entityParameterService.AddEntityParameter(i,"toDate",n.toString(),h.sP.Date,h.Nm.Input);const r=new E.u;return r.storedProcedureName="RHTT.GetMissionInWeek",r.entitiesParameters=new Array(i),r.cursorName="curs",this.genericService.createService("/Data/Get",r)}getBusinessTripInWeek(e,t,n){const i=new Array;this.entityParameterService.AddEntityParameter(i,"userId",e.toString(),h.sP.Decimal,h.Nm.Input),this.entityParameterService.AddEntityParameter(i,"fromDate",t.toString(),h.sP.Date,h.Nm.Input),this.entityParameterService.AddEntityParameter(i,"toDate",n.toString(),h.sP.Date,h.Nm.Input);const r=new E.u;return r.storedProcedureName="RHTT.GetBusinessTripInWeek",r.entitiesParameters=new Array(i),r.cursorName="curs",this.genericService.createService("/Data/Get",r)}GetPublicHoliday(){const e=new E.u;return e.storedProcedureName="RHTT.GetPublicHoliday",e.cursorName="curs",this.genericService.createService("/Data/Get",e)}getHolidaysInWeek(e,t){const n=new Array;this.entityParameterService.AddEntityParameter(n,"fromDate",e.toString(),h.sP.Date,h.Nm.Input),this.entityParameterService.AddEntityParameter(n,"toDate",t.toString(),h.sP.Date,h.Nm.Input);const i=new E.u;return i.storedProcedureName="RHTT.GetHolidaysInWeek",i.entitiesParameters=new Array(n),i.cursorName="curs",this.genericService.createService("/Data/Get",i)}}return e.\u0275fac=function(t){return new(t||e)(T.\u0275\u0275inject(M.MY),T.\u0275\u0275inject(M.RZ))},e.\u0275prov=T.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var O=n(19992),A=n(98295),N=n(49983),F=n(43220),H=n(67827),_=n(69517),W=n(39924),L=n(4885),V=n(71840);function j(e,t){1&e&&(T.\u0275\u0275elementStart(0,"strong",17),T.\u0275\u0275text(1,"Entry"),T.\u0275\u0275elementEnd())}function U(e,t){1&e&&(T.\u0275\u0275elementStart(0,"strong",18),T.\u0275\u0275text(1,"Exit"),T.\u0275\u0275elementEnd())}function R(e,t){1&e&&(T.\u0275\u0275elementStart(0,"strong",19),T.\u0275\u0275text(1,"New"),T.\u0275\u0275elementEnd())}function z(e,t){1&e&&(T.\u0275\u0275elementStart(0,"strong",20),T.\u0275\u0275text(1,"Valid"),T.\u0275\u0275elementEnd())}function B(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"button",21),T.\u0275\u0275listener("click",function(){return T.\u0275\u0275restoreView(e),T.\u0275\u0275nextContext().validateClocking()}),T.\u0275\u0275elementStart(1,"em",22),T.\u0275\u0275text(2,"done"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}}function $(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"button",23),T.\u0275\u0275listener("click",function(){return T.\u0275\u0275restoreView(e),T.\u0275\u0275nextContext().refuseClocking()}),T.\u0275\u0275elementStart(1,"em",22),T.\u0275\u0275text(2,"cancel"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}}function G(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"button",23),T.\u0275\u0275listener("click",function(){return T.\u0275\u0275restoreView(e),T.\u0275\u0275nextContext().edit()}),T.\u0275\u0275elementStart(1,"em",22),T.\u0275\u0275text(2,"edit"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}}function q(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"button",23),T.\u0275\u0275listener("click",function(){return T.\u0275\u0275restoreView(e),T.\u0275\u0275nextContext().refuseClocking()}),T.\u0275\u0275elementStart(1,"em",22),T.\u0275\u0275text(2,"delete_forever"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}}let Y=(()=>{class e{constructor(e,t,n){this.attendanceService=e,this.notificationService=t,this._router=n,this.refreshCard=new T.EventEmitter}ngOnInit(){this.currentUser=JSON.parse(localStorage.getItem("currentUser"))}convertToInt(e){return+e}isButtonDeletedVisible(){return this.clocking.clockingState===V.nx.New&&this.clocking.userId===this.currentUser.userId}isButtonVisible(){return this.clocking.clockingState===V.nx.New&&this.clocking.userId!==this.currentUser.userId||-1!==this.currentUser.functionsId.indexOf(d.FI.ValidateLeave)}validateClocking(){this.clocking.userModif=this.currentUser.userId,this.attendanceService.validateClocking(this.clocking).subscribe(()=>{this.notificationService.success("Clocking is Validate"),this.refreshCard.emit()})}refuseClocking(){this.attendanceService.refuseClocking(this.clocking.clockingId).subscribe(()=>{this.notificationService.success("Clocking is refused"),this.refreshCard.emit()})}deleteClocking(){this.attendanceService.refuseClocking(this.clocking.clockingId).subscribe(()=>{this.notificationService.success("Clocking is deleted"),this.refreshCard.emit()})}edit(){this._router.navigate(["/attendance/attendance/"+this.clocking.clockingId])}}return e.\u0275fac=function(t){return new(t||e)(T.\u0275\u0275directiveInject(P),T.\u0275\u0275directiveInject(M.gq),T.\u0275\u0275directiveInject(l.F0))},e.\u0275cmp=T.\u0275\u0275defineComponent({type:e,selectors:[["app-clocking-card"]],inputs:{clocking:"clocking"},outputs:{refreshCard:"refreshCard"},decls:37,vars:21,consts:[[1,"card"],[1,"card-header"],[1,"thick",2,"display","inline"],[1,"n","f-right"],["class","label label-entry",4,"ngIf"],["class","label label-exit",4,"ngIf"],["class","label label-new",4,"ngIf"],["class","label label-valid",4,"ngIf"],[1,"card-body"],[1,"row"],[1,"col-sm-12"],[1,"list","list-unstyled","text"],[1,"thick"],[1,"card-footer"],[1,"task-board"],["class","btn btn-mini btn-primary m-r-10 ripple light","type","button",3,"click",4,"ngIf"],["class","btn btn-mini btn-primary ripple light f-right","type","button",3,"click",4,"ngIf"],[1,"label","label-entry"],[1,"label","label-exit"],[1,"label","label-new"],[1,"label","label-valid"],["type","button",1,"btn","btn-mini","btn-primary","m-r-10","ripple","light",3,"click"],[1,"material-icons","icon"],["type","button",1,"btn","btn-mini","btn-primary","ripple","light","f-right",3,"click"]],template:function(e,t){1&e&&(T.\u0275\u0275elementStart(0,"div",0),T.\u0275\u0275elementStart(1,"div",1),T.\u0275\u0275elementStart(2,"span",2),T.\u0275\u0275text(3),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(4,"div",3),T.\u0275\u0275template(5,j,2,0,"strong",4),T.\u0275\u0275template(6,U,2,0,"strong",5),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(7,"div",3),T.\u0275\u0275template(8,R,2,0,"strong",6),T.\u0275\u0275template(9,z,2,0,"strong",7),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(10,"div",8),T.\u0275\u0275elementStart(11,"div",9),T.\u0275\u0275elementStart(12,"div",10),T.\u0275\u0275elementStart(13,"ul",11),T.\u0275\u0275elementStart(14,"strong",12),T.\u0275\u0275text(15," Date: "),T.\u0275\u0275elementEnd(),T.\u0275\u0275text(16),T.\u0275\u0275pipe(17,"date"),T.\u0275\u0275elementStart(18,"strong",12),T.\u0275\u0275text(19," Time: "),T.\u0275\u0275elementEnd(),T.\u0275\u0275text(20),T.\u0275\u0275pipe(21,"date"),T.\u0275\u0275elementStart(22,"li"),T.\u0275\u0275elementStart(23,"strong",12),T.\u0275\u0275text(24,"Location: "),T.\u0275\u0275elementEnd(),T.\u0275\u0275text(25),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(26,"li"),T.\u0275\u0275elementStart(27,"strong",12),T.\u0275\u0275text(28,"Anomaly: "),T.\u0275\u0275elementEnd(),T.\u0275\u0275text(29),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(30,"div",13),T.\u0275\u0275elementStart(31,"div",14),T.\u0275\u0275template(32,B,3,0,"button",15),T.\u0275\u0275template(33,$,3,0,"button",16),T.\u0275\u0275template(34,G,3,0,"button",16),T.\u0275\u0275template(35,q,3,0,"button",16),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(36,"br")),2&e&&(T.\u0275\u0275advance(3),T.\u0275\u0275textInterpolate3(" ",t.clocking.userNumber," - ",t.clocking.firstName," ",t.clocking.lastName,""),T.\u0275\u0275advance(2),T.\u0275\u0275property("ngIf",1===t.clocking.clockingType),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",2===t.clocking.clockingType),T.\u0275\u0275advance(2),T.\u0275\u0275property("ngIf",0===t.clocking.clockingState),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",1===t.clocking.clockingState),T.\u0275\u0275advance(7),T.\u0275\u0275textInterpolate1(" ",T.\u0275\u0275pipeBind2(17,15,t.clocking.clockingDate,"dd/MM/yyyy")," \xa0 "),T.\u0275\u0275advance(4),T.\u0275\u0275textInterpolate1(" ",T.\u0275\u0275pipeBind2(21,18,t.clocking.clockingDate,"HH:mm")," \xa0 "),T.\u0275\u0275advance(5),T.\u0275\u0275textInterpolate1(" ",t.clocking.clockingSiteDesc," \xa0 "),T.\u0275\u0275advance(4),T.\u0275\u0275textInterpolate1(" ",t.clocking.clockingAnomalieDesc," "),T.\u0275\u0275advance(3),T.\u0275\u0275property("ngIf",0===t.clocking.clockingState&&t.clocking.userId!==t.convertToInt(t.currentUser.userId)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",0===t.clocking.clockingState&&t.clocking.userId!==t.convertToInt(t.currentUser.userId)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",t.clocking.userId===t.convertToInt(t.currentUser.userId)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",t.clocking.userId===t.convertToInt(t.currentUser.userId)))},directives:[i.NgIf],pipes:[i.DatePipe],styles:[".thick[_ngcontent-%COMP%]{font-weight:900}.text[_ngcontent-%COMP%]{font-size:14px}.icon[_ngcontent-%COMP%]{font-size:15px}.card-header[_ngcontent-%COMP%]{padding:13px;border-bottom:1px solid rgba(0,0,0,.125)}.label-entry[_ngcontent-%COMP%]{background:#33cc99;font-size:12px;color:#fff;font-weight:bold}.label-exit[_ngcontent-%COMP%]{background:#dc143c;font-size:12px;color:#fff;font-weight:bold}.label-valid[_ngcontent-%COMP%]{background:#33cc99;font-size:12px;color:#fff;font-weight:bold}.label-new[_ngcontent-%COMP%]{background:#00bcd4;font-size:12px;color:#fff;font-weight:bold}.card-body[_ngcontent-%COMP%]{padding-bottom:5px}.card-footer[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0}.task-board[_ngcontent-%COMP%]{margin-top:0}"]}),e})();var J=n(32789),Q=n(85718),K=n(67441),Z=n(72458);const X=["clockingForm"];function ee(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-option",16),T.\u0275\u0275text(1),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;T.\u0275\u0275property("value",e.id),T.\u0275\u0275advance(1),T.\u0275\u0275textInterpolate1(" ",e.description," ")}}function te(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-option",16),T.\u0275\u0275text(1),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;T.\u0275\u0275property("value",e.id),T.\u0275\u0275advance(1),T.\u0275\u0275textInterpolate1(" ",e.description," ")}}function ne(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-option",16),T.\u0275\u0275text(1),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;T.\u0275\u0275property("value",e.id),T.\u0275\u0275advance(1),T.\u0275\u0275textInterpolate1(" ",e.description," ")}}const ie=function(){return{standalone:!0}};let re=(()=>{class e{constructor(e,t,n,i,r){this.dialogRef=e,this.notificationService=t,this.attendanceService=n,this._router=i,this.clocking=new C,this.time={hour:14,minute:30},this.sites=[],this.clockingAnomaliesIdentifier=[],this.clockingTypesIdentifier=[{id:v.In,description:"Entry"},{id:v.Out,description:"Exit"}],this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.editClocking=r.editClocking}ngOnInit(){this.startTime=this.time,this.attendanceService.getAnomalies().subscribe(e=>{e.forEach(e=>{this.clockingAnomaliesIdentifier.push(Object.assign(new Q.x,e))})}),this.getSites()}getSites(){this.attendanceService.getSites().subscribe(e=>{this.sites=e})}close(){this.dialogRef.close()}save(){this.clocking.clockingId=0,this.clocking.userId=this.currentUser.userId,this.clockingForm.valid?(this.clocking.clockingDate=new Date(this.clocking.clockingDate),this.clocking.clockingDate.setHours(this.startTime.hour),this.clocking.clockingDate.setMinutes(this.startTime.minute),this.clocking.clockingState=0,this.clocking.userModif=this.currentUser.userId,this.attendanceService.InsertOrModifyClocking(this.clocking).subscribe(()=>{this.notificationService.success("Clocking is saved successfully"),this._router.navigate(["/attendance/attendance"])})):this.notificationService.danger("Please fill all required fields")}}return e.\u0275fac=function(t){return new(t||e)(T.\u0275\u0275directiveInject(a.so),T.\u0275\u0275directiveInject(M.gq),T.\u0275\u0275directiveInject(P),T.\u0275\u0275directiveInject(l.F0),T.\u0275\u0275directiveInject(a.WI))},e.\u0275cmp=T.\u0275\u0275defineComponent({type:e,selectors:[["app-add-clocking"]],viewQuery:function(e,t){if(1&e&&T.\u0275\u0275viewQuery(X,7),2&e){let e;T.\u0275\u0275queryRefresh(e=T.\u0275\u0275loadQuery())&&(t.clockingForm=e.first)}},decls:40,vars:19,consts:[[1,"modal_header"],[1,"modal_title"],[1,"material-icons","modal-close",3,"click"],[1,"card-body"],["id","clockingForm"],["clockingForm","ngForm"],["required","","matInput","","placeholder","Clocking Date","name","clockingDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"startView"],["clockingDate",""],[1,"col-sm-3"],[3,"ngModelOptions","ngModel","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Office","name","whereis","required","",3,"ngModelOptions","ngModel","ngModelChange"],["type","submit",1,"btn","btn-md","btn-primary","ripple","light","m-r-20","f-right",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"div",0),T.\u0275\u0275elementStart(1,"div",1),T.\u0275\u0275elementStart(2,"span"),T.\u0275\u0275text(3," Add Clocking "),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(4,"span"),T.\u0275\u0275elementStart(5,"em",2),T.\u0275\u0275listener("click",function(){return t.close()}),T.\u0275\u0275text(6,"close"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(7,"div",3),T.\u0275\u0275elementStart(8,"form",4,5),T.\u0275\u0275elementStart(10,"mat-form-field"),T.\u0275\u0275elementStart(11,"mat-label"),T.\u0275\u0275text(12,"Clocking date"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(13,"input",6),T.\u0275\u0275listener("ngModelChange",function(e){return t.clocking.clockingDate=e}),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(14,"mat-datepicker-toggle",7),T.\u0275\u0275element(15,"mat-datepicker",8,9),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(17,"br"),T.\u0275\u0275elementStart(18,"div",10),T.\u0275\u0275elementStart(19,"ngb-timepicker",11),T.\u0275\u0275listener("ngModelChange",function(e){return t.startTime=e}),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(20,"mat-form-field"),T.\u0275\u0275elementStart(21,"mat-label"),T.\u0275\u0275text(22,"Clocking Type"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(23,"mat-select",12),T.\u0275\u0275listener("ngModelChange",function(e){return t.clocking.clockingType=e}),T.\u0275\u0275template(24,ee,2,2,"mat-option",13),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(25,"br"),T.\u0275\u0275elementStart(26,"mat-form-field"),T.\u0275\u0275elementStart(27,"mat-label"),T.\u0275\u0275text(28,"Clocking Anomalie"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(29,"mat-select",12),T.\u0275\u0275listener("ngModelChange",function(e){return t.clocking.clockingAnomaly=e}),T.\u0275\u0275template(30,te,2,2,"mat-option",13),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(31,"br"),T.\u0275\u0275elementStart(32,"mat-form-field"),T.\u0275\u0275elementStart(33,"mat-label"),T.\u0275\u0275text(34,"Clocking Site"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(35,"mat-select",14),T.\u0275\u0275listener("ngModelChange",function(e){return t.clocking.clockingSite=e}),T.\u0275\u0275template(36,ne,2,2,"mat-option",13),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(37,"br"),T.\u0275\u0275elementStart(38,"button",15),T.\u0275\u0275listener("click",function(){return t.save()}),T.\u0275\u0275text(39,"Save "),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()),2&e){const e=T.\u0275\u0275reference(16);T.\u0275\u0275advance(13),T.\u0275\u0275property("matDatepicker",e)("ngModel",t.clocking.clockingDate),T.\u0275\u0275advance(1),T.\u0275\u0275property("for",e),T.\u0275\u0275advance(1),T.\u0275\u0275property("startView","month"),T.\u0275\u0275advance(4),T.\u0275\u0275property("ngModelOptions",T.\u0275\u0275pureFunction0(15,ie))("ngModel",t.startTime),T.\u0275\u0275advance(4),T.\u0275\u0275property("ngModel",t.clocking.clockingType)("ngModelOptions",T.\u0275\u0275pureFunction0(16,ie)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngForOf",t.clockingTypesIdentifier),T.\u0275\u0275advance(5),T.\u0275\u0275property("ngModel",t.clocking.clockingAnomaly)("ngModelOptions",T.\u0275\u0275pureFunction0(17,ie)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngForOf",t.clockingAnomaliesIdentifier),T.\u0275\u0275advance(5),T.\u0275\u0275property("ngModelOptions",T.\u0275\u0275pureFunction0(18,ie))("ngModel",t.clocking.clockingSite),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngForOf",t.sites)}},directives:[r.\u0275NgNoValidate,r.NgControlStatusGroup,r.NgForm,A.KE,A.hX,N.Nt,F.hl,r.DefaultValueAccessor,r.RequiredValidator,r.NgControlStatus,r.NgModel,F.nW,A.R9,F.Mq,_.Pm,K.gD,i.NgForOf,Z.ey],styles:["mat-option.mat-selected[_ngcontent-%COMP%]{background-color:#448aff}.card-header[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{float:right;cursor:pointer;font-size:24px}.modal_body[_ngcontent-%COMP%]{overflow:hidden}.modal_header[_ngcontent-%COMP%]{height:50px;background-color:#448aff;padding:18px 15px}.modal_header[_ngcontent-%COMP%]   .modal_title[_ngcontent-%COMP%]{color:#fff;line-height:1}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{float:right;cursor:pointer}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:red}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]{cursor:not-allowed;color:#dcdcdc}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]:hover{color:#dcdcdc}.span[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:15px;color:#4e4747;font-weight:bold}"]}),e})();var ae=n(11494);function se(e,t){1&e&&(T.\u0275\u0275elementStart(0,"mat-header-cell",18),T.\u0275\u0275text(1,"Number"),T.\u0275\u0275elementEnd())}function oe(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-cell"),T.\u0275\u0275text(1),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;T.\u0275\u0275advance(1),T.\u0275\u0275textInterpolate1(" ",e.userNumber," ")}}function le(e,t){1&e&&(T.\u0275\u0275elementStart(0,"mat-header-cell",18),T.\u0275\u0275text(1,"Name"),T.\u0275\u0275elementEnd())}function ce(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-cell"),T.\u0275\u0275text(1),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;T.\u0275\u0275advance(1),T.\u0275\u0275textInterpolate2(" ",e.firstName," ",e.lastName," ")}}function de(e,t){1&e&&(T.\u0275\u0275elementStart(0,"mat-header-cell",18),T.\u0275\u0275text(1,"Date"),T.\u0275\u0275elementEnd())}function me(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-cell"),T.\u0275\u0275text(1),T.\u0275\u0275pipe(2,"date"),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;T.\u0275\u0275advance(1),T.\u0275\u0275textInterpolate1(" ",T.\u0275\u0275pipeBind2(2,1,e.clockingDate,"dd/MM/yyyy")," ")}}function ge(e,t){1&e&&(T.\u0275\u0275elementStart(0,"mat-header-cell",18),T.\u0275\u0275text(1,"Time"),T.\u0275\u0275elementEnd())}function pe(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-cell"),T.\u0275\u0275text(1),T.\u0275\u0275pipe(2,"date"),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;T.\u0275\u0275advance(1),T.\u0275\u0275textInterpolate1(" ",T.\u0275\u0275pipeBind2(2,1,e.clockingDate,"HH:mm")," ")}}function ue(e,t){1&e&&(T.\u0275\u0275elementStart(0,"mat-header-cell",18),T.\u0275\u0275text(1,"Type"),T.\u0275\u0275elementEnd())}function he(e,t){1&e&&(T.\u0275\u0275elementStart(0,"label",21),T.\u0275\u0275text(1,"Entry"),T.\u0275\u0275elementEnd())}function fe(e,t){1&e&&(T.\u0275\u0275elementStart(0,"label",22),T.\u0275\u0275text(1,"Exit"),T.\u0275\u0275elementEnd())}function ye(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-cell"),T.\u0275\u0275template(1,he,2,0,"label",19),T.\u0275\u0275template(2,fe,2,0,"label",20),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",1===e.clockingType),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",2===e.clockingType)}}function ke(e,t){1&e&&(T.\u0275\u0275elementStart(0,"mat-header-cell",18),T.\u0275\u0275text(1,"Anomaly"),T.\u0275\u0275elementEnd())}function Se(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-cell"),T.\u0275\u0275text(1),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;T.\u0275\u0275advance(1),T.\u0275\u0275textInterpolate1(" ",e.clockingAnomalieDesc," ")}}function ve(e,t){1&e&&(T.\u0275\u0275elementStart(0,"mat-header-cell",18),T.\u0275\u0275text(1,"Location"),T.\u0275\u0275elementEnd())}function be(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-cell"),T.\u0275\u0275text(1),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;T.\u0275\u0275advance(1),T.\u0275\u0275textInterpolate1(" ",e.clockingSiteDesc," ")}}function Ce(e,t){1&e&&(T.\u0275\u0275elementStart(0,"mat-header-cell",18),T.\u0275\u0275text(1,"Status"),T.\u0275\u0275elementEnd())}function De(e,t){1&e&&(T.\u0275\u0275elementStart(0,"label",25),T.\u0275\u0275text(1,"New"),T.\u0275\u0275elementEnd())}function xe(e,t){1&e&&(T.\u0275\u0275elementStart(0,"label",26),T.\u0275\u0275text(1,"Valid"),T.\u0275\u0275elementEnd())}function we(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-cell"),T.\u0275\u0275template(1,De,2,0,"label",23),T.\u0275\u0275template(2,xe,2,0,"label",24),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",0===e.clockingState),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",1===e.clockingState)}}function Ie(e,t){1&e&&T.\u0275\u0275element(0,"mat-header-cell")}function Te(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"button",31),T.\u0275\u0275listener("click",function(){T.\u0275\u0275restoreView(e);const t=T.\u0275\u0275nextContext().$implicit;return T.\u0275\u0275nextContext(2).validateClocking(t)}),T.\u0275\u0275elementStart(1,"em",32),T.\u0275\u0275text(2,"done"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}}function Ee(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"button",33),T.\u0275\u0275listener("click",function(){T.\u0275\u0275restoreView(e);const t=T.\u0275\u0275nextContext().$implicit;return T.\u0275\u0275nextContext(2).refuseClocking(t.clockingId)}),T.\u0275\u0275elementStart(1,"em",32),T.\u0275\u0275text(2,"cancel"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}}function Me(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"button",34),T.\u0275\u0275listener("click",function(){T.\u0275\u0275restoreView(e);const t=T.\u0275\u0275nextContext().$implicit;return T.\u0275\u0275nextContext(2).edit(t.permissionId)}),T.\u0275\u0275elementStart(1,"em",35),T.\u0275\u0275text(2,"create"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}}function Pe(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"button",36),T.\u0275\u0275listener("click",function(){T.\u0275\u0275restoreView(e);const t=T.\u0275\u0275nextContext().$implicit;return T.\u0275\u0275nextContext(2).deleteClocking(t.clockingId)}),T.\u0275\u0275elementStart(1,"em",32),T.\u0275\u0275text(2,"delete_forever"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}}function Oe(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"mat-cell"),T.\u0275\u0275template(1,Te,3,0,"button",27),T.\u0275\u0275template(2,Ee,3,0,"button",28),T.\u0275\u0275template(3,Me,3,0,"button",29),T.\u0275\u0275template(4,Pe,3,0,"button",30),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=T.\u0275\u0275nextContext(2);T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",0===e.clockingState&&e.userId!==n.convertToInt(n.currentUser.userId)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",0===e.clockingState&&e.userId!==n.convertToInt(n.currentUser.userId)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",0===n.convertToInt(e.clockingState)&&n.convertToInt(e.userId)===n.convertToInt(n.currentUser.userId)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",0===n.convertToInt(e.clockingState)&&n.convertToInt(e.userId)===n.convertToInt(n.currentUser.userId))}}function Ae(e,t){1&e&&T.\u0275\u0275element(0,"mat-header-row",37)}function Ne(e,t){1&e&&T.\u0275\u0275element(0,"mat-row")}function Fe(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"div",1),T.\u0275\u0275elementStart(1,"mat-table",2,3),T.\u0275\u0275listener("matSortChange",function(t){return T.\u0275\u0275restoreView(e),T.\u0275\u0275nextContext().onSortData(t)}),T.\u0275\u0275elementContainerStart(3,4),T.\u0275\u0275template(4,se,2,0,"mat-header-cell",5),T.\u0275\u0275template(5,oe,2,1,"mat-cell",6),T.\u0275\u0275elementContainerEnd(),T.\u0275\u0275elementContainerStart(6,7),T.\u0275\u0275template(7,le,2,0,"mat-header-cell",5),T.\u0275\u0275template(8,ce,2,2,"mat-cell",6),T.\u0275\u0275elementContainerEnd(),T.\u0275\u0275elementContainerStart(9,8),T.\u0275\u0275template(10,de,2,0,"mat-header-cell",5),T.\u0275\u0275template(11,me,3,4,"mat-cell",6),T.\u0275\u0275elementContainerEnd(),T.\u0275\u0275elementContainerStart(12,9),T.\u0275\u0275template(13,ge,2,0,"mat-header-cell",5),T.\u0275\u0275template(14,pe,3,4,"mat-cell",6),T.\u0275\u0275elementContainerEnd(),T.\u0275\u0275elementContainerStart(15,10),T.\u0275\u0275template(16,ue,2,0,"mat-header-cell",5),T.\u0275\u0275template(17,ye,3,2,"mat-cell",6),T.\u0275\u0275elementContainerEnd(),T.\u0275\u0275elementContainerStart(18,11),T.\u0275\u0275template(19,ke,2,0,"mat-header-cell",5),T.\u0275\u0275template(20,Se,2,1,"mat-cell",6),T.\u0275\u0275elementContainerEnd(),T.\u0275\u0275elementContainerStart(21,12),T.\u0275\u0275template(22,ve,2,0,"mat-header-cell",5),T.\u0275\u0275template(23,be,2,1,"mat-cell",6),T.\u0275\u0275elementContainerEnd(),T.\u0275\u0275elementContainerStart(24,13),T.\u0275\u0275template(25,Ce,2,0,"mat-header-cell",5),T.\u0275\u0275template(26,we,3,2,"mat-cell",6),T.\u0275\u0275elementContainerEnd(),T.\u0275\u0275elementContainerStart(27,14),T.\u0275\u0275template(28,Ie,1,0,"mat-header-cell",15),T.\u0275\u0275template(29,Oe,5,4,"mat-cell",6),T.\u0275\u0275elementContainerEnd(),T.\u0275\u0275template(30,Ae,1,0,"mat-header-row",16),T.\u0275\u0275template(31,Ne,1,0,"mat-row",17),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}if(2&e){const e=T.\u0275\u0275nextContext();T.\u0275\u0275advance(1),T.\u0275\u0275property("dataSource",e.dataSource),T.\u0275\u0275advance(29),T.\u0275\u0275property("matHeaderRowDef",e.displayedColumns),T.\u0275\u0275advance(1),T.\u0275\u0275property("matRowDefColumns",e.displayedColumns)}}let He=(()=>{class e{constructor(e,t,n,i){this.dialog=e,this.attendanceService=t,this.searchFilterService=n,this.notificationService=i,this.displayedColumns=["number","name","date","time","anomaly","location","type","status","buttons"],this.dataSource=new J.by,this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.refreshList=new T.EventEmitter,this.editClocking=!0}ngOnInit(){this.dataSource=new J.by(this.clockings),this.subscription=this.searchFilterService.resultChanged.subscribe(()=>{this.dataSource=new J.by(this.searchFilterService.showingDataLastFilter)}),this.user=JSON.parse(localStorage.getItem("currentUser")),this.permissionoNewState=V.nx.New}convertToInt(e){return Number.parseInt(e,10)}onSortData(e){this.attendanceService.sortClockings.next(e)}validateClocking(e){e.userModif=this.currentUser.userId,this.attendanceService.validateClocking(e).subscribe(()=>{this.notificationService.success("This clocking is Validate")}),e.clockingState=1}refuseClocking(e){this.attendanceService.refuseClocking(e).subscribe(()=>{this.notificationService.success("clocking is refused")})}deleteClocking(e){this.attendanceService.refuseClocking(e).subscribe(()=>{this.notificationService.success("clocking deleted"),this.refreshList.emit()})}openAddAttendanceDialog(){this.displayAddClockingDialogRef=this.dialog.open(re,{disableClose:!1,panelClass:"form_modal",width:"450px",height:"500px",hasBackdrop:!0,data:{editclocking:this.editClocking}})}}return e.\u0275fac=function(t){return new(t||e)(T.\u0275\u0275directiveInject(a.uw),T.\u0275\u0275directiveInject(P),T.\u0275\u0275directiveInject(M.nJ),T.\u0275\u0275directiveInject(M.gq))},e.\u0275cmp=T.\u0275\u0275defineComponent({type:e,selectors:[["app-clockings-table"]],inputs:{clockings:"clockings"},outputs:{refreshList:"refreshList"},decls:1,vars:1,consts:[["class","example-container mat-elevation-z8",4,"ngIf"],[1,"example-container","mat-elevation-z8"],["matSort","","matSortDirection","asc","matSortDisableClear","",3,"dataSource","matSortChange"],["table",""],["matColumnDef","number"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","date"],["matColumnDef","time"],["matColumnDef","type"],["matColumnDef","anomaly"],["matColumnDef","location"],["matColumnDef","status"],["matColumnDef","buttons"],[4,"matHeaderCellDef"],["class"," table-primary table-*",4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["class","label label-entry",4,"ngIf"],["class","label label-exit",4,"ngIf"],[1,"label","label-entry"],[1,"label","label-exit"],["class","label label-new",4,"ngIf"],["class","label label-valid",4,"ngIf"],[1,"label","label-new"],[1,"label","label-valid"],["class","btn btn-mini btn-primary ripple m-r-10 light f-right","type","button",3,"click",4,"ngIf"],["class","btn btn-mini btn-primary ripple light f-left","type","button",3,"click",4,"ngIf"],["class","btn btn-mini btn-primary ripple m-r-10 light","type","button","style","width: 46px; height: 28px;",3,"click",4,"ngIf"],["class","btn btn-mini btn-primary ripple light ","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-mini","btn-primary","ripple","m-r-10","light","f-right",3,"click"],[1,"material-icons"],["type","button",1,"btn","btn-mini","btn-primary","ripple","light","f-left",3,"click"],["type","button",1,"btn","btn-mini","btn-primary","ripple","m-r-10","light",2,"width","46px","height","28px",3,"click"],[1,"material-icons",2,"font-size","medium"],["type","button",1,"btn","btn-mini","btn-primary","ripple","light",3,"click"],[1,"table-primary","table-*"]],template:function(e,t){1&e&&T.\u0275\u0275template(0,Fe,32,3,"div",0),2&e&&T.\u0275\u0275property("ngIf",void 0!==t.clockings&&0!==t.clockings.length)},directives:[i.NgIf,J.BZ,ae.YE,J.w1,J.fO,J.Dz,J.as,J.nj,J.ge,ae.nU,J.ev,J.XQ,J.Gk],pipes:[i.DatePipe],styles:[".mat-table[_ngcontent-%COMP%]{overflow:auto;border-radius:4px;max-height:calc(100vh - 392px)}.label-entry[_ngcontent-%COMP%]{background:#33cc99;font-size:12px;color:#fff;font-weight:bold}.label-exit[_ngcontent-%COMP%]{background:#dc143c;font-size:12px;color:#fff;font-weight:bold}.label-valid[_ngcontent-%COMP%]{background:#33cc99;font-size:12px;color:#fff;font-weight:bold}.label-new[_ngcontent-%COMP%]{background:#00bcd4;font-size:12px;color:#fff;font-weight:bold}.card-body[_ngcontent-%COMP%]{padding-bottom:5px}.mat-header-cell[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:600}.material-icons[_ngcontent-%COMP%]{font-size:15px}.mat-column-buttons[_ngcontent-%COMP%]{flex:0 0 110px}table[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}"]}),e})();var _e=n(34239);function We(e,t){1&e&&(T.\u0275\u0275elementStart(0,"div"),T.\u0275\u0275elementStart(1,"h1"),T.\u0275\u0275text(2,"No Result Found"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd())}function Le(e,t){1&e&&(T.\u0275\u0275elementStart(0,"div",36),T.\u0275\u0275elementStart(1,"div",37),T.\u0275\u0275elementStart(2,"div",38),T.\u0275\u0275elementStart(3,"div",1),T.\u0275\u0275elementStart(4,"div",39),T.\u0275\u0275element(5,"mat-spinner"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd())}function Ve(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"div",42),T.\u0275\u0275elementStart(1,"app-clocking-card",43),T.\u0275\u0275listener("refreshCard",function(){return T.\u0275\u0275restoreView(e),T.\u0275\u0275nextContext(2).PermissionRefreshed()}),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;T.\u0275\u0275advance(1),T.\u0275\u0275property("clocking",e)}}function je(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"div",40),T.\u0275\u0275template(1,Ve,2,1,"div",41),T.\u0275\u0275pipe(2,"paginator"),T.\u0275\u0275elementEnd()),2&e){const e=T.\u0275\u0275nextContext();T.\u0275\u0275classProp("blurred",e.isLoading),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngForOf",T.\u0275\u0275pipeBind3(2,3,e.clockings,e.searchFilterService.pageIndex,e.searchFilterService.pageSize))}}function Ue(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"div",44),T.\u0275\u0275elementStart(1,"app-clockings-table",45),T.\u0275\u0275listener("refreshList",function(){return T.\u0275\u0275restoreView(e),T.\u0275\u0275nextContext().PermissionRefreshed()}),T.\u0275\u0275pipe(2,"paginator"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}if(2&e){const e=T.\u0275\u0275nextContext();T.\u0275\u0275classProp("blurred",e.isLoading),T.\u0275\u0275advance(1),T.\u0275\u0275property("clockings",T.\u0275\u0275pipeBind3(2,3,e.clockings,e.searchFilterService.pageIndex,e.searchFilterService.pageSize))}}let Re=(()=>{class e{constructor(e,t,n,i){this.attendanceService=e,this.searchFilterService=t,this.sortService=n,this.excelService=i,this.selectedUser=[],this.statusesIdentifiers=[{id:b.New,description:"New"},{id:b.Valid,description:"Valid"}],this.selectedStatusesIdentifiers=[],this.typesIdentifiers=[{id:v.In,description:"Entry"},{id:v.Out,description:"Exit"}],this.selectedTypesIdentifiers=[],this.dropdownSettings={},this.paginatorPipe=new I.Ry(this.searchFilterService),this.listView=!1,this.clockings=[],this.subscription=new m.w0,this.destroyed=new m.xQ}ngOnInit(){this.searchFilterService.pageIndex=0,this.searchFilterService.pageSize=24,this.dropdownSettings={singleSelection:!1,idField:"id",textField:"description",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,enableCheckAll:!0,allowSearchFilter:!1,maxHeight:150,placeholder:"criteria",searchPlaceholderText:"Search..."},this.setSearchFilter(),this.subscription.add(this.attendanceService.sortClockings.subscribe(e=>{this.onSortData(e)})),this.subscription.add(this.attendanceService.previousState.pipe((0,g.R)(this.destroyed)).subscribe(e=>{e&&e.getPrevious&&(this.onSearch(),this.searchFilterService.pageSize=e.pageSize,this.searchFilterService.pageIndex=e.pageIndex,this.listView="card"!==e.type,this.destroyed.next(),this.attendanceService.previousState.next())}))}ngOnDestroy(){this.subscription.unsubscribe(),this.searchFilterService.showingDataLastFilter=[]}setSearchFilter(){const e=JSON.parse(sessionStorage.getItem("clockingSearch"));if(e)e.periodFrom&&(this.periodFrom=e.periodFrom),e.periodTo&&(this.periodTo=e.periodTo),e.selectedStatusesIdentifiers&&(this.selectedStatusesIdentifiers=e.selectedStatusesIdentifiers),e.selectedTypesIdentifiers&&(this.selectedTypesIdentifiers=e.selectedTypesIdentifiers);else{const e=new Date;this.periodFrom=new Date(e.getFullYear(),e.getMonth()-1,1),this.periodTo=new Date(e.getFullYear(),e.getMonth()+2,0),this.usersIds=this.selectedUser.map(e=>e.userId).join(","),this.selectedStatusesIdentifiers=[this.statusesIdentifiers[0]],this.selectedStatusesIds=this.selectedStatusesIdentifiers.map(e=>e.id).join(","),this.selectedTypesIdentifiers=[],this.selectedTypesIds=""}}onSearch(){const e=new u;e.name=this.usersIds,e.periodFrom=this.periodFrom,e.periodTo=this.periodTo,e.selectedStatusesIdentifiers=this.selectedStatusesIdentifiers,e.selectedTypesIdentifiers=this.selectedTypesIdentifiers,sessionStorage.setItem("clockingSearch",JSON.stringify(e)),this.usersIds=this.selectedUser.map(e=>e.userId).join(","),this.selectedStatusesIds=0===this.selectedStatusesIdentifiers.length?this.statusesIdentifiers.map(e=>e.id).join(","):this.selectedStatusesIdentifiers.map(e=>e.id).join(","),this.selectedTypesIds=0===this.selectedTypesIdentifiers.length?this.typesIdentifiers.map(e=>e.id).join(","):this.selectedTypesIdentifiers.map(e=>e.id).join(","),this.getUsersClockings(this.usersIds,this.selectedStatusesIds,this.selectedTypesIds,this.periodFrom,this.periodTo)}onResetAllFilters(){sessionStorage.removeItem("clockingSearch");const e=new Date;this.periodFrom=new Date(e.getFullYear(),e.getMonth()-1,1),this.periodTo=new Date(e.getFullYear(),e.getMonth()+2,0),this.selectedUser=[],this.selectedStatusesIdentifiers=[this.statusesIdentifiers[0]],this.selectedTypesIdentifiers=[]}PermissionRefreshed(){this.getUsersClockings(this.usersIds,this.selectedStatusesIds,this.selectedTypesIds,this.periodFrom,this.periodTo)}getUsersClockings(e,t,n,i,r){this.isLoading=!0,this.attendanceService.getUsersClockings(e,t,n,i,r).subscribe(e=>{null!=e&&(this.clockings=[],e.forEach(e=>{this.clockings.push(Object.assign(new C,e))}),this.lengthClockings=this.clockings.length),this.isLoading=!1})}onCardViewMode(){this.listView=!1}onTableViewMode(){this.listView=!0}onSortData(e){e.active&&""!==e.direction&&void 0!==this.clockings&&this.clockings.sort((t,n)=>{const i="asc"===e.direction;switch(e.active){case"number":return this.sortService.compare(t.userNumber,n.userNumber,i,!1);case"name":return this.sortService.compare(t.firstName+t.lastName,n.firstName+n.lastName,i,!1);case"date":case"time":return this.sortService.compare(t.clockingDate,n.clockingDate,i,!1);case"type":return this.sortService.compare(t.clockingType,n.clockingType,i,!1);case"anomaly":return this.sortService.compare(t.clockingAnomalieDesc,n.clockingAnomalieDesc,i,!1);case"location":return this.sortService.compare(t.clockingSiteDesc,n.clockingSiteDesc,i,!1);case"status":return this.sortService.compare(t.clockingState,n.clockingState,i,!1);default:return 0}}),this.paginatorPipe.transform(this.clockings,this.searchFilterService.pageIndex,this.searchFilterService.pageSize)}exportToExcel(){if(void 0!==this.clockings&&0!==this.clockings.length){const e=[{header:"Matricule",key:"userNumber"},{header:"First Name",key:"firstName"},{header:"Last Name",key:"lastName"},{header:"Date",key:"clockingDate"},{header:"Site",key:"clockingSite"},{header:"Anomaly",key:"clockingAnomaly"},{header:"State",key:"clockingState"}],t=[],n=[],i=[];this.clockings.forEach(e=>{const n=[];n.push(e.userNumber),n.push(e.firstName),n.push(e.lastName),n.push(e.clockingDate),n.push(e.clockingSite),n.push(e.clockingAnomaly),n.push(e.clockingState),t.push(n)}),this.excelService.generateExcel(e,t,n,i,"Clockings")}}}return e.\u0275fac=function(t){return new(t||e)(T.\u0275\u0275directiveInject(P),T.\u0275\u0275directiveInject(M.nJ),T.\u0275\u0275directiveInject(M.Kx),T.\u0275\u0275directiveInject(M.xB))},e.\u0275cmp=T.\u0275\u0275defineComponent({type:e,selectors:[["app-clockings"]],decls:63,vars:23,consts:[[1,"page-body"],[1,"row"],[1,"col-xl-12","col-lg-12","filter-bar"],[1,"card","m-b-10"],[1,"card-body","p-t-10"],[1,"col-xl-4","col-lg-12"],["mat-subheader","","col-sm-2",""],[1,"date-field","col-sm-5"],["matInput","","placeholder","From",3,"matDatepicker","max","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker11",""],["matInput","","placeholder","To",3,"matDatepicker","min","ngModel","ngModelChange"],["picker22",""],[1,"mat-subheader","col-sm-2"],[1,"col-xl-3","col-lg-12"],[1,"col-sm-10"],[1,"multi-search",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],[1,"col-xl-1","col-lg-12"],[1,"text-center"],[1,"btn","btn-md","btn-primary","ripple","m-t-5",3,"click"],[1,"btn","btn-md","btn-default","ripple","light","m-t-10",3,"click"],[1,"navbar","navbar-light","bg-faded","m-b-10","p-10"],[1,"nav-item","nav-grid","col-sm-4"],["type","button","data-toggle","tooltip","data-placement","top","title","Card View",1,"btn","btn-sm","btn-primary","waves-light","m-r-10","ripple",2,"font-size","inherit",3,"click"],[1,"icofont","icofont-listine-dots"],["type","button","data-toggle","tooltip","data-placement","top","title","Table View",1,"btn","btn-sm","btn-primary","m-r-10","ripple","light",2,"font-size","inherit",3,"click"],[1,"icofont","icofont-table"],["type","button",1,"btn","btn-sm","btn-primary","m-r-10","waves-light","ripple",2,"font-size","inherit",3,"click"],[1,"fa","fa-file-excel-o"],[1,"col-sm-8"],[3,"pageSize","pageIndex","length"],[4,"ngIf"],[1,"wrapper"],["class","overlay",4,"ngIf"],["class","row div-scrollable loaded-content",3,"blurred",4,"ngIf"],["class","loaded-content",3,"blurred",4,"ngIf"],[1,"overlay"],[1,"spinner-wrapper"],[1,"container"],["id","loader"],[1,"row","div-scrollable","loaded-content"],["class","col-sm-4 p-r-0",4,"ngFor","ngForOf"],[1,"col-sm-4","p-r-0"],[3,"clocking","refreshCard"],[1,"loaded-content"],[3,"clockings","refreshList"]],template:function(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"div",0),T.\u0275\u0275elementStart(1,"div",1),T.\u0275\u0275elementStart(2,"div",2),T.\u0275\u0275elementStart(3,"div",3),T.\u0275\u0275elementStart(4,"div",4),T.\u0275\u0275elementStart(5,"div",1),T.\u0275\u0275elementStart(6,"div",5),T.\u0275\u0275elementStart(7,"mat-list"),T.\u0275\u0275elementStart(8,"mat-list-item"),T.\u0275\u0275elementStart(9,"h3",6),T.\u0275\u0275text(10,"Period"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(11,"mat-form-field",7),T.\u0275\u0275elementStart(12,"input",8),T.\u0275\u0275listener("ngModelChange",function(e){return t.periodFrom=e}),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(13,"mat-datepicker-toggle",9),T.\u0275\u0275element(14,"mat-datepicker",null,10),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(16,"mat-form-field",7),T.\u0275\u0275elementStart(17,"input",11),T.\u0275\u0275listener("ngModelChange",function(e){return t.periodTo=e}),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(18,"mat-datepicker-toggle",9),T.\u0275\u0275element(19,"mat-datepicker",null,12),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(21,"mat-list-item"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(22,"div",5),T.\u0275\u0275elementStart(23,"mat-list"),T.\u0275\u0275elementStart(24,"mat-list-item"),T.\u0275\u0275elementStart(25,"h3",13),T.\u0275\u0275text(26,"Name"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(27,"mat-list-item"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(28,"div",14),T.\u0275\u0275elementStart(29,"mat-list"),T.\u0275\u0275elementStart(30,"mat-list-item"),T.\u0275\u0275elementStart(31,"h3",13),T.\u0275\u0275text(32,"Status"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(33,"div",15),T.\u0275\u0275elementStart(34,"ng-multiselect-dropdown",16),T.\u0275\u0275listener("ngModelChange",function(e){return t.selectedStatusesIdentifiers=e}),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(35,"mat-list-item"),T.\u0275\u0275elementStart(36,"h3",13),T.\u0275\u0275text(37,"Type"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(38,"div",15),T.\u0275\u0275elementStart(39,"ng-multiselect-dropdown",16),T.\u0275\u0275listener("ngModelChange",function(e){return t.selectedTypesIdentifiers=e}),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(40,"div",17),T.\u0275\u0275elementStart(41,"div",18),T.\u0275\u0275elementStart(42,"button",19),T.\u0275\u0275listener("click",function(){return t.onSearch()}),T.\u0275\u0275text(43,"Search"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(44,"div",18),T.\u0275\u0275elementStart(45,"button",20),T.\u0275\u0275listener("click",function(){return t.onResetAllFilters()}),T.\u0275\u0275text(46,"Reset"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(47,"nav",21),T.\u0275\u0275elementStart(48,"div",22),T.\u0275\u0275elementStart(49,"button",23),T.\u0275\u0275listener("click",function(){return t.onCardViewMode()}),T.\u0275\u0275element(50,"em",24),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(51,"button",25),T.\u0275\u0275listener("click",function(){return t.onTableViewMode()}),T.\u0275\u0275element(52,"em",26),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(53,"button",27),T.\u0275\u0275listener("click",function(){return t.exportToExcel()}),T.\u0275\u0275element(54,"em",28),T.\u0275\u0275text(55," Export "),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(56,"div",29),T.\u0275\u0275element(57,"app-paginator",30),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275template(58,We,3,0,"div",31),T.\u0275\u0275elementStart(59,"div",32),T.\u0275\u0275template(60,Le,6,0,"div",33),T.\u0275\u0275template(61,je,3,7,"div",34),T.\u0275\u0275template(62,Ue,3,7,"div",35),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()),2&e){const e=T.\u0275\u0275reference(15),n=T.\u0275\u0275reference(20);T.\u0275\u0275advance(12),T.\u0275\u0275property("matDatepicker",e)("max",t.periodTo)("ngModel",t.periodFrom),T.\u0275\u0275advance(1),T.\u0275\u0275property("for",e),T.\u0275\u0275advance(4),T.\u0275\u0275property("matDatepicker",n)("min",t.periodFrom)("ngModel",t.periodTo),T.\u0275\u0275advance(1),T.\u0275\u0275property("for",n),T.\u0275\u0275advance(16),T.\u0275\u0275property("placeholder","Select...")("settings",t.dropdownSettings)("data",t.statusesIdentifiers)("ngModel",t.selectedStatusesIdentifiers),T.\u0275\u0275advance(5),T.\u0275\u0275property("placeholder","Select...")("settings",t.dropdownSettings)("data",t.typesIdentifiers)("ngModel",t.selectedTypesIdentifiers),T.\u0275\u0275advance(18),T.\u0275\u0275property("pageSize",t.searchFilterService.pageSize)("pageIndex",t.searchFilterService.pageIndex)("length",t.lengthClockings),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",0===t.lengthClockings),T.\u0275\u0275advance(2),T.\u0275\u0275property("ngIf",t.isLoading),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",!t.listView),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",t.listView)}},directives:[O.i$,O.Tg,O.gs,A.KE,N.Nt,F.hl,r.DefaultValueAccessor,r.NgControlStatus,r.NgModel,F.nW,A.R9,F.Mq,H.OP,_.M2,W.J,i.NgIf,L.$g,i.NgForOf,Y,He],pipes:[_e.R],styles:[".multi-search{width:100%}.multiselect-dropdown{font-size:11px}.multiselect-dropdown .selected-item{font-size:11px;background:#448aff}.mat-list .mat-divider{margin-top:15px}.mat-list .mat-subheader{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.mat-list .mat-subheaderUser{height:80px;padding:0 5px;font-size:15px;font-weight:bolder}.mat-list-header{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.div-scrollable{overflow-y:auto;margin-right:0;max-height:calc(100vh - 392px)}.wrapper{width:100%;height:100%}.overlay{position:absolute;z-index:1002;background-color:#ffffff80;width:100%;height:100%}.spinner-wrapper{display:flex;justify-content:center;justify-items:center}#loader{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}.date-field{width:45%;font-size:14px}\n"],encapsulation:2}),e})();var ze=n(16738),Be=n(38835),$e=n(90703),Ge=n(69229),qe=n(62758);let Ye=(()=>{class e{constructor(e,t){this.attendanceService=e,this.dtService=t,this.selectedDate=new Date,this.daysChange=new T.EventEmitter}ngOnInit(){this.getSelectedWeek(),this.currentWeekSubscription=this.attendanceService.selectCurrentWeek.subscribe(()=>{this.selectedDate=this.dtService.today(),this.getSelectedWeek()})}ngOnDestroy(){this.currentWeekSubscription.unsubscribe()}getSelectedWeek(){this.startOfWeek=ze(this.selectedDate).startOf("isoWeek"),this.endOfWeek=ze(this.selectedDate).endOf("isoWeek"),this.getWeekDays()}prevWeek(){this.startOfWeek=ze(this.startOfWeek).subtract(1,"weeks").startOf("isoWeek"),this.endOfWeek=ze(this.endOfWeek).subtract(1,"weeks").endOf("isoWeek"),this.getWeekDays()}nextWeek(){this.startOfWeek=ze(this.startOfWeek).add(1,"weeks").startOf("isoWeek"),this.endOfWeek=ze(this.endOfWeek).add(1,"weeks").endOf("isoWeek"),this.getWeekDays()}getWeekDays(){this.days=[];let e=this.startOfWeek;for(;e<=this.endOfWeek;)this.days.push({date:e,dayName:this.dtService.getDayName(e),dayNumber:e.toDate().getDay(),clockingTotal:0}),e=e.clone().add(1,"d");this.attendanceService.stopClockingsGet.next(),this.selectedDate=this.startOfWeek.toDate(),this.daysChange.emit(this.days)}changeDateEvent(){this.getSelectedWeek()}}return e.\u0275fac=function(t){return new(t||e)(T.\u0275\u0275directiveInject(P),T.\u0275\u0275directiveInject(M.Cv))},e.\u0275cmp=T.\u0275\u0275defineComponent({type:e,selectors:[["app-select-week"]],outputs:{daysChange:"daysChange"},decls:25,vars:8,consts:[[2,"padding","0px"],["scope","col"],[1,"td-arrow","pointer",3,"click"],[1,"material-icons"],[1,"td-date"],[1,"td-calendar","pointer",3,"click"],["matInput","",3,"matDatepicker","ngModel","ngModelChange","dateChange"],["picker",""]],template:function(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"table"),T.\u0275\u0275element(1,"caption",0),T.\u0275\u0275elementStart(2,"tr"),T.\u0275\u0275element(3,"th",1),T.\u0275\u0275elementStart(4,"td",2),T.\u0275\u0275listener("click",function(){return t.prevWeek()}),T.\u0275\u0275elementStart(5,"em",3),T.\u0275\u0275text(6,"keyboard_arrow_left"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(7,"td",4),T.\u0275\u0275elementStart(8,"span"),T.\u0275\u0275text(9),T.\u0275\u0275pipe(10,"shortDate"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(11,"td",5),T.\u0275\u0275listener("click",function(){return T.\u0275\u0275restoreView(e),T.\u0275\u0275reference(17).open()}),T.\u0275\u0275elementStart(12,"em",3),T.\u0275\u0275text(13,"date_range"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(14,"mat-form-field"),T.\u0275\u0275elementStart(15,"input",6),T.\u0275\u0275listener("ngModelChange",function(e){return t.selectedDate=e})("dateChange",function(){return t.changeDateEvent()}),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(16,"mat-datepicker",null,7),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(18,"td",4),T.\u0275\u0275elementStart(19,"span"),T.\u0275\u0275text(20),T.\u0275\u0275pipe(21,"shortDate"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(22,"td",2),T.\u0275\u0275listener("click",function(){return t.nextWeek()}),T.\u0275\u0275elementStart(23,"em",3),T.\u0275\u0275text(24,"keyboard_arrow_right"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()}if(2&e){const e=T.\u0275\u0275reference(17);T.\u0275\u0275advance(9),T.\u0275\u0275textInterpolate(T.\u0275\u0275pipeBind1(10,4,t.startOfWeek)),T.\u0275\u0275advance(6),T.\u0275\u0275property("matDatepicker",e)("ngModel",t.selectedDate),T.\u0275\u0275advance(5),T.\u0275\u0275textInterpolate(T.\u0275\u0275pipeBind1(21,6,t.endOfWeek))}},directives:[A.KE,N.Nt,F.hl,r.DefaultValueAccessor,r.NgControlStatus,r.NgModel,F.Mq],pipes:[qe.M],styles:["table[_ngcontent-%COMP%]{width:80%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border:1px solid gainsboro}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;font-size:25px;cursor:pointer}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:4px}table[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]{width:35px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{top:1px;left:3px}table[_ngcontent-%COMP%]   .td-calendar[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:0px;height:0px;visibility:hidden}"]}),e})();var Je=n(96066);let Qe=(()=>{class e{ngOnChanges(){null!=this.holiday&&(this.innerHTML=this.holiday.detail)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=T.\u0275\u0275defineDirective({type:e,selectors:[["","appTdHoliday",""]],hostVars:1,hostBindings:function(e,t){2&e&&T.\u0275\u0275hostProperty("innerHTML",t.innerHTML,T.\u0275\u0275sanitizeHtml)},inputs:{holiday:"holiday"},features:[T.\u0275\u0275NgOnChangesFeature]}),e})(),Ke=(()=>{class e{ngOnChanges(){null!=this.businessTrip&&(this.innerHTML=this.businessTrip.detail)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=T.\u0275\u0275defineDirective({type:e,selectors:[["","appTdBusinessTrip",""]],hostVars:1,hostBindings:function(e,t){2&e&&T.\u0275\u0275hostProperty("innerHTML",t.innerHTML,T.\u0275\u0275sanitizeHtml)},inputs:{businessTrip:"businessTrip"},features:[T.\u0275\u0275NgOnChangesFeature]}),e})(),Ze=(()=>{class e{ngOnChanges(){null!=this.mission&&(this.innerHTML="Mission<br />",this.innerHTML=this.mission.detail)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=T.\u0275\u0275defineDirective({type:e,selectors:[["","appTdMission",""]],hostVars:1,hostBindings:function(e,t){2&e&&T.\u0275\u0275hostProperty("innerHTML",t.innerHTML,T.\u0275\u0275sanitizeHtml)},inputs:{mission:"mission"},features:[T.\u0275\u0275NgOnChangesFeature]}),e})(),Xe=(()=>{class e{ngOnChanges(){if(null!=this.permission){this.innerHTML="Permission<br />";const e=60*this.permission.permissionHoursNbr,t=new Date(this.permission.permissionStartHour);t.setMinutes(t.getMinutes()+e),this.innerHTML+=this.permission.permissionStartHour.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})+"-"+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=T.\u0275\u0275defineDirective({type:e,selectors:[["","appTdPermission",""]],hostVars:1,hostBindings:function(e,t){2&e&&T.\u0275\u0275hostProperty("innerHTML",t.innerHTML,T.\u0275\u0275sanitizeHtml)},inputs:{permission:"permission"},features:[T.\u0275\u0275NgOnChangesFeature]}),e})(),et=(()=>{class e{ngOnChanges(){null!=this.leaveDay&&(this.innerHTML=this.leaveDay.detail)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=T.\u0275\u0275defineDirective({type:e,selectors:[["","appTdLeaveDay",""]],hostVars:1,hostBindings:function(e,t){2&e&&T.\u0275\u0275hostProperty("innerHTML",t.innerHTML,T.\u0275\u0275sanitizeHtml)},inputs:{leaveDay:"leaveDay"},features:[T.\u0275\u0275NgOnChangesFeature]}),e})();let tt=(()=>{class e{ngOnChanges(){null!=this.clocking&&(1===this.clocking.clockingType&&(this.innerHTML="P/E<br />",0===this.clocking.clockingAnomaly?(this.backgroundColor="#66CCFF",this.color="#000000"):(this.backgroundColor="#FF0000",this.color="#FFFFFF",this.fontWeight="bold")),2===this.clocking.clockingType&&(this.innerHTML="P/S<br />",0===this.clocking.clockingAnomaly?(this.backgroundColor="#FF8F20",this.color="#000000"):(this.backgroundColor="#FF0000",this.color="#FFFFFF",this.fontWeight="bold")),this.innerHTML+=this.clocking.clockingDate.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=T.\u0275\u0275defineDirective({type:e,selectors:[["","appTdClocking",""]],hostVars:7,hostBindings:function(e,t){2&e&&(T.\u0275\u0275hostProperty("innerHTML",t.innerHTML,T.\u0275\u0275sanitizeHtml),T.\u0275\u0275styleProp("background-color",t.backgroundColor)("color",t.color)("font-weight",t.fontWeight))},inputs:{date:"date",clocking:"clocking"},features:[T.\u0275\u0275NgOnChangesFeature]}),e})();function nt(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"app-select-employee",30),T.\u0275\u0275listener("userChange",function(t){return T.\u0275\u0275restoreView(e),T.\u0275\u0275nextContext().userChange(t)}),T.\u0275\u0275elementEnd()}}function it(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"td",39),T.\u0275\u0275listener("holidayChange",function(t){T.\u0275\u0275restoreView(e);const n=T.\u0275\u0275nextContext().$implicit;return T.\u0275\u0275nextContext().weekHolidays[n.dayNumber]=t}),T.\u0275\u0275elementEnd()}if(2&e){const e=T.\u0275\u0275nextContext().$implicit,t=T.\u0275\u0275nextContext();T.\u0275\u0275property("matTooltip",t.weekHolidays[e.dayNumber].name)("holiday",t.weekHolidays[e.dayNumber])}}function rt(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"td",40),T.\u0275\u0275listener("businessTripChange",function(t){T.\u0275\u0275restoreView(e);const n=T.\u0275\u0275nextContext().$implicit;return T.\u0275\u0275nextContext().weekBusinessTrip[n.dayNumber]=t}),T.\u0275\u0275elementEnd()}if(2&e){const e=T.\u0275\u0275nextContext().$implicit,t=T.\u0275\u0275nextContext();T.\u0275\u0275property("matTooltip",t.weekBusinessTrip[e.dayNumber].departDest)("businessTrip",t.weekBusinessTrip[e.dayNumber])}}function at(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"td",41),T.\u0275\u0275listener("missionChange",function(t){T.\u0275\u0275restoreView(e);const n=T.\u0275\u0275nextContext().$implicit;return T.\u0275\u0275nextContext().weekMissions[n.dayNumber]=t}),T.\u0275\u0275elementEnd()}if(2&e){const e=T.\u0275\u0275nextContext().$implicit,t=T.\u0275\u0275nextContext();T.\u0275\u0275property("mission",t.weekMissions[e.dayNumber])}}function st(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"td",42),T.\u0275\u0275listener("permissionChange",function(t){T.\u0275\u0275restoreView(e);const n=T.\u0275\u0275nextContext().$implicit;return T.\u0275\u0275nextContext().finalWeekPermission[n.dayNumber]=t}),T.\u0275\u0275elementEnd()}if(2&e){const e=T.\u0275\u0275nextContext().$implicit,t=T.\u0275\u0275nextContext();T.\u0275\u0275property("permission",t.finalWeekPermission[e.dayNumber])}}function ot(e,t){if(1&e){const e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"td",43),T.\u0275\u0275listener("leaveDayChange",function(t){T.\u0275\u0275restoreView(e);const n=T.\u0275\u0275nextContext().$implicit;return T.\u0275\u0275nextContext().weekLeaveDays[n.dayNumber]=t}),T.\u0275\u0275elementEnd()}if(2&e){const e=T.\u0275\u0275nextContext().$implicit,t=T.\u0275\u0275nextContext();T.\u0275\u0275property("matTooltip",t.weekLeaveDays[e.dayNumber].motive)("leaveDay",t.weekLeaveDays[e.dayNumber])}}function lt(e,t){if(1&e&&T.\u0275\u0275element(0,"td",44),2&e){const e=t.$implicit,n=T.\u0275\u0275nextContext().$implicit;T.\u0275\u0275property("clocking",e)("date",n.date)}}function ct(e,t){if(1&e&&(T.\u0275\u0275elementStart(0,"tr"),T.\u0275\u0275elementStart(1,"th",31),T.\u0275\u0275text(2),T.\u0275\u0275pipe(3,"date"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(4,"td",32),T.\u0275\u0275text(5," Cumul"),T.\u0275\u0275element(6,"br"),T.\u0275\u0275text(7),T.\u0275\u0275pipe(8,"date"),T.\u0275\u0275elementEnd(),T.\u0275\u0275template(9,it,1,2,"td",33),T.\u0275\u0275template(10,rt,1,2,"td",34),T.\u0275\u0275template(11,at,1,1,"td",35),T.\u0275\u0275template(12,st,1,1,"td",36),T.\u0275\u0275template(13,ot,1,2,"td",37),T.\u0275\u0275template(14,lt,1,2,"td",38),T.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=T.\u0275\u0275nextContext();T.\u0275\u0275advance(2),T.\u0275\u0275textInterpolate1(" ",T.\u0275\u0275pipeBind2(3,8,null==e?null:e.date,"E dd/MM/y")," "),T.\u0275\u0275advance(5),T.\u0275\u0275textInterpolate1("",T.\u0275\u0275pipeBind2(8,11,n.clockingsAccumulation[e.dayNumber],"HH:mm")," "),T.\u0275\u0275advance(2),T.\u0275\u0275property("ngIf",n.isHoliday(e.dayNumber)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",n.isBusinessTrip(e.dayNumber)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",n.isMission(e.dayNumber)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",n.isPermission(e.dayNumber)&&!1===n.isLeave(e.dayNumber)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",n.isLeave(e.dayNumber)),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngForOf",n.clockings[e.dayNumber])}}let dt=(()=>{class e{constructor(e,t,n,i,r,a){this.dialog=e,this.attendanceService=t,this.notificationService=n,this.leaveService=i,this.dateTimeService=r,this.permissionService=a,this.leavesHour=0,this.permissionHour=0,this.workHour=0,this.notWorkedDays=0,this.workDays=0,this.workDayMorning=0,this.workDayAfternoon=0,this.dayTimeAccumulation=0,this.dinerTimeAccumulation=0,this.amplitude="",this.weekHolidays=[],this.editClocking=!1,this.startOfCurrentWeek=ze().startOf("isoWeek"),this.endOfCurrentWeek=ze().endOf("isoWeek"),this.teamDisplay=!1,this.clockings=[],this.finalWeekPermission=[],this.clockingsAccumulation=[],this.weekBusinessTrip=[],this.weekMissions=[],this.weekLeaves=[],this.weekPermissions=[],this.weekLeaveDays=[],this.totalAccumulation=""}ngOnInit(){this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.selectedUserId=this.currentUser.userId}ngOnDestroy(){this.attendanceService.stopClockingsGet.next(),this.attendanceService.stopClockingsGet.complete()}userChange(e){this.selectedUserId=e.id,null!=e&&this.getUserClockings()}daysChange(e){this.days=e,null!=e&&this.getUserClockings()}getPermissions(){const e=this.days[0].date.toDate(),t=this.days[this.days.length-1].date.toDate();this.finalWeekPermission=[],this.permissionService.getUsersPermissions(this.selectedUserId.toString(),"2",e,t).subscribe(e=>{this.weekPermissions=e,this.weekPermissions.forEach(e=>{e.permissionStartHour=new Date(e.permissionStartHour),this.finalWeekPermission[e.permissionStartHour.getDay()]=e,this.permissionHour+=e.permissionHoursNbr})})}getPublicHolidays(){const e=this.days[0].date.toDate(),t=this.days[this.days.length-1].date.toDate();this.weekHolidays=[],this.attendanceService.getHolidaysInWeek(e,t).subscribe(n=>{n&&n.forEach(n=>{n.dateStart=new Date(n.dateStart),n.dateEnd=new Date(n.dateEnd);const i=new Date(n.dateStart),r=new Date(n.dateEnd),a=n.dateStart;for(;a.getTime()!==n.dateEnd.getTime()+864e5;){if(6!==a.getDay()&&0!==a.getDay()&&a.getTime()>=e.getTime()&&a.getTime()<=t.getTime()){const e=new D;n.name=n.name.toLowerCase(),n.name=n.name.replace(n.name.charAt(0),n.name.charAt(0).toUpperCase()),e.name=n.name,e.detail="jour f\xe9ri\xe9".concat("<br/>",this.dateTimeService.getShortestFormat(i),"-",this.dateTimeService.getShortestFormat(r)),this.weekHolidays[a.getDay()]=e,this.notWorkedDays+=1}a.setDate(a.getDate()+1)}}),this.getLeaveDays()})}getMissionsDay(){const e=this.days[0].date.toDate(),t=this.days[this.days.length-1].date.toDate();this.weekMissions=[],this.attendanceService.getMissionInWeek(this.selectedUserId,e,t).subscribe(n=>{n&&n.forEach(n=>{n.missionStartDate=new Date(n.missionStartDate),n.missionEndDate=new Date(n.missionEndDate);const i=new Date(n.missionStartDate.toDateString()),r=new Date(n.missionEndDate.toDateString()),a=i;for(;a.getTime()!==r.getTime()+864e5;){if(6!==a.getDay()&&0!==a.getDay()&&a.getTime()>=e.getTime()&&a.getTime()<=t.getTime()){const e=new w;e.detail="Mission <br/>".concat(this.dateTimeService.getShortestFormat(n.missionStartDate),"-",this.dateTimeService.getShortestFormat(r)),this.weekMissions[a.getDay()]=e,this.notWorkedDays+=1}a.setDate(a.getDate()+1)}}),this.getBusinesstripDays()})}getBusinesstripDays(){const e=this.days[0].date.toDate(),t=this.days[this.days.length-1].date.toDate();this.weekBusinessTrip=[],this.attendanceService.getBusinessTripInWeek(this.selectedUserId,e,t).subscribe(n=>{n&&n.forEach(n=>{n.businessTripWeekDateStart=new Date(n.businessTripWeekDateStart),n.businessTripWeekDateEnd=new Date(n.businessTripWeekDateEnd);const i=new Date(n.businessTripWeekDateStart.toDateString()),r=new Date(n.businessTripWeekDateEnd.toDateString()),a=i;for(;a.getTime()!==r.getTime()+864e5;){if(6!==a.getDay()&&0!==a.getDay()&&a.getTime()>=e.getTime()&&a.getTime()<=t.getTime()){const e=new p;e.detail="D\xe9placement".concat("<br/>",this.dateTimeService.getShortestFormatWithTime(n.businessTripWeekDateStart),"-",this.dateTimeService.getShortestFormatWithTime(n.businessTripWeekDateEnd)),this.weekBusinessTrip[a.getDay()]=e,e.departDest=n.businessTripDeparture+" => "+n.businessTripDestination}a.setDate(a.getDate()+1)}}),this.computeTotalAccumulation()})}getLeaveDays(){const e=this.days[0].date.toDate(),t=this.days[this.days.length-1].date.toDate();this.weekLeaveDays=[],this.leaveService.getUsersLeaves(this.selectedUserId.toString(),"2","1,2,3,4",e,t).subscribe(n=>{this.weekLeaves=n,this.weekLeaves.forEach(n=>{let i=Be.jt.Full,r=Be.jt.Full,a=new Date(n.leaveDateStart),s=new Date(n.leaveDateEnd);12===a.getHours()&&(i=Be.jt.Pm),12===s.getHours()&&(r=Be.jt.Am),a=new Date(a.toDateString()),s=new Date(s.toDateString());const o=new Date(a);for(;o.getTime()!==s.getTime()+864e5;){if(6!==o.getDay()&&0!==o.getDay()&&o.getTime()>=e.getTime()&&o.getTime()<=t.getTime()&&!this.isHoliday(o.getDay())){let e=new x;e.dayNumber=o.getDay(),e.motive=n.motive,e=this.buildLeaveDayDetail(i,r,e,n,a,s,o),this.weekLeaveDays[o.getDay()]=e}o.setDate(o.getDate()+1)}}),this.getMissionsDay()})}buildLeaveDayDetail(e,t,n,i,r,a,s){return e===Be.jt.Pm&&t===Be.jt.Am?this.buildLeaveDayPmAm(n,i,r,a,s):e===Be.jt.Pm&&t===Be.jt.Full?this.buildLeaveDayPmPm(n,i,r,a,s):e===Be.jt.Full&&t===Be.jt.Am?this.buildLeaveDayAmAm(n,i,r,a,s):this.buildLeaveDayAmPm(n,i,r,a)}buildLeaveDayPmAm(e,t,n,i,r){return e.detail="Cong\xe9("+t.demandDay+" jour)<br/>".concat(this.dateTimeService.getShortestFormat(n)," PM-",this.dateTimeService.getShortestFormat(i)," AM"),r.getTime()===n.getTime()||r.getTime()===i.getTime()?(e.numDay=.5,this.leavesHour+=4,this.notWorkedDays=.5):(e.numDay=1,this.leavesHour+=8,this.notWorkedDays+=1),e}buildLeaveDayPmPm(e,t,n,i,r){return e.detail="Cong\xe9("+t.demandDay+" jour)<br/>".concat(this.dateTimeService.getShortestFormat(n)," PM-",this.dateTimeService.getShortestFormat(i)," PM"),r.getTime()===n.getTime()?(e.numDay=.5,this.leavesHour+=4,this.notWorkedDays+=.5):(e.numDay=1,this.leavesHour+=8,this.notWorkedDays+=1),e}buildLeaveDayAmAm(e,t,n,i,r){return e.detail="Cong\xe9 ("+t.demandDay+" jour)<br/>".concat(this.dateTimeService.getShortestFormat(n)," AM-",this.dateTimeService.getShortestFormat(i)," AM"),r.getTime()===i.getTime()?(e.numDay=.5,this.leavesHour+=4,this.notWorkedDays+=.5):(e.numDay=1,this.leavesHour+=8,this.notWorkedDays+=1),e}buildLeaveDayAmPm(e,t,n,i){return e.detail="Cong\xe9 ("+t.demandDay+" jour) <br/>".concat(this.dateTimeService.getShortestFormat(n)," AM-",this.dateTimeService.getShortestFormat(i)," PM"),e.numDay=1,this.leavesHour+=8,this.notWorkedDays+=1,e}getUserClockings(){const e=this.days[0].date.toDate(),t=this.days[this.days.length-1].date.toDate(),n=this.selectedUserId;this.resetClockings(),this.attendanceService.getUserClockings(n,e,t).pipe((0,g.R)(this.attendanceService.stopClockingsGet)).subscribe(e=>{let t,n=[];e.forEach(e=>{e.clockingDate=new Date(e.clockingDate),null!=t&&t!==e.clockingDate.getDay()&&(this.clockings[t]=n,n.length>0&&(this.clockingsAccumulation[t]+=this.computeClockingsDayTimeAccumulationAndAnomalies(n)),n=[]),n.push(Object.assign(new C,e)),t=e.clockingDate.getDay()}),null!=t&&(this.clockings[t]=n,n.length>0&&(this.clockingsAccumulation[t]+=this.computeClockingsDayTimeAccumulationAndAnomalies(n))),this.getPermissions(),this.getPublicHolidays()},e=>{this.notificationService.danger(e)})}isPermission(e){return null!=this.finalWeekPermission[e]}isLeave(e){return this.weekLeaveDays.some(t=>t.dayNumber===e)}isBusinessTrip(e){return null!=this.weekBusinessTrip[e]}isMission(e){return null!=this.weekMissions[e]}isHoliday(e){return null!=this.weekHolidays[e]}resetClockings(){this.leavesHour=0,this.permissionHour=0,this.notWorkedDays=0,this.workDays=0,this.days.forEach(e=>{this.clockings[e.dayNumber]=[],this.clockingsAccumulation[e.dayNumber]=e.date.toDate().getTime()})}computeClockingsDayTimeAccumulationAndAnomalies(e){const t=e[0].clockingDate.getFullYear(),n=e[0].clockingDate.getMonth(),i=e[0].clockingDate.getDate(),r=e[0].clockingDate.getDay(),a=new Date(t,n,i,12,30,0).getTime(),s=new Date(t,n,i,14,0,0).getTime();let o=0;return this.workDayAfternoon=0,this.workDayMorning=0,this.dayTimeAccumulation=0,this.dinerTimeAccumulation=0,e.forEach(t=>{o++,t.clockingAnomaly=this.getClockingAnomaly(this.previousClockingType,t.clockingType,o,e.length),this.computeClockingDay(t,a,s),this.previousClockingType=t.clockingType}),this.minimumAccumulationOfDay=126e5,0===e[0].clockingSingleSession&&(this.minimumAccumulationOfDay=162e5),this.dinerTimeAccumulation>18e5&&(this.dayTimeAccumulation=this.dayTimeAccumulation-this.dinerTimeAccumulation+18e5),this.workDays+=null==this.weekLeaveDays[r]&&this.dayTimeAccumulation<this.minimumAccumulationOfDay&&this.workDayMorning+this.workDayAfternoon===1?.5:this.workDayMorning+this.workDayAfternoon,this.dayTimeAccumulation}computeClockingDay(e,t,n){e.clockingType===v.In?(this.clockingInCase(e),this.clockingInTime=e.clockingDate.getTime()):void 0!==this.clockingInTime&&(this.clockingOutTime=e.clockingDate.getTime(),this.clockingOutCase(e),this.previousClockingType===v.In&&(this.dayTimeAccumulation+=this.clockingOutTime-this.clockingInTime,0===e.clockingSingleSession&&(this.dinerTimeAccumulation+=this.computeLunchTimeAccumulation(this.clockingInTime,this.clockingOutTime,t,n))))}clockingInCase(e){0===e.clockingSingleSession?e.clockingDate.getHours()<14?this.workDayMorning=.5:this.workDayAfternoon=.5:(this.workDayAfternoon=.5,this.workDayMorning=.5)}clockingOutCase(e){0===e.clockingSingleSession?e.clockingDate.getHours()<14?0===this.workDayMorning&&(this.workDayMorning=.5):0===this.workDayAfternoon&&(this.workDayAfternoon=.5):(this.workDayAfternoon=.5,this.workDayMorning=.5)}getClockingAnomaly(e,t,n,i){let r=0;return null!=e?(t===e||t===v.In&&i===n)&&(r=1):t===v.Out&&(r=1),r}computeLunchTimeAccumulation(e,t,n,i){let r=0;return e<n?t>n&&(r=t<i?t-n:i-n):e<i&&(r=t<i?t-e:i-e),r}computeTotalAccumulation(){let e=0,t=0;this.totalAccumulation="",this.clockingsAccumulation.forEach(n=>{const i=new Date(n);t+=i.getMinutes(),e+=Math.floor(t/60)+i.getHours(),t%=60}),this.totalAccumulation=this.formatingNumberToTimeString(e)+":"+this.formatingNumberToTimeString(t);const n=5-this.notWorkedDays;this.amplitude=0===n||0===e&&0===t?"00:00":Math.floor(e/n)+":"+this.formatingNumberToTimeString(Math.floor((e%n*60+t)/n))}selectCurrentWeek(){this.attendanceService.selectCurrentWeek.next()}isUsersListNotEmpty(){return this.currentUser.activityId===d.RS.Administration||this.currentUser.hasSubordinates}openAddAttendanceDialog(){this.DisplayAddAttendancedialogRef=this.dialog.open(re,{disableClose:!1,panelClass:"form_modal",width:"450px",height:"500px",hasBackdrop:!0,data:{editClocking:this.editClocking}})}formatingNumberToTimeString(e){return Math.floor(e/10)+""+e%10}}return e.\u0275fac=function(t){return new(t||e)(T.\u0275\u0275directiveInject(a.uw),T.\u0275\u0275directiveInject(P),T.\u0275\u0275directiveInject(M.gq),T.\u0275\u0275directiveInject($e.e),T.\u0275\u0275directiveInject(M.Cv),T.\u0275\u0275directiveInject(Ge.$))},e.\u0275cmp=T.\u0275\u0275defineComponent({type:e,selectors:[["app-attendances-component"]],decls:60,vars:13,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"col-sm-2"],[1,"col-sm-6"],[1,"select-current-week"],[3,"click"],[1,"btn","btn-primary","f-right",3,"click"],[1,"icofont","icofont-plus"],[1,"col-sm-12",2,"text-align","right"],[1,"row","m-t-15","m-b-15"],[1,"col-sm-3"],[3,"daysChange"],[1,"col-sm-4","f-right"],[3,"userChange",4,"ngIf"],[1,"col-md-2"],[1,"col-md-8"],[1,"table-fixed"],[4,"ngFor","ngForOf"],[1,"table","text-center"],[1,"th-summary-head"],["id","hc"],["id","hs"],["id","ht"],["id","jt"],["id","am"],[1,"tr-summary-totals"],[3,"userChange"],["id","day",1,"td-days"],[1,"td-totals"],["matTooltip","","colspan","2","class","td-holiday","appTdHoliday","",3,"matTooltip","holiday","holidayChange",4,"ngIf"],["matTooltip","","colspan","2","class","td-business-trip","appTdBusinessTrip","",3,"matTooltip","businessTrip","businessTripChange",4,"ngIf"],["colspan","2","class","td-mission","appTdMission","",3,"mission","missionChange",4,"ngIf"],["colspan","2","class","td-permissions","appTdPermission","",3,"permission","permissionChange",4,"ngIf"],["matTooltip","","colspan","2","class","td-leaves","appTdLeaveDay","",3,"matTooltip","leaveDay","leaveDayChange",4,"ngIf"],["class","td-clockings","appTdClocking","",3,"clocking","date",4,"ngFor","ngForOf"],["matTooltip","","colspan","2","appTdHoliday","",1,"td-holiday",3,"matTooltip","holiday","holidayChange"],["matTooltip","","colspan","2","appTdBusinessTrip","",1,"td-business-trip",3,"matTooltip","businessTrip","businessTripChange"],["colspan","2","appTdMission","",1,"td-mission",3,"mission","missionChange"],["colspan","2","appTdPermission","",1,"td-permissions",3,"permission","permissionChange"],["matTooltip","","colspan","2","appTdLeaveDay","",1,"td-leaves",3,"matTooltip","leaveDay","leaveDayChange"],["appTdClocking","",1,"td-clockings",3,"clocking","date"]],template:function(e,t){1&e&&(T.\u0275\u0275elementStart(0,"div",0),T.\u0275\u0275elementStart(1,"div",1),T.\u0275\u0275elementStart(2,"div",2),T.\u0275\u0275elementStart(3,"div",3),T.\u0275\u0275elementStart(4,"div",4),T.\u0275\u0275elementStart(5,"div",5),T.\u0275\u0275elementStart(6,"div",2),T.\u0275\u0275elementStart(7,"div",3),T.\u0275\u0275elementStart(8,"div",2),T.\u0275\u0275element(9,"div",6),T.\u0275\u0275elementStart(10,"div",7),T.\u0275\u0275elementStart(11,"div",8),T.\u0275\u0275elementStart(12,"a",9),T.\u0275\u0275listener("click",function(){return t.selectCurrentWeek()}),T.\u0275\u0275elementStart(13,"h5"),T.\u0275\u0275text(14),T.\u0275\u0275pipe(15,"shortDate"),T.\u0275\u0275pipe(16,"shortDate"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(17,"div",6),T.\u0275\u0275elementStart(18,"button",10),T.\u0275\u0275listener("click",function(){return t.openAddAttendanceDialog()}),T.\u0275\u0275element(19,"em",11),T.\u0275\u0275text(20," Add "),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(21,"div",12),T.\u0275\u0275elementStart(22,"div",13),T.\u0275\u0275element(23,"div",6),T.\u0275\u0275elementStart(24,"div",14),T.\u0275\u0275elementStart(25,"app-select-week",15),T.\u0275\u0275listener("daysChange",function(e){return t.daysChange(e)}),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(26,"div",16),T.\u0275\u0275template(27,nt,1,0,"app-select-employee",17),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(28,"div",14),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(29,"div",2),T.\u0275\u0275element(30,"div",18),T.\u0275\u0275elementStart(31,"div",19),T.\u0275\u0275elementStart(32,"table",20),T.\u0275\u0275element(33,"caption"),T.\u0275\u0275template(34,ct,15,14,"tr",21),T.\u0275\u0275elementEnd(),T.\u0275\u0275element(35,"br"),T.\u0275\u0275elementStart(36,"table",22),T.\u0275\u0275element(37,"caption"),T.\u0275\u0275elementStart(38,"thead",23),T.\u0275\u0275elementStart(39,"th",24),T.\u0275\u0275text(40,"Heures Cong\xe9s"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(41,"th",25),T.\u0275\u0275text(42,"Heures Sorties"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(43,"th",26),T.\u0275\u0275text(44,"Heures Travaill\xe9es"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(45,"th",27),T.\u0275\u0275text(46,"Jours travaill\xe9s"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(47,"th",28),T.\u0275\u0275text(48,"Amplitude"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(49,"tr",29),T.\u0275\u0275elementStart(50,"td"),T.\u0275\u0275text(51),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(52,"td"),T.\u0275\u0275text(53),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(54,"td"),T.\u0275\u0275text(55),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(56,"td"),T.\u0275\u0275text(57),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(58,"td"),T.\u0275\u0275text(59),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementEnd()),2&e&&(T.\u0275\u0275advance(14),T.\u0275\u0275textInterpolate2("Current Week: ",T.\u0275\u0275pipeBind1(15,9,t.startOfCurrentWeek)," - ",T.\u0275\u0275pipeBind1(16,11,t.endOfCurrentWeek),""),T.\u0275\u0275advance(13),T.\u0275\u0275property("ngIf",t.isUsersListNotEmpty()),T.\u0275\u0275advance(7),T.\u0275\u0275property("ngForOf",t.days),T.\u0275\u0275advance(17),T.\u0275\u0275textInterpolate(t.leavesHour),T.\u0275\u0275advance(2),T.\u0275\u0275textInterpolate(t.permissionHour),T.\u0275\u0275advance(2),T.\u0275\u0275textInterpolate(t.totalAccumulation),T.\u0275\u0275advance(2),T.\u0275\u0275textInterpolate(t.workDays),T.\u0275\u0275advance(2),T.\u0275\u0275textInterpolate(t.amplitude))},directives:[Ye,i.NgIf,i.NgForOf,Je.V,s.gM,Qe,Ke,Ze,Xe,et,tt],pipes:[qe.M,i.DatePipe],styles:[".card-body[_ngcontent-%COMP%]{min-height:75vh;padding:25px}.table-fixed[_ngcontent-%COMP%]{table-layout:fixed}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px;padding:6px;border:1px solid white}.td-days[_ngcontent-%COMP%]{width:120px;text-align:left;background-color:#069;color:#fff}.td-totals[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:60px;max-width:60px;text-align:center;background-color:#c3df7d;color:#000}.td-permissions[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;width:120px;max-width:120px;text-align:center;background-color:#ff0;color:#000}.td-mission[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;max-width:120px;width:120px;text-align:center;background-color:#f2e783;color:#000}.td-business-trip[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;max-width:120px;width:120px;text-align:center;background-color:#f5bc37;color:#000}.td-holiday[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;width:120px;text-align:center;background-color:#f53766dc;color:#000;max-width:120px}.td-leaves[_ngcontent-%COMP%]{max-width:120px;width:120px;text-align:center;background-color:#6e81bd;color:#000}.td-clockings[_ngcontent-%COMP%]{max-width:60px;width:60px;text-align:center}.th-summary-head[_ngcontent-%COMP%]{font-weight:100;text-align:center;background-color:orange;color:#fff}.tr-summary-totals[_ngcontent-%COMP%]{font-weight:100;color:#000}.select-current-week[_ngcontent-%COMP%]{cursor:pointer;color:#448aff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] + tbody[_ngcontent-%COMP%]{border-top:0px}"]}),e})();const mt=[{path:"",data:{title:"Attendance",function:d.FI.Attendance,status:!1},canActivate:[c.a1],children:[{path:"attendances",component:dt,data:{title:"Attendances",function:d.FI.Attendance,status:!0},canActivate:[c.a1]},{path:"clockings",component:Re,data:{title:"Clockings",function:d.FI.Attendance,status:!0},canActivate:[c.a1]},{canActivate:[c.a1],path:"attendance/:clockingId",data:{title:"Edit Attendance",function:d.FI.Attendance,status:!0,edit:!0},component:dt}]}];let gt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=T.\u0275\u0275defineInjector({imports:[[l.Bz.forChild(mt)],l.Bz]}),e})();var pt=n(91841),ut=n(36063);const ht={parse:{dateInput:"L"},display:{dateInput:"L",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let ft=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=T.\u0275\u0275defineInjector({providers:[P,{provide:Z.Ad,useValue:"en-EN"},{provide:Z._A,useClass:ut.t7,deps:[Z.Ad]},{provide:Z.sG,useValue:ht}],imports:[[i.CommonModule,o.m,r.FormsModule,r.ReactiveFormsModule,o.q,a.Is,H.ZQ.forRoot(),pt.HttpClientModule,a.Is]]}),e})(),yt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=T.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=T.\u0275\u0275defineInjector({providers:[P,$e.e,$e.E,Ge.$,M.gq,M.xB],imports:[[s.AV,i.CommonModule,o.m,r.FormsModule,r.ReactiveFormsModule,o.q,a.Is,gt,ft]]}),e})()},62758:function(e,t,n){n.d(t,{M:function(){return a}});var i=n(37716),r=n(10337);let a=(()=>{class e{constructor(e){this.dtService=e}transform(e,t){return null==e||"0001-01-01T00:00:00"===e?"":"day"===t?this.dtService.getShortFormatWithDay(e):this.dtService.getShortFormat(e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(r.Cv,16))},e.\u0275pipe=i.\u0275\u0275definePipe({name:"shortDate",type:e,pure:!0}),e})()}}]);