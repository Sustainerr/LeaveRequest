"use strict";(self.webpackChunktelnetteam_app=self.webpackChunktelnetteam_app||[]).push([[820],{54820:function(e,t,r){r.r(t),r.d(t,{CUSTOM_DT_FORMATS:function(){return ve},WorkFromHomeModule:function(){return ke}});var n=r(38583),o=r(32403),i=r(72458),a=r(22238),s=r(36063),l=r(67827),m=r(91841),d=r(10337),c=r(36332),u=r(88452),h=r(62028),p=r(63753),g=r(70833),f=r(55750),S=r(8799),w=r(27452),v=r(3679),k=r(46782),F=r(37716),b=r(98295),y=r(67441),x=r(52218),R=r(76627),H=r(7539),C=r(49983),D=r(43220);const q=["workFromHomeRequestForm"];function I(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"mat-option",27),F.\u0275\u0275text(1),F.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;F.\u0275\u0275property("value",e.id),F.\u0275\u0275advance(1),F.\u0275\u0275textInterpolate1(" ",e.description," ")}}function E(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"mat-option",27),F.\u0275\u0275text(1),F.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;F.\u0275\u0275property("value",e),F.\u0275\u0275advance(1),F.\u0275\u0275textInterpolate1(" ",e," ")}}let M=(()=>{class e{constructor(e,t,r,n,o,i){this.workFromHomeService=e,this.notificationService=t,this.mailService=r,this.datepipe=n,this.dialogRef=o,this.data=i,this.initialWorkFromHomeRequest=new S.ml,this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.resourceFilterCtrl=new v.FormControl,this.filteredResources=new g.tq(1),this.halefDayItems=Object.values(S.jt).map(e=>S.jt[e]),this.selectedHalefDayItem=this.halefDayItems[0],this.forbiddenResources=!0,this._onDestroy=new g.xQ,this.isEdit=!1}ngOnInit(){this.workFromHomeRequestId=this.data.workFromHomeRequestId,this.isSuperAdmin()?this.getResources():this.getReporters(),this.resourceFilterCtrl.valueChanges.pipe((0,k.R)(this._onDestroy)).subscribe(()=>{this.filterIdentifiers(this.resourcesIdentifiers,this.filteredResources,this.resourceFilterCtrl)}),this.forbiddenResources=this.currentUser.groupId!==h.Fl.SuperAdmin&&!this.currentUser.hasSubordinates,this.data&&(this.workFromHomeRequest=new S.ml,this.isEdit=this.data.isEdit,this.isEdit?(this.modelTitel="Edit Work From Home Request",this.getWorkFromHomeRequestInProgress()):(this.modelTitel="Add Work From Home Request",this.workFromHomeRequest.userId=this.currentUser.userId))}getWorkFromHomeRequestInProgress(){this.workFromHomeRequestId&&this.workFromHomeService.getWorkHomeRequestInProgress(this.workFromHomeRequestId).subscribe(e=>{0!==e.length?(this.workFromHomeRequest=Object.assign(new S.ml,e[0]),this.workFromHomeRequest.startDate=new Date(this.workFromHomeRequest.startDate),this.workFromHomeRequest.endDate=new Date(this.workFromHomeRequest.endDate),this.initialWorkFromHomeRequest=Object.assign(new S.ml,e[0]),this.initialWorkFromHomeRequest.startDate=new Date(this.initialWorkFromHomeRequest.startDate),this.initialWorkFromHomeRequest.endDate=new Date(this.initialWorkFromHomeRequest.endDate),null!==this.workFromHomeRequest.halfDay&&(this.isHalfDayChecked=!0)):(this.close(),this.workFromHomeService.refreshWorkFomHomeRequest.next(),this.notificationService.danger("This Work From Home Request does not yet exist or not in progress"))})}OnChangeHalfDay(){this.isHalfDayChecked?this.workFromHomeRequest.endDate=this.workFromHomeRequest.startDate:this.workFromHomeRequest.halfDay=null}getResources(){this.workFromHomeService.getResources().subscribe(e=>{null!=e&&(this.resourcesIdentifiers=e,this.filteredResources.next(this.resourcesIdentifiers.slice()))})}getReporters(){this.workFromHomeService.getReporters(this.currentUser.userId).subscribe(e=>{null!=e&&(this.resourcesIdentifiers=e,this.filteredResources.next(this.resourcesIdentifiers.slice()))})}isSuperAdmin(){return this.currentUser.groupId===h.Fl.SuperAdmin}filterIdentifiers(e,t,r){if(!e)return;let n=r.value;n?(n=n.toLowerCase(),t.next(e.filter(e=>e.description.toLowerCase().indexOf(n)>-1))):t.next(e.slice())}close(){this.dialogRef.close()}cancel(){this.close()}dateOnly(e){return this.dateTimeService.dateOnly(e)}onChangingDate(){(this.isHalfDayChecked||!this.workFromHomeRequest.endDate||this.workFromHomeRequest.startDate>this.workFromHomeRequest.endDate)&&(this.workFromHomeRequest.endDate=this.workFromHomeRequest.startDate)}formControl(){this.errorMessage="";let e=!0;return this.workFromHomeRequest.startDate>this.workFromHomeRequest.endDate&&(this.errorMessage="End Date must be greater than Start Date.",e=!1),this.isHalfDayChecked&&(""===this.workFromHomeRequest.halfDay||null===this.workFromHomeRequest.halfDay)&&(this.errorMessage="Day Time is required",e=!1),e}save(){this.workFromHomeRequestForm.valid?this.formControl()?(this.prepareWorkFromHomeRequest(this.workFromHomeRequest),this.workFromHomeService.IsDateExistOrInProgressWorkHome(this.workFromHomeRequest.workHomeRequestId,this.workFromHomeRequest.userId,this.workFromHomeRequest.startDate,this.workFromHomeRequest.endDate).subscribe(e=>{switch(e){case 0:this.workFromHomeService.insertOrUpdateWorkFromHomeRequest(this.workFromHomeRequest).subscribe(()=>{this.notifications(),this.close(),this.workFromHomeService.refreshWorkFomHomeRequest.next()});break;case 1:this.close(),this.workFromHomeService.refreshWorkFomHomeRequest.next(),this.notificationService.danger("This Work From Home Request does not yet exist or not in progress");break;case 2:this.notificationService.danger("This person has a work from home request at this date.")}})):this.notificationService.danger(this.errorMessage):this.notificationService.danger("Please fill all required fields")}notifications(){this.isEdit?this.checkModification(this.initialWorkFromHomeRequest,this.workFromHomeRequest)&&(this.notificationService.success("This Work From Home Request is modified successfully"),this.mailService.workFromHomeRequestModified(this.workFromHomeRequest,this.initialWorkFromHomeRequest)):(this.notificationService.success("This Work From Home Request is added successfully"),this.mailService.workFromHomeRequestAdded(this.workFromHomeRequest))}prepareWorkFromHomeRequest(e){0===e.workHomeRequestId&&(e.state=1),e.motive="",e.userFullName=this.resourcesIdentifiers.find(t=>t.id===e.userId).description,e.dayNumber=this.calculateBetweenDates()}calculateBetweenDates(){let e=0;if(this.isHalfDayChecked)e=.5;else{const t=new Date(this.workFromHomeRequest.startDate);e=(new Date(this.workFromHomeRequest.endDate).getTime()-t.getTime())/864e5+1}return console.log(e),e}checkModification(e,t){let r=!1;return(e.startDate!==t.startDate||e.endDate!==t.endDate||e.halfDay!==t.halfDay||e.dayNumber!==t.dayNumber)&&(r=!0),r}}return e.\u0275fac=function(t){return new(t||e)(F.\u0275\u0275directiveInject(w.P),F.\u0275\u0275directiveInject(d.gq),F.\u0275\u0275directiveInject(d.YT),F.\u0275\u0275directiveInject(n.DatePipe),F.\u0275\u0275directiveInject(a.so),F.\u0275\u0275directiveInject(a.WI))},e.\u0275cmp=F.\u0275\u0275defineComponent({type:e,selectors:[["app-edit-work-from-home-request"]],viewQuery:function(e,t){if(1&e&&F.\u0275\u0275viewQuery(q,7),2&e){let e;F.\u0275\u0275queryRefresh(e=F.\u0275\u0275loadQuery())&&(t.workFromHomeRequestForm=e.first)}},decls:47,vars:20,consts:[[1,"modal_header"],[1,"modal_title"],[1,"material-icons","modal-close",3,"click"],[1,"modal_body"],["placement","bottom",1,"p-20","z-depth-top-0","waves-effect"],["id","workFromHomeRequestForm"],["workFromHomeRequestForm","ngForm"],[1,"row","m-b-6"],[1,"col-sm-12"],["placeholder","Resource","name","resource","required","",3,"ngModel","disabled","ngModelChange"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["ngxMatSelectSearchClear",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-6"],["name","halfDayCheckBox",1,"checkbox-halfday",3,"ngModel","ngModelChange","change"],["placeholder","Day Time...","name","DayTime",3,"disabled","ngModel","ngModelChange"],[1,"date-field","col-sm-6"],["name","startDate","matInput","","placeholder","From","required","",3,"matDatepicker","ngModel","keypress","ngModelChange"],["matSuffix","",3,"for"],["picker11",""],["name","EndDate","matInput","","placeholder","To","required","",3,"matDatepicker","disabled","ngModel","keypress","ngModelChange"],["picker22",""],[1,"row","m-t-20"],[1,"col-lg-12"],[1,"row","f-right"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","submit",1,"btn","btn-primary","ripple","light","btn-md",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"div",0),F.\u0275\u0275elementStart(1,"div",1),F.\u0275\u0275elementStart(2,"span"),F.\u0275\u0275text(3),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(4,"span"),F.\u0275\u0275elementStart(5,"em",2),F.\u0275\u0275listener("click",function(){return t.close()}),F.\u0275\u0275text(6,"close"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(7,"div",3),F.\u0275\u0275elementStart(8,"div",4),F.\u0275\u0275elementStart(9,"form",5,6),F.\u0275\u0275elementStart(11,"div",7),F.\u0275\u0275elementStart(12,"mat-form-field",8),F.\u0275\u0275elementStart(13,"mat-select",9),F.\u0275\u0275listener("ngModelChange",function(e){return t.workFromHomeRequest.userId=e}),F.\u0275\u0275elementStart(14,"mat-option"),F.\u0275\u0275elementStart(15,"ngx-mat-select-search",10),F.\u0275\u0275elementStart(16,"mat-icon",11),F.\u0275\u0275text(17,"close"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275template(18,I,2,2,"mat-option",12),F.\u0275\u0275pipe(19,"async"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(20,"div",7),F.\u0275\u0275elementStart(21,"div",13),F.\u0275\u0275elementStart(22,"mat-checkbox",14),F.\u0275\u0275listener("ngModelChange",function(e){return t.isHalfDayChecked=e})("change",function(){return t.OnChangeHalfDay()}),F.\u0275\u0275text(23," Half Day "),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(24,"mat-form-field",13),F.\u0275\u0275elementStart(25,"mat-select",15),F.\u0275\u0275listener("ngModelChange",function(e){return t.workFromHomeRequest.halfDay=e}),F.\u0275\u0275template(26,E,2,2,"mat-option",12),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(27,"div",7),F.\u0275\u0275elementStart(28,"mat-form-field",16),F.\u0275\u0275elementStart(29,"input",17),F.\u0275\u0275listener("keypress",function(e){return t.dateOnly(e)})("ngModelChange",function(e){return t.workFromHomeRequest.startDate=e})("ngModelChange",function(){return t.onChangingDate()}),F.\u0275\u0275elementEnd(),F.\u0275\u0275element(30,"mat-datepicker-toggle",18),F.\u0275\u0275element(31,"mat-datepicker",null,19),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(33,"mat-form-field",16),F.\u0275\u0275elementStart(34,"input",20),F.\u0275\u0275listener("keypress",function(e){return t.dateOnly(e)})("ngModelChange",function(e){return t.workFromHomeRequest.endDate=e}),F.\u0275\u0275elementEnd(),F.\u0275\u0275element(35,"mat-datepicker-toggle",18),F.\u0275\u0275element(36,"mat-datepicker",null,21),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(38,"div",22),F.\u0275\u0275elementStart(39,"div",23),F.\u0275\u0275elementStart(40,"div",24),F.\u0275\u0275elementStart(41,"div",23),F.\u0275\u0275elementStart(42,"button",25),F.\u0275\u0275listener("click",function(){return t.cancel()}),F.\u0275\u0275text(43,"Cancel"),F.\u0275\u0275elementEnd(),F.\u0275\u0275text(44," \xa0 \xa0 "),F.\u0275\u0275elementStart(45,"button",26),F.\u0275\u0275listener("click",function(){return t.save()}),F.\u0275\u0275text(46," Save "),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd()),2&e){const e=F.\u0275\u0275reference(32),r=F.\u0275\u0275reference(37);F.\u0275\u0275advance(3),F.\u0275\u0275textInterpolate1(" ",t.modelTitel," "),F.\u0275\u0275advance(10),F.\u0275\u0275property("ngModel",t.workFromHomeRequest.userId)("disabled",t.isEdit||t.forbiddenResources),F.\u0275\u0275advance(2),F.\u0275\u0275property("formControl",t.resourceFilterCtrl)("placeholderLabel","Search")("noEntriesFoundLabel","No options found"),F.\u0275\u0275advance(3),F.\u0275\u0275property("ngForOf",F.\u0275\u0275pipeBind1(19,18,t.filteredResources)),F.\u0275\u0275advance(4),F.\u0275\u0275property("ngModel",t.isHalfDayChecked),F.\u0275\u0275advance(3),F.\u0275\u0275property("disabled",!t.isHalfDayChecked)("ngModel",t.workFromHomeRequest.halfDay),F.\u0275\u0275advance(1),F.\u0275\u0275property("ngForOf",t.halefDayItems),F.\u0275\u0275advance(3),F.\u0275\u0275property("matDatepicker",e)("ngModel",t.workFromHomeRequest.startDate),F.\u0275\u0275advance(1),F.\u0275\u0275property("for",e),F.\u0275\u0275advance(4),F.\u0275\u0275property("matDatepicker",r)("disabled",t.isHalfDayChecked)("ngModel",t.workFromHomeRequest.endDate),F.\u0275\u0275advance(1),F.\u0275\u0275property("for",r)}},directives:[v.\u0275NgNoValidate,v.NgControlStatusGroup,v.NgForm,b.KE,y.gD,v.RequiredValidator,v.NgControlStatus,v.NgModel,i.ey,x.nu,v.FormControlDirective,R.Hw,x.w5,n.NgForOf,H.oG,C.Nt,D.hl,v.DefaultValueAccessor,D.nW,b.R9,D.Mq],pipes:[n.AsyncPipe],styles:[".col-sm-2[_ngcontent-%COMP%]{width:auto}.icon-pointer[_ngcontent-%COMP%]{cursor:pointer}.th-firstCell-style[_ngcontent-%COMP%]{font-weight:bolder}.th-table-style[_ngcontent-%COMP%]{text-align:center;font-weight:bolder}.td-table-style[_ngcontent-%COMP%]{text-align:center}.td-title-style[_ngcontent-%COMP%]{max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:center}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:5px!important;padding:0!important;overflow:hidden}.modal_body[_ngcontent-%COMP%]{overflow:hidden}.modal_header[_ngcontent-%COMP%]{height:50px;background-color:#3f629d;padding:18px 15px}.modal_header[_ngcontent-%COMP%]   .modal_title[_ngcontent-%COMP%]{color:#fff;line-height:1}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{float:right;cursor:pointer}.modal_header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:red}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]{cursor:not-allowed;color:#dcdcdc}.modal_header[_ngcontent-%COMP%]   .modal-close-disabled[_ngcontent-%COMP%]:hover{color:#dcdcdc}.checkbox-halfday[_ngcontent-%COMP%]{padding-top:15px!important}"]}),e})();var A=r(16738),W=r(19992),O=r(69517),P=r(39924),N=r(4885),T=r(32789),j=r(88259),_=r.n(j),z=r(11494),L=r(38590);function B(e,t){1&e&&(F.\u0275\u0275elementStart(0,"mat-header-cell",19),F.\u0275\u0275text(1,"Matricule"),F.\u0275\u0275elementEnd())}function J(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"mat-cell",20),F.\u0275\u0275text(1),F.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;F.\u0275\u0275propertyInterpolate("matTooltip",e.userNumber),F.\u0275\u0275advance(1),F.\u0275\u0275textInterpolate1(" ",e.userNumber," ")}}function U(e,t){1&e&&(F.\u0275\u0275elementStart(0,"mat-header-cell",19),F.\u0275\u0275text(1,"Resource"),F.\u0275\u0275elementEnd())}function $(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"mat-cell"),F.\u0275\u0275text(1),F.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;F.\u0275\u0275advance(1),F.\u0275\u0275textInterpolate1(" ",e.userFullName," ")}}function V(e,t){1&e&&(F.\u0275\u0275elementStart(0,"mat-header-cell",19),F.\u0275\u0275text(1,"Activity"),F.\u0275\u0275elementEnd())}function Y(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"mat-cell",20),F.\u0275\u0275text(1),F.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;F.\u0275\u0275propertyInterpolate("matTooltip",e.userActivity),F.\u0275\u0275advance(1),F.\u0275\u0275textInterpolate1(" ",e.activityName," ")}}function G(e,t){1&e&&(F.\u0275\u0275elementStart(0,"mat-header-cell",19),F.\u0275\u0275text(1,"Start Date"),F.\u0275\u0275elementEnd())}function Q(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"mat-cell"),F.\u0275\u0275text(1),F.\u0275\u0275pipe(2,"date"),F.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;F.\u0275\u0275advance(1),F.\u0275\u0275textInterpolate1(" ",F.\u0275\u0275pipeBind2(2,1,e.startDate,"E dd/MM/y")," ")}}function K(e,t){1&e&&(F.\u0275\u0275elementStart(0,"mat-header-cell",19),F.\u0275\u0275text(1,"End Date"),F.\u0275\u0275elementEnd())}function Z(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"mat-cell"),F.\u0275\u0275text(1),F.\u0275\u0275pipe(2,"date"),F.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;F.\u0275\u0275advance(1),F.\u0275\u0275textInterpolate1(" ",F.\u0275\u0275pipeBind2(2,1,e.endDate,"E dd/MM/y")," ")}}function X(e,t){1&e&&(F.\u0275\u0275elementStart(0,"mat-header-cell",19),F.\u0275\u0275text(1,"Day(s)"),F.\u0275\u0275elementEnd())}function ee(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"mat-cell"),F.\u0275\u0275text(1),F.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;F.\u0275\u0275advance(1),F.\u0275\u0275textInterpolate1(" ",e.dayNumber," ")}}function te(e,t){1&e&&(F.\u0275\u0275elementStart(0,"mat-header-cell",19),F.\u0275\u0275text(1,"Day Time"),F.\u0275\u0275elementEnd())}function re(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"mat-cell"),F.\u0275\u0275text(1),F.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;F.\u0275\u0275advance(1),F.\u0275\u0275textInterpolate1(" ",e.halfDay," ")}}function ne(e,t){1&e&&(F.\u0275\u0275elementStart(0,"mat-header-cell",19),F.\u0275\u0275text(1,"Status"),F.\u0275\u0275elementEnd())}const oe=function(e,t,r){return{"label-default":e,"label-success":t,"label-danger":r}};function ie(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"mat-cell"),F.\u0275\u0275elementStart(1,"label",21),F.\u0275\u0275text(2),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,r=F.\u0275\u0275nextContext(2);F.\u0275\u0275advance(1),F.\u0275\u0275property("ngClass",F.\u0275\u0275pureFunction3(2,oe,r.isInProgress(e),r.isApproved(e),r.isRejected(e))),F.\u0275\u0275advance(1),F.\u0275\u0275textInterpolate1(" ",r.getworkFromHomeLabel(e.state),"")}}function ae(e,t){1&e&&F.\u0275\u0275element(0,"mat-header-cell")}function se(e,t){if(1&e){const e=F.\u0275\u0275getCurrentView();F.\u0275\u0275elementStart(0,"mat-cell"),F.\u0275\u0275elementStart(1,"button",22),F.\u0275\u0275listener("click",function(){const t=F.\u0275\u0275restoreView(e).$implicit;return F.\u0275\u0275nextContext(2).approveWorkFromHomeRequest(t)}),F.\u0275\u0275elementStart(2,"em",23),F.\u0275\u0275text(3,"done"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(4,"button",24),F.\u0275\u0275listener("click",function(){const t=F.\u0275\u0275restoreView(e).$implicit;return F.\u0275\u0275nextContext(2).rejectWorkFromHomeRequest(t)}),F.\u0275\u0275elementStart(5,"em",23),F.\u0275\u0275text(6,"cancel"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(7,"button",25),F.\u0275\u0275listener("click",function(){const t=F.\u0275\u0275restoreView(e).$implicit;return F.\u0275\u0275nextContext(2).openEditRequestDialog(t)}),F.\u0275\u0275elementStart(8,"em",23),F.\u0275\u0275text(9,"edit"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(10,"button",26),F.\u0275\u0275listener("click",function(){const t=F.\u0275\u0275restoreView(e).$implicit;return F.\u0275\u0275nextContext(2).deleteWorkFromHomeRequest(t)}),F.\u0275\u0275elementStart(11,"em",23),F.\u0275\u0275text(12,"delete"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,r=F.\u0275\u0275nextContext(2);F.\u0275\u0275advance(1),F.\u0275\u0275property("disabled",r.forbiddenRejecteValidate||r.isMyWorkFromHomeRequestApprovedAndRejected(e)||r.isMyWorkFromHomeRequestInProgress(e)||r.isApproved(e)||r.isRejected(e)),F.\u0275\u0275advance(3),F.\u0275\u0275property("disabled",r.forbiddenRejectValidate||r.isMyWorkFromHomeRequestApprovedAndRejected(e)||r.isMyWorkFromHomeRequestInProgress(e)||r.isRejected(e)),F.\u0275\u0275advance(3),F.\u0275\u0275property("disabled",r.isMyWorkFromHomeRequestApprovedAndRejected(e)||r.isApproved(e)||r.isRejected(e)),F.\u0275\u0275advance(3),F.\u0275\u0275property("disabled",r.isMyWorkFromHomeRequestApprovedAndRejected(e))}}function le(e,t){1&e&&F.\u0275\u0275element(0,"mat-header-row",27)}function me(e,t){1&e&&F.\u0275\u0275element(0,"mat-row")}function de(e,t){if(1&e){const e=F.\u0275\u0275getCurrentView();F.\u0275\u0275elementStart(0,"div",1),F.\u0275\u0275elementStart(1,"mat-table",2,3),F.\u0275\u0275listener("matSortChange",function(t){return F.\u0275\u0275restoreView(e),F.\u0275\u0275nextContext().onSortData(t)}),F.\u0275\u0275elementContainerStart(3,4),F.\u0275\u0275template(4,B,2,0,"mat-header-cell",5),F.\u0275\u0275template(5,J,2,2,"mat-cell",6),F.\u0275\u0275elementContainerEnd(),F.\u0275\u0275elementContainerStart(6,7),F.\u0275\u0275template(7,U,2,0,"mat-header-cell",5),F.\u0275\u0275template(8,$,2,1,"mat-cell",8),F.\u0275\u0275elementContainerEnd(),F.\u0275\u0275elementContainerStart(9,9),F.\u0275\u0275template(10,V,2,0,"mat-header-cell",5),F.\u0275\u0275template(11,Y,2,2,"mat-cell",6),F.\u0275\u0275elementContainerEnd(),F.\u0275\u0275elementContainerStart(12,10),F.\u0275\u0275template(13,G,2,0,"mat-header-cell",5),F.\u0275\u0275template(14,Q,3,4,"mat-cell",8),F.\u0275\u0275elementContainerEnd(),F.\u0275\u0275elementContainerStart(15,11),F.\u0275\u0275template(16,K,2,0,"mat-header-cell",5),F.\u0275\u0275template(17,Z,3,4,"mat-cell",8),F.\u0275\u0275elementContainerEnd(),F.\u0275\u0275elementContainerStart(18,12),F.\u0275\u0275template(19,X,2,0,"mat-header-cell",5),F.\u0275\u0275template(20,ee,2,1,"mat-cell",8),F.\u0275\u0275elementContainerEnd(),F.\u0275\u0275elementContainerStart(21,13),F.\u0275\u0275template(22,te,2,0,"mat-header-cell",5),F.\u0275\u0275template(23,re,2,1,"mat-cell",8),F.\u0275\u0275elementContainerEnd(),F.\u0275\u0275elementContainerStart(24,14),F.\u0275\u0275template(25,ne,2,0,"mat-header-cell",5),F.\u0275\u0275template(26,ie,3,6,"mat-cell",8),F.\u0275\u0275elementContainerEnd(),F.\u0275\u0275elementContainerStart(27,15),F.\u0275\u0275template(28,ae,1,0,"mat-header-cell",16),F.\u0275\u0275template(29,se,13,4,"mat-cell",8),F.\u0275\u0275elementContainerEnd(),F.\u0275\u0275template(30,le,1,0,"mat-header-row",17),F.\u0275\u0275template(31,me,1,0,"mat-row",18),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd()}if(2&e){const e=F.\u0275\u0275nextContext();F.\u0275\u0275advance(1),F.\u0275\u0275property("dataSource",e.dataSource),F.\u0275\u0275advance(29),F.\u0275\u0275property("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),F.\u0275\u0275advance(1),F.\u0275\u0275property("matRowDefColumns",e.displayedColumns)}}let ce=(()=>{class e{constructor(e,t,r,n,o,i){this.notificationService=e,this.dialog=t,this.searchFilterService=r,this.workFromHomeService=n,this.mailService=o,this.dateTimeService=i,this.displayedColumns=["userNumber","userFullName","activityName","startDate","endDate","dayNumber","halfDay","state","buttons"],this.dataSource=new T.by,this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.forbiddenRejectValidate=!0,this.listView=!1}ngOnInit(){this.forbiddenRejectValidate=this.currentUser.groupId!==h.Fl.SuperAdmin&&!this.currentUser.hasSubordinates,0!==this.workFromHomeRequests.length&&(this.listView=!0),this.selectedWorkHomeRequestId=0,this.dataSource=new T.by(this.workFromHomeRequests),this.subscription=this.searchFilterService.resultChanged.subscribe(()=>{this.dataSource=new T.by(this.searchFilterService.showingDataLastFilter)})}ngOnDestroy(){this.subscription.unsubscribe()}onSortData(e){this.workFromHomeService.sortWorkFromHomeRequest.next(e)}isMyWorkFromHomeRequestApprovedAndRejected(e){return e.userId===this.currentUser.userId&&(e.state===S.Jq.Approved||e.state===S.Jq.Rejected)}isApproved(e){return e.state===S.Jq.Approved}isRejected(e){return e.state===S.Jq.Rejected}isInProgress(e){return e.state===S.Jq.InProgress}isMyWorkFromHomeRequestInProgress(e){return e.userId===this.currentUser.userId&&e.state===S.Jq.InProgress}getworkFromHomeLabel(e){switch(e){case S.Jq.InProgress:return S.he.InProgress;case S.Jq.Approved:return S.he.Approved;case S.Jq.Rejected:return S.he.Rejected;default:return""}}openEditRequestDialog(e){this.displayAddRequestComponentdialogRef=this.dialog.open(M,{disableClose:!1,hasBackdrop:!0,width:"500px",height:"350px",data:{workFromHomeRequestId:e.workHomeRequestId,isEdit:!0}})}deleteWorkFromHomeRequest(e){_().fire({text:`Are you sure to delete this Work From Home ${this.getworkFromHomeLabel(e.state)} Request for ${e.userFullName} from ${this.dateTimeService.getShortFormat(e.startDate)} to ${this.dateTimeService.getShortFormat(e.endDate)} ?`,icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",showLoaderOnConfirm:!0,preConfirm:()=>{this.workFromHomeService.deleteWorkFromHomeRequest(e.workHomeRequestId,this.currentUser.userId).subscribe(t=>{0!==t?(this.notificationService.success("This Work From Home Request is deleted"),this.workFromHomeService.refreshWorkFomHomeRequest.next(),e.state===S.Jq.Approved&&this.mailService.workFromHomeRequestDeleted(e)):(this.workFromHomeService.refreshWorkFomHomeRequest.next(),this.notificationService.danger("Delete Work From Home Request failed"))},()=>{this.notificationService.danger("Delete Work From Home Request failed"),this.workFromHomeService.refreshWorkFomHomeRequest.next()})}})}rejectWorkFromHomeRequest(e){_().fire({text:`Are you sure to reject this Work From Home ${this.getworkFromHomeLabel(e.state)} Request for ${e.userFullName} from ${this.dateTimeService.getShortFormat(e.startDate)} to ${this.dateTimeService.getShortFormat(e.endDate)} ?`,icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, reject it!",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:()=>{this.workFromHomeService.updateStatusWorkFromHomeRequest(e,S.Jq.Rejected).subscribe(t=>{0!==t?(this.notificationService.success("This Work From Home Request is rejected"),this.workFromHomeService.refreshWorkFomHomeRequest.next(),this.mailService.workFromHomeRequestRejected(e)):(this.workFromHomeService.refreshWorkFomHomeRequest.next(),this.notificationService.danger("Reject Work From Home Request failed"),this.workFromHomeService.refreshWorkFomHomeRequest.next())},()=>{this.notificationService.danger("Reject Work From Home Request failed"),this.workFromHomeService.refreshWorkFomHomeRequest.next()})}})}approveWorkFromHomeRequest(e){this.workFromHomeService.updateStatusWorkFromHomeRequest(e,S.Jq.Approved).subscribe(t=>{0!==t?(this.notificationService.success("This Work From Home Request is approved"),this.workFromHomeService.refreshWorkFomHomeRequest.next(),this.mailService.workFromHomeRequestApproved(e)):(this.workFromHomeService.refreshWorkFomHomeRequest.next(),this.notificationService.danger("Approve Work From Home Request failed"),this.workFromHomeService.refreshWorkFomHomeRequest.next())},()=>{this.notificationService.danger("Approve Work From Home Request failed"),this.workFromHomeService.refreshWorkFomHomeRequest.next()})}}return e.\u0275fac=function(t){return new(t||e)(F.\u0275\u0275directiveInject(d.gq),F.\u0275\u0275directiveInject(a.uw),F.\u0275\u0275directiveInject(d.nJ),F.\u0275\u0275directiveInject(w.P),F.\u0275\u0275directiveInject(d.YT),F.\u0275\u0275directiveInject(d.Cv))},e.\u0275cmp=F.\u0275\u0275defineComponent({type:e,selectors:[["app-work-from-home-request-table"]],inputs:{workFromHomeRequests:"workFromHomeRequests"},decls:1,vars:1,consts:[["class","example-container mat-elevation-z8",4,"ngIf"],[1,"example-container","mat-elevation-z8"],["matSort","","matSortDirection","asc","matSortDisableClear","",3,"dataSource","matSortChange"],["table",""],["matColumnDef","userNumber",1,"table-hover","table-striped","table-styling"],["mat-sort-header","",4,"matHeaderCellDef"],[3,"matTooltip",4,"matCellDef"],["matColumnDef","userFullName"],[4,"matCellDef"],["matColumnDef","activityName"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","dayNumber"],["matColumnDef","halfDay"],["matColumnDef","state"],["matColumnDef","buttons"],[4,"matHeaderCellDef"],["class"," table-primary table-*",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[3,"matTooltip"],[1,"label",3,"ngClass"],["type","button","matTooltip","Approve",1,"btn","btn-mini","btn-primary","m-r-5","ripple","light","f-right",3,"disabled","click"],[1,"material-icons"],["type","button","matTooltip","Reject",1,"btn","btn-mini","btn-danger","m-r-5","ripple","light",3,"disabled","click"],["type","button","matTooltip","Edit",1,"btn","btn-mini","btn-primary","m-r-5","ripple","light",3,"disabled","click"],["type","button","matTooltip","Delete",1,"btn","btn-mini","btn-danger","ripple","light",3,"disabled","click"],[1,"table-primary","table-*"]],template:function(e,t){1&e&&F.\u0275\u0275template(0,de,32,4,"div",0),2&e&&F.\u0275\u0275property("ngIf",t.listView)},directives:[n.NgIf,T.BZ,z.YE,T.w1,T.fO,T.Dz,T.as,T.nj,T.ge,z.nU,T.ev,L.gM,n.NgClass,T.XQ,T.Gk],pipes:[n.DatePipe],styles:[".mat-table[_ngcontent-%COMP%]{overflow:auto;border-radius:4px;max-height:calc(100vh - 392px)}.mat-header-cell[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:600}.material-icons[_ngcontent-%COMP%]{font-size:15px}table[_ngcontent-%COMP%]{width:100%}.mat-column-Ressource[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 17%!important;width:17%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-clientName[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 20%!important;width:20%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-missionStartDate[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 9%!important;width:9%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-missionEndDate[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 9%!important;width:9%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-invoicing[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 9%!important;width:9%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-etatMission[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 11%!important;width:11%!important;overflow-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-buttons[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 12%!important;width:12%!important;overflow-wrap:break-word;justify-content:center;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}  .mat-sort-header-arrow{color:#fff}"]}),e})();var ue=r(34239);function he(e,t){if(1&e){const e=F.\u0275\u0275getCurrentView();F.\u0275\u0275elementStart(0,"mat-checkbox",38),F.\u0275\u0275listener("ngModelChange",function(t){return F.\u0275\u0275restoreView(e),F.\u0275\u0275nextContext().onlyMySubordinates=t}),F.\u0275\u0275text(1," Mines "),F.\u0275\u0275elementEnd()}if(2&e){const e=F.\u0275\u0275nextContext();F.\u0275\u0275property("ngModel",e.onlyMySubordinates)}}function pe(e,t){1&e&&(F.\u0275\u0275elementStart(0,"div"),F.\u0275\u0275elementStart(1,"h1"),F.\u0275\u0275text(2,"No Result Found"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd())}function ge(e,t){1&e&&(F.\u0275\u0275elementStart(0,"div",39),F.\u0275\u0275elementStart(1,"div",40),F.\u0275\u0275elementStart(2,"div",41),F.\u0275\u0275elementStart(3,"div",1),F.\u0275\u0275elementStart(4,"div",42),F.\u0275\u0275element(5,"mat-spinner"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd())}function fe(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"div",43),F.\u0275\u0275element(1,"app-work-from-home-request-table",44),F.\u0275\u0275pipe(2,"paginator"),F.\u0275\u0275elementEnd()),2&e){const e=F.\u0275\u0275nextContext();F.\u0275\u0275classProp("blurred",e.isLoading),F.\u0275\u0275advance(1),F.\u0275\u0275property("workFromHomeRequests",F.\u0275\u0275pipeBind3(2,3,e.workFromHomeRequests,e.searchFilterService.pageIndex,e.searchFilterService.pageSize))}}const Se=[{path:"",data:{title:"work-from-home",function:h.FI.WorkFromHome,status:!1},canActivate:[p.a1],children:[{canActivate:[p.a1],path:"work-from-home",component:(()=>{class e{constructor(e){this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.dropdownSettings={},this.dropdownSettingsStatus={},this.activitiesIdentifiers=[],this.selectedActivitiesIdentifiers=[],this.statusIdentifiers=[],this.selectedStatusesIdentifiers=[],this.workFromHomeRequests=[],this.isLoading=!1,this.destroyed=new g.xQ,this.forbiddenActivityResource=!0,this.onlyMySubordinates=!0,this.workFromHomeService=e.get(w.P),this.searchFilterService=e.get(d.nJ),this.sortService=e.get(d.Kx),this.dateTimeService=e.get(d.Cv),this.excelService=e.get(d.xB),this.router=e.get(u.F0),this.paginatorPipe=new f.Ry(this.searchFilterService),this.dialog=e.get(a.uw)}ngOnInit(){this.listView=!1,this.emptyResult=!1,this.searchFilterService.pageIndex=0,this.searchFilterService.pageSize=24,this.dropdownSettings={singleSelection:!1,idField:"id",textField:"description",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,enableCheckAll:!0,allowSearchFilter:!0,maxHeight:150,placeholder:"criteria",searchPlaceholderText:"Search..."},this.dropdownSettingsStatus={singleSelection:!1,idField:"id",textField:"description",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:1,enableCheckAll:!0,allowSearchFilter:!1,maxHeight:150,placeholder:"criteria",searchPlaceholderText:"Search..."},this.forbiddenActivityResource=this.currentUser.groupId!==h.Fl.SuperAdmin&&!this.currentUser.hasSubordinates,this.isSuperAdmin()&&!1===this.currentUser.hasSubordinates&&(this.onlyMySubordinates=!1),this.getActivities(),this.getStatus(),this.getPersistedFilter(),this.subscription=this.workFromHomeService.sortWorkFromHomeRequest.subscribe(e=>{this.onSortData(e)}),this.refreshSubscription=this.workFromHomeService.refreshWorkFomHomeRequest.subscribe(()=>{this.getPersistedFilter(),this.getWorkFromHomeRequests()})}ngOnDestroy(){this.subscription.unsubscribe()}getActivities(){this.workFromHomeService.getActivities().subscribe(e=>{null!=e&&(this.activitiesIdentifiers=e)})}getStatus(){this.workFromHomeService.getStatus().subscribe(e=>{null!=e&&(this.statusIdentifiers=e)})}filterWorkFromHomeRequest(){this.searchFilterService.pageIndex=0,this.persistFilter(),this.getWorkFromHomeRequests()}onResetAllFilters(){sessionStorage.removeItem("workFromHomeSearch");const e=new Date;this.fromDate=new Date(e.getFullYear(),e.getMonth()-1,1),this.toDate=new Date(e.getFullYear(),e.getMonth()+1,0),this.resourceName="",this.selectedStatusesIdentifiers=[],this.selectedActivitiesIdentifiers=[]}dateOnly(e){return this.dateTimeService.dateOnly(e)}onSortData(e){e.active&&""!==e.direction&&void 0!==this.workFromHomeRequests&&this.workFromHomeRequests.sort((t,r)=>{const n="asc"===e.direction;switch(e.active){case"userNumber":return this.sortService.compare(t.userNumber,r.userNumber,n,!1);case"userFullName":return this.sortService.compare(t.userFullName,r.userFullName,n,!1);case"activityName":return this.sortService.compare(t.activityName,r.activityName,n,!1);case"startDate":return this.sortService.compare(t.startDate,r.startDate,n,!1);case"endDate":return this.sortService.compare(t.endDate,r.endDate,n,!1);case"state":return this.sortService.compare(t.state,r.state,n,!1);case"halfDay":return this.sortService.compare(t.halfDay,r.halfDay,n,!1);default:return 0}}),this.paginatorPipe.transform(this.workFromHomeRequests,this.searchFilterService.pageIndex,this.searchFilterService.pageSize)}isSuperAdmin(){return this.currentUser.groupId===h.Fl.SuperAdmin}openEditRequestDialog(){this.displayAddRequestComponentdialogRef=this.dialog.open(M,{disableClose:!1,hasBackdrop:!0,width:"500px",height:"350px",data:{isEdit:!1}})}onClickingEnter(e){"Enter"===e.key&&this.filterWorkFromHomeRequest()}persistFilter(){const e=new S.nK;e.periodFrom=this.fromDate,e.periodTo=this.toDate,e.mines=this.onlyMySubordinates,e.resourceName=this.resourceName,e.selectedStatusesIdentifiers=this.selectedStatusesIdentifiers,e.selectedActivitiesIdentifiers=this.selectedActivitiesIdentifiers,sessionStorage.setItem("workFromHomeSearch",JSON.stringify(e))}getPersistedFilter(){const e=JSON.parse(sessionStorage.getItem("workFromHomeSearch"));if(null!==e)null!=e.periodFrom&&(this.fromDate=e.periodFrom),null!=e.periodTo&&(this.toDate=e.periodTo),this.onlyMySubordinates=e.mines,this.resourceName=e.resourceName,this.selectedStatusesIdentifiers=e.selectedStatusesIdentifiers,this.selectedActivitiesIdentifiers=e.selectedActivitiesIdentifiers;else{const e=new Date;this.fromDate=new Date(e.getFullYear(),e.getMonth()-1,1),this.toDate=new Date(e.getFullYear(),e.getMonth()+1,0)}}getWorkFromHomeRequests(){let e;this.isLoading=!0,e=this.isSuperAdmin()&&!1===this.onlyMySubordinates?214:this.currentUser.userId,this.selectedActivitiesIds=this.selectedActivitiesIdentifiers.map(e=>e.id).join(","),this.selectedStatusesIds=this.selectedStatusesIdentifiers.map(e=>e.id).join(","),this.workFromHomeService.getWorkFromHomeRequests(e,this.fromDate,this.toDate,this.resourceName,this.selectedActivitiesIds,this.selectedStatusesIds).subscribe(e=>{null!=e&&(this.workFromHomeRequests=e,this.lengthWorkFromHomeRequests=this.workFromHomeRequests.length,this.listView=0!==e.length),this.isLoading=!1})}exportToExcel(){if(void 0!==this.workFromHomeRequests&&0!==this.workFromHomeRequests.length){const e=[{header:"Matricule",key:"userNumber",width:10},{header:"Resource",key:"userFullName",width:30},{header:"Activity",key:"activityName",width:10},{header:"Start Date",key:"startDate",width:15},{header:"End Date",key:"endDate",width:15},{header:"Days",key:"dayNumber",width:15},{header:"Day Time",key:"halfDay",width:15},{header:"Status",key:"state",width:15}],t=[],r=[],n=[];n.push({cell:"A1",font:{bold:!0}},{cell:"B1",font:{bold:!0}},{cell:"C1",font:{bold:!0}},{cell:"D1",font:{bold:!0}},{cell:"E1",font:{bold:!0}},{cell:"F1",font:{bold:!0}},{cell:"G1",font:{bold:!0}},{cell:"H1",font:{bold:!0}}),this.workFromHomeRequests.forEach(e=>{const r=[];r.push(e.userNumber),r.push(e.userFullName),r.push(e.activityName),r.push(this.getShortFormatWithDay(e.startDate)),r.push(this.getShortFormatWithDay(e.endDate)),r.push(e.dayNumber),r.push(e.halfDay),r.push(this.getworkFromHomeLabel(e.state)),t.push(r)}),this.excelService.generateExcel(e,t,r,n,"Work_From_Home_Requests")}}getShortFormatWithDay(e){if(this.dateTimeService.isNullDate(e))return"";{const t=A(e).locale("ang");return t.format("ddd")+" "+t.format("L")}}getworkFromHomeLabel(e){switch(e){case S.Jq.InProgress:return S.he.InProgress;case S.Jq.Approved:return S.he.Approved;case S.Jq.Rejected:return S.he.Rejected;default:return""}}}return e.\u0275fac=function(t){return new(t||e)(F.\u0275\u0275directiveInject(F.Injector))},e.\u0275cmp=F.\u0275\u0275defineComponent({type:e,selectors:[["app-work-from-home"]],decls:63,vars:28,consts:[[1,"page-body"],[1,"row"],[1,"col-xl-12","col-lg-12","filter-bar"],[1,"card","m-b-10"],[1,"card-body","p-t-10"],[1,"col-xl-4","col-lg-12"],[1,"mat-subheader","col-sm-2"],[1,"date-field","col-sm-5"],["matInput","","placeholder","From",3,"matDatepicker","max","ngModel","keypress","ngModelChange","keydown"],["matSuffix","",3,"for"],["picker110",""],["matInput","","placeholder","To",3,"matDatepicker","min","ngModel","keypress","ngModelChange","keydown"],["picker220",""],[1,"mat-subheader","col-sm-2",3,"hidden"],[1,"search-input","col-sm-7",3,"hidden"],["placeholder","Search here...","matInput","","name","searchInput",3,"ngModel","ngModelChange","keydown"],[1,"col-sm-3"],[3,"ngModel","ngModelChange",4,"ngIf"],[1,"col-sm-10"],[1,"multi-search",2,"width","100%",3,"placeholder","data","ngModel","hidden","settings","ngModelChange"],[1,"col-xl-3","col-lg-12"],[1,"multi-search",2,"width","100%",3,"placeholder","settings","data","ngModel","ngModelChange"],[1,"col-xl-1","col-lg-12"],[1,"text-center"],[1,"btn","btn-md","btn-primary","ripple","m-t-5",3,"click"],[1,"btn","btn-md","btn-default","ripple","light","m-t-10",3,"click"],[1,"navbar","navbar-light","bg-faded","m-b-10","p-10"],[1,"col-sm-4"],["type","button",1,"btn","btn-sm","btn-primary","waves-light","m-r-10","ripple",2,"font-size","inherit",3,"click"],[1,"icofont","icofont-plus"],["type","button",1,"export","btn","btn-sm","btn-primary","m-r-10",2,"font-size","inherit",3,"click"],[1,"fa","fa-file-excel-o",2,"font-size","medium"],[1,"col-sm-8"],[3,"pageSize","pageIndex","length"],[4,"ngIf"],[1,"wrapper"],["class","overlay",4,"ngIf"],["class","loaded-content",3,"blurred",4,"ngIf"],[3,"ngModel","ngModelChange"],[1,"overlay"],[1,"spinner-wrapper"],[1,"container"],["id","loader"],[1,"loaded-content"],[3,"workFromHomeRequests"]],template:function(e,t){if(1&e&&(F.\u0275\u0275elementStart(0,"div",0),F.\u0275\u0275elementStart(1,"div",1),F.\u0275\u0275elementStart(2,"div",2),F.\u0275\u0275elementStart(3,"div",3),F.\u0275\u0275elementStart(4,"div",4),F.\u0275\u0275elementStart(5,"div",1),F.\u0275\u0275elementStart(6,"div",5),F.\u0275\u0275elementStart(7,"mat-list"),F.\u0275\u0275elementStart(8,"mat-list-item"),F.\u0275\u0275elementStart(9,"h3",6),F.\u0275\u0275text(10,"Period"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(11,"mat-form-field",7),F.\u0275\u0275elementStart(12,"input",8),F.\u0275\u0275listener("keypress",function(e){return t.dateOnly(e)})("ngModelChange",function(e){return t.fromDate=e})("keydown",function(e){return t.onClickingEnter(e)}),F.\u0275\u0275elementEnd(),F.\u0275\u0275element(13,"mat-datepicker-toggle",9),F.\u0275\u0275element(14,"mat-datepicker",null,10),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(16,"mat-form-field",7),F.\u0275\u0275elementStart(17,"input",11),F.\u0275\u0275listener("keypress",function(e){return t.dateOnly(e)})("ngModelChange",function(e){return t.toDate=e})("keydown",function(e){return t.onClickingEnter(e)}),F.\u0275\u0275elementEnd(),F.\u0275\u0275element(18,"mat-datepicker-toggle",9),F.\u0275\u0275element(19,"mat-datepicker",null,12),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(21,"mat-list-item"),F.\u0275\u0275elementStart(22,"h3",13),F.\u0275\u0275text(23,"Resource"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(24,"mat-form-field",14),F.\u0275\u0275elementStart(25,"input",15),F.\u0275\u0275listener("ngModelChange",function(e){return t.resourceName=e})("keydown",function(e){return t.onClickingEnter(e)}),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(26,"div",16),F.\u0275\u0275template(27,he,2,1,"mat-checkbox",17),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(28,"div",5),F.\u0275\u0275elementStart(29,"mat-list"),F.\u0275\u0275elementStart(30,"mat-list-item"),F.\u0275\u0275elementStart(31,"h3",13),F.\u0275\u0275text(32,"Activity"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(33,"div",18),F.\u0275\u0275elementStart(34,"ng-multiselect-dropdown",19),F.\u0275\u0275listener("ngModelChange",function(e){return t.selectedActivitiesIdentifiers=e}),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(35,"div",20),F.\u0275\u0275elementStart(36,"mat-list"),F.\u0275\u0275elementStart(37,"mat-list-item"),F.\u0275\u0275elementStart(38,"h3",6),F.\u0275\u0275text(39,"Status"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(40,"div",18),F.\u0275\u0275elementStart(41,"ng-multiselect-dropdown",21),F.\u0275\u0275listener("ngModelChange",function(e){return t.selectedStatusesIdentifiers=e}),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(42,"div",22),F.\u0275\u0275elementStart(43,"div",23),F.\u0275\u0275elementStart(44,"button",24),F.\u0275\u0275listener("click",function(){return t.filterWorkFromHomeRequest()}),F.\u0275\u0275text(45,"Search"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(46,"div",23),F.\u0275\u0275elementStart(47,"button",25),F.\u0275\u0275listener("click",function(){return t.onResetAllFilters()}),F.\u0275\u0275text(48,"Reset"),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(49,"nav",26),F.\u0275\u0275elementStart(50,"div",27),F.\u0275\u0275elementStart(51,"button",28),F.\u0275\u0275listener("click",function(){return t.openEditRequestDialog()}),F.\u0275\u0275element(52,"em",29),F.\u0275\u0275text(53," Add request "),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(54,"button",30),F.\u0275\u0275listener("click",function(){return t.exportToExcel()}),F.\u0275\u0275element(55,"em",31),F.\u0275\u0275text(56," Export "),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementStart(57,"div",32),F.\u0275\u0275element(58,"app-paginator",33),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275template(59,pe,3,0,"div",34),F.\u0275\u0275elementStart(60,"div",35),F.\u0275\u0275template(61,ge,6,0,"div",36),F.\u0275\u0275template(62,fe,3,7,"div",37),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd(),F.\u0275\u0275elementEnd()),2&e){const e=F.\u0275\u0275reference(15),r=F.\u0275\u0275reference(20);F.\u0275\u0275advance(12),F.\u0275\u0275property("matDatepicker",e)("max",t.toDate)("ngModel",t.fromDate),F.\u0275\u0275advance(1),F.\u0275\u0275property("for",e),F.\u0275\u0275advance(4),F.\u0275\u0275property("matDatepicker",r)("min",t.fromDate)("ngModel",t.toDate),F.\u0275\u0275advance(1),F.\u0275\u0275property("for",r),F.\u0275\u0275advance(4),F.\u0275\u0275property("hidden",t.forbiddenActivityResource),F.\u0275\u0275advance(2),F.\u0275\u0275property("hidden",t.forbiddenActivityResource),F.\u0275\u0275advance(1),F.\u0275\u0275property("ngModel",t.resourceName),F.\u0275\u0275advance(2),F.\u0275\u0275property("ngIf",t.isSuperAdmin()),F.\u0275\u0275advance(4),F.\u0275\u0275property("hidden",t.forbiddenActivityResource),F.\u0275\u0275advance(3),F.\u0275\u0275property("placeholder","Select...")("data",t.activitiesIdentifiers)("ngModel",t.selectedActivitiesIdentifiers)("hidden",t.forbiddenActivityResource)("settings",t.dropdownSettings),F.\u0275\u0275advance(7),F.\u0275\u0275property("placeholder","Select...")("settings",t.dropdownSettingsStatus)("data",t.statusIdentifiers)("ngModel",t.selectedStatusesIdentifiers),F.\u0275\u0275advance(17),F.\u0275\u0275property("pageSize",t.searchFilterService.pageSize)("pageIndex",t.searchFilterService.pageIndex)("length",t.lengthWorkFromHomeRequests),F.\u0275\u0275advance(1),F.\u0275\u0275property("ngIf",0===t.lengthWorkFromHomeRequests),F.\u0275\u0275advance(2),F.\u0275\u0275property("ngIf",t.isLoading),F.\u0275\u0275advance(1),F.\u0275\u0275property("ngIf",t.listView)}},directives:[W.i$,W.Tg,b.KE,C.Nt,D.hl,v.DefaultValueAccessor,v.NgControlStatus,v.NgModel,D.nW,b.R9,D.Mq,n.NgIf,l.OP,O.M2,P.J,H.oG,N.$g,ce],pipes:[ue.R],styles:[".filter-button{text-align:center;width:100%;margin:2%}.search-input{font-size:14px}.date-field{font-size:14px}.pointer{cursor:pointer}.reset-all-btn{cursor:pointer;font-size:20px}.reset-all-btn:hover{color:red}.arrow-icon{font-size:10px}.close-icon{float:right;font-size:22px}.multi-search{width:100%}.ngb-accordion .card .card-header{padding-left:5px}.ngb-accordion .card .card-header .a{font-size:15px}.mat-list .mat-subheader{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.mat-list-header{height:40px;padding:0 5px;font-size:15px;font-weight:bolder}.wrapper{width:100%;height:100%}.overlay{position:absolute;z-index:1002;background-color:#ffffff80;width:100%;height:100%}.spinner-wrapper{display:flex;justify-content:center;justify-items:center}#loader{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}.mat-checkbox-layout{margin-bottom:0}.mat-checkbox-layout .mat-checkbox-label{font-size:15px;font-weight:bolder;color:#0000008a}\n"],encapsulation:2}),e})(),data:{title:"Work From Home",function:h.FI.WorkFromHome,status:!0}}]}];let we=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=F.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=F.\u0275\u0275defineInjector({imports:[[u.Bz.forChild(Se)],u.Bz]}),e})();const ve={parse:{dateInput:"L"},display:{dateInput:"L",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let ke=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=F.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=F.\u0275\u0275defineInjector({providers:[w.P,d.nJ,n.DatePipe,{provide:i.Ad,useValue:"fr-FR"},{provide:i._A,useClass:s.t7,deps:[i.Ad]},{provide:i.sG,useValue:ve}],imports:[[n.CommonModule,o.m,v.FormsModule,v.ReactiveFormsModule,o.q,a.Is,l.ZQ.forRoot(),m.HttpClientModule,c.o,we]]}),e})()},55750:function(e,t,r){r.d(t,{Ry:function(){return n.R}});var n=r(34239);r(62758)},34239:function(e,t,r){r.d(t,{R:function(){return i}});var n=r(37716),o=r(10337);let i=(()=>{class e{constructor(e){this.searchFilterService=e}transform(e,t,r){if(this.startIndex=t*(r*this.searchFilterService.rowSpan)+1,this.endIndex=r*this.searchFilterService.rowSpan*(t+1),null!=e)return this.searchFilterService.showingDataLastFilter=e.slice(this.startIndex-1,this.endIndex),this.searchFilterService.resultChanged.next(),e.slice(this.startIndex-1,this.endIndex)}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(o.nJ,16))},e.\u0275pipe=n.\u0275\u0275definePipe({name:"paginator",type:e,pure:!0}),e})()},39924:function(e,t,r){r.d(t,{J:function(){return h}});var n=r(37716),o=r(99692),i=r(10337),a=r(98295),s=r(67441),l=r(3679),m=r(38583),d=r(72458);function c(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"mat-option",6),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;n.\u0275\u0275property("value",e),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e)}}const u=function(){return[6,12,24,60,120]};let h=(()=>{class e{constructor(e){this.searchFilterService=e,this.disabled=!1,this.hidePageSize=!1,this.showFirstLastButtons=!1,this.page=new n.EventEmitter}set pageIndexChanged(e){this.pageIndex=e,this.updateGoto()}set lengthChanged(e){this.length=e,this.updateGoto()}set pageSizeChanged(e){this.pageSize=e,this.updateGoto()}ngOnInit(){this.updateGoto()}onPaginateChange(e){this.searchFilterService.pageIndex=e.pageIndex,this.searchFilterService.pageSize=e.pageSize,this.length=e.length,this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.updateGoto(),this.emitPageEvent(e)}updateGoto(){this.goTo=(this.pageIndex||0)+1,this.pageNumbers=[];const e=Math.ceil(this.length/this.pageSize);for(let t=1;t<=e;t++)this.pageNumbers.push(t)}goToChange(){this.paginator.pageIndex=this.goTo-1,this.searchFilterService.pageIndex=this.paginator.pageIndex,this.searchFilterService.pageSize=this.paginator.pageSize,this.emitPageEvent({length:this.paginator.length,pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize})}emitPageEvent(e){this.page.next(e)}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(i.nJ))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-paginator"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(o.NW,7),2&e){let e;n.\u0275\u0275queryRefresh(e=n.\u0275\u0275loadQuery())&&(t.paginator=e.first)}},inputs:{length:"length",pageIndex:"pageIndex",pageSize:"pageSize",disabled:"disabled",hidePageSize:"hidePageSize",pageSizeOptions:"pageSizeOptions",showFirstLastButtons:"showFirstLastButtons",pageIndexChanged:["pageIndex","pageIndexChanged"],lengthChanged:["length","lengthChanged"],pageSizeChanged:["pageSize","pageSizeChanged"]},outputs:{page:"page"},decls:8,vars:8,consts:[[1,"d-flex"],[3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"mat-paginator",1),n.\u0275\u0275listener("page",function(e){return t.onPaginateChange(e)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"div",2),n.\u0275\u0275elementStart(3,"div",3),n.\u0275\u0275text(4,"Go To: "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"mat-form-field"),n.\u0275\u0275elementStart(6,"mat-select",4),n.\u0275\u0275listener("ngModelChange",function(e){return t.goTo=e})("selectionChange",function(){return t.goToChange()}),n.\u0275\u0275template(7,c,2,2,"mat-option",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("length",t.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",n.\u0275\u0275pureFunction0(7,u))("showFirstLastButtons",!0),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngModel",t.goTo),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.pageNumbers))},directives:[o.NW,a.KE,s.gD,l.NgControlStatus,l.NgModel,m.NgForOf,d.ey],styles:['.mat-paginator[_ngcontent-%COMP%]{width:100%;float:right}.d-flex[_ngcontent-%COMP%]{display:flex}  .mat-select-trigger{font-size:12px}  .mat-option{font-size:12px}.go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}.go-to-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:56px;margin:6px 4px 0;font-size:12px;font-family:Roboto,"Helvetica Neue",sans-serif}.go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{width:36px;margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,"Helvetica Neue",sans-serif}']}),e})()}}]);