{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component, ViewChild } from '@angular/core';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { AddEmpComponent } from '../add-emp/add-emp.component';\nimport { ModifyComponent } from '../modify/modify.component';\nimport { ConfirmationDialogComponent } from '../confirmation-dialog/confirmation-dialog.component'; // Import ConfirmationDialogComponent\n\nlet TablePaginatorComponent = class TablePaginatorComponent {\n  constructor(dataService, authService, _dialog, _snackBar) {\n    this.dataService = dataService;\n    this.authService = authService;\n    this._dialog = _dialog;\n    this._snackBar = _snackBar;\n    this.displayedColumns = ['date_Debut', 'date_Fin', 'statut', 'days', 'type', 'actions'];\n    this.dataSource = new MatTableDataSource([]);\n  }\n\n  ngOnInit() {\n    this.loadUserData();\n  }\n\n  loadUserData() {\n    const token = this.authService.getToken();\n\n    if (token) {\n      const parsedToken = this.parseToken(token);\n      const userId = parsedToken === null || parsedToken === void 0 ? void 0 : parsedToken.nameid;\n\n      if (userId) {\n        this.dataService.getConges(userId).subscribe(congesData => {\n          this.dataService.getTypeConges().subscribe(typeCongesData => {\n            const processedData = congesData.map(item => {\n              const typeConge = typeCongesData.find(tc => tc.type_Conge_Id === item.type_Conge_Id);\n              return Object.assign(Object.assign({\n                conge_Id: item.conge_Id\n              }, item), {\n                days: this.calculateDays(new Date(item.date_Debut), new Date(item.date_Fin)),\n                type: typeConge ? typeConge.type : 'Unknown'\n              });\n            });\n            this.dataSource = new MatTableDataSource(processedData);\n            this.dataSource.paginator = this.paginator;\n          }, error => {\n            console.error('Error fetching type conge data:', error);\n          });\n        }, error => {\n          console.error('Error fetching conges data:', error);\n        });\n      } else {\n        console.error('userId is undefined.');\n      }\n    } else {\n      console.error('Token is not available.');\n    }\n  }\n\n  parseToken(token) {\n    try {\n      const payload = atob(token.split('.')[1]);\n      return JSON.parse(payload);\n    } catch (error) {\n      console.error('Error parsing token:', error);\n      return null;\n    }\n  }\n\n  calculateDays(startDate, endDate) {\n    const oneDay = 24 * 60 * 60 * 1000;\n    return Math.round((endDate.getTime() - startDate.getTime()) / oneDay);\n  }\n\n  openaddemp(event) {\n    event.preventDefault();\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n\n    const dialogRef = this._dialog.open(AddEmpComponent, dialogConfig);\n\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.loadUserData(); // Refresh data after adding\n      }\n    });\n  }\n\n  openconfirm(event) {\n    event.preventDefault();\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n\n    const dialogRef = this._dialog.open(ConfirmationDialogComponent, dialogConfig);\n\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.loadUserData(); // Refresh data after adding\n      }\n    });\n  }\n\n  onEditClick(element) {\n    if (element.statut === 'Pending') {\n      this.openmodify(element);\n    } else {\n      this.showErrorMessage('The leave request is already confirmed');\n    }\n  }\n\n  onDeleteClick(element) {\n    if (element.statut === 'Pending') {\n      this.confirmDelete(element);\n    } else {\n      this.showErrorMessage('The leave request is already confirmed');\n    }\n  }\n\n  openmodify(element) {\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.autoFocus = true;\n    dialogConfig.data = {\n      conge_Id: element.conge_Id,\n      date_Debut: element.date_Debut,\n      date_Fin: element.date_Fin\n    };\n\n    const dialogRef = this._dialog.open(ModifyComponent, dialogConfig);\n\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        const updatedDates = {\n          date_Debut: result.dateDebut,\n          date_Fin: result.dateFin\n        };\n        this.dataService.updateCongeDates(result.conge_Id, updatedDates).subscribe(() => {\n          this.loadUserData(); // Refresh data after modifying\n        }, error => {\n          console.error('Error updating conge dates:', error);\n        });\n      }\n    });\n  }\n\n  confirmDelete(element) {\n    const dialogRef = this._dialog.open(ConfirmationDialogComponent, {\n      width: '250px',\n      data: {\n        message: 'Are you sure you want to delete this leave request?'\n      }\n    });\n\n    dialogRef.afterClosed().subscribe(result => {\n      if (result === true) {\n        this.delete(element);\n      }\n    });\n  }\n\n  delete(element) {\n    this.dataService.deleteConge(element.conge_Id).subscribe(() => {\n      this.loadUserData(); // Refresh data after deleting\n    }, error => {\n      console.error('Error deleting conge:', error);\n    });\n  }\n\n  showErrorMessage(message) {\n    this._snackBar.open(message, 'Close', {\n      duration: 3000\n    });\n  }\n\n};\n\n__decorate([ViewChild(MatPaginator)], TablePaginatorComponent.prototype, \"paginator\", void 0);\n\nTablePaginatorComponent = __decorate([Component({\n  selector: 'app-table-paginator',\n  templateUrl: './table-paginator.component.html',\n  styleUrls: ['./table-paginator.component.scss']\n})], TablePaginatorComponent);\nexport { TablePaginatorComponent };","map":{"version":3,"sources":["C:/Users/pprod/Desktop/satge PFE/satge PFE/TelnetTeamClient/src/app/table-paginator/table-paginator.component.ts"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","Component","ViewChild","MatPaginator","MatTableDataSource","MatDialogConfig","AddEmpComponent","ModifyComponent","ConfirmationDialogComponent","TablePaginatorComponent","constructor","dataService","authService","_dialog","_snackBar","displayedColumns","dataSource","ngOnInit","loadUserData","token","getToken","parsedToken","parseToken","userId","nameid","getConges","subscribe","congesData","getTypeConges","typeCongesData","processedData","map","item","typeConge","find","tc","type_Conge_Id","assign","conge_Id","days","calculateDays","Date","date_Debut","date_Fin","type","paginator","error","console","payload","atob","split","JSON","parse","startDate","endDate","oneDay","Math","round","getTime","openaddemp","event","preventDefault","dialogConfig","autoFocus","dialogRef","open","afterClosed","result","openconfirm","onEditClick","element","statut","openmodify","showErrorMessage","onDeleteClick","confirmDelete","data","updatedDates","dateDebut","dateFin","updateCongeDates","width","message","delete","deleteConge","duration","prototype","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { Component, ViewChild } from '@angular/core';\r\nimport { MatPaginator } from '@angular/material/paginator';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { MatDialogConfig } from '@angular/material/dialog';\r\nimport { AddEmpComponent } from '../add-emp/add-emp.component';\r\nimport { ModifyComponent } from '../modify/modify.component';\r\nimport { ConfirmationDialogComponent } from '../confirmation-dialog/confirmation-dialog.component'; // Import ConfirmationDialogComponent\r\nlet TablePaginatorComponent = class TablePaginatorComponent {\r\n    constructor(dataService, authService, _dialog, _snackBar) {\r\n        this.dataService = dataService;\r\n        this.authService = authService;\r\n        this._dialog = _dialog;\r\n        this._snackBar = _snackBar;\r\n        this.displayedColumns = ['date_Debut', 'date_Fin', 'statut', 'days', 'type', 'actions'];\r\n        this.dataSource = new MatTableDataSource([]);\r\n    }\r\n    ngOnInit() {\r\n        this.loadUserData();\r\n    }\r\n    loadUserData() {\r\n        const token = this.authService.getToken();\r\n        if (token) {\r\n            const parsedToken = this.parseToken(token);\r\n            const userId = parsedToken === null || parsedToken === void 0 ? void 0 : parsedToken.nameid;\r\n            if (userId) {\r\n                this.dataService.getConges(userId).subscribe((congesData) => {\r\n                    this.dataService.getTypeConges().subscribe((typeCongesData) => {\r\n                        const processedData = congesData.map(item => {\r\n                            const typeConge = typeCongesData.find(tc => tc.type_Conge_Id === item.type_Conge_Id);\r\n                            return Object.assign(Object.assign({ conge_Id: item.conge_Id }, item), { days: this.calculateDays(new Date(item.date_Debut), new Date(item.date_Fin)), type: typeConge ? typeConge.type : 'Unknown' });\r\n                        });\r\n                        this.dataSource = new MatTableDataSource(processedData);\r\n                        this.dataSource.paginator = this.paginator;\r\n                    }, (error) => {\r\n                        console.error('Error fetching type conge data:', error);\r\n                    });\r\n                }, (error) => {\r\n                    console.error('Error fetching conges data:', error);\r\n                });\r\n            }\r\n            else {\r\n                console.error('userId is undefined.');\r\n            }\r\n        }\r\n        else {\r\n            console.error('Token is not available.');\r\n        }\r\n    }\r\n    parseToken(token) {\r\n        try {\r\n            const payload = atob(token.split('.')[1]);\r\n            return JSON.parse(payload);\r\n        }\r\n        catch (error) {\r\n            console.error('Error parsing token:', error);\r\n            return null;\r\n        }\r\n    }\r\n    calculateDays(startDate, endDate) {\r\n        const oneDay = 24 * 60 * 60 * 1000;\r\n        return Math.round((endDate.getTime() - startDate.getTime()) / oneDay);\r\n    }\r\n    openaddemp(event) {\r\n        event.preventDefault();\r\n        const dialogConfig = new MatDialogConfig();\r\n        dialogConfig.autoFocus = true;\r\n        const dialogRef = this._dialog.open(AddEmpComponent, dialogConfig);\r\n        dialogRef.afterClosed().subscribe(result => {\r\n            if (result) {\r\n                this.loadUserData(); // Refresh data after adding\r\n            }\r\n        });\r\n    }\r\n    openconfirm(event) {\r\n        event.preventDefault();\r\n        const dialogConfig = new MatDialogConfig();\r\n        dialogConfig.autoFocus = true;\r\n        const dialogRef = this._dialog.open(ConfirmationDialogComponent, dialogConfig);\r\n        dialogRef.afterClosed().subscribe(result => {\r\n            if (result) {\r\n                this.loadUserData(); // Refresh data after adding\r\n            }\r\n        });\r\n    }\r\n    onEditClick(element) {\r\n        if (element.statut === 'Pending') {\r\n            this.openmodify(element);\r\n        }\r\n        else {\r\n            this.showErrorMessage('The leave request is already confirmed');\r\n        }\r\n    }\r\n    onDeleteClick(element) {\r\n        if (element.statut === 'Pending') {\r\n            this.confirmDelete(element);\r\n        }\r\n        else {\r\n            this.showErrorMessage('The leave request is already confirmed');\r\n        }\r\n    }\r\n    openmodify(element) {\r\n        const dialogConfig = new MatDialogConfig();\r\n        dialogConfig.autoFocus = true;\r\n        dialogConfig.data = {\r\n            conge_Id: element.conge_Id,\r\n            date_Debut: element.date_Debut,\r\n            date_Fin: element.date_Fin\r\n        };\r\n        const dialogRef = this._dialog.open(ModifyComponent, dialogConfig);\r\n        dialogRef.afterClosed().subscribe(result => {\r\n            if (result) {\r\n                const updatedDates = {\r\n                    date_Debut: result.dateDebut,\r\n                    date_Fin: result.dateFin\r\n                };\r\n                this.dataService.updateCongeDates(result.conge_Id, updatedDates).subscribe(() => {\r\n                    this.loadUserData(); // Refresh data after modifying\r\n                }, (error) => {\r\n                    console.error('Error updating conge dates:', error);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    confirmDelete(element) {\r\n        const dialogRef = this._dialog.open(ConfirmationDialogComponent, {\r\n            width: '250px',\r\n            data: { message: 'Are you sure you want to delete this leave request?' }\r\n        });\r\n        dialogRef.afterClosed().subscribe(result => {\r\n            if (result === true) {\r\n                this.delete(element);\r\n            }\r\n        });\r\n    }\r\n    delete(element) {\r\n        this.dataService.deleteConge(element.conge_Id).subscribe(() => {\r\n            this.loadUserData(); // Refresh data after deleting\r\n        }, (error) => {\r\n            console.error('Error deleting conge:', error);\r\n        });\r\n    }\r\n    showErrorMessage(message) {\r\n        this._snackBar.open(message, 'Close', {\r\n            duration: 3000,\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    ViewChild(MatPaginator)\r\n], TablePaginatorComponent.prototype, \"paginator\", void 0);\r\nTablePaginatorComponent = __decorate([\r\n    Component({\r\n        selector: 'app-table-paginator',\r\n        templateUrl: './table-paginator.component.html',\r\n        styleUrls: ['./table-paginator.component.scss']\r\n    })\r\n], TablePaginatorComponent);\r\nexport { TablePaginatorComponent };\r\n"]},"metadata":{},"sourceType":"module"}